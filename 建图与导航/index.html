
<!doctype html>
<html lang="zh" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../ROS%E8%BF%9B%E9%98%B6/">
      
      
      <link rel="icon" href="../assets/logo.png">
      <meta name="generator" content="mkdocs-1.5.2, mkdocs-material-9.1.21">
    
    
      
        <title>å»ºå›¾ä¸å¯¼èˆª - VK-Robot-Learning-ROS</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.eebd395e.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.ecc896b0.min.css">
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="light-blue">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#6-slam" class="md-skip">
          è·³è½¬è‡³
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="é¡µçœ‰">
    <a href=".." title="VK-Robot-Learning-ROS" class="md-header__button md-logo" aria-label="VK-Robot-Learning-ROS" data-md-component="logo">
      
  <img src="../assets/logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            VK-Robot-Learning-ROS
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              å»ºå›¾ä¸å¯¼èˆª
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
          
            
            
            
            <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="light-blue"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
            
              <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"/></svg>
              </label>
            
          
            
            
            
            <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="blue" data-md-color-accent="light-blue"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
            
              <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>
              </label>
            
          
        </form>
      
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="æœç´¢" placeholder="æœç´¢" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="æŸ¥æ‰¾">
        
        <button type="reset" class="md-search__icon md-icon" title="æ¸…ç©ºå½“å‰å†…å®¹" aria-label="æ¸…ç©ºå½“å‰å†…å®¹" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            æ­£åœ¨åˆå§‹åŒ–æœç´¢å¼•æ“
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
                
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="å¯¼èˆªæ " data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="VK-Robot-Learning-ROS" class="md-nav__button md-logo" aria-label="VK-Robot-Learning-ROS" data-md-component="logo">
      
  <img src="../assets/logo.png" alt="logo">

    </a>
    VK-Robot-Learning-ROS
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
    
  
  
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1" checked>
      
      
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_1" id="__nav_1_label" tabindex="0">
          æ™ºèƒ½æœºå™¨äººæŠ€æœ¯åº”ç”¨
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="true">
        <label class="md-nav__title" for="__nav_1">
          <span class="md-nav__icon md-icon"></span>
          æ™ºèƒ½æœºå™¨äººæŠ€æœ¯åº”ç”¨
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ROS%E5%9F%BA%E7%A1%80/" class="md-nav__link">
        ROSåŸºç¡€
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ROS%E8%BF%9B%E9%98%B6/" class="md-nav__link">
        ROSè¿›é˜¶
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          å»ºå›¾ä¸å¯¼èˆª
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        å»ºå›¾ä¸å¯¼èˆª
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="ç›®å½•">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      ç›®å½•
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    å‡†å¤‡å·¥ä½œ
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#61-slam" class="md-nav__link">
    6.1 SLAMåŒ…çš„ä½¿ç”¨
  </a>
  
    <nav class="md-nav" aria-label="6.1 SLAMåŒ…çš„ä½¿ç”¨">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#611-gmapping" class="md-nav__link">
    6.1.1 gmapping
  </a>
  
    <nav class="md-nav" aria-label="6.1.1 gmapping">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#6111-gmapping" class="md-nav__link">
    6.1.1.1 gmappingåŠŸèƒ½åŒ…
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#6112-gmapping" class="md-nav__link">
    6.1.1.2 gmappingèŠ‚ç‚¹çš„é…ç½®
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#612-map_server" class="md-nav__link">
    6.1.2 map_server
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#62" class="md-nav__link">
    6.2  å¯¼èˆª
  </a>
  
    <nav class="md-nav" aria-label="6.2 å¯¼èˆª">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#621" class="md-nav__link">
    6.2.1 è‡ªèº«å®šä½
  </a>
  
    <nav class="md-nav" aria-label="6.2.1 è‡ªèº«å®šä½">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#6211-amcl" class="md-nav__link">
    6.2.1.1 amclåŠŸèƒ½åŒ…
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#6212-amcl" class="md-nav__link">
    6.2.1.2 amclèŠ‚ç‚¹çš„é…ç½®
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#622" class="md-nav__link">
    6.2.2 è·¯å¾„è§„åˆ’
  </a>
  
    <nav class="md-nav" aria-label="6.2.2 è·¯å¾„è§„åˆ’">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#6221-move_base" class="md-nav__link">
    6.2.2.1 move_baseåŠŸèƒ½åŒ…
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#6222" class="md-nav__link">
    6.2.2.2 ä»£ä»·åœ°å›¾
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#623" class="md-nav__link">
    6.2.3 å®æˆ˜ï¼šçœŸå®æœºå™¨äººå¯¼èˆªé…ç½®ä¸è°ƒè¯•
  </a>
  
    <nav class="md-nav" aria-label="6.2.3 å®æˆ˜ï¼šçœŸå®æœºå™¨äººå¯¼èˆªé…ç½®ä¸è°ƒè¯•">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    åŠ¨æ€è°ƒå‚
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#slam" class="md-nav__link">
    ç»ƒä¹ â€”â€”å¯¼èˆªä¸SLAMå»ºå›¾
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
                
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" hidden>
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="ç›®å½•">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      ç›®å½•
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    å‡†å¤‡å·¥ä½œ
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#61-slam" class="md-nav__link">
    6.1 SLAMåŒ…çš„ä½¿ç”¨
  </a>
  
    <nav class="md-nav" aria-label="6.1 SLAMåŒ…çš„ä½¿ç”¨">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#611-gmapping" class="md-nav__link">
    6.1.1 gmapping
  </a>
  
    <nav class="md-nav" aria-label="6.1.1 gmapping">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#6111-gmapping" class="md-nav__link">
    6.1.1.1 gmappingåŠŸèƒ½åŒ…
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#6112-gmapping" class="md-nav__link">
    6.1.1.2 gmappingèŠ‚ç‚¹çš„é…ç½®
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#612-map_server" class="md-nav__link">
    6.1.2 map_server
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#62" class="md-nav__link">
    6.2  å¯¼èˆª
  </a>
  
    <nav class="md-nav" aria-label="6.2 å¯¼èˆª">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#621" class="md-nav__link">
    6.2.1 è‡ªèº«å®šä½
  </a>
  
    <nav class="md-nav" aria-label="6.2.1 è‡ªèº«å®šä½">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#6211-amcl" class="md-nav__link">
    6.2.1.1 amclåŠŸèƒ½åŒ…
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#6212-amcl" class="md-nav__link">
    6.2.1.2 amclèŠ‚ç‚¹çš„é…ç½®
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#622" class="md-nav__link">
    6.2.2 è·¯å¾„è§„åˆ’
  </a>
  
    <nav class="md-nav" aria-label="6.2.2 è·¯å¾„è§„åˆ’">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#6221-move_base" class="md-nav__link">
    6.2.2.1 move_baseåŠŸèƒ½åŒ…
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#6222" class="md-nav__link">
    6.2.2.2 ä»£ä»·åœ°å›¾
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#623" class="md-nav__link">
    6.2.3 å®æˆ˜ï¼šçœŸå®æœºå™¨äººå¯¼èˆªé…ç½®ä¸è°ƒè¯•
  </a>
  
    <nav class="md-nav" aria-label="6.2.3 å®æˆ˜ï¼šçœŸå®æœºå™¨äººå¯¼èˆªé…ç½®ä¸è°ƒè¯•">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    åŠ¨æ€è°ƒå‚
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#slam" class="md-nav__link">
    ç»ƒä¹ â€”â€”å¯¼èˆªä¸SLAMå»ºå›¾
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="6-slam">6 ç§»åŠ¨æœºå™¨äººSLAMä¸å¯¼èˆª</h1>
<p>ç°å®ç”Ÿæ´»ä¸­ï¼Œå½“æˆ‘ä»¬éœ€è¦åˆ°æŸç›®çš„åœ°æ—¶ï¼Œå¯èƒ½ä¼šéœ€è¦ä¸€å¼ å…¨å±€åœ°å›¾ï¼Œé¦–å…ˆé€šè¿‡åœ°å›¾åˆ¤æ–­è‡ªå·±å½“å‰çš„ä½ç½®ï¼Œç›®çš„åœ°çš„ä½ç½®ï¼ŒåŒæ—¶æ ¹æ®åœ°å›¾æ¥è§„åˆ’ä¸€æ¡å¤§è‡´çš„è·¯çº¿ã€‚åœ¨å‰å¾€ç›®çš„åœ°çš„é€”ä¸­ï¼Œè¿˜éœ€è¦åˆ¤æ–­å‘¨å›´çš„ç¯å¢ƒï¼Œä¾‹å¦‚å½“é‡åˆ°ä¿®è·¯ç­‰æƒ…å†µæ—¶ï¼Œå¯èƒ½éœ€è¦ä¸´æ—¶å˜æ›´è¡Œè¿›è·¯çº¿......</p>
<p>å¯¹æœºå™¨äººçš„å¯¼èˆªè€Œè¨€ï¼Œä¹Ÿæ˜¯å¦‚æ­¤ï¼Œæ ¹æ®ä¸Šè¿°çš„æƒ…å½¢æˆ‘ä»¬å¯ä»¥æç‚¼å‡ºå¯¼èˆªéœ€è¦çš„å‡ ä¸ªæŠ€æœ¯ç‚¹ï¼š</p>
<ol>
<li>å…¨å±€åœ°å›¾</li>
<li>è‡ªèº«å®šä½</li>
<li>è·¯å¾„è§„åˆ’</li>
<li>è¿åŠ¨æ§åˆ¶</li>
<li>ç¯å¢ƒæ„ŸçŸ¥</li>
</ol>
<p>å…¶ä¸­ï¼Œå…¨å±€åœ°å›¾çš„ä½¿ç”¨æ¶‰åŠåœ°å›¾çš„ç»˜åˆ¶ï¼Œç›®å‰ä¸»æµçš„åœ°å›¾ç»˜åˆ¶æŠ€æœ¯ä¸ºSLAMï¼ˆSimultaneous Localization And Mappingï¼‰â€”â€”å³æ—¶å®šä½ä¸åœ°å›¾æ„å»ºï¼Œåœ¨ROSä¸­ï¼Œè¾ƒä¸ºå¸¸ç”¨çš„SLAMç®—æ³•æœ‰ï¼šgmappingã€cartographerã€hector_slamã€rgbdslamã€ORB_SLAMç­‰ï¼Œæœ¬æ•™ç¨‹é€‰ç”¨gmappingç®—æ³•æ¥å®ç°SLAMã€‚</p>
<h2 id="_1">å‡†å¤‡å·¥ä½œ</h2>
<p>å®‰è£…ç›¸å…³çš„ROSåŠŸèƒ½åŒ…ï¼š</p>
<ul>
<li>gmappingï¼š<code>sudo apt install ros-melodic-gmapping</code></li>
<li>map_serverï¼š<code>sudo apt install ros-melodic-map-server</code></li>
<li>navigationï¼š<code>sudo apt install ros-melodic-navigation</code></li>
</ul>
<p>æ–°å»ºåŠŸèƒ½åŒ…å¹¶å¯¼å…¥ä¾èµ–ï¼š</p>
<p><code>catkin_create_pkg learning_nav gmapping map_server amcl move_base vkbot_description ydlidar vkbot_bringup vkbot_teleop</code></p>
<h2 id="61-slam">6.1 SLAMåŒ…çš„ä½¿ç”¨</h2>
<blockquote>
<p><img alt="ğŸ“¹" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@14.1.2/assets/svg/1f4f9.svg" title=":video_camera:" />ï¼š<a href="https://www.bilibili.com/video/BV1FW4y1M7PV/?spm_id_from=333.788&amp;vd_source=1f2428248eaabe29886dcd01d3b9816a">ä»€ä¹ˆæ˜¯SLAM</a></p>
</blockquote>
<h3 id="611-gmapping">6.1.1 gmapping</h3>
<p>gmappingæ˜¯è¾ƒä¸ºå¸¸ç”¨ä¸”æˆç†Ÿçš„SLAMç®—æ³•ä¹‹ä¸€ï¼Œå®ƒå¯ä»¥æ ¹æ®æœºå™¨äººçš„é‡Œç¨‹è®¡æ•°æ®ä¸æ¿€å…‰é›·è¾¾æ•°æ®æ¥ç»˜åˆ¶äºŒç»´æ …æ ¼åœ°å›¾ï¼Œå› æ­¤gmappingå¯¹ç¡¬ä»¶æœ‰ä¸€å®šçš„è¦æ±‚ï¼š</p>
<ul>
<li>æœºå™¨äººå¯ä»¥å‘å¸ƒé‡Œç¨‹è®¡æ¶ˆæ¯</li>
<li>æœºå™¨äººå¯ä»¥å‘å¸ƒé›·è¾¾æ¶ˆæ¯</li>
</ul>
<h4 id="6111-gmapping">6.1.1.1 gmappingåŠŸèƒ½åŒ…</h4>
<p>gmappingåŠŸèƒ½åŒ…ä¸­çš„æ ¸å¿ƒèŠ‚ç‚¹æ˜¯ï¼š<code>slam_gmapping</code>ã€‚å…³äºè¯¥èŠ‚ç‚¹æˆ‘ä»¬éœ€è¦é‡ç‚¹å…³æ³¨å®ƒè®¢é˜…çš„è¯é¢˜ã€å‘å¸ƒçš„è¯é¢˜ã€æä¾›çš„æœåŠ¡ä»¥åŠç›¸å…³å‚æ•°</p>
<p><img alt="image-20230525113213671" src="../assets/image-20230525113213671.png" /></p>
<p><strong>è®¢é˜…çš„è¯é¢˜</strong></p>
<ul>
<li>scan (sensor_msgs/LaserScan)ï¼šSLAMæ‰€éœ€çš„é›·è¾¾æ•°æ®</li>
<li>tf (tf2_msgs/TFMessage)ï¼šç”¨äºåº•ç›˜ã€é‡Œç¨‹è®¡å’Œé›·è¾¾ä¹‹é—´çš„åæ ‡å˜æ¢æ¶ˆæ¯</li>
</ul>
<p><strong>å‘å¸ƒçš„è¯é¢˜</strong></p>
<ul>
<li>map (nav_msgs/OccupancyGrid)ï¼šåœ°å›¾æ …æ ¼æ•°æ®ï¼Œç”¨äºåœ¨rvizä¸­æ˜¾ç¤ºåœ°å›¾</li>
<li>map_metadata (nav_msgs/MapMetaData)ï¼šåœ°å›¾å…ƒæ•°æ®ï¼ŒåŒ…å«äº†åœ°å›¾çš„å®½åº¦ã€é«˜åº¦ã€åˆ†è¾¨ç‡ç­‰</li>
<li>~entrop (std_msgs/Float64)ï¼šæœºå™¨äººå§¿æ€åˆ†å¸ƒç†µä¼°è®¡ï¼Œå€¼è¶Šå¤§åˆ™ä¸ç¡®å®šæ€§è¶Šå¤§</li>
</ul>
<p><strong>æä¾›çš„æœåŠ¡</strong></p>
<ul>
<li>dynamic_map (nav_msgs/GetMap)ï¼šç”¨äºè·å–åœ°å›¾æ•°æ®</li>
</ul>
<p><strong>å‚æ•°</strong></p>
<ul>
<li>~base_frame (string, default: "base_link")ï¼šæœºå™¨äººåŸºåæ ‡ç³»</li>
<li>~map_frame (string, default: "map")ï¼šåœ°å›¾åæ ‡ç³»</li>
<li>~odom_frame (string, default: "odom")ï¼šé‡Œç¨‹è®¡åæ ‡ç³»</li>
<li>~map_update_interval (float, default: 5.0)ï¼šåœ°å›¾æ›´æ–°é¢‘ç‡</li>
<li>~maxUrange (float, default: 80.0)ï¼šæ¿€å…‰é›·è¾¾æ•°æ®æœ€å¤§å¯ç”¨èŒƒå›´ï¼Œè¶…å‡ºæ­¤èŒƒå›´çš„æ¿€å…‰æ•°æ®å°†è¢«æˆªæ–­</li>
<li>~maxRange(float)ï¼šä¼ æ„Ÿå™¨çš„æœ€å¤§èŒƒå›´ï¼Œä¸€èˆ¬è®¾ç½®ä¸º maxUrange &lt; ä¼ æ„Ÿå™¨å®é™…æ¢æµ‹çš„æœ€å¤§èŒƒå›´ &lt;= maxRange</li>
</ul>
<p>......</p>
<blockquote>
<p>å‚æ•°è¾ƒå¤šï¼Œæ­¤å¤„ä»…ç½—åˆ—å‡ºå¸¸ç”¨å‚æ•°ï¼Œå…¶ä½™å‚æ•°å¯å‚è€ƒå®˜ç½‘æ–‡æ¡£ï¼š<a href="http://wiki.ros.org/gmapping">gmapping - ROS Wiki</a></p>
</blockquote>
<p><strong>è¿è¡ŒèŠ‚ç‚¹å¿…é¡»çš„åæ ‡å˜æ¢</strong></p>
<ul>
<li>æ¿€å…‰é›·è¾¾åæ ‡ç³»(scans) ---&gt; åŸºåæ ‡ç³»(base_link)ï¼šä¸€èˆ¬ç”±robot_state_publisherå‘å¸ƒï¼Œæˆ– ä½¿ç”¨ tf å·¥å…· static transform_publisher å‘å¸ƒ</li>
<li>åŸºåæ ‡ç³»(base_link) ---&gt; é‡Œç¨‹è®¡åæ ‡ç³»(odom)ï¼šä¸€èˆ¬ç”±é‡Œç¨‹è®¡èŠ‚ç‚¹å‘å¸ƒ</li>
</ul>
<p><strong>èŠ‚ç‚¹å‘å¸ƒçš„ TF å˜æ¢</strong></p>
<ul>
<li>åœ°å›¾åæ ‡ç³»(map) ---&gt; é‡Œç¨‹è®¡åæ ‡ç³»(odom)</li>
</ul>
<h4 id="6112-gmapping">6.1.1.2 gmappingèŠ‚ç‚¹çš„é…ç½®</h4>
<p>ä½¿ç”¨ launch æ–‡ä»¶å¯åŠ¨èŠ‚ç‚¹å¹¶é…ç½®å‚æ•°</p>
<p><code>slam.launch</code></p>
<div class="language-xml highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="nt">&lt;launch&gt;</span>
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="w">    </span><span class="nt">&lt;node</span><span class="w"> </span><span class="na">pkg=</span><span class="s">&quot;gmapping&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;slam_gmapping&quot;</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;slam_gmapping&quot;</span><span class="w"> </span><span class="na">output=</span><span class="s">&quot;screen&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="w">        </span><span class="cm">&lt;!--é›·è¾¾è¯é¢˜--&gt;</span>
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="w">        </span><span class="nt">&lt;remap</span><span class="w"> </span><span class="na">from=</span><span class="s">&quot;scan&quot;</span><span class="w"> </span><span class="na">to=</span><span class="s">&quot;scan&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-0-5"><a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="w">        </span><span class="cm">&lt;!--åº•ç›˜åæ ‡ç³»--&gt;</span>
</span><span id="__span-0-6"><a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="w">        </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;base_frame&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;base_footprint&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-0-7"><a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="w">        </span><span class="cm">&lt;!--é‡Œç¨‹è®¡åæ ‡ç³»--&gt;</span>
</span><span id="__span-0-8"><a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a><span class="w">        </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;odom_frame&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;odom&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-0-9"><a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a><span class="w">        </span><span class="cm">&lt;!--åœ°å›¾æ›´æ–°é¢‘ç‡ï¼Œå¯ä»¥æ ¹æ®ç¡¬ä»¶æ¡ä»¶é€‚å½“è°ƒæ•´ï¼Œå•ä½ï¼šs--&gt;</span>
</span><span id="__span-0-10"><a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a><span class="w">        </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;map_update_interval&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;1.0&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-0-11"><a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a>
</span><span id="__span-0-12"><a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a><span class="w">        </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;maxUrange&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;8.0&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-0-13"><a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a><span class="w">        </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;maxRange&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;10.0&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-0-14"><a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a><span class="w">        </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;sigma&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;0.05&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-0-15"><a id="__codelineno-0-15" name="__codelineno-0-15" href="#__codelineno-0-15"></a><span class="w">        </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;kernelSize&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;3&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-0-16"><a id="__codelineno-0-16" name="__codelineno-0-16" href="#__codelineno-0-16"></a><span class="w">        </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;lstep&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;0.05&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-0-17"><a id="__codelineno-0-17" name="__codelineno-0-17" href="#__codelineno-0-17"></a><span class="w">        </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;astep&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;0.05&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-0-18"><a id="__codelineno-0-18" name="__codelineno-0-18" href="#__codelineno-0-18"></a><span class="w">        </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;iterations&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;5&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-0-19"><a id="__codelineno-0-19" name="__codelineno-0-19" href="#__codelineno-0-19"></a><span class="w">        </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;lsigma&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;0.075&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-0-20"><a id="__codelineno-0-20" name="__codelineno-0-20" href="#__codelineno-0-20"></a><span class="w">        </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;ogain&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;3.0&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-0-21"><a id="__codelineno-0-21" name="__codelineno-0-21" href="#__codelineno-0-21"></a><span class="w">        </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;lskip&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;0&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-0-22"><a id="__codelineno-0-22" name="__codelineno-0-22" href="#__codelineno-0-22"></a><span class="w">        </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;minimumScore&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;30&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-0-23"><a id="__codelineno-0-23" name="__codelineno-0-23" href="#__codelineno-0-23"></a><span class="w">        </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;srr&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;0.01&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-0-24"><a id="__codelineno-0-24" name="__codelineno-0-24" href="#__codelineno-0-24"></a><span class="w">        </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;srt&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;0.02&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-0-25"><a id="__codelineno-0-25" name="__codelineno-0-25" href="#__codelineno-0-25"></a><span class="w">        </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;str&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;0.01&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-0-26"><a id="__codelineno-0-26" name="__codelineno-0-26" href="#__codelineno-0-26"></a><span class="w">        </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;stt&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;0.02&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-0-27"><a id="__codelineno-0-27" name="__codelineno-0-27" href="#__codelineno-0-27"></a><span class="w">        </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;linearUpdate&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;0.05&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-0-28"><a id="__codelineno-0-28" name="__codelineno-0-28" href="#__codelineno-0-28"></a><span class="w">        </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;angularUpdate&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;0.436&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-0-29"><a id="__codelineno-0-29" name="__codelineno-0-29" href="#__codelineno-0-29"></a><span class="w">        </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;temporalUpdate&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;-1.0&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-0-30"><a id="__codelineno-0-30" name="__codelineno-0-30" href="#__codelineno-0-30"></a><span class="w">        </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;resampleThreshold&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;0.5&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-0-31"><a id="__codelineno-0-31" name="__codelineno-0-31" href="#__codelineno-0-31"></a><span class="w">        </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;particles&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;50&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-0-32"><a id="__codelineno-0-32" name="__codelineno-0-32" href="#__codelineno-0-32"></a><span class="w">        </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;xmin&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;-1.0&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-0-33"><a id="__codelineno-0-33" name="__codelineno-0-33" href="#__codelineno-0-33"></a><span class="w">        </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;ymin&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;-1.0&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-0-34"><a id="__codelineno-0-34" name="__codelineno-0-34" href="#__codelineno-0-34"></a><span class="w">        </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;xmax&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;1.0&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-0-35"><a id="__codelineno-0-35" name="__codelineno-0-35" href="#__codelineno-0-35"></a><span class="w">        </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;ymax&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;1.0&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-0-36"><a id="__codelineno-0-36" name="__codelineno-0-36" href="#__codelineno-0-36"></a><span class="w">        </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;delta&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;0.05&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-0-37"><a id="__codelineno-0-37" name="__codelineno-0-37" href="#__codelineno-0-37"></a><span class="w">        </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;llsamplerange&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;0.01&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-0-38"><a id="__codelineno-0-38" name="__codelineno-0-38" href="#__codelineno-0-38"></a><span class="w">        </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;llsamplestep&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;0.01&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-0-39"><a id="__codelineno-0-39" name="__codelineno-0-39" href="#__codelineno-0-39"></a><span class="w">        </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;lasamplerange&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;0.005&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-0-40"><a id="__codelineno-0-40" name="__codelineno-0-40" href="#__codelineno-0-40"></a><span class="w">        </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;lasamplestep&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;0.005&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-0-41"><a id="__codelineno-0-41" name="__codelineno-0-41" href="#__codelineno-0-41"></a><span class="w">    </span><span class="nt">&lt;/node&gt;</span>
</span><span id="__span-0-42"><a id="__codelineno-0-42" name="__codelineno-0-42" href="#__codelineno-0-42"></a>
</span><span id="__span-0-43"><a id="__codelineno-0-43" name="__codelineno-0-43" href="#__codelineno-0-43"></a><span class="nt">&lt;/launch&gt;</span>
</span></code></pre></div>
<p><code>start_slam.launch</code></p>
<div class="language-xml highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="nt">&lt;launch&gt;</span>
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="w">    </span><span class="nt">&lt;include</span><span class="w"> </span><span class="na">file=</span><span class="s">&quot;$(find åŠŸèƒ½åŒ…)/launch/slam.launch&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a>
</span><span id="__span-1-4"><a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a><span class="w">    </span><span class="nt">&lt;include</span><span class="w"> </span><span class="na">file=</span><span class="s">&quot;$(find vkbot_bringup)/launch/minimal.launch&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-1-5"><a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a><span class="w">    </span><span class="nt">&lt;include</span><span class="w"> </span><span class="na">file=</span><span class="s">&quot;$(find ydlidar)/launch/ydlidar1_up.launch&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-1-6"><a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a><span class="w">    </span><span class="nt">&lt;include</span><span class="w"> </span><span class="na">file=</span><span class="s">&quot;$(find vkbot_navigation)/launch/velocity_smoother.launch.xml&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-1-7"><a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a><span class="w">    </span><span class="nt">&lt;include</span><span class="w"> </span><span class="na">file=</span><span class="s">&quot;$(find vkbot_navigation)/launch/safety_controller.launch.xml&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-1-8"><a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a><span class="w">    </span><span class="nt">&lt;include</span><span class="w"> </span><span class="na">file=</span><span class="s">&quot;$(find vkbot_teleop)/launch/key_board_teleop.launch&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-1-9"><a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a>
</span><span id="__span-1-10"><a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a><span class="w">    </span><span class="nt">&lt;node</span><span class="w"> </span><span class="na">pkg=</span><span class="s">&quot;joint_state_publisher&quot;</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;joint_state_publisher&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;joint_state_publisher&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-1-11"><a id="__codelineno-1-11" name="__codelineno-1-11" href="#__codelineno-1-11"></a><span class="w">    </span><span class="nt">&lt;node</span><span class="w"> </span><span class="na">pkg=</span><span class="s">&quot;robot_state_publisher&quot;</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;robot_state_publisher&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;robot_state_publisher&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-1-12"><a id="__codelineno-1-12" name="__codelineno-1-12" href="#__codelineno-1-12"></a>
</span><span id="__span-1-13"><a id="__codelineno-1-13" name="__codelineno-1-13" href="#__codelineno-1-13"></a><span class="w">    </span><span class="cm">&lt;!-- å¯ä»¥ä¿å­˜ rviz é…ç½®å¹¶åæœŸç›´æ¥ä½¿ç”¨--&gt;</span>
</span><span id="__span-1-14"><a id="__codelineno-1-14" name="__codelineno-1-14" href="#__codelineno-1-14"></a><span class="w">    </span><span class="nt">&lt;node</span><span class="w"> </span><span class="na">pkg=</span><span class="s">&quot;rviz&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;rviz&quot;</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;rviz&quot;</span><span class="w"> </span><span class="na">args=</span><span class="s">&quot;-d $(find åŠŸèƒ½åŒ…)/config/slam.rviz&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-1-15"><a id="__codelineno-1-15" name="__codelineno-1-15" href="#__codelineno-1-15"></a>
</span><span id="__span-1-16"><a id="__codelineno-1-16" name="__codelineno-1-16" href="#__codelineno-1-16"></a><span class="nt">&lt;/launch&gt;</span>
</span></code></pre></div>
<p><strong>rvizè®¾ç½®</strong></p>
<figure>
<p><img alt="image-20230627180449403" src="../assets/image-20230627180449403.png" width="700" /></p>
</figure>
<ul>
<li>è®¾ç½®Fixed Frameä¸ºmap</li>
<li>æ·»åŠ æ’ä»¶å¹¶è®¢é˜…è¯é¢˜ï¼ŒåŒ…æ‹¬ï¼šRobotModelã€Mapã€LaserScan</li>
</ul>
<p>ç°åœ¨ä½ å¯ä»¥è¯•ç€ç”¨é”®ç›˜æ§åˆ¶è®¾å¤‡ç§»åŠ¨ï¼Œä»è€Œç»˜åˆ¶åœ°å›¾å•¦ï¼<img alt="âœ¨" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@14.1.2/assets/svg/2728.svg" title=":sparkles:" /></p>
<h3 id="612-map_server">6.1.2 map_server</h3>
<p><code>slam_gmapping</code>èŠ‚ç‚¹å‘å¸ƒäº†åœ°å›¾æ•°æ®ï¼Œä½†æ˜¯æ•°æ®ä»…ä»…ä¿å­˜åœ¨å†…å­˜ä¸­ï¼Œå½“èŠ‚ç‚¹å…³é—­æ—¶åœ°å›¾æ•°æ®ä¹Ÿä¼šè¢«ä¸€å¹¶é‡Šæ”¾ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦å°†åœ°å›¾æ•°æ®ä¿å­˜åˆ°ç£ç›˜ä¸­ä¾¿äºåç»­çš„ä½¿ç”¨ï¼Œmap_server åŠŸèƒ½åŒ…æä¾›äº†ä¸¤ä¸ªèŠ‚ç‚¹ï¼š<code>map_saver</code> å’Œ <code>map_server</code>ï¼Œå‰è€…ç”¨äºåœ°å›¾ä¿å­˜ï¼Œåè€…ç”¨äºåŠ è½½åœ°å›¾æ•°æ®åˆ° ROS å‚æ•°æœåŠ¡å™¨ä¸­</p>
<ul>
<li><code>map_saver</code>ï¼šæ­¤èŠ‚ç‚¹è®¢é˜…äº† map è¯é¢˜ï¼Œç”¨äºç”Ÿæˆåœ°å›¾æ–‡ä»¶</li>
</ul>
<p>ä½¿ç”¨launchæ–‡ä»¶å¯åŠ¨æ­¤èŠ‚ç‚¹å¹¶é…ç½®å‚æ•°</p>
<p><code>map_saver.launch</code></p>
<div class="language-xml highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="nt">&lt;launch&gt;</span>
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="w">    </span><span class="nt">&lt;arg</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;filename&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;$(find åŠŸèƒ½åŒ…)/ä¿å­˜è·¯å¾„/my_map&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-2-3"><a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a><span class="w">    </span><span class="nt">&lt;node</span><span class="w"> </span><span class="na">pkg=</span><span class="s">&quot;map_server&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;map_saver&quot;</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;map_saver&quot;</span><span class="w"> </span><span class="na">args=</span><span class="s">&quot;-f $(arg filename)&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-2-4"><a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a><span class="nt">&lt;/launch&gt;</span>
</span></code></pre></div>
<blockquote>
<p><code>slam_gmapping</code>èŠ‚ç‚¹åœ°å›¾ç»˜åˆ¶å®Œæˆåï¼Œè¿è¡Œæ­¤ launch æ–‡ä»¶å³å¯ä¿å­˜åœ°å›¾ï¼ŒæŒ‡å®šè·¯å¾„ä¸‹ä¼šç”Ÿæˆä¸¤ä¸ªæ–‡ä»¶ï¼š<code>my_map.pgm</code> åŠ <code>my_map.yaml</code>ï¼Œ<code>.pgm</code>æ˜¯ä¸€å¼ åœ°å›¾çš„å›¾ç‰‡ï¼Œå¯ç”¨å›¾ç‰‡æŸ¥çœ‹ç¨‹åºæ‰“å¼€ï¼Œ<code>.yaml</code>ä¸­ä¿å­˜çš„æ˜¯åœ°å›¾çš„æè¿°ä¿¡æ¯ï¼ŒåŒ…æ‹¬åœ°å›¾å®½åº¦ã€é«˜åº¦ã€åˆ†è¾¨ç‡ç­‰</p>
</blockquote>
<ul>
<li><code>map_server</code>ï¼šæ­¤èŠ‚ç‚¹ä¼šå‘å¸ƒåœ°å›¾æ•°æ®</li>
</ul>
<p>ä½¿ç”¨launchæ–‡ä»¶å¯åŠ¨æ­¤èŠ‚ç‚¹ï¼ŒåŠ è½½åœ°å›¾æè¿°æ–‡ä»¶ï¼ˆyamlï¼‰å¹¶å‘å¸ƒ</p>
<p><code>map_server.launch</code></p>
<div class="language-xml highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="nt">&lt;launch&gt;</span>
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a><span class="w">    </span><span class="cm">&lt;!-- åœ°å›¾æè¿°æ–‡ä»¶(yaml) --&gt;</span>
</span><span id="__span-3-3"><a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a><span class="w">    </span><span class="nt">&lt;arg</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;map&quot;</span><span class="w"> </span><span class="na">default=</span><span class="s">&quot;my_map.yaml&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-3-4"><a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a><span class="w">    </span><span class="cm">&lt;!-- è¿è¡Œmap_serverèŠ‚ç‚¹å¹¶åŠ è½½åœ°å›¾ --&gt;</span>
</span><span id="__span-3-5"><a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a><span class="w">    </span><span class="nt">&lt;node</span><span class="w"> </span><span class="na">pkg=</span><span class="s">&quot;map_server&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;map_server&quot;</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;map_server&quot;</span><span class="w"> </span><span class="na">args=</span><span class="s">&quot;$(find åŠŸèƒ½åŒ…)/ä¿å­˜è·¯å¾„/$(arg map)&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-3-6"><a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a><span class="w">    </span><span class="nt">&lt;node</span><span class="w"> </span><span class="na">pkg=</span><span class="s">&quot;rviz&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;rviz&quot;</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;rviz&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-3-7"><a id="__codelineno-3-7" name="__codelineno-3-7" href="#__codelineno-3-7"></a><span class="nt">&lt;/launch&gt;</span>
</span></code></pre></div>
<blockquote>
<p>åœ¨ rviz ä¸­åŠ è½½ map ç»„ä»¶ï¼Œè®¢é˜… /map è¯é¢˜å³å¯æ˜¾ç¤ºäºŒç»´æ …æ ¼åœ°å›¾</p>
</blockquote>
<figure>
<p><img alt="image-20230628135341149" src="../assets/image-20230628135341149.png" width="700" /></p>
</figure>
<h2 id="62">6.2  å¯¼èˆª</h2>
<figure>
<p><img alt="nav_comic.png" src="http://wiki.ros.org/navigation?action=AttachFile&amp;do=get&amp;target=nav_comic.png" /></p>
</figure>
<p>æœºå™¨äººæ˜¯å¦‚ä½•å®ç°å¯¼èˆªçš„å‘¢ï¼ŸROSå®˜æ–¹æä¾›äº†ä¸€å¼ å¯¼èˆªåŠŸèƒ½åŒ…é›†çš„å›¾ç¤ºï¼Œä¸‹å›¾ä¸­å›Šæ‹¬äº†ROSå¯¼èˆªæ¶‰åŠçš„å…³é”®æŠ€æœ¯</p>
<figure>
<p><img alt="" src="../assets/%E5%9B%BE%E7%89%874.png" width="700" /></p>
</figure>
<p>ä¸Šå›¾å„éƒ¨åˆ†å«ä¹‰å¦‚ä¸‹ï¼š</p>
<ul>
<li>ç™½è‰²éƒ¨åˆ†ï¼šå¿…é¡»ä¸”å·²å®ç°çš„ç»„ä»¶</li>
<li>ç°è‰²éƒ¨åˆ†ï¼šå¯é€‰ä¸”å·²å®ç°çš„ç»„ä»¶</li>
<li>è“è‰²éƒ¨åˆ†ï¼šå¿…é¡»ä½†æœªå®ç°çš„ç»„ä»¶</li>
</ul>
<p>æ ¹æ®å›¾ç¤ºå¯æ€»ç»“å‡ºå¯¼èˆªæ¶‰åŠçš„å…³é”®æŠ€æœ¯æœ‰ä»¥ä¸‹äº”ç‚¹ï¼š</p>
<ol>
<li>å…¨å±€åœ°å›¾</li>
<li>è‡ªèº«å®šä½</li>
<li>è·¯å¾„è§„åˆ’</li>
<li>è¿åŠ¨æ§åˆ¶</li>
<li>ç¯å¢ƒæ„ŸçŸ¥</li>
</ol>
<p>å…¶ä¸­ï¼Œå…¨å±€åœ°å›¾ä¸€èˆ¬é€šè¿‡<code>map_server</code>èŠ‚ç‚¹å‘å¸ƒSLAMæ„å»ºå¥½çš„åœ°å›¾ä¿¡æ¯ï¼Œåœ¨6.1ä¸­å·²è¯¦ç»†ä»‹ç»ï¼Œè¿åŠ¨æ§åˆ¶ä¸ç¯å¢ƒæ„ŸçŸ¥ä¸ºæœºå™¨äººå¹³å°å·²å®ç°åŠŸèƒ½ã€‚å› æ­¤æ¥ä¸‹æ¥é‡ç‚¹ä»‹ç»<strong>è‡ªèº«å®šä½</strong>ä¸<strong>è·¯å¾„è§„åˆ’</strong>ã€‚</p>
<h3 id="621">6.2.1 è‡ªèº«å®šä½</h3>
<p>åœ¨å¯¼èˆªå¼€å§‹ä¸æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œæœºå™¨äººéƒ½éœ€è¦ç¡®å®šå½“å‰è‡ªèº«çš„ä½ç½®ï¼Œä¾‹å¦‚SLAMå°±å¯ä»¥å®ç°è‡ªèº«å®šä½ï¼Œé™¤æ­¤ä¹‹å¤–ï¼ŒROSå®˜æ–¹è¿˜æä¾›äº†ä¸€ä¸ªç”¨äºå®šä½çš„åŠŸèƒ½åŒ…ï¼šamcl</p>
<p>AMCLï¼ˆAdaptive Monte Carlo Localizationï¼‰è‡ªé€‚åº”è’™å¡”å¡ç½—å®šä½ï¼Œæ˜¯ç”¨äº2Dç§»åŠ¨æœºå™¨äººçš„æ¦‚ç‡å®šä½ç³»ç»Ÿï¼Œamclå·²ç»é›†æˆåˆ°äº†navigationåŒ…ä¸­ã€‚</p>
<h4 id="6211-amcl">6.2.1.1 amclåŠŸèƒ½åŒ…</h4>
<p>amclåŠŸèƒ½åŒ…ä¸­çš„æ ¸å¿ƒèŠ‚ç‚¹æ˜¯ï¼š<code>amcl</code>ã€‚ä¸ºäº†æ–¹ä¾¿è°ƒç”¨ï¼Œéœ€è¦å…ˆäº†è§£è¯¥èŠ‚ç‚¹è®¢é˜…ä¸å‘å¸ƒçš„è¯é¢˜ã€æä¾›çš„æœåŠ¡åŠç›¸å…³å‚æ•°ã€‚</p>
<p><img alt="image-20230626174234644" src="../assets/image-20230626174234644.png" /></p>
<p><strong>è®¢é˜…çš„è¯é¢˜</strong></p>
<ul>
<li>initialpose(geometry_msgs/PoseWithCovarianceStamped)ï¼šç”¨æ¥åˆå§‹åŒ–ç²’å­æ»¤æ³¢å™¨çš„å‡å€¼å’Œåæ–¹å·®</li>
<li>scan(sensor_msgs/LaserScan)ï¼šæ¿€å…‰é›·è¾¾æ•°æ®</li>
<li>tf(tf2_msgs/TFMessage)ï¼šåæ ‡å˜æ¢æ¶ˆæ¯</li>
<li>map(nav_msgs/OccupancyGrid)ï¼šè®¾ç½®<code>use_map_topic</code>å‚æ•°åï¼ŒAMCLå°†è®¢é˜…æ­¤è¯é¢˜ä»¥æ£€ç´¢ç”¨äºå®šä½çš„åœ°å›¾</li>
</ul>
<p><strong>å‘å¸ƒçš„è¯é¢˜</strong></p>
<ul>
<li>amcl_pose(geometry_msgs/PoseWithCovarianceStamped)ï¼šæœºå™¨äººåœ¨åœ°å›¾ä¸­çš„ä½å§¿ä¼°è®¡</li>
<li>particlecloud(geometry_msgs/PoseArray)ï¼šä½å§¿ä¼°è®¡é›†åˆï¼Œrvizä¸­å¯ä»¥ä½¿ç”¨PoseArrayæ’ä»¶å›¾å½¢åŒ–æ˜¾ç¤º</li>
<li>tf(tf2_msgs/TFMessage)ï¼šodomåˆ°mapçš„åæ ‡å˜æ¢æ¶ˆæ¯</li>
</ul>
<p><strong>æä¾›çš„æœåŠ¡</strong></p>
<ul>
<li>global_localization(std_srvs/Empty)ï¼šåˆå§‹åŒ–å…¨å±€å®šä½</li>
<li>request_nomotion_update(std_srvs/Empty)ï¼šæ‰‹åŠ¨æ‰§è¡Œæ›´æ–°å’Œå‘å¸ƒæ›´æ–°ç²’å­çš„æœåŠ¡</li>
<li>set_map(nav_msgs/SetMap)ï¼šæ‰‹åŠ¨è®¾ç½®æ–°åœ°å›¾å’Œå§¿æ€çš„æœåŠ¡</li>
</ul>
<p><strong>è°ƒç”¨çš„æœåŠ¡</strong></p>
<ul>
<li>static_map(nav_msgs/GetMap)ï¼šè°ƒç”¨æ­¤æœåŠ¡è·å–åœ°å›¾æ•°æ®</li>
</ul>
<p><strong>å‚æ•°</strong></p>
<ul>
<li>~base_frame_id(string, default:"base_link")ï¼šæœºå™¨äººåŸºåæ ‡ç³»</li>
<li>
<p>~odom_frame_id(string, default:"odom")ï¼šé‡Œç¨‹è®¡åæ ‡ç³»</p>
</li>
<li>
<p>~odom_model_type(string, default:"diff")ï¼šé‡Œç¨‹è®¡æ¨¡å‹ï¼Œ"diff"-&gt;å·®é€Ÿã€"omni"-&gt;å…¨å‘è½®ã€"diff-corrected"ã€"omni-corrected"</p>
</li>
<li>~global_frame_id(string, default:"map")ï¼šåœ°å›¾åæ ‡ç³»</li>
</ul>
<blockquote>
<p>ä»¥ä¸Šä¸ºå¸¸ç”¨å‚æ•°ï¼Œå…¶ä½™å‚æ•°å‚è€ƒï¼š<a href="http://wiki.ros.org/amcl">amcl - ROS Wiki</a></p>
</blockquote>
<p><strong>åæ ‡å˜æ¢</strong></p>
<p>é‡Œç¨‹è®¡æœ¬èº«ä¹Ÿå¯ä»¥ååŠ©æœºå™¨äººè¿›è¡Œå®šä½ï¼Œä¸è¿‡é‡Œç¨‹è®¡å­˜åœ¨ç´¯è®¡è¯¯å·®ï¼Œä¼šå‡ºç°å®šä½é”™è¯¯çš„æƒ…å†µï¼Œamclå¯ä»¥é€šè¿‡ä¼°ç®—æœºå™¨äººåœ¨åœ°å›¾åæ ‡ç³»ä¸‹çš„å§¿æ€ï¼Œå†ç»“åˆé‡Œç¨‹è®¡å®šä½ä»è€Œæé«˜å®šä½çš„ç²¾ç¡®åº¦ã€‚</p>
<figure>
<p><img alt="amcl_localization.png" src="http://wiki.ros.org/amcl?action=AttachFile&amp;do=get&amp;target=amcl_localization.png" width="700" /></p>
</figure>
<h4 id="6212-amcl">6.2.1.2 amclèŠ‚ç‚¹çš„é…ç½®</h4>
<p>ä½¿ç”¨ launch æ–‡ä»¶å¯åŠ¨èŠ‚ç‚¹å¹¶é…ç½®å‚æ•°</p>
<p><code>amcl.launch</code></p>
<div class="language-xml highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="nt">&lt;launch&gt;</span>
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a><span class="w">    </span><span class="nt">&lt;node</span><span class="w"> </span><span class="na">pkg=</span><span class="s">&quot;amcl&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;amcl&quot;</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;amcl&quot;</span><span class="w"> </span><span class="na">output=</span><span class="s">&quot;screen&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-4-3"><a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a><span class="w">        </span><span class="cm">&lt;!-- é‡Œç¨‹è®¡æ¨¡å¼ä¸ºå·®åˆ† --&gt;</span>
</span><span id="__span-4-4"><a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a><span class="w">        </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;odom_model_type&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;diff&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-4-5"><a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a><span class="w">        </span><span class="cm">&lt;!-- é‡Œç¨‹è®¡åæ ‡ç³» --&gt;</span>
</span><span id="__span-4-6"><a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a><span class="w">        </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;odom_frame_id&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;odom&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-4-7"><a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a><span class="w">        </span><span class="cm">&lt;!-- æœºå™¨äººåŸºåæ ‡ç³» --&gt;</span>
</span><span id="__span-4-8"><a id="__codelineno-4-8" name="__codelineno-4-8" href="#__codelineno-4-8"></a><span class="w">        </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;base_frame_id&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;base_footprint&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-4-9"><a id="__codelineno-4-9" name="__codelineno-4-9" href="#__codelineno-4-9"></a><span class="w">        </span><span class="cm">&lt;!-- åœ°å›¾åæ ‡ç³» --&gt;</span>
</span><span id="__span-4-10"><a id="__codelineno-4-10" name="__codelineno-4-10" href="#__codelineno-4-10"></a><span class="w">        </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;global_frame_id&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;map&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-4-11"><a id="__codelineno-4-11" name="__codelineno-4-11" href="#__codelineno-4-11"></a>
</span><span id="__span-4-12"><a id="__codelineno-4-12" name="__codelineno-4-12" href="#__codelineno-4-12"></a><span class="w">        </span><span class="cm">&lt;!-- Publish scans from best pose at a max of 10 Hz --&gt;</span>
</span><span id="__span-4-13"><a id="__codelineno-4-13" name="__codelineno-4-13" href="#__codelineno-4-13"></a><span class="w">        </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;odom_alpha5&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;0.1&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-4-14"><a id="__codelineno-4-14" name="__codelineno-4-14" href="#__codelineno-4-14"></a><span class="w">        </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;gui_publish_rate&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;10.0&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-4-15"><a id="__codelineno-4-15" name="__codelineno-4-15" href="#__codelineno-4-15"></a><span class="w">        </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;laser_max_beams&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;60&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-4-16"><a id="__codelineno-4-16" name="__codelineno-4-16" href="#__codelineno-4-16"></a><span class="w">        </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;laser_max_range&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;12.0&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-4-17"><a id="__codelineno-4-17" name="__codelineno-4-17" href="#__codelineno-4-17"></a><span class="w">        </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;min_particles&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;500&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-4-18"><a id="__codelineno-4-18" name="__codelineno-4-18" href="#__codelineno-4-18"></a><span class="w">        </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;max_particles&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;2000&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-4-19"><a id="__codelineno-4-19" name="__codelineno-4-19" href="#__codelineno-4-19"></a><span class="w">        </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;kld_err&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;0.05&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-4-20"><a id="__codelineno-4-20" name="__codelineno-4-20" href="#__codelineno-4-20"></a><span class="w">        </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;kld_z&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;0.99&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-4-21"><a id="__codelineno-4-21" name="__codelineno-4-21" href="#__codelineno-4-21"></a><span class="w">        </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;odom_alpha1&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;0.2&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-4-22"><a id="__codelineno-4-22" name="__codelineno-4-22" href="#__codelineno-4-22"></a><span class="w">        </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;odom_alpha2&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;0.2&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-4-23"><a id="__codelineno-4-23" name="__codelineno-4-23" href="#__codelineno-4-23"></a><span class="w">        </span><span class="cm">&lt;!-- translation std dev, m --&gt;</span>
</span><span id="__span-4-24"><a id="__codelineno-4-24" name="__codelineno-4-24" href="#__codelineno-4-24"></a><span class="w">        </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;odom_alpha3&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;0.2&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-4-25"><a id="__codelineno-4-25" name="__codelineno-4-25" href="#__codelineno-4-25"></a><span class="w">        </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;odom_alpha4&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;0.2&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-4-26"><a id="__codelineno-4-26" name="__codelineno-4-26" href="#__codelineno-4-26"></a><span class="w">        </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;laser_z_hit&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;0.5&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-4-27"><a id="__codelineno-4-27" name="__codelineno-4-27" href="#__codelineno-4-27"></a><span class="w">        </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;laser_z_short&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;0.05&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-4-28"><a id="__codelineno-4-28" name="__codelineno-4-28" href="#__codelineno-4-28"></a><span class="w">        </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;laser_z_max&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;0.05&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-4-29"><a id="__codelineno-4-29" name="__codelineno-4-29" href="#__codelineno-4-29"></a><span class="w">        </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;laser_z_rand&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;0.5&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-4-30"><a id="__codelineno-4-30" name="__codelineno-4-30" href="#__codelineno-4-30"></a><span class="w">        </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;laser_sigma_hit&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;0.2&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-4-31"><a id="__codelineno-4-31" name="__codelineno-4-31" href="#__codelineno-4-31"></a><span class="w">        </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;laser_lambda_short&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;0.1&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-4-32"><a id="__codelineno-4-32" name="__codelineno-4-32" href="#__codelineno-4-32"></a><span class="w">        </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;laser_model_type&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;likelihood_field&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-4-33"><a id="__codelineno-4-33" name="__codelineno-4-33" href="#__codelineno-4-33"></a><span class="w">        </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;laser_likelihood_max_dist&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;2.0&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-4-34"><a id="__codelineno-4-34" name="__codelineno-4-34" href="#__codelineno-4-34"></a><span class="w">        </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;update_min_d&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;0.25&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-4-35"><a id="__codelineno-4-35" name="__codelineno-4-35" href="#__codelineno-4-35"></a><span class="w">        </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;update_min_a&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;0.2&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-4-36"><a id="__codelineno-4-36" name="__codelineno-4-36" href="#__codelineno-4-36"></a><span class="w">        </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;resample_interval&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;1&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-4-37"><a id="__codelineno-4-37" name="__codelineno-4-37" href="#__codelineno-4-37"></a><span class="w">        </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;transform_tolerance&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;1.0&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-4-38"><a id="__codelineno-4-38" name="__codelineno-4-38" href="#__codelineno-4-38"></a><span class="w">        </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;recovery_alpha_slow&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;0.0&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-4-39"><a id="__codelineno-4-39" name="__codelineno-4-39" href="#__codelineno-4-39"></a><span class="w">        </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;recovery_alpha_fast&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;0.0&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-4-40"><a id="__codelineno-4-40" name="__codelineno-4-40" href="#__codelineno-4-40"></a><span class="w">    </span><span class="nt">&lt;/node&gt;</span>
</span><span id="__span-4-41"><a id="__codelineno-4-41" name="__codelineno-4-41" href="#__codelineno-4-41"></a><span class="nt">&lt;/launch&gt;</span>
</span></code></pre></div>
<p>amclèŠ‚ç‚¹ä¸èƒ½ç‹¬ç«‹è¿è¡Œï¼Œéœ€å…ˆåŠ è½½å…¨å±€åœ°å›¾ï¼Œå†å¯åŠ¨rvizæ˜¾ç¤ºå®šä½ç»“æœï¼Œä»¥ä¸Šæ­¥éª¤å¯é›†æˆåˆ°launchæ–‡ä»¶ä¸­</p>
<p><code>start_amcl.launch</code></p>
<div class="language-xml highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="nt">&lt;launch&gt;</span>
</span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a><span class="w">    </span><span class="cm">&lt;!-- è®¾ç½®åœ°å›¾çš„é…ç½®æ–‡ä»¶ --&gt;</span>
</span><span id="__span-5-3"><a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a><span class="w">    </span><span class="nt">&lt;arg</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;map&quot;</span><span class="w"> </span><span class="na">default=</span><span class="s">&quot;my_map.yaml&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-5-4"><a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a><span class="w">    </span><span class="cm">&lt;!-- è¿è¡Œåœ°å›¾æœåŠ¡å™¨ï¼Œå¹¶ä¸”åŠ è½½è®¾ç½®çš„åœ°å›¾--&gt;</span>
</span><span id="__span-5-5"><a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a><span class="w">    </span><span class="nt">&lt;node</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;map_server&quot;</span><span class="w"> </span><span class="na">pkg=</span><span class="s">&quot;map_server&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;map_server&quot;</span><span class="w"> </span><span class="na">args=</span><span class="s">&quot;$(find åŠŸèƒ½åŒ…å)/ä¿å­˜è·¯å¾„/$(arg map)&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-5-6"><a id="__codelineno-5-6" name="__codelineno-5-6" href="#__codelineno-5-6"></a><span class="w">    </span><span class="cm">&lt;!-- å¯åŠ¨AMCLèŠ‚ç‚¹ --&gt;</span>
</span><span id="__span-5-7"><a id="__codelineno-5-7" name="__codelineno-5-7" href="#__codelineno-5-7"></a><span class="w">    </span><span class="nt">&lt;include</span><span class="w"> </span><span class="na">file=</span><span class="s">&quot;$(find åŠŸèƒ½åŒ…å)/ä¿å­˜è·¯å¾„/amcl.launch&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-5-8"><a id="__codelineno-5-8" name="__codelineno-5-8" href="#__codelineno-5-8"></a>
</span><span id="__span-5-9"><a id="__codelineno-5-9" name="__codelineno-5-9" href="#__codelineno-5-9"></a><span class="w">    </span><span class="nt">&lt;include</span><span class="w"> </span><span class="na">file=</span><span class="s">&quot;$(find vkbot_bringup)/launch/minimal.launch&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-5-10"><a id="__codelineno-5-10" name="__codelineno-5-10" href="#__codelineno-5-10"></a><span class="w">    </span><span class="nt">&lt;include</span><span class="w"> </span><span class="na">file=</span><span class="s">&quot;$(find ydlidar)/launch/ydlidar1_up.launch&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-5-11"><a id="__codelineno-5-11" name="__codelineno-5-11" href="#__codelineno-5-11"></a><span class="w">    </span><span class="nt">&lt;include</span><span class="w"> </span><span class="na">file=</span><span class="s">&quot;$(find vkbot_navigation)/launch/velocity_smoother.launch.xml&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-5-12"><a id="__codelineno-5-12" name="__codelineno-5-12" href="#__codelineno-5-12"></a><span class="w">    </span><span class="nt">&lt;include</span><span class="w"> </span><span class="na">file=</span><span class="s">&quot;$(find vkbot_navigation)/launch/safety_controller.launch.xml&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-5-13"><a id="__codelineno-5-13" name="__codelineno-5-13" href="#__codelineno-5-13"></a><span class="w">    </span><span class="nt">&lt;include</span><span class="w"> </span><span class="na">file=</span><span class="s">&quot;$(find vkbot_teleop)/launch/key_board_teleop.launch&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-5-14"><a id="__codelineno-5-14" name="__codelineno-5-14" href="#__codelineno-5-14"></a>
</span><span id="__span-5-15"><a id="__codelineno-5-15" name="__codelineno-5-15" href="#__codelineno-5-15"></a><span class="w">    </span><span class="nt">&lt;node</span><span class="w"> </span><span class="na">pkg=</span><span class="s">&quot;joint_state_publisher&quot;</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;joint_state_publisher&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;joint_state_publisher&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-5-16"><a id="__codelineno-5-16" name="__codelineno-5-16" href="#__codelineno-5-16"></a><span class="w">    </span><span class="nt">&lt;node</span><span class="w"> </span><span class="na">pkg=</span><span class="s">&quot;robot_state_publisher&quot;</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;robot_state_publisher&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;robot_state_publisher&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-5-17"><a id="__codelineno-5-17" name="__codelineno-5-17" href="#__codelineno-5-17"></a>
</span><span id="__span-5-18"><a id="__codelineno-5-18" name="__codelineno-5-18" href="#__codelineno-5-18"></a><span class="w">    </span><span class="cm">&lt;!-- å¯ä»¥ä¿å­˜ rviz é…ç½®å¹¶åæœŸç›´æ¥ä½¿ç”¨--&gt;</span>
</span><span id="__span-5-19"><a id="__codelineno-5-19" name="__codelineno-5-19" href="#__codelineno-5-19"></a><span class="w">    </span><span class="nt">&lt;node</span><span class="w"> </span><span class="na">pkg=</span><span class="s">&quot;rviz&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;rviz&quot;</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;rviz&quot;</span><span class="w"> </span><span class="na">args=</span><span class="s">&quot;-d $(find åŠŸèƒ½åŒ…)/config/amcl.rviz&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-5-20"><a id="__codelineno-5-20" name="__codelineno-5-20" href="#__codelineno-5-20"></a><span class="nt">&lt;/launch&gt;</span>
</span></code></pre></div>
<blockquote>
<p>launchæ–‡ä»¶ä¸­åœ°å›¾æœåŠ¡èŠ‚ç‚¹å’ŒamclèŠ‚ç‚¹ä¸­çš„åŒ…åã€æ–‡ä»¶åéœ€è¦æ ¹æ®è‡ªå·±çš„è®¾ç½®ä¿®æ”¹</p>
</blockquote>
<p>åœ¨å¯åŠ¨çš„ rviz ä¸­ï¼Œæ·»åŠ RobotModelã€Mapæ’ä»¶ï¼Œåˆ†åˆ«æ˜¾ç¤ºæœºå™¨äººæ¨¡å‹ä¸åœ°å›¾ï¼Œæ·»åŠ  PoseArray æ’ä»¶ï¼Œè®¾ç½®è¯é¢˜ä¸º<code>particlecloud</code>æ¥æ˜¾ç¤º amcl é¢„ä¼°çš„å½“å‰æœºå™¨äººä½å§¿ï¼Œç®­å¤´è¶Šæ˜¯å¯†é›†ï¼Œè¯´æ˜å½“å‰æœºå™¨äººå¤„äºæ­¤ä½ç½®çš„æ¦‚ç‡è¶Šé«˜ã€‚é€šè¿‡é”®ç›˜æ§åˆ¶æœºå™¨äººè¿åŠ¨ï¼Œä¼šå‘ç° PoseArray ä¹Ÿéšä¹‹è€Œæ”¹å˜</p>
<h3 id="622">6.2.2 è·¯å¾„è§„åˆ’</h3>
<p>è·¯å¾„è§„åˆ’æ˜¯å¯¼èˆªä¸­çš„æ ¸å¿ƒåŠŸèƒ½ä¹‹ä¸€ï¼Œåœ¨ROSçš„å¯¼èˆªåŠŸèƒ½åŒ…é›†navigationä¸­æä¾›äº†move_baseåŠŸèƒ½åŒ…ï¼Œç”¨äºå®ç°è·¯å¾„è§„åˆ’åŠŸèƒ½ã€‚</p>
<h4 id="6221-move_base">6.2.2.1 move_baseåŠŸèƒ½åŒ…</h4>
<p>move_baseåŠŸèƒ½åŒ…çš„æ ¸å¿ƒèŠ‚ç‚¹æ˜¯ï¼š<code>move_base</code>ã€‚ä¸ºäº†æ–¹ä¾¿è°ƒç”¨ï¼Œéœ€è¦å…ˆäº†è§£è¯¥èŠ‚ç‚¹çš„ç›¸å…³å†…å®¹ã€‚</p>
<p><img alt="image-20230627104516081" src="../assets/image-20230627104516081.png" /></p>
<p><strong>åŠ¨ä½œï¼ˆActionï¼‰è®¢é˜…çš„è¯é¢˜</strong></p>
<ul>
<li>move_base/goal(move_base_msgs/MoveBaseActionGoal)ï¼šmove_baseè¿åŠ¨è§„åˆ’ç›®æ ‡</li>
<li>move_base/cancel(actionlib_msgs/GoalID)ï¼šå–æ¶ˆç›®æ ‡</li>
</ul>
<p><strong>åŠ¨ä½œï¼ˆActionï¼‰å‘å¸ƒçš„è¯é¢˜</strong></p>
<ul>
<li>move_base/feedback(move_base_msgs/MoveBaseActionFeedback)ï¼šè¿ç»­åé¦ˆä¿¡æ¯ï¼ŒåŒ…å«æœºå™¨äººçš„åŸºåæ ‡ç³»åœ¨å½“å‰ä¸–ç•Œåæ ‡ç³»ä¸­çš„ä½ç½®</li>
<li>move_base/status(actionlib_msgs/GoalStatusArray)ï¼šæä¾›æœ‰å…³å‘é€åˆ°move_baseçš„ç›®æ ‡çŠ¶æ€ä¿¡æ¯</li>
<li>move_base/result(move_base_msgs/MoveBaseActionResult)ï¼šmove_baseæ“ä½œçš„ç»“æœä¸ºç©º</li>
</ul>
<p><strong>è®¢é˜…çš„è¯é¢˜</strong></p>
<ul>
<li>move_base_simple/goal(geometry_msgs/PoseStamped)ï¼šè¿åŠ¨è§„åˆ’ç›®æ ‡ï¼ˆæ— è¿ç»­åé¦ˆï¼‰</li>
</ul>
<p><strong>å‘å¸ƒçš„è¯é¢˜</strong></p>
<ul>
<li>cmd_vel(geometry_msgs/Twist)ï¼šè¾“å‡ºåˆ°æœºå™¨äººåº•ç›˜çš„è¿åŠ¨æ§åˆ¶æ¶ˆæ¯</li>
</ul>
<p><strong>æœåŠ¡</strong></p>
<ul>
<li>~make_plan(nav_msgs/GetPlan)ï¼šè¯·æ±‚è¯¥æœåŠ¡ï¼Œå¯ä»¥è·å–åˆ°ç»™å®šç›®æ ‡çš„è§„åˆ’è·¯å¾„ï¼Œä½†æ˜¯ä¸æ‰§è¡Œè¯¥è·¯å¾„è§„åˆ’</li>
<li>~clear_unknown_space(std_srvs/Empty)ï¼šæ¸…é™¤æœºå™¨äººå‘¨å›´çš„æœªçŸ¥ç©ºé—´</li>
<li>~clear_costmaps(std_srvs/Empty)ï¼šæ¸…é™¤ä»£ä»·åœ°å›¾ä¸­çš„éšœç¢ç‰©ï¼Œå¯èƒ½ä¼šå¯¼è‡´æœºå™¨äººä¸éšœç¢ç‰©å‘ç”Ÿç¢°æ’ï¼Œæ…ç”¨</li>
</ul>
<p><strong>å‚æ•°</strong></p>
<p><img alt="âš " class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@14.1.2/assets/svg/26a0.svg" title=":warning:" />ï¼šè¯·å‚è€ƒ<a href="http://wiki.ros.org/move_base">move_base - ROS Wiki</a></p>
<h4 id="6222">6.2.2.2 ä»£ä»·åœ°å›¾</h4>
<p><strong>æ¦‚å¿µ</strong></p>
<p>æœºå™¨äººå¯¼èˆªæ˜¯ä¾èµ–äºåœ°å›¾çš„ï¼Œåœ°å›¾åœ¨SLAMæ—¶å·²ç»ä»‹ç»ï¼Œä½†SLAMæ‰€æ„å»ºçš„åœ°å›¾åœ¨å¯¼èˆªä¸­æ˜¯ä¸èƒ½ç›´æ¥ä½¿ç”¨çš„ï¼Œå› ä¸ºï¼š</p>
<ul>
<li>SLAMæ„å»ºçš„åœ°å›¾æ˜¯é™æ€çš„ï¼Œåœ¨å¯¼èˆªè¿‡ç¨‹ä¸­éšœç¢ç‰©ä¿¡æ¯æ˜¯å¯å˜çš„ï¼Œå› æ­¤å¯¼èˆªè¿‡ç¨‹ä¸­éœ€è¦å®æ—¶è·å–éšœç¢ç‰©ä¿¡æ¯</li>
<li>åœ¨é è¿‘éšœç¢ç‰©è¾¹ç¼˜æ—¶ï¼Œè™½ç„¶æ­¤æ—¶è¿˜æœªå‘ç”Ÿç¢°æ’ï¼Œä½†æ˜¯ç”±äºæœºå™¨äººæœ¬ä½“å­˜åœ¨æƒ¯æ€§æˆ–å½¢ä½“ä¸è§„åˆ™çš„æƒ…å†µï¼Œè½¬å¼¯æ—¶è¿˜æ˜¯æœ‰å¯èƒ½ä¸éšœç¢ç‰©äº§ç”Ÿç¢°æ’çš„ï¼Œå®‰å…¨èµ·è§æœ€å¥½åœ¨éšœç¢ç‰©çš„è¾¹ç¼˜è®¾ç½®è†¨èƒ€åŒºåŸŸï¼Œå°½å¯èƒ½é¿å…æœºå™¨äººè¿›å…¥æ­¤åŒºåŸŸ</li>
</ul>
<p>å› æ­¤ï¼Œå¯¼èˆªæ—¶éœ€è¦åœ¨é™æ€åœ°å›¾çš„åŸºç¡€ä¸Šå¢åŠ è¾…åŠ©ä¿¡æ¯ï¼šå®æ—¶æ›´æ–°éšœç¢ç‰©ä¿¡æ¯ã€åŸºäºé™æ€åœ°å›¾è®¾ç½®è†¨èƒ€åŒºï¼Œä¸‰è€…å…±åŒæ„æˆäº†<strong>ä»£ä»·åœ°å›¾</strong></p>
<p><strong>ä»£ä»·åœ°å›¾ç»„æˆ</strong></p>
<p>ä»£ä»·åœ°å›¾åˆ†ä¸ºï¼šglobal_costmapï¼ˆå…¨å±€ä»£ä»·åœ°å›¾ï¼‰å’Œlocal_costmapï¼ˆæœ¬åœ°ä»£ä»·åœ°å›¾ï¼‰ï¼Œå‰è€…ç”¨äºå…¨å±€è·¯å¾„è§„åˆ’ï¼Œåè€…ç”¨äºæœ¬åœ°è·¯å¾„è§„åˆ’ï¼ˆåŠ¨æ€é¿éšœï¼‰ã€‚ä¸€å¼ ä»£ä»·åœ°å›¾åŒ…å«ä»¥ä¸‹å±‚çº§ï¼š</p>
<ul>
<li>Static Map Layerï¼šé™æ€åœ°å›¾å±‚ï¼Œç”±SLAMæ„å»ºçš„é™æ€åœ°å›¾</li>
<li>Obstacle Map Layerï¼šéšœç¢ç‰©å±‚ï¼Œç”±ä¼ æ„Ÿå™¨åŠ¨æ€æ„ŸçŸ¥çš„éšœç¢ç‰©ä¿¡æ¯</li>
<li>Inflation Layerï¼šè†¨èƒ€å±‚ï¼Œåœ¨ä»¥ä¸Šä¸¤å±‚åœ°å›¾ä¸Šè¿›è¡Œè†¨èƒ€ï¼Œä»¥é¿å…æœºå™¨äººä¸éšœç¢ç‰©ç¢°æ’</li>
<li>Other Layersï¼šå…¶ä½™è‡ªå®šä¹‰çš„costmap</li>
</ul>
<blockquote>
<p>å¤šä¸ªå±‚å¯ä»¥æŒ‰éœ€è‡ªç”±æ­é…</p>
</blockquote>
<p><strong>ç¢°æ’ç®—æ³•</strong></p>
<p>åœ¨ROSä¸­æ˜¯å¦‚ä½•è®¡ç®—ä»£ä»·å€¼çš„å‘¢ï¼Œå®˜æ–¹ç»™å‡ºäº†ä¸‹å›¾è¾…åŠ©ç†è§£ï¼š</p>
<p><img alt="" src="D:\å·¥ä½œæ–‡æ¡£\åŸ¹è®­\2023ï¼ˆ6.20Â·6.24ï¼‰å¹´ç¬¬ä¸€æœŸæš‘æœŸæ™ºèƒ½æœºå™¨äººæŠ€æœ¯åº”ç”¨å¸ˆèµ„ç ”ä¿®ç­\assert\costmapspec.png" /></p>
<blockquote>
<p>æ¨ªè½´è¡¨ç¤ºè·ç¦»æœºå™¨äººä¸­å¿ƒçš„è·ç¦»ï¼Œçºµè½´è¡¨ç¤ºä»£ä»·åœ°å›¾ä¸­æ …æ ¼çš„ç°åº¦å€¼</p>
</blockquote>
<ul>
<li>è‡´å‘½éšœç¢ï¼šæ …æ ¼å€¼ä¸º254ï¼Œæ­¤æ—¶éšœç¢ç‰©ä¸æœºå™¨äººä¸­å¿ƒé‡å ï¼Œå¿…ç„¶äº§ç”Ÿç¢°æ’</li>
<li>å†…åˆ‡éšœç¢ï¼šæ …æ ¼å€¼ä¸º253ï¼Œæ­¤æ—¶éšœç¢ç‰©å¤„äºæœºå™¨äººçš„å†…åˆ‡åœ†ä¸­ï¼Œå¿…ç„¶äº§ç”Ÿç¢°æ’</li>
<li>å¤–åˆ‡éšœç¢ï¼šæ …æ ¼å€¼ä¸º[128, 252]ï¼Œæ­¤æ—¶éšœç¢ç‰©å¤„äºæœºå™¨äººçš„å¤–åˆ‡åœ†ä¸å†…åˆ‡åœ†ä¹‹é—´ï¼Œå¤„äºç¢°æ’ä¸´ç•ŒçŠ¶æ€ï¼Œå¯èƒ½äº§ç”Ÿç¢°æ’</li>
<li>éè‡ªç”±ç©ºé—´ï¼šæ …æ ¼å€¼ä¸º(0, 127]ï¼Œæ­¤æ—¶æœºå™¨äººå¤„äºéšœç¢ç‰©é™„è¿‘ï¼Œå±äºå±é™©è­¦æˆ’åŒºåŸŸï¼Œæœºå™¨äººè¿›å…¥æ­¤åŒºåŸŸï¼Œå°†æ¥å¯èƒ½ä¼šäº§ç”Ÿç¢°æ’</li>
<li>è‡ªç”±ç©ºé—´ï¼šæ …æ ¼å€¼ä¸º0ï¼Œæ­¤å¤„æœºå™¨äººå¯è‡ªç”±é€šè¡Œ</li>
<li>æœªçŸ¥åŒºåŸŸï¼šæ …æ ¼å€¼ä¸º255ï¼Œè¡¨ç¤ºè¿˜æœªæ¢æ˜æ˜¯å¦æœ‰éšœç¢ç‰©çš„åŒºåŸŸ</li>
</ul>
<blockquote>
<p>è®¾ç½®è†¨èƒ€å±‚æ—¶å¯å‚è€ƒéè‡ªç”±ç©ºé—´</p>
</blockquote>
<p><strong>å¯¼èˆªå‚æ•°é…ç½®</strong></p>
<p>ä½¿ç”¨launchæ–‡ä»¶å¯åŠ¨move_baseèŠ‚ç‚¹ï¼Œå¹¶åŠ è½½å‚æ•°é…ç½®æ–‡ä»¶</p>
<p><code>move_base.launch</code></p>
<div class="language-xml highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="nt">&lt;launch&gt;</span>
</span><span id="__span-6-2"><a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a><span class="w">    </span><span class="nt">&lt;node</span><span class="w"> </span><span class="na">pkg=</span><span class="s">&quot;move_base&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;move_base&quot;</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;move_base&quot;</span><span class="w"> </span><span class="na">respawn=</span><span class="s">&quot;true&quot;</span><span class="w"> </span><span class="na">output=</span><span class="s">&quot;screen&quot;</span><span class="w"> </span><span class="na">clear_params=</span><span class="s">&quot;true&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-6-3"><a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a><span class="w">        </span><span class="nt">&lt;rosparam</span><span class="w"> </span><span class="na">file=</span><span class="s">&quot;$(find åŠŸèƒ½åŒ…å)/param/move_base_params.yaml&quot;</span><span class="w"> </span><span class="na">command=</span><span class="s">&quot;load&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-6-4"><a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a><span class="w">        </span><span class="nt">&lt;rosparam</span><span class="w"> </span><span class="na">file=</span><span class="s">&quot;$(find åŠŸèƒ½åŒ…å)/param/costmap_common_params.yaml&quot;</span><span class="w"> </span><span class="na">command=</span><span class="s">&quot;load&quot;</span><span class="w"> </span><span class="na">ns=</span><span class="s">&quot;global_costmap&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-6-5"><a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a><span class="w">        </span><span class="nt">&lt;rosparam</span><span class="w"> </span><span class="na">file=</span><span class="s">&quot;$(find åŠŸèƒ½åŒ…å)/param/costmap_common_params.yaml&quot;</span><span class="w"> </span><span class="na">command=</span><span class="s">&quot;load&quot;</span><span class="w"> </span><span class="na">ns=</span><span class="s">&quot;local_costmap&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-6-6"><a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a><span class="w">        </span><span class="nt">&lt;rosparam</span><span class="w"> </span><span class="na">file=</span><span class="s">&quot;$(find åŠŸèƒ½åŒ…å)/param/global_costmap_params.yaml&quot;</span><span class="w"> </span><span class="na">command=</span><span class="s">&quot;load&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-6-7"><a id="__codelineno-6-7" name="__codelineno-6-7" href="#__codelineno-6-7"></a><span class="w">        </span><span class="nt">&lt;rosparam</span><span class="w"> </span><span class="na">file=</span><span class="s">&quot;$(find åŠŸèƒ½åŒ…å)/param/local_costmap_params.yaml&quot;</span><span class="w"> </span><span class="na">command=</span><span class="s">&quot;load&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-6-8"><a id="__codelineno-6-8" name="__codelineno-6-8" href="#__codelineno-6-8"></a><span class="w">        </span><span class="nt">&lt;rosparam</span><span class="w"> </span><span class="na">file=</span><span class="s">&quot;$(find åŠŸèƒ½åŒ…å)/param/base_global_planner_params.yaml&quot;</span><span class="w"> </span><span class="na">command=</span><span class="s">&quot;load&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-6-9"><a id="__codelineno-6-9" name="__codelineno-6-9" href="#__codelineno-6-9"></a><span class="w">        </span><span class="nt">&lt;rosparam</span><span class="w"> </span><span class="na">file=</span><span class="s">&quot;$(find åŠŸèƒ½åŒ…å)/param/teb_local_planner_params.yaml&quot;</span><span class="w"> </span><span class="na">command=</span><span class="s">&quot;load&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-6-10"><a id="__codelineno-6-10" name="__codelineno-6-10" href="#__codelineno-6-10"></a><span class="w">        </span><span class="nt">&lt;remap</span><span class="w"> </span><span class="na">from=</span><span class="s">&quot;cmd_vel&quot;</span><span class="w"> </span><span class="na">to=</span><span class="s">&quot;/cmd_vel_mux/input/navi&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-6-11"><a id="__codelineno-6-11" name="__codelineno-6-11" href="#__codelineno-6-11"></a><span class="w">    </span><span class="nt">&lt;/node&gt;</span>
</span><span id="__span-6-12"><a id="__codelineno-6-12" name="__codelineno-6-12" href="#__codelineno-6-12"></a><span class="nt">&lt;/launch&gt;</span>
</span></code></pre></div>
<blockquote>
<p>è¿™ä¸ªlaunchæ–‡ä»¶å¯åŠ¨äº†move_baseèŠ‚ç‚¹ï¼Œ"respawn"è®¾ç½®ä¸ºtrueè¡¨ç¤ºæ­¤èŠ‚ç‚¹å…³é—­åä¼šè¢«é‡å¯ï¼Œ"clear_params"è®¾ç½®ä¸ºtrueè¡¨ç¤ºæ¯æ¬¡å¯åŠ¨æ­¤èŠ‚ç‚¹éƒ½éœ€è¦æ¸…ç©ºç§æœ‰å‚æ•°å¹¶é‡æ–°è½½å…¥</p>
</blockquote>
<p><strong>é…ç½®æ–‡ä»¶</strong></p>
<ol>
<li><code>move_base_params.yaml</code>ï¼šmove_baseèŠ‚ç‚¹é…ç½®å‚æ•°</li>
</ol>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="nt">shutdown_costmaps</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
</span><span id="__span-7-2"><a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a>
</span><span id="__span-7-3"><a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a><span class="nt">controller_frequency</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">4.0</span>
</span><span id="__span-7-4"><a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a><span class="nt">controller_patience</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3.0</span><span class="w"> </span><span class="c1"># 3.0</span>
</span><span id="__span-7-5"><a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a>
</span><span id="__span-7-6"><a id="__codelineno-7-6" name="__codelineno-7-6" href="#__codelineno-7-6"></a><span class="nt">planner_frequency</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1.0</span>
</span><span id="__span-7-7"><a id="__codelineno-7-7" name="__codelineno-7-7" href="#__codelineno-7-7"></a><span class="nt">planner_patience</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3.0</span>
</span><span id="__span-7-8"><a id="__codelineno-7-8" name="__codelineno-7-8" href="#__codelineno-7-8"></a>
</span><span id="__span-7-9"><a id="__codelineno-7-9" name="__codelineno-7-9" href="#__codelineno-7-9"></a><span class="nt">oscillation_timeout</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5.0</span>
</span><span id="__span-7-10"><a id="__codelineno-7-10" name="__codelineno-7-10" href="#__codelineno-7-10"></a><span class="nt">oscillation_distance</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.2</span>
</span><span id="__span-7-11"><a id="__codelineno-7-11" name="__codelineno-7-11" href="#__codelineno-7-11"></a>
</span><span id="__span-7-12"><a id="__codelineno-7-12" name="__codelineno-7-12" href="#__codelineno-7-12"></a><span class="c1"># Planner selection</span>
</span><span id="__span-7-13"><a id="__codelineno-7-13" name="__codelineno-7-13" href="#__codelineno-7-13"></a><span class="nt">base_global_planner</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;global_planner/GlobalPlanner&quot;</span><span class="w">  </span>
</span><span id="__span-7-14"><a id="__codelineno-7-14" name="__codelineno-7-14" href="#__codelineno-7-14"></a><span class="nt">base_local_planner</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;teb_local_planner/TebLocalPlannerROS&quot;</span>
</span><span id="__span-7-15"><a id="__codelineno-7-15" name="__codelineno-7-15" href="#__codelineno-7-15"></a>
</span><span id="__span-7-16"><a id="__codelineno-7-16" name="__codelineno-7-16" href="#__codelineno-7-16"></a><span class="nt">max_planning_retries</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
</span><span id="__span-7-17"><a id="__codelineno-7-17" name="__codelineno-7-17" href="#__codelineno-7-17"></a>
</span><span id="__span-7-18"><a id="__codelineno-7-18" name="__codelineno-7-18" href="#__codelineno-7-18"></a><span class="nt">recovery_behavior_enabled</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</span><span id="__span-7-19"><a id="__codelineno-7-19" name="__codelineno-7-19" href="#__codelineno-7-19"></a><span class="nt">clearing_rotation_allowed</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</span><span id="__span-7-20"><a id="__codelineno-7-20" name="__codelineno-7-20" href="#__codelineno-7-20"></a>
</span><span id="__span-7-21"><a id="__codelineno-7-21" name="__codelineno-7-21" href="#__codelineno-7-21"></a><span class="nt">useMagnetometer</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">False</span>
</span><span id="__span-7-22"><a id="__codelineno-7-22" name="__codelineno-7-22" href="#__codelineno-7-22"></a><span class="nt">auto_update_</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">False</span>
</span><span id="__span-7-23"><a id="__codelineno-7-23" name="__codelineno-7-23" href="#__codelineno-7-23"></a><span class="nt">particle_range</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1.0</span>
</span><span id="__span-7-24"><a id="__codelineno-7-24" name="__codelineno-7-24" href="#__codelineno-7-24"></a><span class="nt">angle_tolerance</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.05</span>
</span><span id="__span-7-25"><a id="__codelineno-7-25" name="__codelineno-7-25" href="#__codelineno-7-25"></a>
</span><span id="__span-7-26"><a id="__codelineno-7-26" name="__codelineno-7-26" href="#__codelineno-7-26"></a><span class="nt">recovery_behaviors</span><span class="p">:</span>
</span><span id="__span-7-27"><a id="__codelineno-7-27" name="__codelineno-7-27" href="#__codelineno-7-27"></a><span class="w"> </span><span class="c1">#- name: &#39;conservative_reset&#39;</span>
</span><span id="__span-7-28"><a id="__codelineno-7-28" name="__codelineno-7-28" href="#__codelineno-7-28"></a><span class="w">  </span><span class="c1">#  type: &#39;clear_costmap_recovery/ClearCostmapRecovery&#39;</span>
</span><span id="__span-7-29"><a id="__codelineno-7-29" name="__codelineno-7-29" href="#__codelineno-7-29"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;aggressive_reset&#39;</span>
</span><span id="__span-7-30"><a id="__codelineno-7-30" name="__codelineno-7-30" href="#__codelineno-7-30"></a><span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;clear_costmap_recovery/ClearCostmapRecovery&#39;</span>
</span><span id="__span-7-31"><a id="__codelineno-7-31" name="__codelineno-7-31" href="#__codelineno-7-31"></a><span class="w">  </span><span class="c1">#- name: &#39;super_reset&#39;</span>
</span><span id="__span-7-32"><a id="__codelineno-7-32" name="__codelineno-7-32" href="#__codelineno-7-32"></a><span class="w">   </span><span class="c1"># type: &#39;clear_costmap_recovery/ClearCostmapRecovery&#39;</span>
</span><span id="__span-7-33"><a id="__codelineno-7-33" name="__codelineno-7-33" href="#__codelineno-7-33"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;clearing_rotation&#39;</span>
</span><span id="__span-7-34"><a id="__codelineno-7-34" name="__codelineno-7-34" href="#__codelineno-7-34"></a><span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;rotate_recovery/RotateRecovery&#39;</span>
</span><span id="__span-7-35"><a id="__codelineno-7-35" name="__codelineno-7-35" href="#__codelineno-7-35"></a><span class="w">  </span><span class="c1">#- name: &#39;move_slow_and_clear&#39;</span>
</span><span id="__span-7-36"><a id="__codelineno-7-36" name="__codelineno-7-36" href="#__codelineno-7-36"></a><span class="w">    </span><span class="c1">#type: &#39;move_slow_and_clear/MoveSlowAndClear&#39;</span>
</span><span id="__span-7-37"><a id="__codelineno-7-37" name="__codelineno-7-37" href="#__codelineno-7-37"></a>
</span><span id="__span-7-38"><a id="__codelineno-7-38" name="__codelineno-7-38" href="#__codelineno-7-38"></a><span class="nt">conservative_reset</span><span class="p">:</span>
</span><span id="__span-7-39"><a id="__codelineno-7-39" name="__codelineno-7-39" href="#__codelineno-7-39"></a><span class="w">  </span><span class="nt">reset_distance</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3.0</span>
</span><span id="__span-7-40"><a id="__codelineno-7-40" name="__codelineno-7-40" href="#__codelineno-7-40"></a><span class="w">  </span><span class="c1">#layer_names: [static_layer, obstacle_layer, inflation_layer]</span>
</span><span id="__span-7-41"><a id="__codelineno-7-41" name="__codelineno-7-41" href="#__codelineno-7-41"></a><span class="w">  </span><span class="nt">layer_names</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">obstacle_layer</span><span class="p p-Indicator">]</span>
</span><span id="__span-7-42"><a id="__codelineno-7-42" name="__codelineno-7-42" href="#__codelineno-7-42"></a>
</span><span id="__span-7-43"><a id="__codelineno-7-43" name="__codelineno-7-43" href="#__codelineno-7-43"></a><span class="nt">aggressive_reset</span><span class="p">:</span>
</span><span id="__span-7-44"><a id="__codelineno-7-44" name="__codelineno-7-44" href="#__codelineno-7-44"></a><span class="w">  </span><span class="nt">reset_distance</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.3</span>
</span><span id="__span-7-45"><a id="__codelineno-7-45" name="__codelineno-7-45" href="#__codelineno-7-45"></a><span class="w">  </span><span class="c1">#layer_names: [static_layer, obstacle_layer, inflation_layer]</span>
</span><span id="__span-7-46"><a id="__codelineno-7-46" name="__codelineno-7-46" href="#__codelineno-7-46"></a><span class="w">  </span><span class="nt">layer_names</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">obstacle_layer</span><span class="p p-Indicator">]</span>
</span><span id="__span-7-47"><a id="__codelineno-7-47" name="__codelineno-7-47" href="#__codelineno-7-47"></a>
</span><span id="__span-7-48"><a id="__codelineno-7-48" name="__codelineno-7-48" href="#__codelineno-7-48"></a><span class="nt">super_reset</span><span class="p">:</span>
</span><span id="__span-7-49"><a id="__codelineno-7-49" name="__codelineno-7-49" href="#__codelineno-7-49"></a><span class="w">  </span><span class="nt">reset_distance</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5.0</span>
</span><span id="__span-7-50"><a id="__codelineno-7-50" name="__codelineno-7-50" href="#__codelineno-7-50"></a><span class="w">  </span><span class="c1">#layer_names: [static_layer, obstacle_layer, inflation_layer]</span>
</span><span id="__span-7-51"><a id="__codelineno-7-51" name="__codelineno-7-51" href="#__codelineno-7-51"></a><span class="w">  </span><span class="nt">layer_names</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">obstacle_layer</span><span class="p p-Indicator">]</span>
</span><span id="__span-7-52"><a id="__codelineno-7-52" name="__codelineno-7-52" href="#__codelineno-7-52"></a>
</span><span id="__span-7-53"><a id="__codelineno-7-53" name="__codelineno-7-53" href="#__codelineno-7-53"></a><span class="nt">move_slow_and_clear</span><span class="p">:</span>
</span><span id="__span-7-54"><a id="__codelineno-7-54" name="__codelineno-7-54" href="#__codelineno-7-54"></a><span class="w">  </span><span class="nt">clearing_distance</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.5</span>
</span><span id="__span-7-55"><a id="__codelineno-7-55" name="__codelineno-7-55" href="#__codelineno-7-55"></a><span class="w">  </span><span class="nt">limited_trans_speed</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.1</span>
</span><span id="__span-7-56"><a id="__codelineno-7-56" name="__codelineno-7-56" href="#__codelineno-7-56"></a><span class="w">  </span><span class="nt">limited_rot_speed</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.4</span>
</span><span id="__span-7-57"><a id="__codelineno-7-57" name="__codelineno-7-57" href="#__codelineno-7-57"></a><span class="w">  </span><span class="nt">limited_distance</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.3</span>
</span></code></pre></div>
<ol>
<li><code>costmap_common_params.yaml</code>ï¼šå…¨å±€ä»£ä»·åœ°å›¾ä¸æœ¬åœ°ä»£ä»·åœ°å›¾çš„é€šç”¨å‚æ•°</li>
</ol>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="nt">robot_radius</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.23</span>
</span><span id="__span-8-2"><a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a>
</span><span id="__span-8-3"><a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a><span class="nt">obstacle_layer</span><span class="p">:</span>
</span><span id="__span-8-4"><a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a><span class="w"> </span><span class="nt">enabled</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</span><span id="__span-8-5"><a id="__codelineno-8-5" name="__codelineno-8-5" href="#__codelineno-8-5"></a><span class="w"> </span><span class="nt">max_obstacle_height</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.6</span>
</span><span id="__span-8-6"><a id="__codelineno-8-6" name="__codelineno-8-6" href="#__codelineno-8-6"></a><span class="w"> </span><span class="nt">min_obstacle_height</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.0</span>
</span><span id="__span-8-7"><a id="__codelineno-8-7" name="__codelineno-8-7" href="#__codelineno-8-7"></a><span class="w"> </span><span class="nt">obstacle_range</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2.0</span>
</span><span id="__span-8-8"><a id="__codelineno-8-8" name="__codelineno-8-8" href="#__codelineno-8-8"></a><span class="w"> </span><span class="nt">raytrace_range</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5.0</span>
</span><span id="__span-8-9"><a id="__codelineno-8-9" name="__codelineno-8-9" href="#__codelineno-8-9"></a><span class="w"> </span><span class="nt">inflation_radius</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.25</span>
</span><span id="__span-8-10"><a id="__codelineno-8-10" name="__codelineno-8-10" href="#__codelineno-8-10"></a><span class="w"> </span><span class="nt">combination_method</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
</span><span id="__span-8-11"><a id="__codelineno-8-11" name="__codelineno-8-11" href="#__codelineno-8-11"></a><span class="w"> </span><span class="nt">observation_sources</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">laser_scan_sensor</span>
</span><span id="__span-8-12"><a id="__codelineno-8-12" name="__codelineno-8-12" href="#__codelineno-8-12"></a><span class="w"> </span><span class="nt">track_unknown_space</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</span><span id="__span-8-13"><a id="__codelineno-8-13" name="__codelineno-8-13" href="#__codelineno-8-13"></a><span class="w"> </span><span class="nt">laser_scan_sensor</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt">data_type</span><span class="p">:</span><span class="w"> </span><span class="nv">LaserScan</span><span class="p p-Indicator">,</span><span class="nt"> topic</span><span class="p">:</span><span class="w"> </span><span class="nv">/scan</span><span class="p p-Indicator">,</span><span class="nt"> marking</span><span class="p">:</span><span class="w"> </span><span class="nv">true</span><span class="p p-Indicator">,</span><span class="nt"> clearing</span><span class="p">:</span><span class="w"> </span><span class="nv">true</span><span class="p p-Indicator">,</span><span class="nt"> expected_update_rate</span><span class="p">:</span><span class="w"> </span><span class="nv">0</span><span class="p p-Indicator">}</span>
</span><span id="__span-8-14"><a id="__codelineno-8-14" name="__codelineno-8-14" href="#__codelineno-8-14"></a>
</span><span id="__span-8-15"><a id="__codelineno-8-15" name="__codelineno-8-15" href="#__codelineno-8-15"></a><span class="nt">track_unknown_space</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</span><span id="__span-8-16"><a id="__codelineno-8-16" name="__codelineno-8-16" href="#__codelineno-8-16"></a>
</span><span id="__span-8-17"><a id="__codelineno-8-17" name="__codelineno-8-17" href="#__codelineno-8-17"></a><span class="nt">inflation_layer</span><span class="p">:</span>
</span><span id="__span-8-18"><a id="__codelineno-8-18" name="__codelineno-8-18" href="#__codelineno-8-18"></a><span class="w">  </span><span class="nt">enabled</span><span class="p">:</span><span class="w">              </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</span><span id="__span-8-19"><a id="__codelineno-8-19" name="__codelineno-8-19" href="#__codelineno-8-19"></a><span class="w">  </span><span class="nt">cost_scaling_factor</span><span class="p">:</span><span class="w">  </span><span class="l l-Scalar l-Scalar-Plain">10.0</span><span class="w">  </span><span class="c1"># exponential rate at which the obstacle cost drops off (default: 10)</span>
</span><span id="__span-8-20"><a id="__codelineno-8-20" name="__codelineno-8-20" href="#__codelineno-8-20"></a><span class="w">  </span><span class="c1"># inflation_radius:     0.25 # max. distance from an obstacle at which costs are incurred for planning paths.</span>
</span><span id="__span-8-21"><a id="__codelineno-8-21" name="__codelineno-8-21" href="#__codelineno-8-21"></a>
</span><span id="__span-8-22"><a id="__codelineno-8-22" name="__codelineno-8-22" href="#__codelineno-8-22"></a><span class="nt">static_layer</span><span class="p">:</span>
</span><span id="__span-8-23"><a id="__codelineno-8-23" name="__codelineno-8-23" href="#__codelineno-8-23"></a><span class="w">  </span><span class="nt">enabled</span><span class="p">:</span><span class="w">              </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</span><span id="__span-8-24"><a id="__codelineno-8-24" name="__codelineno-8-24" href="#__codelineno-8-24"></a><span class="w">  </span><span class="nt">map_topic</span><span class="p">:</span><span class="w">            </span><span class="s">&quot;/map&quot;</span>
</span></code></pre></div>
<ol>
<li><code>global_costmap_params.yaml</code>ï¼šå…¨å±€ä»£ä»·åœ°å›¾å‚æ•°</li>
</ol>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="nt">global_costmap</span><span class="p">:</span>
</span><span id="__span-9-2"><a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a><span class="w">   </span><span class="nt">global_frame</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/map</span>
</span><span id="__span-9-3"><a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a><span class="w">   </span><span class="nt">robot_base_frame</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/base_footprint</span>
</span><span id="__span-9-4"><a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a><span class="w">   </span><span class="nt">update_frequency</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1.0</span>
</span><span id="__span-9-5"><a id="__codelineno-9-5" name="__codelineno-9-5" href="#__codelineno-9-5"></a><span class="w">   </span><span class="nt">publish_frequency</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span>
</span><span id="__span-9-6"><a id="__codelineno-9-6" name="__codelineno-9-6" href="#__codelineno-9-6"></a><span class="w">   </span><span class="nt">static_map</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</span><span id="__span-9-7"><a id="__codelineno-9-7" name="__codelineno-9-7" href="#__codelineno-9-7"></a><span class="w">   </span><span class="nt">rolling_window</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
</span><span id="__span-9-8"><a id="__codelineno-9-8" name="__codelineno-9-8" href="#__codelineno-9-8"></a><span class="w">   </span><span class="nt">resolution</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.05</span>
</span><span id="__span-9-9"><a id="__codelineno-9-9" name="__codelineno-9-9" href="#__codelineno-9-9"></a><span class="w">   </span><span class="nt">transform_tolerance</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1.0</span>
</span><span id="__span-9-10"><a id="__codelineno-9-10" name="__codelineno-9-10" href="#__codelineno-9-10"></a><span class="w">   </span><span class="nt">map_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">costmap</span>
</span><span id="__span-9-11"><a id="__codelineno-9-11" name="__codelineno-9-11" href="#__codelineno-9-11"></a><span class="w">   </span><span class="nt">inflation_radius</span><span class="p">:</span><span class="w">     </span><span class="l l-Scalar l-Scalar-Plain">0.3</span>
</span><span id="__span-9-12"><a id="__codelineno-9-12" name="__codelineno-9-12" href="#__codelineno-9-12"></a>
</span><span id="__span-9-13"><a id="__codelineno-9-13" name="__codelineno-9-13" href="#__codelineno-9-13"></a><span class="nt">GlobalPlanner</span><span class="p">:</span><span class="w">        </span>
</span><span id="__span-9-14"><a id="__codelineno-9-14" name="__codelineno-9-14" href="#__codelineno-9-14"></a><span class="w">   </span><span class="nt">allow_unknown</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span><span class="w"> </span>
</span></code></pre></div>
<ol>
<li><code>local_costmap_params.yaml</code>ï¼šæœ¬åœ°ä»£ä»·åœ°å›¾å‚æ•°</li>
</ol>
<div class="language-python highlight"><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="n">local_costmap</span><span class="p">:</span>
</span><span id="__span-10-2"><a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a>   <span class="n">global_frame</span><span class="p">:</span> <span class="o">/</span><span class="n">odom_combined</span>
</span><span id="__span-10-3"><a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a>   <span class="n">robot_base_frame</span><span class="p">:</span> <span class="o">/</span><span class="n">base_footprint</span>
</span><span id="__span-10-4"><a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a>   <span class="n">update_frequency</span><span class="p">:</span> <span class="mf">5.0</span>   <span class="c1">#3.0</span>
</span><span id="__span-10-5"><a id="__codelineno-10-5" name="__codelineno-10-5" href="#__codelineno-10-5"></a>   <span class="n">publish_frequency</span><span class="p">:</span> <span class="mf">2.0</span>  <span class="c1">#1.0</span>
</span><span id="__span-10-6"><a id="__codelineno-10-6" name="__codelineno-10-6" href="#__codelineno-10-6"></a>   <span class="n">static_map</span><span class="p">:</span> <span class="n">false</span>
</span><span id="__span-10-7"><a id="__codelineno-10-7" name="__codelineno-10-7" href="#__codelineno-10-7"></a>   <span class="n">rolling_window</span><span class="p">:</span> <span class="n">true</span>
</span><span id="__span-10-8"><a id="__codelineno-10-8" name="__codelineno-10-8" href="#__codelineno-10-8"></a>   <span class="n">width</span><span class="p">:</span> <span class="mf">3.0</span>
</span><span id="__span-10-9"><a id="__codelineno-10-9" name="__codelineno-10-9" href="#__codelineno-10-9"></a>   <span class="n">height</span><span class="p">:</span> <span class="mf">3.0</span>
</span><span id="__span-10-10"><a id="__codelineno-10-10" name="__codelineno-10-10" href="#__codelineno-10-10"></a>   <span class="n">resolution</span><span class="p">:</span> <span class="mf">0.05</span>
</span><span id="__span-10-11"><a id="__codelineno-10-11" name="__codelineno-10-11" href="#__codelineno-10-11"></a>   <span class="n">transform_tolerance</span><span class="p">:</span> <span class="mf">1.0</span>
</span><span id="__span-10-12"><a id="__codelineno-10-12" name="__codelineno-10-12" href="#__codelineno-10-12"></a>   <span class="n">map_type</span><span class="p">:</span> <span class="n">costmap</span>
</span><span id="__span-10-13"><a id="__codelineno-10-13" name="__codelineno-10-13" href="#__codelineno-10-13"></a>   <span class="n">inflation_radius</span><span class="p">:</span>     <span class="mf">0.25</span>
</span><span id="__span-10-14"><a id="__codelineno-10-14" name="__codelineno-10-14" href="#__codelineno-10-14"></a>
</span><span id="__span-10-15"><a id="__codelineno-10-15" name="__codelineno-10-15" href="#__codelineno-10-15"></a>   <span class="n">plugins</span><span class="p">:</span>
</span><span id="__span-10-16"><a id="__codelineno-10-16" name="__codelineno-10-16" href="#__codelineno-10-16"></a>   <span class="o">-</span> <span class="p">{</span><span class="n">name</span><span class="p">:</span> <span class="n">static_layer</span><span class="p">,</span>        <span class="nb">type</span><span class="p">:</span> <span class="s2">&quot;costmap_2d::StaticLayer&quot;</span><span class="p">}</span>
</span><span id="__span-10-17"><a id="__codelineno-10-17" name="__codelineno-10-17" href="#__codelineno-10-17"></a>   <span class="o">-</span> <span class="p">{</span><span class="n">name</span><span class="p">:</span> <span class="n">obstacle_layer</span><span class="p">,</span>      <span class="nb">type</span><span class="p">:</span> <span class="s2">&quot;costmap_2d::ObstacleLayer&quot;</span><span class="p">}</span>
</span><span id="__span-10-18"><a id="__codelineno-10-18" name="__codelineno-10-18" href="#__codelineno-10-18"></a>   <span class="o">-</span> <span class="p">{</span><span class="n">name</span><span class="p">:</span> <span class="n">inflation_layer</span><span class="p">,</span> <span class="nb">type</span><span class="p">:</span> <span class="s1">&#39;costmap_2d::InflationLayer&#39;</span><span class="p">}</span>
</span></code></pre></div>
<ol>
<li><code>base_global_planner_params</code>ï¼šå…¨å±€è·¯å¾„è§„åˆ’å™¨å‚æ•°é…ç½®</li>
</ol>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-11-1"><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="nt">GlobalPlanner</span><span class="p">:</span>
</span><span id="__span-11-2"><a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a><span class="w">  </span><span class="nt">old_navfn_behavior</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
</span><span id="__span-11-3"><a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a><span class="w">  </span><span class="nt">use_quadratic</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</span><span id="__span-11-4"><a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a><span class="w">  </span><span class="nt">use_dijkstra</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</span><span id="__span-11-5"><a id="__codelineno-11-5" name="__codelineno-11-5" href="#__codelineno-11-5"></a><span class="w">  </span><span class="nt">use_grid_path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
</span><span id="__span-11-6"><a id="__codelineno-11-6" name="__codelineno-11-6" href="#__codelineno-11-6"></a>
</span><span id="__span-11-7"><a id="__codelineno-11-7" name="__codelineno-11-7" href="#__codelineno-11-7"></a><span class="w">  </span><span class="nt">allow_unknown</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</span><span id="__span-11-8"><a id="__codelineno-11-8" name="__codelineno-11-8" href="#__codelineno-11-8"></a>
</span><span id="__span-11-9"><a id="__codelineno-11-9" name="__codelineno-11-9" href="#__codelineno-11-9"></a><span class="w">  </span><span class="nt">planner_window_x</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.0</span>
</span><span id="__span-11-10"><a id="__codelineno-11-10" name="__codelineno-11-10" href="#__codelineno-11-10"></a><span class="w">  </span><span class="nt">planner_window_y</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.0</span>
</span><span id="__span-11-11"><a id="__codelineno-11-11" name="__codelineno-11-11" href="#__codelineno-11-11"></a><span class="w">  </span><span class="nt">default_tolerance</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.0</span><span class="w">  </span>
</span></code></pre></div>
<ol>
<li><code>teb_local_planner_params.yaml</code>ï¼šå±€éƒ¨è·¯å¾„è§„åˆ’å™¨å‚æ•°é…ç½®</li>
</ol>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-12-1"><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a><span class="nt">TebLocalPlannerROS</span><span class="p">:</span>
</span><span id="__span-12-2"><a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a>
</span><span id="__span-12-3"><a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a><span class="w"> </span><span class="nt">odom_topic</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">odom</span>
</span><span id="__span-12-4"><a id="__codelineno-12-4" name="__codelineno-12-4" href="#__codelineno-12-4"></a><span class="w"> </span><span class="nt">map_frame</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/odom</span>
</span><span id="__span-12-5"><a id="__codelineno-12-5" name="__codelineno-12-5" href="#__codelineno-12-5"></a>
</span><span id="__span-12-6"><a id="__codelineno-12-6" name="__codelineno-12-6" href="#__codelineno-12-6"></a><span class="w"> </span><span class="c1"># Trajectory</span>
</span><span id="__span-12-7"><a id="__codelineno-12-7" name="__codelineno-12-7" href="#__codelineno-12-7"></a>
</span><span id="__span-12-8"><a id="__codelineno-12-8" name="__codelineno-12-8" href="#__codelineno-12-8"></a><span class="w"> </span><span class="nt">teb_autosize</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">True</span>
</span><span id="__span-12-9"><a id="__codelineno-12-9" name="__codelineno-12-9" href="#__codelineno-12-9"></a><span class="w"> </span><span class="nt">dt_ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.45</span>
</span><span id="__span-12-10"><a id="__codelineno-12-10" name="__codelineno-12-10" href="#__codelineno-12-10"></a><span class="w"> </span><span class="nt">dt_hysteresis</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.1</span>
</span><span id="__span-12-11"><a id="__codelineno-12-11" name="__codelineno-12-11" href="#__codelineno-12-11"></a><span class="w"> </span><span class="nt">global_plan_overwrite_orientation</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">True</span>
</span><span id="__span-12-12"><a id="__codelineno-12-12" name="__codelineno-12-12" href="#__codelineno-12-12"></a><span class="w"> </span><span class="nt">max_global_plan_lookahead_dist</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3.0</span>
</span><span id="__span-12-13"><a id="__codelineno-12-13" name="__codelineno-12-13" href="#__codelineno-12-13"></a><span class="w"> </span><span class="nt">feasibility_check_no_poses</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5</span>
</span><span id="__span-12-14"><a id="__codelineno-12-14" name="__codelineno-12-14" href="#__codelineno-12-14"></a>
</span><span id="__span-12-15"><a id="__codelineno-12-15" name="__codelineno-12-15" href="#__codelineno-12-15"></a><span class="w"> </span><span class="c1"># Robot</span>
</span><span id="__span-12-16"><a id="__codelineno-12-16" name="__codelineno-12-16" href="#__codelineno-12-16"></a>
</span><span id="__span-12-17"><a id="__codelineno-12-17" name="__codelineno-12-17" href="#__codelineno-12-17"></a><span class="w"> </span><span class="nt">max_vel_x</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.4</span>
</span><span id="__span-12-18"><a id="__codelineno-12-18" name="__codelineno-12-18" href="#__codelineno-12-18"></a><span class="w"> </span><span class="nt">max_vel_x_backwards</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.15</span>
</span><span id="__span-12-19"><a id="__codelineno-12-19" name="__codelineno-12-19" href="#__codelineno-12-19"></a><span class="w"> </span><span class="nt">max_vel_theta</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1.0</span>
</span><span id="__span-12-20"><a id="__codelineno-12-20" name="__codelineno-12-20" href="#__codelineno-12-20"></a><span class="w"> </span><span class="nt">acc_lim_x</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.3</span>
</span><span id="__span-12-21"><a id="__codelineno-12-21" name="__codelineno-12-21" href="#__codelineno-12-21"></a><span class="w"> </span><span class="nt">acc_lim_theta</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.3</span>
</span><span id="__span-12-22"><a id="__codelineno-12-22" name="__codelineno-12-22" href="#__codelineno-12-22"></a><span class="w"> </span><span class="nt">min_turning_radius</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span>
</span><span id="__span-12-23"><a id="__codelineno-12-23" name="__codelineno-12-23" href="#__codelineno-12-23"></a><span class="w"> </span><span class="nt">footprint_model</span><span class="p">:</span><span class="w"> </span><span class="c1"># types: &quot;point&quot;, &quot;circular&quot;, &quot;two_circles&quot;, &quot;line&quot;, &quot;polygon&quot;</span>
</span><span id="__span-12-24"><a id="__codelineno-12-24" name="__codelineno-12-24" href="#__codelineno-12-24"></a><span class="w">   </span><span class="nt">radius</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.23</span><span class="w"> </span><span class="c1"># for type &quot;circular&quot;</span>
</span><span id="__span-12-25"><a id="__codelineno-12-25" name="__codelineno-12-25" href="#__codelineno-12-25"></a>
</span><span id="__span-12-26"><a id="__codelineno-12-26" name="__codelineno-12-26" href="#__codelineno-12-26"></a><span class="w"> </span><span class="c1"># GoalTolerance</span>
</span><span id="__span-12-27"><a id="__codelineno-12-27" name="__codelineno-12-27" href="#__codelineno-12-27"></a>
</span><span id="__span-12-28"><a id="__codelineno-12-28" name="__codelineno-12-28" href="#__codelineno-12-28"></a><span class="w"> </span><span class="nt">xy_goal_tolerance</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.10</span>
</span><span id="__span-12-29"><a id="__codelineno-12-29" name="__codelineno-12-29" href="#__codelineno-12-29"></a><span class="w"> </span><span class="nt">yaw_goal_tolerance</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.2</span>
</span><span id="__span-12-30"><a id="__codelineno-12-30" name="__codelineno-12-30" href="#__codelineno-12-30"></a><span class="w"> </span><span class="nt">free_goal_vel</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">False</span>
</span><span id="__span-12-31"><a id="__codelineno-12-31" name="__codelineno-12-31" href="#__codelineno-12-31"></a>
</span><span id="__span-12-32"><a id="__codelineno-12-32" name="__codelineno-12-32" href="#__codelineno-12-32"></a><span class="w"> </span><span class="c1"># Obstacles</span>
</span><span id="__span-12-33"><a id="__codelineno-12-33" name="__codelineno-12-33" href="#__codelineno-12-33"></a>
</span><span id="__span-12-34"><a id="__codelineno-12-34" name="__codelineno-12-34" href="#__codelineno-12-34"></a><span class="w"> </span><span class="nt">min_obstacle_dist</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.3</span>
</span><span id="__span-12-35"><a id="__codelineno-12-35" name="__codelineno-12-35" href="#__codelineno-12-35"></a><span class="w"> </span><span class="nt">include_costmap_obstacles</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">True</span>
</span><span id="__span-12-36"><a id="__codelineno-12-36" name="__codelineno-12-36" href="#__codelineno-12-36"></a><span class="w"> </span><span class="nt">costmap_obstacles_behind_robot_dist</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1.0</span>
</span><span id="__span-12-37"><a id="__codelineno-12-37" name="__codelineno-12-37" href="#__codelineno-12-37"></a><span class="w"> </span><span class="nt">obstacle_poses_affected</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">7</span>
</span><span id="__span-12-38"><a id="__codelineno-12-38" name="__codelineno-12-38" href="#__codelineno-12-38"></a><span class="w"> </span><span class="nt">costmap_converter_plugin</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&quot;</span>
</span><span id="__span-12-39"><a id="__codelineno-12-39" name="__codelineno-12-39" href="#__codelineno-12-39"></a><span class="w"> </span><span class="nt">costmap_converter_spin_thread</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">True</span>
</span><span id="__span-12-40"><a id="__codelineno-12-40" name="__codelineno-12-40" href="#__codelineno-12-40"></a><span class="w"> </span><span class="nt">costmap_converter_rate</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5</span>
</span><span id="__span-12-41"><a id="__codelineno-12-41" name="__codelineno-12-41" href="#__codelineno-12-41"></a>
</span><span id="__span-12-42"><a id="__codelineno-12-42" name="__codelineno-12-42" href="#__codelineno-12-42"></a><span class="w"> </span><span class="c1"># Optimization</span>
</span><span id="__span-12-43"><a id="__codelineno-12-43" name="__codelineno-12-43" href="#__codelineno-12-43"></a>
</span><span id="__span-12-44"><a id="__codelineno-12-44" name="__codelineno-12-44" href="#__codelineno-12-44"></a><span class="w"> </span><span class="nt">no_inner_iterations</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5</span>
</span><span id="__span-12-45"><a id="__codelineno-12-45" name="__codelineno-12-45" href="#__codelineno-12-45"></a><span class="w"> </span><span class="nt">no_outer_iterations</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">4</span>
</span><span id="__span-12-46"><a id="__codelineno-12-46" name="__codelineno-12-46" href="#__codelineno-12-46"></a><span class="w"> </span><span class="nt">optimization_activate</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">True</span>
</span><span id="__span-12-47"><a id="__codelineno-12-47" name="__codelineno-12-47" href="#__codelineno-12-47"></a><span class="w"> </span><span class="nt">optimization_verbose</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">False</span>
</span><span id="__span-12-48"><a id="__codelineno-12-48" name="__codelineno-12-48" href="#__codelineno-12-48"></a><span class="w"> </span><span class="nt">penalty_epsilon</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.1</span>
</span><span id="__span-12-49"><a id="__codelineno-12-49" name="__codelineno-12-49" href="#__codelineno-12-49"></a><span class="w"> </span><span class="nt">weight_max_vel_x</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
</span><span id="__span-12-50"><a id="__codelineno-12-50" name="__codelineno-12-50" href="#__codelineno-12-50"></a><span class="w"> </span><span class="nt">weight_max_vel_theta</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
</span><span id="__span-12-51"><a id="__codelineno-12-51" name="__codelineno-12-51" href="#__codelineno-12-51"></a><span class="w"> </span><span class="nt">weight_acc_lim_x</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
</span><span id="__span-12-52"><a id="__codelineno-12-52" name="__codelineno-12-52" href="#__codelineno-12-52"></a><span class="w"> </span><span class="nt">weight_acc_lim_theta</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
</span><span id="__span-12-53"><a id="__codelineno-12-53" name="__codelineno-12-53" href="#__codelineno-12-53"></a><span class="w"> </span><span class="nt">weight_kinematics_nh</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1000</span>
</span><span id="__span-12-54"><a id="__codelineno-12-54" name="__codelineno-12-54" href="#__codelineno-12-54"></a><span class="w"> </span><span class="nt">weight_kinematics_forward_drive</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">70</span>
</span><span id="__span-12-55"><a id="__codelineno-12-55" name="__codelineno-12-55" href="#__codelineno-12-55"></a><span class="w"> </span><span class="nt">weight_kinematics_turning_radius</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
</span><span id="__span-12-56"><a id="__codelineno-12-56" name="__codelineno-12-56" href="#__codelineno-12-56"></a><span class="w"> </span><span class="nt">weight_optimaltime</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
</span><span id="__span-12-57"><a id="__codelineno-12-57" name="__codelineno-12-57" href="#__codelineno-12-57"></a><span class="w"> </span><span class="nt">weight_obstacle</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">50</span>
</span><span id="__span-12-58"><a id="__codelineno-12-58" name="__codelineno-12-58" href="#__codelineno-12-58"></a><span class="w"> </span><span class="nt">weight_dynamic_obstacle</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10</span><span class="w"> </span><span class="c1"># not in use yet</span>
</span><span id="__span-12-59"><a id="__codelineno-12-59" name="__codelineno-12-59" href="#__codelineno-12-59"></a><span class="w"> </span><span class="nt">selection_alternative_time_cost</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">False</span><span class="w"> </span><span class="c1"># not in use yet</span>
</span><span id="__span-12-60"><a id="__codelineno-12-60" name="__codelineno-12-60" href="#__codelineno-12-60"></a>
</span><span id="__span-12-61"><a id="__codelineno-12-61" name="__codelineno-12-61" href="#__codelineno-12-61"></a><span class="w"> </span><span class="c1"># Homotopy Class Planner</span>
</span><span id="__span-12-62"><a id="__codelineno-12-62" name="__codelineno-12-62" href="#__codelineno-12-62"></a>
</span><span id="__span-12-63"><a id="__codelineno-12-63" name="__codelineno-12-63" href="#__codelineno-12-63"></a><span class="w"> </span><span class="nt">enable_homotopy_class_planning</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">False</span>
</span><span id="__span-12-64"><a id="__codelineno-12-64" name="__codelineno-12-64" href="#__codelineno-12-64"></a><span class="w"> </span><span class="nt">enable_multithreading</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">True</span>
</span><span id="__span-12-65"><a id="__codelineno-12-65" name="__codelineno-12-65" href="#__codelineno-12-65"></a><span class="w"> </span><span class="nt">simple_exploration</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">False</span>
</span><span id="__span-12-66"><a id="__codelineno-12-66" name="__codelineno-12-66" href="#__codelineno-12-66"></a><span class="w"> </span><span class="nt">max_number_classes</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">4</span>
</span><span id="__span-12-67"><a id="__codelineno-12-67" name="__codelineno-12-67" href="#__codelineno-12-67"></a><span class="w"> </span><span class="nt">roadmap_graph_no_samples</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">15</span>
</span><span id="__span-12-68"><a id="__codelineno-12-68" name="__codelineno-12-68" href="#__codelineno-12-68"></a><span class="w"> </span><span class="nt">roadmap_graph_area_width</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5</span>
</span><span id="__span-12-69"><a id="__codelineno-12-69" name="__codelineno-12-69" href="#__codelineno-12-69"></a><span class="w"> </span><span class="nt">h_signature_prescaler</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.5</span>
</span><span id="__span-12-70"><a id="__codelineno-12-70" name="__codelineno-12-70" href="#__codelineno-12-70"></a><span class="w"> </span><span class="nt">h_signature_threshold</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.1</span>
</span><span id="__span-12-71"><a id="__codelineno-12-71" name="__codelineno-12-71" href="#__codelineno-12-71"></a><span class="w"> </span><span class="nt">obstacle_keypoint_offset</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.1</span>
</span><span id="__span-12-72"><a id="__codelineno-12-72" name="__codelineno-12-72" href="#__codelineno-12-72"></a><span class="w"> </span><span class="nt">obstacle_heading_threshold</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.45</span>
</span><span id="__span-12-73"><a id="__codelineno-12-73" name="__codelineno-12-73" href="#__codelineno-12-73"></a><span class="w"> </span><span class="nt">visualize_hc_graph</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">False</span>
</span></code></pre></div>
<h3 id="623">6.2.3 å®æˆ˜ï¼šçœŸå®æœºå™¨äººå¯¼èˆªé…ç½®ä¸è°ƒè¯•</h3>
<p>è¦å®ç°å¯¼èˆªï¼Œéœ€è¦é›†æˆåœ°å›¾æœåŠ¡ã€amclã€move_baseä¸rvizç­‰èŠ‚ç‚¹ï¼š</p>
<p><code>navigation.launch</code></p>
<div class="language-xml highlight"><pre><span></span><code><span id="__span-13-1"><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a><span class="nt">&lt;launch&gt;</span>
</span><span id="__span-13-2"><a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a><span class="w">    </span><span class="cm">&lt;!-- è®¾ç½®åœ°å›¾çš„é…ç½®æ–‡ä»¶ --&gt;</span>
</span><span id="__span-13-3"><a id="__codelineno-13-3" name="__codelineno-13-3" href="#__codelineno-13-3"></a><span class="w">    </span><span class="nt">&lt;arg</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;map&quot;</span><span class="w"> </span><span class="na">default=</span><span class="s">&quot;my_map.yaml&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-13-4"><a id="__codelineno-13-4" name="__codelineno-13-4" href="#__codelineno-13-4"></a><span class="w">    </span><span class="cm">&lt;!-- è¿è¡Œåœ°å›¾æœåŠ¡å™¨ï¼Œå¹¶ä¸”åŠ è½½è®¾ç½®çš„åœ°å›¾--&gt;</span>
</span><span id="__span-13-5"><a id="__codelineno-13-5" name="__codelineno-13-5" href="#__codelineno-13-5"></a><span class="w">    </span><span class="nt">&lt;node</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;map_server&quot;</span><span class="w"> </span><span class="na">pkg=</span><span class="s">&quot;map_server&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;map_server&quot;</span><span class="w"> </span><span class="na">args=</span><span class="s">&quot;$(find åŠŸèƒ½åŒ…)/map/$(arg map)&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-13-6"><a id="__codelineno-13-6" name="__codelineno-13-6" href="#__codelineno-13-6"></a><span class="w">    </span><span class="cm">&lt;!-- å¯åŠ¨AMCLèŠ‚ç‚¹ --&gt;</span>
</span><span id="__span-13-7"><a id="__codelineno-13-7" name="__codelineno-13-7" href="#__codelineno-13-7"></a><span class="w">    </span><span class="nt">&lt;include</span><span class="w"> </span><span class="na">file=</span><span class="s">&quot;$(find åŠŸèƒ½åŒ…)/launch/amcl.launch&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-13-8"><a id="__codelineno-13-8" name="__codelineno-13-8" href="#__codelineno-13-8"></a>
</span><span id="__span-13-9"><a id="__codelineno-13-9" name="__codelineno-13-9" href="#__codelineno-13-9"></a><span class="w">    </span><span class="cm">&lt;!-- è¿è¡Œmove_baseèŠ‚ç‚¹ --&gt;</span>
</span><span id="__span-13-10"><a id="__codelineno-13-10" name="__codelineno-13-10" href="#__codelineno-13-10"></a><span class="w">    </span><span class="nt">&lt;include</span><span class="w"> </span><span class="na">file=</span><span class="s">&quot;$(find åŠŸèƒ½åŒ…)/launch/move_base.launch&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-13-11"><a id="__codelineno-13-11" name="__codelineno-13-11" href="#__codelineno-13-11"></a><span class="w">    </span><span class="cm">&lt;!-- è¿è¡Œrviz --&gt;</span>
</span><span id="__span-13-12"><a id="__codelineno-13-12" name="__codelineno-13-12" href="#__codelineno-13-12"></a><span class="w">    </span><span class="nt">&lt;node</span><span class="w"> </span><span class="na">pkg=</span><span class="s">&quot;rviz&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;rviz&quot;</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;rviz&quot;</span><span class="w"> </span><span class="na">args=</span><span class="s">&quot;-d $(find åŠŸèƒ½åŒ…)/rviz/nav.rviz&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-13-13"><a id="__codelineno-13-13" name="__codelineno-13-13" href="#__codelineno-13-13"></a>
</span><span id="__span-13-14"><a id="__codelineno-13-14" name="__codelineno-13-14" href="#__codelineno-13-14"></a><span class="w">    </span><span class="nt">&lt;include</span><span class="w"> </span><span class="na">file=</span><span class="s">&quot;$(find vkbot_bringup)/launch/minimal.launch&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-13-15"><a id="__codelineno-13-15" name="__codelineno-13-15" href="#__codelineno-13-15"></a><span class="w">    </span><span class="nt">&lt;include</span><span class="w"> </span><span class="na">file=</span><span class="s">&quot;$(find ydlidar)/launch/ydlidar1_up.launch&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-13-16"><a id="__codelineno-13-16" name="__codelineno-13-16" href="#__codelineno-13-16"></a><span class="w">    </span><span class="nt">&lt;include</span><span class="w"> </span><span class="na">file=</span><span class="s">&quot;$(find vkbot_navigation)/launch/velocity_smoother.launch.xml&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-13-17"><a id="__codelineno-13-17" name="__codelineno-13-17" href="#__codelineno-13-17"></a><span class="w">    </span><span class="nt">&lt;include</span><span class="w"> </span><span class="na">file=</span><span class="s">&quot;$(find vkbot_navigation)/launch/safety_controller.launch.xml&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-13-18"><a id="__codelineno-13-18" name="__codelineno-13-18" href="#__codelineno-13-18"></a>
</span><span id="__span-13-19"><a id="__codelineno-13-19" name="__codelineno-13-19" href="#__codelineno-13-19"></a><span class="w">    </span><span class="nt">&lt;node</span><span class="w"> </span><span class="na">pkg=</span><span class="s">&quot;joint_state_publisher&quot;</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;joint_state_publisher&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;joint_state_publisher&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-13-20"><a id="__codelineno-13-20" name="__codelineno-13-20" href="#__codelineno-13-20"></a><span class="w">    </span><span class="nt">&lt;node</span><span class="w"> </span><span class="na">pkg=</span><span class="s">&quot;robot_state_publisher&quot;</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;robot_state_publisher&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;robot_state_publisher&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-13-21"><a id="__codelineno-13-21" name="__codelineno-13-21" href="#__codelineno-13-21"></a><span class="nt">&lt;/launch&gt;</span>
</span></code></pre></div>
<p><strong>è¿è¡Œ</strong></p>
<ol>
<li>
<p>æ·»åŠ RVIZæ’ä»¶ï¼ˆå¯ä¿å­˜é…ç½®ï¼ŒåæœŸç›´æ¥å¤ç”¨ï¼‰</p>
</li>
<li>
<p>RobotModelï¼šç”¨äºæ˜¾ç¤ºæœºå™¨äººæ¨¡å‹</p>
</li>
<li>
<p>Mapï¼šç”¨äºæ˜¾ç¤ºåœ°å›¾ã€å…¨å±€ä»£ä»·åœ°å›¾ä»¥åŠæœ¬åœ°ä»£ä»·åœ°å›¾ï¼Œä»£ä»·åœ°å›¾çš„é…ç½®å¦‚ä¸‹å›¾ï¼š</p>
</li>
</ol>
<figure>
<p><img alt="image-20230628154131284" src="../assets/image-20230628154131284.png" /></p>
</figure>
<ul>
<li>PoseArrayï¼šç”¨äºæ˜¾ç¤ºAMCLä½å§¿ä¼°è®¡é›†åˆ</li>
<li>Pathï¼šç”¨äºæ˜¾ç¤ºå…¨å±€è§„åˆ’è·¯å¾„ä¸æœ¬åœ°è§„åˆ’è·¯å¾„ï¼Œé…ç½®å¦‚ä¸‹å›¾ï¼š</li>
</ul>
<figure>
<p><img alt="image-20230628154307243" src="../assets/image-20230628154307243.png" /></p>
</figure>
<ol>
<li>é€šè¿‡RVIZå·¥å…·æ çš„2D Nav Goalè®¾ç½®å¯¼èˆªç›®æ ‡</li>
</ol>
<h4 id="_2">åŠ¨æ€è°ƒå‚</h4>
<p>å‚æ•°æœåŠ¡å™¨çš„æ•°æ®è¢«ä¿®æ”¹æ—¶ï¼Œå¦‚æœèŠ‚ç‚¹ä¸é‡æ–°è®¿é—®ï¼Œé‚£ä¹ˆå°±ä¸èƒ½è·å–ä¿®æ”¹åçš„æ•°æ®ï¼Œä¾‹å¦‚åœ¨ä¿®æ”¹å°æµ·é¾Ÿä»¿çœŸå™¨èƒŒæ™¯é¢œè‰²çš„æ¡ˆä¾‹ä¸­ï¼Œéœ€è¦è°ƒç”¨<code>/clear</code>æœåŠ¡æ‰èƒ½åˆ·æ–°èƒŒæ™¯é¢œè‰²ã€‚è€Œåœ¨ä¸€äº›ç‰¹æ®Šåœºæ™¯ä¸‹ï¼Œè¦æ±‚èƒ½åšåˆ°åŠ¨æ€è·å–å‚æ•°ï¼Œå¦‚å¯¼èˆªå‚æ•°çš„åŠ¨æ€è°ƒè¯•ã€‚</p>
<p>åœ¨ROSä¸­é’ˆå¯¹è¿™ç§åœºæ™¯å·²ç»ç»™å‡ºäº†è§£å†³æ–¹æ¡ˆï¼š<code>dynamic_reconfigure</code>åŠ¨æ€å‚æ•°é…ç½®ã€‚ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å³å¯å¯åŠ¨ï¼š</p>
<p><code>rosrun rqt_reconfigure rqt_reconfigure</code></p>
<h2 id="slam">ç»ƒä¹ â€”â€”å¯¼èˆªä¸SLAMå»ºå›¾</h2>
<p>åœ¨ä»‹ç»SLAMå»ºå›¾æ—¶ï¼Œæˆ‘ä»¬æ˜¯é€šè¿‡é”®ç›˜æ§åˆ¶æœºå™¨äººç§»åŠ¨å®ç°å»ºå›¾çš„ï¼Œè€Œåç»­åˆä»‹ç»äº†æœºå™¨äººçš„è‡ªä¸»å¯¼èˆªï¼Œé‚£ä¹ˆèƒ½ä¸èƒ½å°†ä¸¤è€…ç»“åˆï¼Œå®ç°æœºå™¨äººçš„è‡ªä¸»ç§»åŠ¨å¹¶æ„å»ºåœ°å›¾å‘¢ï¼Ÿ</p>
<p>ç­”æ¡ˆæ˜¯<strong>å¯ä»¥çš„</strong>ã€‚å¹¶ä¸”å®ç°è¿‡ç¨‹è¾ƒä¸ºç®€å•ï¼Œåªéœ€è¦é€šè¿‡launchæ–‡ä»¶é›†æˆSLAMä¸move_baseèŠ‚ç‚¹ï¼Œå³å¯å®ç°ä¸Šè¿°åŠŸèƒ½ã€‚</p>



  



                
              </article>
            </div>
          
          
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
            å›åˆ°é¡µé¢é¡¶éƒ¨
          </button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
        
      
      <nav class="md-footer__inner md-grid" aria-label="é¡µè„š" >
        
          
          <a href="../ROS%E8%BF%9B%E9%98%B6/" class="md-footer__link md-footer__link--prev" aria-label="ä¸Šä¸€é¡µ: ROSè¿›é˜¶" rel="prev">
            <div class="md-footer__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                ä¸Šä¸€é¡µ
              </span>
              <div class="md-ellipsis">
                ROSè¿›é˜¶
              </div>
            </div>
          </a>
        
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2023 VK-Robot
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
      
    
    
    
    <a href="http://www.vk-robot.com/" target="_blank" rel="noopener me" title="å®˜ç½‘" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M433 179.11c0-97.2-63.71-125.7-63.71-125.7-62.52-28.7-228.56-28.4-290.48 0 0 0-63.72 28.5-63.72 125.7 0 115.7-6.6 259.4 105.63 289.1 40.51 10.7 75.32 13 103.33 11.4 50.81-2.8 79.32-18.1 79.32-18.1l-1.7-36.9s-36.31 11.4-77.12 10.1c-40.41-1.4-83-4.4-89.63-54a102.54 102.54 0 0 1-.9-13.9c85.63 20.9 158.65 9.1 178.75 6.7 56.12-6.7 105-41.3 111.23-72.9 9.8-49.8 9-121.5 9-121.5zm-75.12 125.2h-46.63v-114.2c0-49.7-64-51.6-64 6.9v62.5h-46.33V197c0-58.5-64-56.6-64-6.9v114.2H90.19c0-122.1-5.2-147.9 18.41-175 25.9-28.9 79.82-30.8 103.83 6.1l11.6 19.5 11.6-19.5c24.11-37.1 78.12-34.8 103.83-6.1 23.71 27.3 18.4 53 18.4 175z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
      <div class="md-consent" data-md-component="consent" id="__consent" hidden>
        <div class="md-consent__overlay"></div>
        <aside class="md-consent__inner">
          <form class="md-consent__form md-grid md-typeset" name="consent">
            




  


<h4>Cookie consent</h4>
<p>We use cookies to recognize your repeated visits and preferences, as well as to measure the effectiveness of our documentation and whether users find what they're searching for. With your consent, you're helping us to make our documentation better.</p>
<input class="md-toggle" type="checkbox" id="__settings" >
<div class="md-consent__settings">
  <ul class="task-list">
    
  </ul>
</div>
<div class="md-consent__controls">
  
    
      <button class="md-button md-button--primary">åŒæ„</button>
    
    
    
  
    
    
    
      <label class="md-button" for="__settings">ç®¡ç†è®¾å®š</label>
    
  
</div>
          </form>
        </aside>
      </div>
      <script>var consent=__md_get("__consent");if(consent)for(var input of document.forms.consent.elements)input.name&&(input.checked=consent[input.name]||!1);else"file:"!==location.protocol&&setTimeout(function(){document.querySelector("[data-md-component=consent]").hidden=!1},250);var action,form=document.forms.consent;for(action of["submit","reset"])form.addEventListener(action,function(e){if(e.preventDefault(),"reset"===e.type)for(var n of document.forms.consent.elements)n.name&&(n.checked=!1);__md_set("__consent",Object.fromEntries(Array.from(new FormData(form).keys()).map(function(e){return[e,!0]}))),location.hash="",location.reload()})</script>
    
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.instant", "navigation.instant.prefetch", "navigation.tracking", "navigation.sections", "navigation.expand", "navigation.path", "navigation.footer", "navigation.indexes", "navigation.prune", "navigation.top", "content.code.copy", "content.code.select", "content.code.annotate", "toc.follow"], "search": "../assets/javascripts/workers/search.74e28a9f.min.js", "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}}</script>
    
    
      <script src="../assets/javascripts/bundle.220ee61c.min.js"></script>
      
    
  </body>
</html>