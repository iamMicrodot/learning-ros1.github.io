{"config":{"lang":["en"],"separator":"[\\s\\-\uff0c\u3002]+","pipeline":["stemmer"]},"docs":[{"location":"","title":"Homepage","text":"<p>Welcome!!!</p>"},{"location":"ROS%E5%9F%BA%E7%A1%80/","title":"1 Linux\u64cd\u4f5c\u7cfb\u7edf\u57fa\u7840","text":""},{"location":"ROS%E5%9F%BA%E7%A1%80/#11","title":"1.1 \u7b80\u4ecb","text":"<p>Linux\uff0c\u5168\u79f0GNU/Linux\uff0c\u662f\u4e00\u5957\u514d\u8d39\u4f7f\u7528\u548c\u81ea\u7531\u4f20\u64ad\u7684\u7c7bUnix\u64cd\u4f5c\u7cfb\u7edf\uff0c\u662f\u4e00\u4e2a\u591a\u7528\u6237\u3001\u591a\u4efb\u52a1\u3001\u652f\u6301\u591a\u7ebf\u7a0b\u548c\u591aCPU\u7684\u64cd\u4f5c\u7cfb\u7edf\u3002 \u4f34\u968f\u7740\u4e92\u8054\u7f51\u7684\u53d1\u5c55\uff0cLinux\u5f97\u5230\u4e86\u6765\u81ea\u5168\u4e16\u754c\u8f6f\u4ef6\u7231\u597d\u8005\u3001\u7ec4\u7ec7\u3001\u516c\u53f8\u7684\u652f\u6301\u3002\u5b83\u9664\u4e86\u5728\u670d\u52a1\u5668\u65b9\u9762\u4fdd\u6301\u7740\u5f3a\u52b2\u7684\u53d1\u5c55\u52bf\u5934\u4ee5\u5916\uff0c\u5728\u4e2a\u4eba\u7535\u8111\u3001\u5d4c\u5165\u5f0f\u7cfb\u7edf\u4e0a\u90fd\u6709\u7740\u957f\u8db3\u7684\u8fdb\u6b65\u3002\u4f7f\u7528\u8005\u4e0d\u4ec5\u53ef\u4ee5\u76f4\u89c2\u5730\u83b7\u53d6\u8be5\u64cd\u4f5c\u7cfb\u7edf\u7684\u5b9e\u73b0\u673a\u5236\uff0c\u800c\u4e14\u53ef\u4ee5\u6839\u636e\u81ea\u8eab\u7684\u9700\u8981\u6765\u4fee\u6539\u5b8c\u5584Linux\uff0c\u4f7f\u5176\u6700\u5927\u5316\u5730\u9002\u5e94\u7528\u6237\u7684\u9700\u8981\u3002 Linux\u4e0d\u4ec5\u7cfb\u7edf\u6027\u80fd\u7a33\u5b9a\uff0c\u800c\u4e14\u662f\u5f00\u6e90\u8f6f\u4ef6\u3002\u5176\u6838\u5fc3\u9632\u706b\u5899\u7ec4\u4ef6\u6027\u80fd\u9ad8\u6548\u3001\u914d\u7f6e\u7b80\u5355\uff0c\u4fdd\u8bc1\u4e86\u7cfb\u7edf\u7684\u5b89\u5168\u3002\u5728\u5f88\u591a\u4f01\u4e1a\u7f51\u7edc\u4e2d\uff0c\u4e3a\u4e86\u8ffd\u6c42\u901f\u5ea6\u548c\u5b89\u5168\uff0cLinux\u4e0d\u4ec5\u4ec5\u662f\u88ab\u7f51\u7edc\u8fd0\u7ef4\u4eba\u5458\u5f53\u4f5c\u670d\u52a1\u5668\u4f7f\u7528\uff0c\u751a\u81f3\u5f53\u4f5c\u7f51\u7edc\u9632\u706b\u5899\uff0c\u8fd9\u662fLinux\u7684\u4e00\u5927\u4eae\u70b9\u3002 Linux\u5177\u6709\u5f00\u653e\u6e90\u7801\u3001\u6ca1\u6709\u7248\u6743\u3001\u6280\u672f\u793e\u533a\u7528\u6237\u591a\u7b49\u7279\u70b9\uff0c\u5f00\u653e\u6e90\u7801\u4f7f\u5f97\u7528\u6237\u53ef\u4ee5\u81ea\u7531\u88c1\u526a\uff0c\u7075\u6d3b\u6027\u9ad8\uff0c\u529f\u80fd\u5f3a\u5927\uff0c\u6210\u672c\u4f4e\u3002\u5c24\u5176\u7cfb\u7edf\u4e2d\u5185\u5d4c\u7f51\u7edc\u534f\u8bae\u6808\uff0c\u7ecf\u8fc7\u9002\u5f53\u7684\u914d\u7f6e\u5c31\u53ef\u5b9e\u73b0\u8def\u7531\u5668\u7684\u529f\u80fd\u3002\u8fd9\u4e9b\u7279\u70b9\u4f7f\u5f97Linux\u6210\u4e3a\u5f00\u53d1\u8def\u7531\u4ea4\u6362\u8bbe\u5907\u7684\u7406\u60f3\u5f00\u53d1\u5e73\u53f0\u3002</p> <p></p>"},{"location":"ROS%E5%9F%BA%E7%A1%80/#12","title":"1.2 \u4e3b\u8981\u7684\u53d1\u884c\u7248\u672c","text":"Method Description <code>debian</code> <code>redhat</code> <code>gentoo</code> <code>fedora</code> <code>ubuntu</code>"},{"location":"ROS%E5%9F%BA%E7%A1%80/#13-ubuntu","title":"1.3 \u5b89\u88c5Ubuntu","text":""},{"location":"ROS%E5%9F%BA%E7%A1%80/#131","title":"1.3.1 \u5b89\u88c5\u865a\u62df\u673a","text":"<p>1.\u4e0b\u8f7d virtualbox</p> <p>\u8bbf\u95ee\u5b98\u7f51\uff0c\u4e0b\u8f7d\u5b89\u88c5\u5305\uff0c\u5b98\u7f51\u4e0b\u8f7d\u5730\u5740\uff1aVirtualBox</p> <p></p> <p>2.\u5b89\u88c5 virtualbox</p> <p>virtualbox \u5b89\u88c5\u6bd4\u8f83\u7b80\u5355\uff0c\u53cc\u51fb\u4e0b\u8f7d\u597d\u7684\u5b89\u88c5\u6587\u4ef6\uff0c\u4e00\u76f4 \"\u4e0b\u4e00\u6b65\" \u5373\u53ef\u3002\uff08\u53ef\u81ea\u884c\u4fee\u6539\u5b89\u88c5\u8def\u5f84\uff09</p> <p>3.\u6dfb\u52a0\u865a\u62df\u673a</p> <p></p> <p></p> <p></p> <p></p>"},{"location":"ROS%E5%9F%BA%E7%A1%80/#132-ubuntu","title":"1.3.2 \u6dfb\u52a0Ubuntu\u955c\u50cf","text":"<p>\u955c\u50cf\u4e0b\u8f7d\u5730\u5740\uff1aubuntu-releases-18.04.6\u5b89\u88c5\u5305\u4e0b\u8f7d_\u5f00\u6e90\u955c\u50cf\u7ad9-\u963f\u91cc\u4e91 (aliyun.com) \u2014\u2014 ubuntu-18.04.6-desktop-amd64.iso</p> <p></p>"},{"location":"ROS%E5%9F%BA%E7%A1%80/#133-ubuntu","title":"1.3.3 \u5b89\u88c5Ubuntu","text":"<p>\u7b49\u5f85\u5b89\u88c5\u5b8c\u6210\uff0c\u91cd\u542f\u7535\u8111\uff0c\u8fdb\u884c\u8d26\u53f7\u767b\u5f55\u5373\u53ef\u8fdb\u5165Ubuntu\u7cfb\u7edf\u684c\u9762</p>"},{"location":"ROS%E5%9F%BA%E7%A1%80/#14","title":"1.4 \u76ee\u5f55\u7ed3\u6784","text":"<p>Linux\u7684\u64cd\u4f5c\u5927\u90e8\u5206\u90fd\u662f\u76f4\u63a5\u6267\u884c\u547d\u4ee4\uff0c\u6ca1\u6709\u4fbf\u5229\u7684\u53ef\u89c6\u5316\u64cd\u4f5c\u754c\u9762\uff0c\u6240\u4ee5\u6211\u4eec\u5bf9Linux\u7684\u64cd\u4f5c\u5927\u591a\u6570\u65f6\u5019\u90fd\u662f\u901a\u8fc7\u7ec8\u7aef\u7684\u65b9\u5f0f\u4e0e\u7cfb\u7edf\u8fdb\u884c\u4ea4\u4e92\u3002</p> <p>\u7ec8\u7aef\u662f\u7528\u6237\u4e0e\u7cfb\u7edf\u4ea4\u4e92\u4f7f\u7528\u7684\u547d\u4ee4\u884c\u754c\u9762\uff0c\u53ef\u4f7f\u7528\u5feb\u6377\u952e Ctrl+Alt+T \u6253\u5f00</p> <p>Linux\u7684\u6587\u4ef6\u7cfb\u7edf\u662f\u91c7\u7528\u7ea7\u5c42\u5f0f\u7684\u6811\u72b6\u76ee\u5f55\u7ed3\u6784\uff0c\u5728\u6b64\u7ed3\u6784\u4e2d\u7684\u6700\u4e0a\u5c42\u662f\u6839\u76ee\u5f55\u201c/\u201d\uff0c\u7136\u540e\u5728\u6b64\u76ee\u5f55\u4e0b\u518d\u521b\u5efa\u5176\u4ed6\u7684\u76ee\u5f55\u3002\u5728Linux\u4e16\u754c\u91cc\uff0c\u4e00\u5207\u7686\u6587\u4ef6\u3002</p> <p></p> <ul> <li>root\uff1a\u8be5\u76ee\u5f55\u4e3a\u7cfb\u7edf\u7ba1\u7406\u5458\u76ee\u5f55\uff0croot\u662f\u5177\u6709\u8d85\u7ea7\u6743\u9650\u7684\u7528\u6237</li> <li>bin \uff1a\u5b58\u653e\u7cfb\u7edf\u9884\u88c5\u7684\u4e8c\u8fdb\u5236\uff08binary\uff09\u53ef\u6267\u884c\u7a0b\u5e8f\uff0c\u8fd9\u91cc\u5b58\u653e\u7684\u53ef\u6267\u884c\u6587\u4ef6\u53ef\u4ee5\u5728\u7cfb\u7edf\u7684\u4efb\u4f55\u76ee\u5f55\u4e0b\u6267\u884c</li> <li>boot\uff1a\u542f\u52a8\uff08boot\uff09\u65f6\u7528\u5230\u7684\u6838\u5fc3\u914d\u7f6e\u6587\u4ef6</li> <li>dev\uff1a\u8bbe\u5907\uff08device\uff09\u6587\u4ef6</li> <li>etc\uff1a\u5b58\u653e\u7cfb\u7edf\u7ba1\u7406\u6240\u9700\u7684\u914d\u7f6e\u6587\u4ef6\u3001\u542f\u52a8\u811a\u672c\u7b49\uff08etc\uff09</li> <li>home\uff1a\u672c\u5730\u7528\u6237\u4e3b\uff08home\uff09\u76ee\u5f55</li> <li>var\uff1a\u7ecf\u5e38\u53d8\u5316\u7684\uff08variable\uff09\u6587\u4ef6\uff0c\u4f8b\u5982\u65e5\u5fd7\u6216\u6570\u636e\u5e93\u7b49</li> <li>lib\uff1a\u7cfb\u7edf\u5e93\uff08libraries\uff09\u6587\u4ef6\uff0c\u5b58\u653e\u6700\u57fa\u672c\u7684\u52a8\u6001\u94fe\u63a5\u5171\u4eab\u5e93\uff0c\u51e0\u4e4e\u6240\u6709\u7684\u5e94\u7528\u7a0b\u5e8f\u90fd\u8981\u7528\u5230\u8be5\u76ee\u5f55\u4e0b\u7684\u6587\u4ef6</li> <li>usr\uff1a\u5305\u542b\u7edd\u5927\u90e8\u5206\u6240\u6709\u7528\u6237\uff08users\uff09\u90fd\u80fd\u8bbf\u95ee\u7684\u5e94\u7528\u7a0b\u5e8f\u548c\u6587\u4ef6</li> </ul>"},{"location":"ROS%E5%9F%BA%E7%A1%80/#15","title":"1.5 \u5e38\u7528\u547d\u4ee4","text":"<p>\u5e38\u7528\u7684\u7ec8\u7aef\u5de5\u5177terminator\uff0c\u53ef\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u8fdb\u884c\u5b89\u88c5</p> <p><code>sudo apt install terminator</code></p> <p>\u7ec8\u7aef\u542f\u52a8\u5feb\u6377\u952e\uff1aCtrl+Alt+T </p> <ul> <li>pwd\uff1a pwd\uff08Print Working Directory\uff09\u547d\u4ee4\u7528\u4e8e\u663e\u793a\u5f53\u524d\u7684\u5de5\u4f5c\u76ee\u5f55</li> </ul> <pre><code>vkrobot@vkrobot\uff1a~$ pwd\n/home/vkrobot\n</code></pre> <ul> <li>ls\uff1a ls\uff08List\uff09\u547d\u4ee4\u7528\u4e8e\u663e\u793a\u6307\u5b9a\u5de5\u4f5c\u76ee\u5f55\u4e4b\u4e0b\u7684\u5185\u5bb9</li> </ul> <pre><code>vkrobot@vkrobot\uff1a~$ ls --help\n\u7528\u6cd5\uff1als[\u9009\u9879]...[\u6587\u4ef6]...\nList information about the FILES (the current directory by default).\n\n-a, -all  \u4e0d\u9690\u85cf\u4efb\u4f55\u4ee5. \u5f00\u59cb\u7684\u9879\u76ee\n-l        \u4f7f\u7528\u8f83\u957f\u683c\u5f0f\u5217\u51fa\u4fe1\u606f\n...\n\nvkrobot@vkrobot\uff1a~$ ls -al\n</code></pre> <ul> <li>cd\uff1a cd\uff08Change Directory\uff09\u547d\u4ee4\u7528\u4e8e\u5207\u6362\u76ee\u5f55\uff0c\u53d8\u6362\u5de5\u4f5c\u76ee\u5f55\u81f3 dirName\uff0c\u5176\u4e2d dirName \u4e3a\u7edd\u5bf9\u8def\u5f84\u6216\u76f8\u5bf9\u8def\u5f84</li> </ul> <pre><code>vkrobot@vkrobot\uff1a~$ pwd\n/home/vkrobot\nvkrobot@vkrobot\uff1a~$ cd ..\nvkrobot@vkrobot\uff1a~$ pwd\n/home\nvkrobot@vkrobot\uff1a~$ cd /\nvkrobot@vkrobot\uff1a~$ pwd\n/\n</code></pre> <ul> <li>clear\uff1a clear\u547d\u4ee4\u7528\u4e8e\u6e05\u5c4f</li> <li>mkdir\uff1a mkdir\uff08Make Directory\uff09\u547d\u4ee4\u7528\u4e8e\u521b\u5efa\u76ee\u5f55\uff08\u6587\u4ef6\u5939\uff09</li> </ul> <pre><code>vkrobot@vkrobot\uff1a~$ mkdir --help\n\u7528\u6cd5\uff1amkdir [\u9009\u9879]... \u76ee\u5f55...\nCreate the DIRECTORT(ies), if they do not exist.\n</code></pre> <ul> <li>touch\uff1a touch\u547d\u4ee4\u7528\u4e8e\u521b\u5efa\u6587\u4ef6</li> </ul> <pre><code>vkrobot@vkrobot\uff1a~$ touch --help\n\u7528\u6cd5\uff1atouch [\u9009\u9879]... \u6587\u4ef6...\nA FILE argument that dose not exist is creared empty\n</code></pre> <ul> <li>rm\uff1a rm\uff08Remove\uff09\u547d\u4ee4\u7528\u4e8e\u5220\u9664\u76ee\u5f55\uff08\u6587\u4ef6\u5939\uff09\u6216\u6587\u4ef6</li> </ul> <pre><code>vkrobot@vkrobot\uff1a~$ rm --help\n\u7528\u6cd5\uff1arm [\u9009\u9879]... [\u6587\u4ef6]...\nRemove (unlink) the FILE(s).\n\n-r, -R, --recursive  remove directories and their contents recusively\n-d, --dir            remove empty directories\n</code></pre> <ul> <li>chmod\uff1a chmod\u547d\u4ee4\u7528\u4e8e\u53d8\u66f4\u6587\u4ef6\u6216\u76ee\u5f55\u7684\u6743\u9650\u3002\u5728Linux\u4e2d\uff0c\u6587\u4ef6\u6216\u76ee\u5f55\u6743\u9650\u7684\u63a7\u5236\u5206\u522b\u4ee5\u8bfb\u53d6(r/4)\u3001\u5199\u5165(w/2)\u3001\u6267\u884c(x/1)\u4e09\u79cd\u6743\u9650\u6765\u533a\u5206</li> </ul> <pre><code>vkrobot@vkrobot\uff1a~$ chmod --help\n\u7528\u6cd5\uff1achmod [\u9009\u9879]... \u6a21\u5f0f[,\u6a21\u5f0f]... \u6587\u4ef6...\nChange the mode of each FILE to MODE.\n</code></pre> <ul> <li>sudo\uff1a sudo\u662f\u5141\u8bb8\u7cfb\u7edf\u7ba1\u7406\u5458\u8ba9\u666e\u901a\u7528\u6237\u6267\u884c\u4e00\u4e9b\u6216\u5168\u90e8\u7684root\u547d\u4ee4\u7684\u4e00\u4e2a\u5de5\u5177\uff0c\u4e5f\u5c31\u662f\u6682\u65f6\u63d0\u5347\u666e\u901a\u7528\u6237\u7684\u6743\u9650</li> </ul>"},{"location":"ROS%E5%9F%BA%E7%A1%80/#2-ros","title":"2 ROS\u7f16\u7a0b\u57fa\u7840","text":""},{"location":"ROS%E5%9F%BA%E7%A1%80/#21-ros","title":"2.1 ROS\u662f\u4ec0\u4e48","text":"<p>ROS (Robot Operating System, \u673a\u5668\u4eba\u64cd\u4f5c\u7cfb\u7edf) \u63d0\u4f9b\u4e00\u7cfb\u5217\u7a0b\u5e8f\u5e93\u548c\u5de5\u5177\u4ee5\u5e2e\u52a9\u8f6f\u4ef6\u5f00\u53d1\u8005\u521b\u5efa\u673a\u5668\u4eba\u5e94\u7528\u8f6f\u4ef6\u3002\u5b83\u63d0\u4f9b\u4e86\u786c\u4ef6\u62bd\u8c61\u3001\u8bbe\u5907\u9a71\u52a8\u3001\u51fd\u6570\u5e93\u3001\u53ef\u89c6\u5316\u5de5\u5177\u3001\u6d88\u606f\u4f20\u9012\u548c\u8f6f\u4ef6\u5305\u7ba1\u7406\u7b49\u8bf8\u591a\u529f\u80fd\u3002ROS\u9075\u5faaBSD\u5f00\u6e90\u8bb8\u53ef\u534f\u8bae\u3002</p> <p></p> <p>ROS\u8bbe\u8ba1\u8005\u5c06ROS\u8868\u8ff0\u4e3a\u201cROS = Plumbing + Tools + Capabilities + Ecosystem\u201d\uff0c\u5373ROS\u662f\u901a\u8baf\u673a\u5236\u3001\u5de5\u5177\u8f6f\u4ef6\u5305\u3001\u673a\u5668\u4eba\u9ad8\u5c42\u6280\u80fd\u4ee5\u53ca\u673a\u5668\u4eba\u751f\u6001\u7cfb\u7edf\u7684\u96c6\u5408\u4f53</p> <p></p>"},{"location":"ROS%E5%9F%BA%E7%A1%80/#22-ros","title":"2.2 ROS\u5b89\u88c5","text":"<p>ROS\u4e0eUbuntu\u7248\u672c\u5bf9\u5e94\u5173\u7cfb</p> ROS\u7248\u672c\u540d\u79f0 LOGO \u53d1\u5e03\u65f6\u95f4 \u652f\u6301\u7684\u64cd\u4f5c\u7cfb\u7edf ROS Noetic Ninjemys 2020/05/23 Ubuntu 20.04 ROS Melodic Morenia 2018/05/23 Ubuntu 18.04 ROS Lunar Loggerhead 2017/05/23 Ubuntu 16.04 ROS Kinetic Kame 2016/05/23 Ubuntu 15.10 ROS Jade Turtle 2015/05/23 Ubuntu 14.04 ...... ...... ...... ...... <ol> <li>\u914d\u7f6eUbuntu\u8f6f\u4ef6\u4ed3\u5e93</li> </ol> <p>\u6253\u5f00\u201c\u8f6f\u4ef6\u548c\u66f4\u65b0\u201d\u914d\u7f6e\u4f60\u7684Ubuntu\u8f6f\u4ef6\u4ed3\u5e93\uff08repositories\uff09\u4ee5\u5141\u8bb8\u4f7f\u7528 \u201crestricted\u201d\u3001\u201cuniverse\u201d \u548c \u201cmultiverse\u201d \u5b58\u50a8\u5e93\u3002</p> <p></p> <ol> <li>\u8bbe\u7f6esources.list</li> </ol> <pre><code>vkrobot@vkrobot\uff1a~$ sudo sh -c '. /etc/lsb-release &amp;&amp; echo \"deb http://mirrors.tuna.tsinghua.edu.cn/ros/ubuntu/ `lsb_release -cs` main\" &gt; /etc/apt/sources.list.d/ros-latest.list'\n</code></pre> <ol> <li>\u8bbe\u7f6e\u5bc6\u94a5</li> </ol> <pre><code>vkrobot@vkrobot\uff1a~$ sudo apt-key adv --keyserver 'hkp\uff1a//keyserver.ubuntu.com\uff1a80' --recv-key C1CF6E31E6BADE8868B172B4F42ED6FBAB17C654\n</code></pre> <ol> <li>\u5b89\u88c5</li> </ol> <pre><code>vkrobot@vkrobot\uff1a~$ sudo apt update\nvkrobot@vkrobot\uff1a~$ sudo apt install ros-melodic-desktop-full\n</code></pre> <ol> <li>\u521d\u59cb\u5316rosdep</li> </ol> <pre><code>vkrobot@vkrobot\uff1a~$ sudo apt-get install python3-pip\nvkrobot@vkrobot\uff1a~$ sudo pip3 install rosdepc\nvkrobot@vkrobot\uff1a~$ sudo rosdepc init\nvkrobot@vkrobot\uff1a~$ rosdepc update\nvkrobot@vkrobot\uff1a~$ sudo chmod -R 777 ~/.ros/\n</code></pre> <ol> <li>\u8bbe\u7f6e\u73af\u5883</li> </ol> <pre><code>vkrobot@vkrobot\uff1a~$ echo \"source /opt/ros/melodic/setup.bash\" &gt;&gt; ~/.bashrc\nvkrobot@vkrobot\uff1a~$ source ~/.bashrc\n</code></pre> <ol> <li>\u6784\u5efa\u4f9d\u8d56</li> </ol> <pre><code>vkrobot@vkrobot\uff1a~$ sudo apt-get install python-rosinstall python-rosinstall-generator python-wstool build-essential\n</code></pre> <p>\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u68c0\u67e5ROS\u662f\u5426\u5b89\u88c5\u6210\u529f\uff1a</p> <p><code>roscore</code></p>"},{"location":"ROS%E5%9F%BA%E7%A1%80/#23-ros","title":"2.3 ROS\u7684\u6838\u5fc3\u6982\u5ff5","text":"<p>\u8ba1\u7b97\u56fe\uff08Computation Graph\uff09\u662f\u4e00\u4e2a\u7531ROS\u8fdb\u7a0b\u7ec4\u6210\u7684\u70b9\u5bf9\u70b9\u7f51\u7edc\uff0c\u5b83\u4eec\u80fd\u591f\u5171\u540c\u5904\u7406\u6570\u636e\u3002ROS\u7684\u57fa\u672c\u8ba1\u7b97\u56fe\u6982\u5ff5\u6709\u8282\u70b9\uff08Nodes\uff09\u3001\u4e3b\u8282\u70b9\uff08Master\uff09\u3001\u53c2\u6570\u670d\u52a1\u5668\uff08Parameter Server\uff09\u3001\u6d88\u606f\uff08Messages\uff09\u3001\u670d\u52a1\uff08Services\uff09\u3001\u8bdd\u9898\uff08Topics\uff09\u548c\u888b\uff08Bags\uff09\uff0c\u5b83\u4eec\u90fd\u4ee5\u4e0d\u540c\u7684\u65b9\u5f0f\u5411\u56fe\uff08Graph\uff09\u63d0\u4f9b\u6570\u636e\u3002</p> <ul> <li>\u8282\u70b9\uff08Nodes\uff09\uff1a\u8282\u70b9\u662f\u4e00\u4e2a\u53ef\u6267\u884c\u6587\u4ef6\uff0c\u5b83\u901a\u8fc7ROS\u6765\u4e0e\u5176\u4ed6\u8282\u70b9\u8fdb\u884c\u901a\u4fe1\u3002</li> <li>\u4e3b\u8282\u70b9\uff08Master\uff09\uff1aROS\u7684\u547d\u540d\u670d\u52a1\uff0c\u4f8b\u5982\u5e2e\u52a9\u8282\u70b9\u53d1\u73b0\u5f7c\u6b64\u3002</li> <li>\u6d88\u606f\uff08Messages\uff09\uff1a\u8ba2\u9605\u6216\u53d1\u5e03\u8bdd\u9898\u65f6\u6240\u4f7f\u7528\u7684ROS\u6570\u636e\u7c7b\u578b\u3002</li> <li>\u8bdd\u9898\uff08Topics\uff09\uff1a\u8282\u70b9\u53ef\u4ee5\u5c06\u6d88\u606f\u53d1\u5e03\u5230\u8bdd\u9898\uff0c\u6216\u901a\u8fc7\u8ba2\u9605\u8bdd\u9898\u6765\u63a5\u6536\u6d88\u606f\u3002</li> </ul> <p>\u4f7f\u7528 <code>rqt_graph</code> \u547d\u4ee4\u80fd\u591f\u521b\u5efa\u4e00\u4e2a\u663e\u793a\u5f53\u524d\u7cfb\u7edfROS\u7a0b\u5e8f\u8fd0\u884c\u60c5\u51b5\u7684\u52a8\u6001\u56fe\u5f62\uff0c\u663e\u793a\u4e0d\u540c\u8282\u70b9\u4e4b\u95f4\u7684\u5173\u7cfb</p> <p></p>"},{"location":"ROS%E5%9F%BA%E7%A1%80/#231","title":"2.3.1 \u8282\u70b9\u4e0e\u4e3b\u8282\u70b9","text":""},{"location":"ROS%E5%9F%BA%E7%A1%80/#nodes","title":"\u8282\u70b9\uff08Nodes\uff09","text":"<p>\u8282\u70b9\u5b9e\u9645\u4e0a\u53ea\u4e0d\u8fc7\u662fROS\u8f6f\u4ef6\u5305\u4e2d\u7684\u4e00\u4e2a\u53ef\u6267\u884c\u6587\u4ef6\u3002ROS\u8282\u70b9\u4f7f\u7528ROS\u5ba2\u6237\u7aef\u5e93\u4e0e\u5176\u4ed6\u8282\u70b9\u901a\u4fe1\u3002\u8282\u70b9\u53ef\u4ee5\u53d1\u5e03\u6216\u8ba2\u9605\u8bdd\u9898\uff0c\u4e5f\u53ef\u4ee5\u63d0\u4f9b\u6216\u4f7f\u7528\u670d\u52a1\u3002</p> <p>\u7279\u70b9\uff1a</p> <ul> <li>\u4e0d\u540c\u8282\u70b9\u53ef\u4f7f\u7528\u4e0d\u540c\u8bed\u8a00\u7f16\u5199\uff0c\u5206\u5e03\u5f0f\u90e8\u7f72\u5728\u4e0d\u540c\u7684\u4e3b\u673a\u4e0a</li> <li>\u8282\u70b9\u5728\u7cfb\u7edf\u4e2d\u7684\u540d\u79f0\u5fc5\u987b\u662f\u552f\u4e00\u7684</li> </ul> <p>\u4f8b\u5982\uff0c\u54b1\u4eec\u6709\u4e00\u4e2a\u673a\u5668\u4eba\uff0c\u548c\u4e00\u4e2a\u9065\u63a7\u5668\uff0c\u90a3\u4e48\u8fd9\u4e2a\u673a\u5668\u4eba\u548c\u9065\u63a7\u5668\u5f00\u59cb\u5de5\u4f5c\u540e\uff0c\u5c31\u662f\u4e24\u4e2a\u8282\u70b9\u3002\u9065\u63a7\u5668\u8d77\u5230\u4e86\u4e0b\u8fbe\u6307\u4ee4\u7684\u4f5c\u7528\uff1b\u673a\u5668\u4eba\u8d1f\u8d23\u76d1\u542c\u9065\u63a7\u5668\u4e0b\u8fbe\u7684\u6307\u4ee4\uff0c\u5b8c\u6210\u76f8\u5e94\u52a8\u4f5c\u3002\u4ece\u8fd9\u91cc\u6211\u4eec\u53ef\u4ee5\u770b\u51fa\uff0c\u8282\u70b9\u662f\u4e00\u4e2a\u80fd\u6267\u884c\u7279\u5b9a\u5de5\u4f5c\u4efb \u52a1\u7684\u5de5\u4f5c\u5355\u5143\uff0c\u5e76\u4e14\u80fd\u591f\u76f8\u4e92\u901a\u4fe1\uff0c\u4ece\u800c\u5b9e\u73b0\u4e00\u4e2a\u673a\u5668\u4eba\u7cfb\u7edf\u6574\u4f53\u7684\u529f\u80fd\u3002\u5728\u8fd9\u91cc\u6211\u4eec\u628a\u9065\u63a7\u5668\u548c\u673a\u5668\u4eba\u7b80\u5355\u5b9a\u4e49\u4e3a\u4e24\u4e2a\u8282\u70b9\uff0c\u5b9e\u9645\u4e0a\u5728\u673a\u5668\u4eba\u4e2d\u6839\u636e\u63a7\u5236\u5668\u3001\u4f20\u611f\u5668\u3001\u6267\u884c\u673a\u6784\u7b49\u4e0d\u540c\u7ec4\u6210\u6a21\u5757\uff0c\u8fd8\u53ef\u4ee5\u5c06\u5176\u8fdb\u4e00\u6b65\u7ec6\u5206\u4e3a\u66f4\u591a\u7684\u8282\u70b9\uff0c\u8fd9\u4e2a\u662f\u6839\u636e\u7528\u6237\u7f16\u5199\u7684\u7a0b\u5e8f\u6765\u5b9a\u4e49\u7684\u3002\uff09</p> <p>\u5ba2\u6237\u7aef\u5e93\uff1aROS\u5ba2\u6237\u7aef\u5e93\u53ef\u4ee5\u8ba9\u7528\u4e0d\u540c\u7f16\u7a0b\u8bed\u8a00\u7f16\u5199\u7684\u8282\u70b9\u8fdb\u884c\u76f8\u4e92\u901a\u4fe1</p> <ul> <li>rospy\uff1a Python\u5ba2\u6237\u7aef\u5e93</li> <li>roscpp\uff1a C++\u5ba2\u6237\u7aef\u5e93</li> </ul>"},{"location":"ROS%E5%9F%BA%E7%A1%80/#master","title":"\u4e3b\u8282\u70b9\uff08Master\uff09","text":"<p><code>roscore</code>\u662f\u4f60\u5728\u8fd0\u884c\u6240\u6709ROS\u7a0b\u5e8f\u524d\u9996\u5148\u8981\u8fd0\u884c\u7684\u547d\u4ee4</p> <pre><code>vkrobot@vkrobot\uff1a~$ roscore\n</code></pre> <p>\u7136\u540e\u4f60\u4f1a\u770b\u5230\u7c7b\u4f3c\u4e0b\u9762\u7684\u8f93\u51fa\u4fe1\u606f\uff1a</p> <pre><code>... logging to ~/.ros/log/9cf88ce4-b14d-11df-8a75-00251148e8cf/roslaunch-machine_name-13039.log\nChecking log directory for disk usage. This may take awhile.\nPress Ctrl-C to interrupt\nDone checking log file disk usage. Usage is &lt;1GB.\n\nstarted roslaunch server http://machine_name\uff1a33919/\nros_comm version 1.4.7\n\nSUMMARY\n\nPARAMETERS\n * /rosdistro\uff1a melodic\n * /rosversion\uff1a 1.14.13\n\nNODES\n\nauto-starting new master\nprocess[master]\uff1a started with pid [13054]\nROS_MASTER_URI=http://machine_name\uff1a11311/\n\nsetting /run_id to 9cf88ce4-b14d-11df-8a75-00251148e8cf\nprocess[rosout-1]\uff1a started with pid [13067]\nstarted core service [/rosout]\n</code></pre>"},{"location":"ROS%E5%9F%BA%E7%A1%80/#rosnode","title":"\u4f7f\u7528 rosnode","text":"<p><code>rosnode</code>\u663e\u793a\u5f53\u524d\u6b63\u5728\u8fd0\u884c\u7684ROS\u8282\u70b9\u4fe1\u606f\u3002<code>rosnode list</code>\u547d\u4ee4\u4f1a\u5217\u51fa\u8fd9\u4e9b\u6d3b\u52a8\u7684\u8282\u70b9\uff1a</p> <pre><code>vkrobot@vkrobot\uff1a~$ rosnode list\n/rosout\n</code></pre> <p>\u8fd9\u8868\u793a\u5f53\u524d\u53ea\u6709\u4e00\u4e2a\u8282\u70b9\u5728\u8fd0\u884c\uff1a rosout\u3002\u56e0\u4e3a\u8fd9\u4e2a\u8282\u70b9\u7528\u4e8e\u6536\u96c6\u548c\u8bb0\u5f55\u8282\u70b9\u7684\u8c03\u8bd5\u8f93\u51fa\uff0c\u6240\u4ee5\u5b83\u603b\u662f\u5728\u8fd0\u884c\u7684\u3002</p> <p><code>rosnode info</code>\u547d\u4ee4\u53ef\u4ee5\u8fd4\u56de\u67d0\u4e2a\u6307\u5b9a\u8282\u70b9\u7684\u4fe1\u606f</p> <pre><code>vkrobot@vkrobot\uff1a~$ rosnode info /rosout\n--------------------------------------------------------------------\nNode [/rosout]\nPublications\uff1a\n * /rosout_agg [rosgraph_msgs/Log]\nSubscriptions\uff1a\n * /rosout [unknown type]\nServices\uff1a\n * /rosout/get_loggers\n * /rosout/set_logger_level\n\ncontacting node http://machine_name\uff1a54614/ ...\nPid\uff1a 5092\n</code></pre>"},{"location":"ROS%E5%9F%BA%E7%A1%80/#rosrun","title":"\u4f7f\u7528 rosrun","text":"<p>rosrun\u53ef\u4ee5\u8ba9\u4f60\u7528\u5305\u540d\u76f4\u63a5\u8fd0\u884c\u8f6f\u4ef6\u5305\u5185\u7684\u8282\u70b9\uff08\u800c\u4e0d\u9700\u8981\u77e5\u9053\u5305\u7684\u8def\u5f84\uff09</p> <p>\u7528\u6cd5\uff1a</p> <p><code>rosrun [package_name] [node_name]</code></p> <p>\u5728\u4e00\u4e2a\u65b0\u7ec8\u7aef\u4e2d\uff1a</p> <pre><code>vkrobot@vkrobot\uff1a~$ rosrun turtlesim turtlesim_node\n</code></pre> <p></p> <p>\u6ce8\u610f\uff1a\u6b64\u5904\u7684\u4e4c\u9f9f\u53ef\u80fd\u548c\u4f60turtlesim\u7a97\u53e3\u4e0a\u7684\u4e0d\u540c\u3002</p>"},{"location":"ROS%E5%9F%BA%E7%A1%80/#_1","title":"\u590d\u4e60","text":"<p>\u672c\u8282\u6240\u6d89\u53ca\u7684\u5185\u5bb9\uff1a</p> <ul> <li>roscore = ros + core\uff1a\u4e3b\u8282\u70b9\uff08\u4e3aROS\u63d0\u4f9b\u547d\u540d\u670d\u52a1\uff09</li> <li>rosnode = ros + node\uff1a\u83b7\u53d6\u8282\u70b9\u4fe1\u606f\u7684ROS\u5de5\u5177</li> <li>rosrun = ros + run\uff1a\u8fd0\u884c\u7ed9\u5b9a\u7684\u8f6f\u4ef6\u5305\u4e2d\u7684\u8282\u70b9</li> </ul>"},{"location":"ROS%E5%9F%BA%E7%A1%80/#232","title":"2.3.2 \u8bdd\u9898\u901a\u4fe1","text":"<p>\u9996\u5148\u786e\u4fdd<code>roscore</code>\u4e0e<code>turtlesim</code>\u6b63\u5728\u8fd0\u884c</p> <p>\u6253\u5f00\u4e00\u4e2a\u65b0\u7ec8\u7aef\uff1a</p> <pre><code>vkrobot@vkrobot\uff1a~$ rosrun turtlesim turtle_teleop_key\nReading from keyboard\n---------------------------\nUse arrow keys to move the turtle.\n</code></pre> <p>\u73b0\u5728\u4f60\u53ef\u4ee5\u4f7f\u7528\u952e\u76d8\u4e0a\u7684\u65b9\u5411\u952e\u6765\u63a7\u5236turtle\u8fd0\u52a8\u4e86\u3002\u5982\u679c\u4e0d\u80fd\u63a7\u5236\uff0c\u8bf7\u9009\u4e2dturtle_teleop_key\u7684\u7ec8\u7aef\u7a97\u53e3\u4ee5\u786e\u4fdd\u6309\u952e\u8f93\u5165\u80fd\u591f\u88ab\u6355\u83b7\u3002</p> <p></p> <p>\u6253\u5f00\u4e00\u4e2a\u65b0\u7ec8\u7aef\uff1a</p> <pre><code>vkrobot@vkrobot\uff1a~$ rqt_graph\n</code></pre> <p>\u4f60\u4f1a\u770b\u5230\u4e00\u4e2a\u7a97\u53e3\uff1a</p> <p></p>"},{"location":"ROS%E5%9F%BA%E7%A1%80/#rostopic","title":"\u4f7f\u7528 rostopic","text":"<p><code>rostopic</code>\u547d\u4ee4\u5de5\u5177\u80fd\u8ba9\u4f60\u83b7\u53d6ROS\u8bdd\u9898\u7684\u4fe1\u606f\u3002</p> <p>\u4f60\u53ef\u4ee5\u4f7f\u7528\u5e2e\u52a9\u9009\u9879\u67e5\u770b\u53ef\u7528\u7684<code>rostopic</code>\u7684\u5b50\u547d\u4ee4</p> <pre><code>vkrobot@vkrobot\uff1a~$ rostopic --help\nrostopic is a command-line tool for printing information about ROS Topics.\n\nCommands\uff1a\n        rostopic bw     display bandwidth used by topic\n        rostopic delay  display delay of topic from timestamp in header\n        rostopic echo   print messages to screen\n        rostopic find   find topics by type\nrostopic hz     display publishing rate of topic    rostopic info   print information about active topic\n        rostopic list   list active topics\n        rostopic pub    publish data to topic\n        rostopic type   print topic or field type\nType rostopic &lt;command&gt; -h for more detailed usage, e.g. 'rostopic echo -h'\n</code></pre>"},{"location":"ROS%E5%9F%BA%E7%A1%80/#rostopic-echo","title":"rostopic echo","text":"<p><code>rostopic echo</code>\u53ef\u4ee5\u663e\u793a\u5728\u67d0\u4e2a\u8bdd\u9898\u4e0a\u53d1\u5e03\u7684\u6570\u636e\u3002</p> <p>\u7528\u6cd5\uff1a<code>rostopic echo [topic]</code></p> <pre><code>vkrobot@vkrobot\uff1a~$ rostopic echo /turtle1/cmd_vel\n</code></pre> <p>\u4f60\u53ef\u80fd\u4f1a\u770b\u5230\u4ec0\u4e48\u90fd\u6ca1\u53d1\u751f\uff0c\u56e0\u4e3a\u73b0\u5728\u8fd8\u6ca1\u6709\u6570\u636e\u88ab\u53d1\u5e03\u5230\u8be5\u8bdd\u9898\u4e0a\u3002\u53ef\u4ee5\u901a\u8fc7\u6309\u4e0b\u952e\u76d8\u65b9\u5411\u952e\u8ba9<code>turtle_teleop_key</code>\u8282\u70b9\u53d1\u5e03\u6570\u636e\u3002\u8bb0\u5f97\u5982\u679c\u4e0d\u80fd\u63a7\u5236\u4e4c\u9f9f\uff0c\u8bf7\u9009\u4e2dturtle_teleop_key\u7684\u7ec8\u7aef\u7a97\u53e3\u4ee5\u786e\u4fdd\u6309\u952e\u8f93\u5165\u80fd\u591f\u88ab\u6355\u83b7\u3002</p>"},{"location":"ROS%E5%9F%BA%E7%A1%80/#rostopic-list","title":"rostopic list","text":"<p><code>rostopic list</code>\u80fd\u591f\u5217\u51fa\u5f53\u524d\u5df2\u88ab\u8ba2\u9605\u548c\u53d1\u5e03\u7684\u6240\u6709\u8bdd\u9898\u3002</p> <pre><code>vkrobot@vkrobot\uff1a~$ rostopic list -v\n\nPublished topics\uff1a\n * /turtle1/color_sensor [turtlesim/Color] 1 publisher\n * /turtle1/cmd_vel [geometry_msgs/Twist] 1 publisher\n * /rosout [rosgraph_msgs/Log] 2 publishers\n * /rosout_agg [rosgraph_msgs/Log] 1 publisher\n * /turtle1/pose [turtlesim/Pose] 1 publisher\n\nSubscribed topics\uff1a\n * /turtle1/cmd_vel [geometry_msgs/Twist] 1 subscriber\n * /rosout [rosgraph_msgs/Log] 1 subscriber\n</code></pre> <p>-v \u53c2\u6570\u53ef\u4ee5\u5217\u51fa\u6240\u6709\u53d1\u5e03\u548c\u8ba2\u9605\u7684\u8bdd\u9898\u53ca\u5176\u7c7b\u578b\u7684\u8be6\u7ec6\u4fe1\u606f</p>"},{"location":"ROS%E5%9F%BA%E7%A1%80/#messages","title":"\u6d88\u606f\uff08Messages\uff09","text":"<p>\u8bdd\u9898\u7684\u901a\u4fe1\u662f\u901a\u8fc7\u8282\u70b9\u95f4\u53d1\u9001ROS\u6d88\u606f\u5b9e\u73b0\u7684\u3002\u4e3a\u4e86\u4f7f\u53d1\u5e03\u8005\uff08<code>turtle_teleop_key</code>\uff09\u548c\u8ba2\u9605\u8005\uff08<code>turtulesim_node</code>\uff09\u8fdb\u884c\u901a\u4fe1\uff0c\u53d1\u5e03\u8005\u548c\u8ba2\u9605\u8005\u5fc5\u987b\u53d1\u9001\u548c\u63a5\u6536\u76f8\u540c\u7c7b\u578b\u7684\u6d88\u606f\u3002\u8fd9\u610f\u5473\u7740\u8bdd\u9898\u7684\u7c7b\u578b\u662f\u7531\u53d1\u5e03\u5728\u5b83\u4e0a\u9762\u6d88\u606f\u7684\u7c7b\u578b\u51b3\u5b9a\u7684\u3002\u4f7f\u7528<code>rostopic type</code>\u547d\u4ee4\u53ef\u4ee5\u67e5\u770b\u53d1\u5e03\u5728\u8bdd\u9898\u4e0a\u7684\u6d88\u606f\u7684\u7c7b\u578b\u3002</p>"},{"location":"ROS%E5%9F%BA%E7%A1%80/#rosmsg","title":"\u4f7f\u7528 rosmsg","text":"<p><code>rosmsg</code>\u53ef\u4ee5\u663e\u793a\u6d88\u606f\u7c7b\u578b\u7684\u5177\u4f53\u4fe1\u606f</p> <p>\u7528\u6cd5\uff1a<code>rosmsg &lt;command&gt; &lt;msg_type&gt;</code></p> <pre><code>vkrobot@vkrobot\uff1a~$ rosmsg show geometry_msgs/Twist\ngeometry_msgs/Vector3 linear\n  float64 x\n  float64 y\n  float64 z\ngeometry_msgs/Vector3 angular\n  float64 x\n  float64 y\n  float64 z\n</code></pre> <p>\u53ef\u4ee5\u4f7f\u7528 <code>rostopic type [topic]</code>\u547d\u4ee4\u67e5\u770b\u6307\u5b9a\u8bdd\u9898\u7684\u6d88\u606f\u7c7b\u578b\uff0c\u73b0\u5728\u6211\u4eec\u5df2\u7ecf\u77e5\u9053\u4e86turtlesim\u8282\u70b9\u60f3\u8981\u7684\u6d88\u606f\u7c7b\u578b\uff0c\u7136\u540e\u5c31\u53ef\u4ee5\u53d1\u5e03\u547d\u4ee4\u7ed9turtle\u4e86</p>"},{"location":"ROS%E5%9F%BA%E7%A1%80/#rostopic_1","title":"\u4f7f\u7528 rostopic \u5de5\u5177\u53d1\u5e03\u6d88\u606f","text":"<p><code>rostopic pub</code>\u53ef\u4ee5\u628a\u6570\u636e\u53d1\u5e03\u5230\u5f53\u524d\u67d0\u4e2a\u6b63\u5728\u5e7f\u64ad\u7684\u8bdd\u9898\u4e0a\u3002</p> <p>\u7528\u6cd5\uff1a<code>rostopic pub [topic] [msg_type] [args]</code></p> <pre><code>vkrobot@vkrobot\uff1a~$ rostopic pub -r 10 /turtle1/cmd_vel geometry_msgs/Twist \"liner\uff1a\n  x\uff1a 2.0\n  y\uff1a 0.0\n  z\uff1a 0.0\nangular\uff1a\n  x\uff1a 0.0\n  y\uff1a 0.0\n  z\uff1a 1.8\"\n</code></pre> <p>\u53ef\u4ee5\u518d\u6b21\u4f7f\u7528<code>rqt_graph</code>\u547d\u4ee4\u67e5\u770b\u5f53\u524d\u7684\u8ba1\u7b97\u56fe</p>"},{"location":"ROS%E5%9F%BA%E7%A1%80/#_2","title":"\u590d\u4e60","text":"<p>\u672c\u8282\u6240\u6d89\u53ca\u7684\u5185\u5bb9\uff1a</p> <ul> <li>rqt_graph\uff1a\u8ba1\u7b97\u56fe\u53ef\u89c6\u5316\u5de5\u5177</li> <li>rostopic = ros + topic\uff1a\u8bdd\u9898\u7ba1\u7406\u5de5\u5177</li> <li>rosmsg = ros + msg\uff1a\u6d88\u606f\u7ba1\u7406\u5de5\u5177</li> </ul>"},{"location":"ROS%E5%9F%BA%E7%A1%80/#233","title":"2.3.3 \u670d\u52a1\u901a\u4fe1","text":"<p>\u670d\u52a1\uff08Services\uff09\u662f\u8282\u70b9\u4e4b\u95f4\u901a\u8baf\u7684\u53e6\u4e00\u79cd\u65b9\u5f0f\u3002\u670d\u52a1\u5141\u8bb8\u8282\u70b9\u53d1\u9001\u4e00\u4e2a\u8bf7\u6c42\uff08request\uff09\u5e76\u83b7\u5f97\u4e00\u4e2a\u54cd\u5e94\uff08response\uff09\u3002</p> <p></p>"},{"location":"ROS%E5%9F%BA%E7%A1%80/#rosservice","title":"\u4f7f\u7528 rosservice","text":"<p>rosservice\u53ef\u4ee5\u5f88\u5bb9\u6613\u5730\u901a\u8fc7\u670d\u52a1\u9644\u52a0\u5230ROS\u5ba2\u6237\u7aef/\u670d\u52a1\u5668\u6846\u67b6\u4e0a\u3002rosservice\u6709\u8bb8\u591a\u53ef\u7528\u4e8e\u670d\u52a1\u7684\u547d\u4ee4</p> <p>\u7528\u6cd5\uff1a</p> <ul> <li><code>rosservice list</code>\uff1a\u8f93\u51fa\u6d3b\u8dc3\u670d\u52a1\u7684\u4fe1\u606f</li> <li><code>rosservice type</code>\uff1a\u8f93\u51fa\u670d\u52a1\u7684\u7c7b\u578b</li> <li> <p><code>rosservice call</code>\uff1a\u7528\u7ed9\u5b9a\u7684\u53c2\u6570\u8c03\u7528\u670d\u52a1</p> </li> <li> <p>...</p> </li> <li> <p><code>rosservice list</code></p> </li> </ul> <p>\u4f7f\u7528list\u547d\u4ee4\u663e\u793aturtlesim\u8282\u70b9\u63d0\u4f9b\u7684\u670d\u52a1</p> <pre><code>vkrobot@vkrobot\uff1a~$ rosservice list\n/clear\n/kill\n/reset\n/rosout/get_loggers\n/rosout/set_logger_level\n/spawn\n/teleop_turtle/get_loggers\n/teleop_turtle/set_logger_level\n/turtle1/set_pen\n/turtle1/teleport_absolute\n/turtle1/teleport_relative\n/turtlesim/get_loggers\n/turtlesim/set_logger_level\n</code></pre> <ol> <li><code>rosservice type</code></li> </ol> <p>\u7528\u6cd5\uff1a<code>rosservice type [service]</code></p> <p>\u6765\u770b\u770bclear\u670d\u52a1\u7684\u7c7b\u578b\uff1a</p> <pre><code>vkrobot@vkrobot\uff1a~$ rosservice type /clear\nstd_srvs/Empty\n</code></pre> <p>\u670d\u52a1\u7684\u7c7b\u578b\u4e3aEmpty\uff08\u7a7a\uff09\uff0c\u8fd9\u8868\u660e\u8c03\u7528\u8fd9\u4e2a\u670d\u52a1\u65f6\u4e0d\u9700\u8981\u53c2\u6570</p> <ol> <li><code>rosservice call</code></li> </ol> <p>\u7528\u6cd5\uff1a<code>rosservice call [service] [args]</code></p> <pre><code>vkrobot@vkrobot\uff1a~$ rosservice call /clear\n</code></pre> <p></p> <p>\u518d\u8ba9\u6211\u4eec\u770b\u770b\u670d\u52a1\u5177\u6709\u53c2\u6570\u7684\u60c5\u51b5\u3002\u67e5\u770bspawn\uff08\u4ea7\u5375\uff09\u670d\u52a1\u7684\u4fe1\u606f\uff1a</p> <pre><code>vkrobot@vkrobot\uff1a~$ rosservice type /spawn | rossrv show\nfloat32 x\nfloat32 y\nfloat32 theta\nstring name\n---\nstring name\n</code></pre> <p>\u8fd9\u4e2a\u670d\u52a1\u80fd\u8ba9\u6211\u4eec\u53ef\u4ee5\u5728\u7ed9\u5b9a\u7684\u4f4d\u7f6e\u548c\u89d2\u5ea6\u751f\u6210\u4e00\u53ea\u65b0\u7684\u4e4c\u9f9f\u3002</p> <pre><code>vkrobot@vkrobot\uff1a~$ rosservice call /spawn \"x\uff1a 2.0\ny\uff1a 2.0\ntheta\uff1a 0.2\nname\uff1a ''\"\n</code></pre> <p></p>"},{"location":"ROS%E5%9F%BA%E7%A1%80/#_3","title":"\u590d\u4e60","text":"<p>\u672c\u8282\u6240\u6d89\u53ca\u7684\u5185\u5bb9\uff1a</p> <ul> <li>rosservice = ros + service\uff1a\u670d\u52a1\u7ba1\u7406\u5de5\u5177</li> <li>rossrv = ros + srv\uff1a\u670d\u52a1\u6570\u636e\u7ba1\u7406\u5de5\u5177</li> </ul>"},{"location":"ROS%E5%9F%BA%E7%A1%80/#234","title":"2.3.4 \u53c2\u6570\u670d\u52a1\u5668","text":""},{"location":"ROS%E5%9F%BA%E7%A1%80/#rosparam","title":"\u4f7f\u7528 rosparam","text":"<p><code>rosparam</code>\u80fd\u8ba9\u6211\u4eec\u5728ROS\u53c2\u6570\u670d\u52a1\u5668\uff08Parameter Server\uff09\u4e0a\u5b58\u50a8\u548c\u64cd\u4f5c\u6570\u636e\u3002\u53c2\u6570\u670d\u52a1\u5668\u80fd\u591f\u5b58\u50a8\u6574\u578b\uff08integer\uff09\u3001\u6d6e\u70b9\uff08float\uff09\u3001\u5e03\u5c14\uff08boolean\uff09\u3001\u5b57\u5178\uff08dictionaries\uff09\u548c\u5217\u8868\uff08list\uff09\u7b49\u6570\u636e\u7c7b\u578b\u3002</p> <p>\u7528\u6cd5\uff1a</p> <ul> <li><code>rosparam set</code>\uff1a\u8bbe\u7f6e\u53c2\u6570</li> <li><code>rosparam get</code>\uff1a\u83b7\u53d6\u53c2\u6570</li> <li><code>rosparam load</code>\uff1a\u4ece\u6587\u4ef6\u4e2d\u52a0\u8f7d\u53c2\u6570</li> <li><code>rosparam dump</code>\uff1a\u5411\u6587\u4ef6\u4e2d\u8f6c\u50a8\u53c2\u6570</li> <li><code>rosparam delete</code>\uff1a\u5220\u9664\u53c2\u6570</li> <li> <p><code>rosparam list</code>\uff1a\u5217\u51fa\u53c2\u6570\u540d</p> </li> <li> <p><code>rosparam list</code></p> </li> </ul> <pre><code>vkrobot@vkrobot\uff1a~$ rosparam list\n/rosdistro\n/roslaunch/uris/host_nxt__43407\n/rosversion\n/run_id\n/turtlesim/background_b\n/turtlesim/background_g\n/turtlesim/background_r\n</code></pre> <ol> <li><code>rosparam set</code> &amp; <code>rosparam get</code></li> </ol> <p>\u7528\u6cd5\uff1a<code>rosparam set [param_name]</code></p> <pre><code>    `rosparam get [param_name]`\n</code></pre> <pre><code>vkrobot@vkrobot\uff1a~$ rosparam get /turtlesim/background_r\n69\nvkrobot@vkrobot\uff1a~$ rosparam set /turtlesim/background_r 150\n</code></pre> <p>\u8fd9\u91cc\u867d\u7136\u4fee\u6539\u4e86\u53c2\u6570\u7684\u503c\uff0c\u4f46\u662f\u6d77\u9f9f\u7a97\u53e3\u7684\u80cc\u666f\u989c\u8272\u5e76\u6ca1\u6709\u53d8\u5316\uff0c\u6211\u4eec\u8fd8\u9700\u8981\u8c03\u7528clear\u670d\u52a1\u4f7f\u53c2\u6570\u4fee\u6539\u80fd\u751f\u6548</p> <pre><code>vkrobot@vkrobot\uff1a~$ rosservice call /clear\n</code></pre> <p></p> <p>\u4e5f\u53ef\u4ee5\u7528<code>rosparam get /</code>\u6765\u83b7\u53d6\u53c2\u6570\u670d\u52a1\u5668\u4e2d\u6240\u6709\u7684\u53c2\u6570\u5185\u5bb9\uff1a</p> <pre><code>vkrobot@vkrobot\uff1a~$ rosparam get /\nrosdistro\uff1a 'melodic\n  '\nroslaunch\uff1a\n  uris\uff1a(host_localhost__46785\uff1a 'http://localhost\uff1a46785/')\nrosversion\uff1a '1.14.3\n  '\nrun_id\uff1a 7ef687d8-9ab7-11ea-b692-fcaa1494dbf9\nturtlesim\uff1a(background_b\uff1a 255\uff0cbackground_g\uff1a 86\uff0cbackground_r\uff1a 69)\n</code></pre> <ol> <li><code>rosparam dump</code> &amp; <code>rosparam load</code></li> </ol> <p>\u7528\u6cd5\uff1a<code>rosparam dump [file_name] [namespace]</code></p> <p>\u200b            <code>rosparam load [file_name] [namespace]</code></p> <pre><code>vkrobot@vkrobot\uff1a~$ rosparam dump params.yaml\n</code></pre> <p>\u91cd\u542f<code>roscore</code>\u4e0e<code>turtlesim</code>\u540e\uff0c\u53ef\u4ee5\u91cd\u65b0\u52a0\u8f7d\u80cc\u666f\u989c\u8272\u53c2\u6570</p> <pre><code>vkrobot@vkrobot\uff1a~$ roscore\nvkrobot@vkrobot\uff1a~$ rosrun turtlesim turtlesim_node\nvkrobot@vkrobot\uff1a~$ rosparam load param.yaml\nvkrobot@vkrobot\uff1a~$ rosservice call /clear\n</code></pre>"},{"location":"ROS%E5%9F%BA%E7%A1%80/#_4","title":"\u590d\u4e60","text":"<p>\u672c\u8282\u6240\u6d89\u53ca\u7684\u5185\u5bb9\uff1a</p> <ul> <li>rosparam = ros + param\uff1a\u53c2\u6570\u7ba1\u7406\u5de5\u5177</li> </ul>"},{"location":"ROS%E5%9F%BA%E7%A1%80/#235","title":"2.3.5 \u6587\u4ef6\u7cfb\u7edf","text":"<p>\u7a0b\u5e8f\u4ee3\u7801\u6563\u843d\u5728\u8bb8\u591aROS\u5305\u4e2d\u3002\u4f7f\u7528Linux\u5185\u7f6e\u547d\u4ee4\u884c\u5de5\u5177\uff08\u5982<code>ls</code>\u548c<code>cd</code>\uff09\u6765\u8fdb\u884c\u67e5\u627e\u548c\u5bfc\u822a\u53ef\u80fd\u975e\u5e38\u7e41\u7410\uff0c\u56e0\u6b64ROS\u63d0\u4f9b\u4e86\u4e13\u95e8\u7684\u547d\u4ee4\u5de5\u5177\u6765\u7b80\u5316\u8fd9\u4e9b\u64cd\u4f5c</p>"},{"location":"ROS%E5%9F%BA%E7%A1%80/#rospack","title":"\u4f7f\u7528 rospack","text":"<p><code>rospack</code>\u5141\u8bb8\u7528\u6237\u83b7\u53d6\u529f\u80fd\u5305\u7684\u6709\u5173\u4fe1\u606f</p> <p>\u7528\u6cd5\uff1a<code>rospack &lt;command&gt; [option] [package_name]</code></p> <pre><code>vkrobot@vkrobot\uff1a~$ rospack find rospy\n/opt/ros/melodic/share/rospy\n</code></pre>"},{"location":"ROS%E5%9F%BA%E7%A1%80/#roscd","title":"\u4f7f\u7528 roscd","text":"<p><code>roscd</code>\u5141\u8bb8\u7528\u6237\u76f4\u63a5\u5207\u6362\u76ee\u5f55\u5230\u67d0\u4e2a\u529f\u80fd\u5305\u6216\u5143\u529f\u80fd\u5305\u4e2d</p> <p>\u7528\u6cd5\uff1a<code>roscd [locationname[/subdir]]</code></p> <pre><code>vkrobot@vkrobot\uff1a~$ roscd rospy\nvkrobot@vkrobot\uff1a/opt/ros/melodic/share/rospy$ pwd\n/opt/ros/melodic/share/rospy\n</code></pre>"},{"location":"ROS%E5%9F%BA%E7%A1%80/#rosls","title":"\u4f7f\u7528 rosls","text":"<p><code>rosls</code>\u5141\u8bb8\u7528\u6237\u76f4\u63a5\u6309\u529f\u80fd\u5305\u7684\u540d\u79f0\u6267\u884c<code>ls</code>\u547d\u4ee4\uff08\u800c\u4e0d\u5fc5\u8f93\u5165\u7edd\u5bf9\u8def\u5f84\uff09</p> <p>\u7528\u6cd5\uff1a<code>rosls [locationname[/subdir]]</code></p> <pre><code>vkrobot@vkrobot\uff1a~$ rosls rospy\ncmake package.xml rosbuild\n</code></pre>"},{"location":"ROS%E5%9F%BA%E7%A1%80/#tab","title":"Tab\u8865\u5168","text":"<p>\u603b\u662f\u8f93\u5165\u5b8c\u6574\u7684\u8f6f\u4ef6\u5305\u540d\u79f0\u611f\u89c9\u6bd4\u8f83\u7e41\u7410\u3002\u5728\u4e4b\u524d\u7684\u4f8b\u5b50\u4e2d\uff0c<code>turtlesim turtlesim_node</code>\u662f\u4e2a\u76f8\u5f53\u957f\u7684\u540d\u79f0\u3002\u5e78\u8fd0\u7684\u662f\uff0c\u4e00\u4e9bROS\u5de5\u5177\u652f\u6301TAB\u8865\u5168\u7684\u529f\u80fd\u3002</p> <pre><code>vkrobot@vkrobot\uff1a~$ roscd turtles&lt;&lt;&lt;\u6309TAB\u952e&gt;&gt;&gt;\n</code></pre> <p>\u5f53\u6309TAB\u952e\u540e\uff0c\u547d\u4ee4\u884c\u5e94\u8be5\u4f1a\u81ea\u52a8\u8865\u5145\u5269\u4f59\u90e8\u5206\uff1a</p>"},{"location":"ROS%E5%9F%BA%E7%A1%80/#_5","title":"\u590d\u4e60","text":"<p>\u672c\u8282\u6240\u6d89\u53ca\u7684\u5185\u5bb9\uff1a</p> <ul> <li>rospack = ros + pack(age)\uff1a\u63d0\u4f9b\u4e0eROS\u5305\u76f8\u5173\u7684\u4fe1\u606f</li> <li>roscd = ros + cd\uff1a\u5c06\u76ee\u5f55\u66f4\u6539\u4e3aROS\u5305\u6216\u5806\u6808</li> <li>rosls = ros + ls\uff1a\u5217\u51faROS\u5305\u4e2d\u7684\u6587\u4ef6</li> </ul>"},{"location":"ROS%E5%9F%BA%E7%A1%80/#24","title":"2.4 \u5de5\u4f5c\u7a7a\u95f4\u4e0e\u529f\u80fd\u5305","text":"<p>catkin\u662fROS\u5b98\u65b9\u6307\u5b9a\u7684\u7f16\u8bd1\u7cfb\u7edf\uff0c\u4e00\u4e2a\u5305\u8981\u60f3\u79f0\u4e3acatkin\u529f\u80fd\u5305\uff0c\u5fc5\u987b\u7b26\u5408\u4ee5\u4e0b\u8981\u6c42\uff1a</p> <ul> <li>\u8fd9\u4e2a\u5305\u5fc5\u987b\u6709\u4e00\u4e2a\u7b26\u5408catkin\u89c4\u8303\u7684package.xml\u6587\u4ef6</li> <li>\u8fd9\u4e2a<code>package.xml</code>\u6587\u4ef6\u63d0\u4f9b\u6709\u5173\u8be5\u529f\u80fd\u5305\u7684\u5143\u4fe1\u606f</li> <li>\u8fd9\u4e2a\u5305\u5fc5\u987b\u6709\u4e00\u4e2acatkin\u7248\u672c\u7684CMakeLists.txt\u6587\u4ef6</li> <li>\u5982\u679c\u5b83\u662f\u4e2aCatkin\u5143\u5305\u7684\u8bdd\uff0c\u5219\u9700\u8981\u6709\u4e00\u4e2a<code>CMakeList.txt</code>\u6587\u4ef6\u7684\u76f8\u5173\u6837\u677f</li> <li>\u6bcf\u4e2a\u5305\u5fc5\u987b\u6709\u81ea\u5df1\u7684\u76ee\u5f55</li> <li>\u8fd9\u610f\u5473\u7740\u5728\u540c\u4e00\u4e2a\u76ee\u5f55\u4e0b\u4e0d\u80fd\u6709\u5d4c\u5957\u7684\u6216\u8005\u591a\u4e2a\u529f\u80fd\u5305\u5b58\u5728</li> </ul> <p>\u6700\u7b80\u5355\u7684\u529f\u80fd\u5305\u770b\u8d77\u6765\u5c31\u50cf\u8fd9\u6837\uff1a</p> <pre><code>my_package/\n  CMakeLists.txt\n  package.xml\n</code></pre> <p>\u5f00\u53d1catkin\u529f\u80fd\u5305\u7684\u63a8\u8350\u65b9\u6cd5\u662f\u4f7f\u7528catkin\u5de5\u4f5c\u7a7a\u95f4\uff0c\u4e00\u4e2a\u7b80\u5355\u7684\u5de5\u4f5c\u7a7a\u95f4\u5982\u4e0b\u6240\u793a\uff1a</p> <pre><code>workspace_folder/         -- WORKSPACE\n  build/                  -- BUILD SPACE\n  devel/                  -- DEVELOPMENT SPACE\n    setup.bash\n    ...\n  src/                   -- SOURCE SPACE\n    CMakeLists.txt       -- 'Toplevel' CMake file\n    package_1/\n      CMakeLists.txt     -- CMakeLists.txt file for package_1\n      package.xml        -- Package manifest for package_1\n    ...\n    package_n/\n      CMakeLists.txt     -- CMakeLists.txt file for package_n\n      package.xml        -- Package manifest for package_n\n</code></pre>"},{"location":"ROS%E5%9F%BA%E7%A1%80/#241","title":"2.4.1 \u521b\u5efa\u5de5\u4f5c\u7a7a\u95f4","text":"<p>\u4e0b\u9762\u6211\u4eec\u5f00\u59cb\u521b\u5efa\u548c\u6784\u5efa\u4e00\u4e2acatkin\u5de5\u4f5c\u7a7a\u95f4</p> <pre><code>vkrobot@vkrobot\uff1a~$ mkdir -p ~/catkin_ws/src\nvkrobot@vkrobot\uff1a~$ cd ~/catkin_ws\nvkrobot@vkrobot\uff1a~/catkin_ws$ catkin_make #\u7f16\u8bd1\nvkrobot@vkrobot\uff1a~/catkin_ws$ source devel/setup.bash #\u8bbe\u7f6e\u73af\u5883\u53d8\u91cf\nvkrobot@vkrobot\uff1a~/catkin_ws$ echo $ROS_PACKAGE_PATH  #\u68c0\u67e5\u73af\u5883\u53d8\u91cf\n/home/vkrobot/catkin_ws/src\uff1a/opt/ros/melodic/share\n</code></pre>"},{"location":"ROS%E5%9F%BA%E7%A1%80/#242","title":"2.4.2 \u521b\u5efa\u529f\u80fd\u5305","text":"<p><code>catkin_create_pkg</code>\u662fROS\u63d0\u4f9b\u7684\u529f\u80fd\u5305\u521b\u5efa\u5de5\u5177</p> <p>\u7528\u6cd5\uff1a<code>catkin_create_pkg &lt;package_name&gt; [depend1] [depend2]</code></p> <p>\u4e0b\u9762\u6211\u4eec\u5f00\u59cb\u521b\u5efa\u4e00\u4e2a\u529f\u80fd\u5305\uff1a</p> <pre><code>vkrobot@vkrobot\uff1a~$ cd ~/catkin_ws/src\nvkrobot@vkrobot\uff1a~/catkin_ws/src$ catkin_create_pkg vkrobot_tutorials std_msgs rospy roscpp\nvkrobot@vkrobot\uff1a~/catkin_ws/src$ cd ..\nvkrobot@vkrobot\uff1a~/catkin_ws$ catkin_make  #\u91cd\u65b0\u7f16\u8bd1\nvkrobot@vkrobot\uff1a~/catkin_ws$ source devel/setup.bash #\u8bbe\u7f6e\u73af\u5883\u53d8\u91cf\nvkrobot@vkrobot\uff1a~/catkin_ws$ echo $ROS_PACKAGE_PATH  #\u68c0\u67e5\u73af\u5883\u53d8\u91cf\n/home/vkrobot/catkin_ws/src\uff1a/opt/ros/melodic/share\n</code></pre> <p>\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u6dfb\u52a0\u5de5\u4f5c\u7a7a\u95f4\u7684\u73af\u5883\u53d8\u91cf\u4ee5\u4fdd\u6b63\u6bcf\u6b21\u6253\u5f00\u65b0\u7ec8\u7aef\u90fd\u80fd\u81ea\u52a8\u8bbe\u7f6e\u73af\u5883\u53d8\u91cf</p> <p><code>echo \"source /home/&lt;\u7528\u6237\u540d&gt;/&lt;\u5de5\u4f5c\u7a7a\u95f4\u540d\u79f0&gt;/devel/setup.bash\" &gt;&gt; ~/.bashrc</code></p>"},{"location":"ROS%E5%9F%BA%E7%A1%80/#243-vscode","title":"2.4.3 VScode\u96c6\u6210\u5f00\u53d1\u73af\u5883\u642d\u5efa","text":"<p>1.\u4e0b\u8f7d</p> <p>vscode \u4e0b\u8f7d\uff1aVisual Studio Code Download</p> <p></p> <p>2.\u5b89\u88c5</p> <p><code>sudo dpkg -i xxx.deb</code></p> <p>3.\u5b89\u88c5\u63d2\u4ef6</p> <p></p>"},{"location":"ROS%E5%9F%BA%E7%A1%80/#25","title":"2.5 \u8bdd\u9898\u901a\u4fe1","text":""},{"location":"ROS%E5%9F%BA%E7%A1%80/#251","title":"2.5.1 \u53d1\u5e03\u8005\u8282\u70b9\u7f16\u7a0b\u5b9e\u73b0","text":"<pre><code>vkrobot@vkrobot\uff1a~$ roscd vkrobot_tutorials\nvkrobot@vkrobot\uff1a~/catkin_ws/src/vkrobot_tutorials$ mkdir scripts\nvkrobot@vkrobot\uff1a~/catkin_ws/src/vkrobot_tutorials$ cd scripts\nvkrobot@vkrobot\uff1a~/catkin_ws/src/vkrobot_tutorials/scripts$ touch talker.py\nvkrobot@vkrobot\uff1a~/catkin_ws/src/vkrobot_tutorials/scripts$ chmod +x talker.py  #\u6dfb\u52a0\u53ef\u6267\u884c\u6743\u9650\n</code></pre> <p>\u7f16\u8f91talker.py\u6587\u4ef6\uff0c\u6dfb\u52a0\u4ee5\u4e0b\u5185\u5bb9\uff1a</p> <pre><code>#!/usr/bin/env python3\n#\u6bcf\u4e2aPython ROS\u8282\u70b9\u7684\u6700\u5f00\u5934\u90fd\u6709\u8fd9\u4e2a\u58f0\u660e\nimport rospy  #\u5982\u679c\u8981\u4f7f\u7528python\u7f16\u5199ROS\u8282\u70b9\uff0c\u90fd\u9700\u8981\u5bfc\u5165rospy\nfrom std_msgs.msg import String  #\u5bfc\u5165std_msgs/String\u6d88\u606f\u7c7b\u578b\u6765\u53d1\u5e03\u5b57\u7b26\u4e32\u6d88\u606f\ndef talker()\uff1a\n#\u5411ROS Master\u6ce8\u518c\u8282\u70b9\u4fe1\u606f\uff0c\u53c2\u6570\u5305\u62ec\uff08\u8bdd\u9898\u540d\u79f0\uff0c\u6d88\u606f\u7c7b\u578b\uff0c\u961f\u5217\u957f\u5ea6\uff09\npub = rospy.Publisher('chatter', String, queue_size=10)\n#\u521d\u59cb\u5316ROS\u8282\u70b9\uff0c\u7b2c\u4e00\u4e2a\u53c2\u6570\u4e3a\u8282\u70b9\u540d\u79f0\uff0c\u7b2c\u4e8c\u4e2a\u53c2\u6570\u4f1a\u5728\u540d\u79f0\u672b\u5c3e\u6dfb\u52a0\u968f\u673a\u6570\uff0c\u4ee5\u786e\u4fdd\u8282\u70b9\u5177\u6709\u552f\u4e00\u7684\u540d\u79f0\nrospy.init_node('talker', anonymous=True)\n#\u521b\u5efa\u4e00\u4e2aRate\u5bf9\u8c61\uff0c\u4f20\u5165\u53c2\u657010\u8868\u793a\u5e0c\u671b\u7684\u5faa\u73af\u901f\u7387\u4e3a10Hz\nrate = rospy.Rate(10)\nwhile not rospy.is_shutdown()\uff1a\n#\u5c01\u88c5\u9700\u8981\u53d1\u5e03\u7684\u6d88\u606f\u6570\u636e\nhello_str = String()\nhello_str.data = \"hello world %s\" % rospy.get_time()\n#\u53d1\u5e03\u5c01\u88c5\u597d\u7684\u6d88\u606f\u6570\u636e\npub.publish(hello_str)\n#\u5728\u5faa\u73af\u4e2d\u4f7f\u7528rate.sleep()\uff0c\u5b83\u53ef\u4ee5\u7528\u521a\u521a\u597d\u7684\u7761\u7720\u65f6\u95f4\u6765\u7ef4\u6301\u671f\u671b\u7684\u5faa\u73af\u901f\u7387\nrate.sleep()\nif __name__  '__main__'\uff1a\ntry\uff1a\ntalker()\nexcept rospy.ROSInterruptException\uff1a  #\u6355\u83b7\u7a0b\u5e8f\u5f02\u5e38\npass\n</code></pre> <p>\u8fd0\u884ctalker\u8282\u70b9\uff1a</p> <pre><code>vkrobot@vkrobot\uff1a~$ roscore #\u5148\u542f\u52a8ROS Master\nvkrobot@vkrobot\uff1a~$ rosrun vkrobot_tutorials talker.py\n</code></pre> <p>\u8fd0\u884c\u6210\u529f\u540e\uff0c\u6253\u5f00\u4e00\u4e2a\u65b0\u7ec8\u7aef\u8ba2\u9605chatter\u8bdd\u9898\u63a5\u6536\u6d88\u606f\uff1a</p> <pre><code>vkrobot@vkrobot\uff1a~$ rostopic echo /chatter\ndata\uff1a \"hello world 1682410011.24\"\n---\ndata\uff1a \"hello world 1682410011.34\"\n......\n</code></pre>"},{"location":"ROS%E5%9F%BA%E7%A1%80/#252","title":"2.5.2 \u8ba2\u9605\u8005\u8282\u70b9\u7f16\u7a0b\u5b9e\u73b0","text":"<pre><code>vkrobot@vkrobot\uff1a~$ roscd vkrobot_tutorials/scripts\nvkrobot@vkrobot\uff1a~/catkin_ws/src/vkrobot_tutorials/scripts$ touch listener.py\nvkrobot@vkrobot\uff1a~/catkin_ws/src/vkrobot_tutorials/scripts$ chmod +x listener.py  #\u6dfb\u52a0\u53ef\u6267\u884c\u6743\u9650\n</code></pre> <p>\u7f16\u8f91listener.py\u6587\u4ef6\uff0c\u6dfb\u52a0\u4ee5\u4e0b\u5185\u5bb9\uff1a</p> <pre><code>#!/usr/bin/env python3\n#\u6bcf\u4e2aPython ROS\u8282\u70b9\u7684\u6700\u5f00\u5934\u90fd\u6709\u8fd9\u4e2a\u58f0\u660e\nimport rospy  #\u5982\u679c\u8981\u4f7f\u7528python\u7f16\u5199ROS\u8282\u70b9\uff0c\u90fd\u9700\u8981\u5bfc\u5165rospy\nfrom std_msgs.msg import String  #\u5bfc\u5165std_msgs/String\u6d88\u606f\u7c7b\u578b\u5b9a\u4e49\u9700\u8981\u63a5\u6536\u7684\u6d88\u606f\u7c7b\u578b\n#\u56de\u8c03\u51fd\u6570\ndef callback(data)\uff1a\n#\u5411\u7ec8\u7aef\u8f93\u51fa\u65e5\u5fd7\u4fe1\u606f\nrospy.loginfo(rospy.get_caller_id() + \" I heard %s\", data.data)\ndef listener()\uff1a\n#\u521d\u59cb\u5316ROS\u8282\u70b9\uff0c\u7b2c\u4e00\u4e2a\u53c2\u6570\u4e3a\u8282\u70b9\u540d\u79f0\uff0c\u7b2c\u4e8c\u4e2a\u53c2\u6570\u4f1a\u5728\u540d\u79f0\u672b\u5c3e\u6dfb\u52a0\u968f\u673a\u6570\uff0c\u4ee5\u786e\u4fdd\u8282\u70b9\u5177\u6709\u552f\u4e00\u7684\u540d\u79f0\nrospy.init_node('listener', anonymous=True)\n#\u5411ROS Master\u6ce8\u518c\u8282\u70b9\u4fe1\u606f\uff0c\u53c2\u6570\u5305\u62ec\uff08\u8bdd\u9898\u540d\u79f0\uff0c\u6d88\u606f\u7c7b\u578b\uff0c\u56de\u8c03\u51fd\u6570\uff09\nrospy.Subscriber(\"chatter\", String, callback)\n#\u963b\u585e\u5faa\u73af\uff0c\u7b49\u5f85\u6d88\u606f\u4f20\u9012\uff0c\u4e00\u65e6\u63a5\u6536\u5230\u6d88\u606f\u5219\u8fdb\u5165\u56de\u8c03\u51fd\u6570\u8fdb\u884c\u5904\u7406\nrospy.spin()\nif __name__  '__main__'\uff1a\nlistener()\n</code></pre> <p>\u8fd0\u884clistener\u8282\u70b9\uff1a</p> <pre><code>vkrobot@vkrobot\uff1a~$ rosrun vkrobot_tutorials listener.py\n[INFO] [1314931969.258941] /listener_17657_1314931968795 I heard hello world 1314931969.26\n[INFO] [1314931970.262246] /listener_17657_1314931968795 I heard hello world 1314931970.26\n......\n</code></pre> <p>\u26a0\u26a0\u26a0\u786e\u4fddROS Master\u4e0etalker\u8282\u70b9\u5df2\u542f\u52a8</p>"},{"location":"ROS%E5%9F%BA%E7%A1%80/#253","title":"2.5.3 \u81ea\u5b9a\u4e49\u6d88\u606f\u7c7b\u578b","text":"<p>ROS\u672c\u8eab\u63d0\u4f9b\u4e86\u8bb8\u591a\u4e0d\u540c\u6d88\u606f\u7c7b\u578b\u7684\u529f\u80fd\u5305\uff0c\u5982\uff1astd_msgs\u3001geometry_msgs\u3001sensor_msgs\u7b49\uff0c\u53ef\u4ee5\u6ee1\u8db3\u4e00\u822c\u573a\u666f\u7684\u4f7f\u7528\uff0c\u4f46\u662f\u5728\u5f88\u591a\u60c5\u51b5\u4e0b\u7528\u6237\u4f9d\u7136\u9700\u8981\u9488\u5bf9\u5177\u4f53\u7684\u9700\u6c42\u5b9a\u4e49\u7279\u5b9a\u7684\u6d88\u606f\u7c7b\u578b</p> <ul> <li>msg\uff08\u6d88\u606f\uff09\uff1amsg\u6587\u4ef6\u5c31\u662f\u6587\u672c\u6587\u4ef6\uff0c\u7528\u4e8e\u63cf\u8ff0ROS\u6d88\u606f\u7684\u5b57\u6bb5\u3002\u5b83\u4eec\u7528\u4e8e\u4e3a\u4e0d\u540c\u7f16\u7a0b\u8bed\u8a00\u7f16\u5199\u7684\u6d88\u606f\u751f\u6210\u6e90\u4ee3\u7801</li> </ul> <pre><code>vkrobot@vkrobot\uff1a~$ rosmsg show std_msgs/String\nstring data\n</code></pre> <p>msg\u6587\u4ef6\u5b58\u653e\u5728\u8f6f\u4ef6\u5305\u7684<code>msg</code>\u76ee\u5f55\u4e0b</p> <p>msg\u6587\u4ef6\u5c31\u662f\u7b80\u5355\u7684\u6587\u672c\u6587\u4ef6\uff0c\u6bcf\u884c\u90fd\u6709\u4e00\u4e2a\u5b57\u6bb5\u7c7b\u578b\u548c\u5b57\u6bb5\u540d\u79f0\u3002\u53ef\u4ee5\u4f7f\u7528\u7684\u7c7b\u578b\u4e3a\uff1a</p> <ul> <li>int8, int16, int32, int64 (\u4ee5\u53ca uint*)</li> <li>float32, float64</li> <li>string</li> <li>time, duration</li> <li>\u5176\u4ed6msg\u6587\u4ef6</li> </ul> <p>\u4e0b\u9762\uff0c\u6211\u4eec\u5c06\u5728\u4e4b\u524d\u521b\u5efa\u597d\u7684\u529f\u80fd\u5305\u4e2d\u5b9a\u4e49\u4e00\u4e2a\u65b0\u7684\u6d88\u606f\u7c7b\u578b\uff1a</p> <pre><code>vkrobot@vkrobot\uff1a~$ roscd vkrobot_tutorials\nvkrobot@vkrobot\uff1a~/catkin_ws/src/vkrobot_tutorials$ mkdir msg\nvkrobot@vkrobot\uff1a~/catkin_ws/src/vkrobot_tutorials$ cd msg\nvkrobot@vkrobot\uff1a~/catkin_ws/src/vkrobot_tutorials/msg$ touch my_msgs.msg\n</code></pre> <p>\u7f16\u8f91my_msgs.msg\u6587\u4ef6\uff0c\u6dfb\u52a0\u4ee5\u4e0b\u5185\u5bb9\uff1a</p> <pre><code>string name\nuint8 age\nuint8 sex\n\nuint8 female = 0\nuint8 male = 1\n</code></pre> <p>\u7f16\u8f91\u5b8c\u6210\u540e\uff0c\u4fdd\u5b58\u5e76\u9000\u51fa\uff0c\u63a5\u4e0b\u6765\u6211\u4eec\u8fd8\u9700\u8981\u4fee\u6539<code>package.xml</code>\u548c<code>CMakeLists.txt</code>\u4e24\u4e2a\u6587\u4ef6\uff0c\u786e\u4fddmsg\u6587\u4ef6\u80fd\u88ab\u8f6c\u6362\u4e3aC++\u3001Python\u6216\u5176\u4ed6\u8bed\u8a00\u7684\u6e90\u4ee3\u7801</p> <ol> <li>\u4fee\u6539<code>package.xml</code></li> </ol> <p>\u200b   \u6dfb\u52a0\u4ee5\u4e0b\u4f9d\u8d56\u9879\uff1a</p> <pre><code>  &lt;build_depend&gt;message_generation&lt;/build_depend&gt;\n&lt;exec_depend&gt;message_runtime&lt;/exec_depend&gt;\n</code></pre> <ol> <li>\u4fee\u6539<code>CMakeLists.txt</code></li> </ol> <pre><code># \u5728find_package\u4e2d\u6dfb\u52a0message_generation\u7684\u4f9d\u8d56\nfind_package(catkin REQUIRED COMPONENTS\nroscpp\nrospy\nstd_msgs\nmessage_generation\n)\n# \u91ca\u653eadd_message_files\u5757\uff0c\u5e76\u6dfb\u52a0\u81ea\u5b9a\u4e49\u7684msg\u6587\u4ef6\nadd_message_files(\nFILES\nmy_msgs.msg\n)\n# \u91ca\u653egenerate_messages\u5757\uff0c\u6dfb\u52a0\u81ea\u5b9a\u4e49\u6d88\u606f\u4f9d\u8d56\u7684\u6240\u6709\u529f\u80fd\u5305\ngenerate_messages(\nDEPENDENCIES\nstd_msgs\n)\n# \u5728catkin_package\u4e2d\u6dfb\u52a0message_runtime\u7684\u4f9d\u8d56\ncatkin_package(\n...\nCATKIN_DEPENDS message_runtime ...\n...)\n</code></pre> <p>\u4e24\u4e2a\u6587\u4ef6\u90fd\u4fee\u6539\u5b8c\u6210\u540e\uff0c\u56de\u5230\u5de5\u4f5c\u7a7a\u95f4\u7684\u6839\u76ee\u5f55\u518d\u6b21\u7f16\u8bd1</p> <pre><code>vkrobot@vkrobot\uff1a~$ cd ~/catkin_ws\nvkrobot@vkrobot\uff1a~/catkin_ws$ catkin_make\n</code></pre> <p>\u4ee5\u4e0a\u5c31\u662f\u521b\u5efa\u6d88\u606f\u7684\u6240\u6709\u6b65\u9aa4\u3002\u8ba9\u6211\u4eec\u901a\u8fc7<code>rosmsg show</code>\u547d\u4ee4\u770b\u770bROS\u80fd\u5426\u8bc6\u522b\u5b83</p> <p>\u7528\u6cd5\uff1a<code>rosmsg show [message_type]</code></p> <pre><code>vkrobot@vkrobot\uff1a~$ rosmsg show vkrobot_tutorials/my_msgs\nuint8 female = 0\nuint8 male = 1\nstring name\nuint8 age\nuint8 sex\n\n\u6216\n\nvkrobot@vkrobot\uff1a~$ rosmsg show my_msgs\n[vkrobot_tutorials/my_msgs]\uff1a\nuint8 female = 0\nuint8 male = 1\nstring name\nuint8 age\nuint8 sex\n</code></pre>"},{"location":"ROS%E5%9F%BA%E7%A1%80/#_6","title":"\u7ec3\u4e60","text":"<p>\u8bd5\u7740\u521b\u5efa\u4e00\u4e2a\u53d1\u5e03\u8005\u8282\u70b9\u548c\u4e00\u4e2a\u8ba2\u9605\u8005\u8282\u70b9\uff0c\u4f20\u9012\u81ea\u5b9a\u4e49\u7684\u6d88\u606f\u5427\ud83d\ude00</p> <p><code>my_talker.py</code></p> <pre><code>#! /usr/bin/env python3\nimport rospy\nfrom vkrobot_tutorials.msg import my_msgs\ndef talker()\uff1a\npub = rospy.Publisher('chatter', my_msgs, queue_size=10)\nrospy.init_node('talker', anonymous=True)\nrate = rospy.Rate(10)\nwhile not rospy.is_shutdown()\uff1a\nmsg = my_msgs()\nmsg.name = \"xiaowei\"\nmsg.age = 7\nmsg.sex = msg.male  # or msg.sex = msg.female\npub.publish(msg)\nrate.sleep()\nif __name__  '__main__'\uff1a\ntry\uff1a\ntalker()\nexcept rospy.ROSInterruptException\uff1a\npass\n</code></pre> <p><code>my_listener.py</code></p> <pre><code>#! /usr/bin/env python3\nimport rospy\nfrom vkrobot_tutorials.msg import my_msgs\ndef listener()\uff1a\nrospy.init_node('listener', anonymous=True)\nrospy.Subscriber('chatter', my_msgs, callback)\nrospy.spin()\ndef callback(data)\uff1a\nrospy.loginfo(rospy.get_caller_id() + \" I heard %s\", data)\nif __name__  '__main__'\uff1a\nlistener()\n</code></pre>"},{"location":"ROS%E5%9F%BA%E7%A1%80/#_7","title":"\u590d\u4e60","text":"<p>\u603b\u7ed3\u4e00\u4e0b\u672c\u5c0f\u8282\u4e2d\u6211\u4eec\u63a5\u89e6\u8fc7\u7684\u547d\u4ee4\uff1a</p> <ul> <li>rosmsg = ros + msg\uff1a\u63d0\u4f9b\u4e0eROS\u6d88\u606f\u5b9a\u4e49\u76f8\u5173\u7684\u4fe1\u606f</li> </ul>"},{"location":"ROS%E5%9F%BA%E7%A1%80/#26","title":"2.6 \u670d\u52a1\u901a\u4fe1","text":""},{"location":"ROS%E5%9F%BA%E7%A1%80/#261","title":"2.6.1 \u81ea\u5b9a\u4e49\u670d\u52a1\u7c7b\u578b","text":"<ul> <li>srv\uff08\u670d\u52a1\uff09\uff1a\u4e00\u4e2asrv\u6587\u4ef6\u63cf\u8ff0\u4e00\u4e2a\u670d\u52a1\u3002\u5b83\u7531\u4e24\u90e8\u5206\u7ec4\u6210\uff1a\u8bf7\u6c42\uff08request\uff09\u548c\u54cd\u5e94\uff08response\uff09\u3002</li> </ul> <p>srv\u6587\u4ef6\u548cmsg\u6587\u4ef6\u4e00\u6837\uff0c\u53ea\u662f\u5b83\u4eec\u5305\u542b\u4e24\u4e2a\u90e8\u5206\uff1a\u8bf7\u6c42\u548c\u54cd\u5e94\u3002\u8fd9\u4e24\u90e8\u5206\u7528\u4e00\u6761<code>---</code>\u7ebf\u9694\u5f00\u3002\u4e0b\u9762\u662f\u4e00\u4e2asrv\u6587\u4ef6\u7684\u793a\u4f8b\uff1a</p> <pre><code>int64 A\nint64 B\n---\nint64 sum\n</code></pre> <p>\u8ba9\u6211\u4eec\u4f7f\u7528\u4e4b\u524d\u521b\u5efa\u7684\u5305\u518d\u6765\u521b\u5efa\u670d\u52a1\uff1a</p> <pre><code>vkrobot@vkrobot\uff1a~$ roscd vkrobot_tutorials\nvkrobot@vkrobot\uff1a~/catkin_ws/src/vkrobot_tutorials$ mkdir srv\n</code></pre> <p>\u6211\u4eec\u5c06\u4ece\u53e6\u4e00\u4e2a\u5305\u590d\u5236\u73b0\u6709\u7684srv\u5b9a\u4e49\uff0c\u800c\u4e0d\u662f\u624b\u52a8\u521b\u5efa\u65b0\u7684srv\u3002<code>roscp</code>\u662f\u4e00\u4e2a\u5b9e\u7528\u7684\u547d\u4ee4\u884c\u5de5\u5177\uff0c\u7528\u4e8e\u5c06\u6587\u4ef6\u4ece\u4e00\u4e2a\u5305\u590d\u5236\u5230\u53e6\u4e00\u4e2a\u5305\u3002</p> <p>\u7528\u6cd5\uff1a<code>roscp [package_name] [file_to_copy_path] [copy_path]</code></p> <p>\u73b0\u5728\u6211\u4eec\u53ef\u4ee5\u4ece<code>rospy_tutorials</code>\u5305\u4e2d\u590d\u5236\u4e00\u4e2a\u670d\u52a1\uff1a</p> <pre><code>vkrobot@vkrobot\uff1a~/catkin_ws/src/vkrobot_tutorials$ roscp rospy_tutorials AddTwoInts.srv srv/AddTwoInts.srv\n</code></pre> <p>\u26a0\u26a0\u26a0\u6ce8\u610f\u6b64\u65f6\u7684\u7ec8\u7aef\u8def\u5f84\uff01\uff01\uff01</p> <p>\u63a5\u4e0b\u6765\u6211\u4eec\u8fd8\u9700\u8981\u4fee\u6539<code>package.xml</code>\u548c<code>CMakeLists.txt</code>\u4e24\u4e2a\u6587\u4ef6\uff0c\u786e\u4fddsrv\u6587\u4ef6\u80fd\u88ab\u8f6c\u6362\u4e3aC++\u3001Python\u6216\u5176\u4ed6\u8bed\u8a00\u7684\u6e90\u4ee3\u7801</p> <ol> <li>\u4fee\u6539<code>package.xml</code></li> </ol> <p>\u200b   \u6dfb\u52a0\u4ee5\u4e0b\u4f9d\u8d56\u9879\uff1a</p> <pre><code>  &lt;build_depend&gt;message_generation&lt;/build_depend&gt;\n&lt;exec_depend&gt;message_runtime&lt;/exec_depend&gt;\n</code></pre> <p>\u5728\u81ea\u5b9a\u4e49msg\u65f6\uff0c\u5982\u679c\u5df2\u7ecf\u505a\u8fc7\u76f8\u540c\u7684\u64cd\u4f5c\uff0c\u53ef\u4ee5\u8df3\u8fc7\u6b64\u6b65</p> <ol> <li>\u4fee\u6539<code>CMakeLists.txt</code></li> </ol> <pre><code># \u5728find_package\u4e2d\u6dfb\u52a0message_generation\u7684\u4f9d\u8d56\nfind_package(catkin REQUIRED COMPONENTS\nroscpp\nrospy\nstd_msgs\nmessage_generation\n)\n# \u91ca\u653egenerate_messages\u5757\uff0c\u6dfb\u52a0\u81ea\u5b9a\u4e49\u6d88\u606f\u4f9d\u8d56\u7684\u6240\u6709\u529f\u80fd\u5305\ngenerate_messages(\nDEPENDENCIES\nstd_msgs\n)\n# \u5728catkin_package\u4e2d\u6dfb\u52a0message_runtime\u7684\u4f9d\u8d56\ncatkin_package(\n...\nCATKIN_DEPENDS message_runtime ...\n...)\n# \ud83d\udc46\ud83d\udc46\ud83d\udc46\u4e0a\u9762\u7684\u5185\u5bb9\u5982\u679c\u5728\u81ea\u5b9a\u4e49msg\u65f6\u5df2\u505a\u8fc7\u76f8\u540c\u64cd\u4f5c\u53ef\u8df3\u8fc7\ud83d\udc46\ud83d\udc46\ud83d\udc46\n# \u91ca\u653eadd_service_files\u5757\uff0c\u5e76\u6dfb\u52a0\u81ea\u5b9a\u4e49\u7684msg\u6587\u4ef6\nadd_service_files(\nFILES\nAddTwoInts.srv\n)\n</code></pre> <p>\u4e24\u4e2a\u6587\u4ef6\u90fd\u4fee\u6539\u5b8c\u6210\u540e\uff0c\u56de\u5230\u5de5\u4f5c\u7a7a\u95f4\u7684\u6839\u76ee\u5f55\u518d\u6b21\u7f16\u8bd1</p> <pre><code>vkrobot@vkrobot\uff1a~$ cd ~/catkin_ws\nvkrobot@vkrobot\uff1a~/catkin_ws$ catkin_make\n</code></pre> <p>\u4ee5\u4e0a\u5c31\u662f\u521b\u5efa\u6d88\u606f\u7684\u6240\u6709\u6b65\u9aa4\u3002\u8ba9\u6211\u4eec\u901a\u8fc7<code>rossrv show</code>\u547d\u4ee4\u770b\u770bROS\u80fd\u5426\u8bc6\u522b\u5b83</p> <p>\u7528\u6cd5\uff1a<code>rossrv show &lt;message_type&gt;</code></p> <pre><code>vkrobot@vkrobot\uff1a~$ rossrv show vkrobot_tutorials/AddTwoInts\nint64 a\nint64 b\n---\nint64 sum\n\n\u6216\n\nvkrobot@vkrobot\uff1a~$ rosmsg show AddTwoInts\n[vkrobot_tutorials/AddTwoInts]\uff1a\nint64 a\nint64 b\n---\nint64 sum\n\n[rospy_tutorials/AddTwoInts]\uff1a\nint64 a\nint64 b\n---\nint64 sum\n</code></pre> <p>\u8fd9\u91cc\u663e\u793a\u4e86\u4e24\u4e2a\u670d\u52a1\u3002\u7b2c\u4e00\u4e2a\u662f\u521a\u521a\u5728vkrobot_tutorials\u5305\u4e2d\u521b\u5efa\u7684\uff0c\u7b2c\u4e8c\u4e2a\u662f\u4e4b\u524drospy_tutorials\u5305\u4e2d\u5df2\u7ecf\u5b58\u5728\u7684\u3002</p>"},{"location":"ROS%E5%9F%BA%E7%A1%80/#_8","title":"\u590d\u4e60","text":"<p>\u603b\u7ed3\u4e00\u4e0b\u672c\u5c0f\u8282\u4e2d\u6211\u4eec\u63a5\u89e6\u8fc7\u7684\u547d\u4ee4\uff1a</p> <ul> <li>roscp = ros + cp\uff1a\u5c06\u6587\u4ef6\u4eceROS\u5305\u590d\u5236\u5230ROS\u5305</li> <li>rossrv = ros + srv\uff1a\u63d0\u4f9b\u4e0eROS\u670d\u52a1\u5b9a\u4e49\u76f8\u5173\u7684\u4fe1\u606f</li> </ul>"},{"location":"ROS%E5%9F%BA%E7%A1%80/#262","title":"2.6.2 \u670d\u52a1\u5668\u8282\u70b9\u7f16\u7a0b\u5b9e\u73b0","text":"<pre><code>vkrobot@vkrobot\uff1a~$ roscd vkrobot_tutorials/scripts\nvkrobot@vkrobot\uff1a~/catkin_ws/src/vkrobot_tutorials/scripts$ touch add_two_ints_server.py\nvkrobot@vkrobot\uff1a~/catkin_ws/src/vkrobot_tutorials/scripts$ chmod +x add_two_ints_server.py  #\u6dfb\u52a0\u53ef\u6267\u884c\u6743\u9650\n</code></pre> <p>\u7f16\u8f91add_two_ints_server.py\u6587\u4ef6\uff0c\u6dfb\u52a0\u4ee5\u4e0b\u5185\u5bb9\uff1a</p> <pre><code>#!/usr/bin/env python3\n#\u6bcf\u4e2aPython ROS\u8282\u70b9\u7684\u6700\u5f00\u5934\u90fd\u6709\u8fd9\u4e2a\u58f0\u660e\nimport rospy  #\u5982\u679c\u8981\u4f7f\u7528python\u7f16\u5199ROS\u8282\u70b9\uff0c\u90fd\u9700\u8981\u5bfc\u5165rospy\n#\u5bfc\u5165\u81ea\u5b9a\u4e49\u7684\u670d\u52a1\u6570\u636e\u7c7b\u578b\u4e0e\u54cd\u5e94\nfrom vkrobot_tutorials.srv import AddTwoInts,AddTwoIntsResponse\ndef callback(req)\uff1a\n#\u7ec8\u7aef\u6253\u5370\u4fe1\u606f\nprint(\"Returning [%s + %s = %s]\"%(req.a, req.b, (req.a + req.b)))\n#\u53d1\u9001\u54cd\u5e94\u4fe1\u606f\nreturn AddTwoIntsResponse(req.a + req.b)\ndef add_two_ints_server()\uff1a\n#\u521d\u59cb\u5316ROS\u8282\u70b9\uff0c\u53c2\u6570\u4e3a\u8282\u70b9\u540d\u79f0\nrospy.init_node('add_two_ints_server')\n#\u5411ROS Master\u6ce8\u518c\u8282\u70b9\u4fe1\u606f\uff0c\u53c2\u6570\u5305\u62ec\uff08\u670d\u52a1\u540d\u79f0\uff0c\u670d\u52a1\u7c7b\u578b\uff0c\u56de\u8c03\u51fd\u6570\uff09\ns = rospy.Service('add_two_ints', AddTwoInts, callback)\n#\u7ec8\u7aef\u6253\u5370\u4fe1\u606f\nprint(\"Ready to add two ints.\")\n#\u963b\u585e\u5faa\u73af\uff0c\u7b49\u5f85\u5ba2\u6237\u7aef\u8bf7\u6c42\uff0c\u4e00\u65e6\u63a5\u6536\u5230\u8bf7\u6c42\u5219\u8fdb\u5165\u56de\u8c03\u51fd\u6570\u8fdb\u884c\u5904\u7406\nrospy.spin()\nif __name__  '__main__'\uff1a\nadd_two_ints_server()\n</code></pre> <p>\u8fd0\u884cadd_two_ints_server\u8282\u70b9\uff1a</p> <pre><code>vkrobot@vkrobot\uff1a~$ roscore #\u5148\u542f\u52a8ROS Master\nvkrobot@vkrobot\uff1a~$ rosrun vkrobot_tutorials add_two_ints_server.py\n</code></pre> <p>\u8fd0\u884c\u6210\u529f\u540e\uff0c\u6253\u5f00\u4e00\u4e2a\u65b0\u7ec8\u7aef\u8c03\u7528\u670d\u52a1\uff1a</p> <pre><code>vkrobot@vkrobot\uff1a~$ rosservice call add_two_ints \u201ca\uff1a 2\nb\uff1a 3\u201d\nsum\uff1a 5\n</code></pre>"},{"location":"ROS%E5%9F%BA%E7%A1%80/#263","title":"2.6.3 \u5ba2\u6237\u7aef\u8282\u70b9\u7f16\u7a0b\u5b9e\u73b0","text":"<pre><code>vkrobot@vkrobot\uff1a~$ roscd vkrobot_tutorials/scripts\nvkrobot@vkrobot\uff1a~/catkin_ws/src/vkrobot_tutorials/scripts$ touch add_two_ints_client.py\nvkrobot@vkrobot\uff1a~/catkin_ws/src/vkrobot_tutorials/scripts$ chmod +x add_two_ints_client.py  #\u6dfb\u52a0\u53ef\u6267\u884c\u6743\u9650\n</code></pre> <p>\u7f16\u8f91add_two_ints_client.py\u6587\u4ef6\uff0c\u6dfb\u52a0\u4ee5\u4e0b\u5185\u5bb9\uff1a</p> <pre><code>#!/usr/bin/env python3\n#\u6bcf\u4e2aPython ROS\u8282\u70b9\u7684\u6700\u5f00\u5934\u90fd\u6709\u8fd9\u4e2a\u58f0\u660e\nimport rospy  #\u5982\u679c\u8981\u4f7f\u7528python\u7f16\u5199ROS\u8282\u70b9\uff0c\u90fd\u9700\u8981\u5bfc\u5165rospy\nfrom vkrobot_tutorials.srv import *  #\u5bfc\u5165\u81ea\u5b9a\u4e49\u7684\u670d\u52a1\u6570\u636e\u7c7b\u578b\nimport sys  #\u7528\u4e8e\u83b7\u53d6\u547d\u4ee4\u884c\u53c2\u6570\ndef add_two_ints_client(x, y)\uff1a\n#\u8c03\u7528\u6b64\u65b9\u6cd5\u53ef\u4ee5\u8ba9\u7a0b\u5e8f\u5728\u670d\u52a1\u53ef\u7528\u4e4b\u524d\u4e00\u76f4\u963b\u585e\nrospy.wait_for_service('add_two_ints')\ntry\uff1a\n#\u4e3a\u670d\u52a1\u7684\u8c03\u7528\u521b\u5efa\u4e86\u4e00\u4e2a\u53e5\u67c4\uff08handle\uff09\uff0c\u7136\u540e\u6211\u4eec\u5c31\u53ef\u4ee5\u4f7f\u7528\u8fd9\u4e2a\u53e5\u67c4\uff0c\u50cf\u666e\u901a\u51fd\u6570\u4e00\u6837\u8c03\u7528\u5b83\uff0c\u53c2\u6570\uff08\u670d\u52a1\u540d\u79f0\uff0c\u670d\u52a1\u6570\u636e\u7c7b\u578b\uff09\nadd_two_ints = rospy.ServiceProxy('add_two_ints', AddTwoInts)\n#\u83b7\u53d6\u670d\u52a1\u5668\u54cd\u5e94\nresponse = add_two_ints(x, y)\nreturn response.sum\n#\u5982\u679c\u670d\u52a1\u8c03\u7528\u5931\u8d25\uff0crospy.ServiceException\u4f1a\u629b\u51fa\u5f02\u5e38\nexcept rospy.ServiceException as e\uff1a\nprint(\"Service call failed\uff1a %s\"%e)\nif __name__  '__main__'\uff1a\n#\u5224\u65ad\u547d\u4ee4\u884c\u53c2\u6570\u957f\u5ea6\u662f\u5426\u4e3a3\uff0c\uff08\u7a0b\u5e8f\u540d\uff0c\u6574\u65701\uff0c\u6574\u65702\uff09\nif len(sys.argv)  3\uff1a\nx = int(sys.argv[1])\ny = int(sys.argv[2])\nelse\uff1a\nprint(\"Only accepted two parameters\")\nsys.exit(1)\nprint(\"Requesting %s + %s\"%(x, y))\nprint(\"%s + %s = %s\"%(x, y, add_two_ints_client(x, y)))\n</code></pre> <p>\u8fd0\u884cadd_two_ints_client\u8282\u70b9\uff1a</p> <pre><code>vkrobot@vkrobot\uff1a~$ rosrun vkrobot_tutorials add_two_ints_client.py 2 3\nRequesting 2 + 3\n2 + 3 = 5\n</code></pre> <p>\u26a0\u26a0\u26a0\u786e\u4fddROS Master\u4e0eserver\u8282\u70b9\u5df2\u542f\u52a8</p>"},{"location":"ROS%E5%9F%BA%E7%A1%80/#_9","title":"\u7ec3\u4e60","text":"<p>\u5df2\u77e5\u5c0f\u6d77\u9f9f\u8282\u70b9\u63d0\u4f9b\u4e86<code>/spawn</code>\u670d\u52a1\uff0c\u8bf7\u7f16\u5199\u4ee3\u7801\u8c03\u7528\u6b64\u670d\u52a1\uff1asmiley\uff1a</p> <p><code>turtle_spawn.py</code></p> <pre><code>#! /usr/bin/env python3\nimport rospy\nfrom turtlesim.srv import Spawn, SpawnRequest\nimport sys\ndef turtle_spawn_client(x, y, theta, name)\uff1a\nrospy.wait_for_service('spawn')\ntry\uff1a\nturtle_spawn = rospy.ServiceProxy('spawn', Spawn)\nresponse = turtle_spawn(x, y, theta, name)\nreturn response.name\nexcept rospy.ServiceException as e\uff1a\nrospy.loginfo(\"Service call failed\uff1a %s\" % e)\nif __name__  '__main__'\uff1a\nif len(sys.argv)  5\uff1a\nx = float(sys.argv[1])\ny = float(sys.argv[2])\ntheta = float(sys.argv[3])\nname = str(sys.argv[4])\nelse\uff1a\nrospy.loginfo(\"Only accepted four parameters.\")\nsys.exit(1)\nprint(\"Spawning %s\" % turtle_spawn_client(x, y, theta, name))\n</code></pre>"},{"location":"ROS%E8%BF%9B%E9%98%B6/","title":"3 \u673a\u5668\u4eba\u64cd\u4f5c\u7cfb\u7edfROS\u5e38\u7528\u7ec4\u4ef6","text":""},{"location":"ROS%E8%BF%9B%E9%98%B6/#31-launch","title":"3.1 launch","text":""},{"location":"ROS%E8%BF%9B%E9%98%B6/#311-roslaunch","title":"3.1.1 roslaunch\u5b9a\u4e49","text":"<p>roslaunch\u662f\u4e00\u4e2a\u5de5\u5177\uff0c\u7528\u4e8e\u901a\u8fc7SSH\u5728\u672c\u5730\u548c\u8fdc\u7a0b\u8f7b\u677e\u542f\u52a8\u591a\u4e2aROS\u8282\u70b9\u548crosmaster\uff0c\u4ee5\u53ca\u5728\u53c2\u6570\u670d\u52a1\u5668\u4e0a\u8bbe\u7f6e\u53c2\u6570\u3002\u5b83\u5305\u62ec\u81ea\u52a8\u91cd\u751f\u5df2\u6b7b\u4ea1\u8fdb\u7a0b\u7684\u9009\u9879\u3002roslaunch \u63a5\u6536\u4e00\u4e2a\u6216\u591a\u4e2a XML \u914d\u7f6e\u6587\u4ef6\uff08\u6269\u5c55\u540d\u4e3a .launch\uff09\uff0c\u8fd9\u4e9b\u6587\u4ef6\u6307\u5b9a\u8981\u8bbe\u7f6e\u7684\u53c2\u6570\u548c\u8981\u542f\u52a8\u7684\u8282\u70b9\u3002</p> <p>.launch\u6587\u4ef6\u4e00\u822c\u5b58\u653e\u5728\u529f\u80fd\u5305\u7684launch\u76ee\u5f55\u4e2d</p>"},{"location":"ROS%E8%BF%9B%E9%98%B6/#312","title":"3.1.2 \u6807\u7b7e","text":"<ul> <li><code>&lt;launch&gt;</code>\uff1a\u4e0e<code>&lt;/launch&gt;</code>\u4e00\u8d77\u7ec4\u6210launch\u6587\u4ef6\u7684\u6839\u6807\u7b7e\uff0c\u6240\u6709\u5185\u5bb9\u90fd\u5e94\u8be5\u5305\u542b\u5728\u6839\u6807\u7b7e\u5185</li> </ul> <pre><code>&lt;launch&gt;\n......\n&lt;/launch&gt;\n</code></pre> <ul> <li><code>&lt;node&gt;</code>\uff1a\u7528\u4e8e\u542f\u52a8\u8282\u70b9\uff0c\u5305\u542b\u4ee5\u4e0b\u53c2\u6570</li> <li>pkg\uff1a\u8282\u70b9\u6240\u5728\u7684\u529f\u80fd\u5305\u540d\u79f0</li> <li>type\uff1a\u8282\u70b9\u7684\u53ef\u6267\u884c\u6587\u4ef6\u540d\u79f0\uff08python\u6587\u4ef6\u9700\u8981\u5305\u542b.py\u540e\u7f00\uff09</li> <li>name\uff1a\u8282\u70b9\u8fd0\u884c\u65f6\u7684\u540d\u79f0\uff0c\u53ef\u5b9e\u73b0\u8282\u70b9\u7684\u91cd\u547d\u540d</li> <li>\u53ef\u9009\u53c2\u6570\uff1aoutput\uff08\u662f\u5426\u5728\u7ec8\u7aef\u8f93\u51fa\u65e5\u5fd7\u4fe1\u606f\uff0c\u4e00\u822c\u8d4b\u503c\u201cscreen\u201d\uff09\u3001respawn\uff08\u8282\u70b9\u5173\u95ed\u662f\u5426\u81ea\u52a8\u91cd\u542f\uff09\u3001ns\uff08\u4e3a\u8282\u70b9\u8bbe\u7f6e\u547d\u540d\u7a7a\u95f4\uff09\u3001args\uff08\u52a0\u8f7d\u8282\u70b9\u6240\u9700\u53c2\u6570\uff09</li> </ul> <pre><code>&lt;launch&gt;\n&lt;node pkg=\"\" type=\"\" name=\"\" /&gt;\n&lt;/launch&gt;\n</code></pre> <ul> <li><code>&lt;param&gt;</code>\u4e0e<code>&lt;rosparam&gt;</code>\uff1a</li> <li><code>&lt;param&gt;</code>\u7528\u4e8e\u52a0\u8f7d\u5355\u4e2a\u53c2\u6570\u81f3\u53c2\u6570\u670d\u52a1\u5668\uff0c\u5305\u542b2\u4e2a\u53c2\u6570\uff1a<ul> <li>name\uff1a\u53c2\u6570\u540d</li> <li>value\uff1a\u53c2\u6570\u503c</li> </ul> </li> <li><code>&lt;rosparam&gt;</code>\u5e38\u7528\u4e8e\u76f4\u63a5\u4ece\u6587\u4ef6\u4e2d\u52a0\u8f7d\u591a\u4e2a\u53c2\u6570\u81f3\u53c2\u6570\u670d\u52a1\u5668\uff0c\u5305\u542b3\u4e2a\u53c2\u6570<ul> <li>file\uff1a\u53c2\u6570\u6587\u4ef6\u7684\u8def\u5f84\uff08.yaml\uff09</li> <li>command\uff1a\uff08load\u52a0\u8f7d\u53c2\u6570|dump\u4fdd\u5b58\u53c2\u6570|delete\u5220\u9664\u53c2\u6570\uff09\u9ed8\u8ba4\u4e3aload</li> <li>ns\uff08\u53ef\u9009\uff09\uff1a\u8bbe\u7f6e\u547d\u540d\u7a7a\u95f4</li> </ul> </li> </ul> <pre><code>&lt;launch&gt;\n&lt;param name=\"\" value=\"\" /&gt;\n&lt;rosparam file=\"***.yaml\" command=\"load\"&gt;\n&lt;/launch&gt;\n</code></pre> <ul> <li><code>&lt;arg&gt;</code>\uff1alaunch\u6587\u4ef6\u5185\u90e8\u7684\u4f7f\u7528\u7684\u53c2\u6570\uff0c\u53ef\u5b9e\u73b0\u8c03\u7528launch\u6587\u4ef6\u65f6\u52a8\u6001\u8bbe\u7f6e\u53c2\u6570\uff0c\u5305\u542b2\u4e2a\u53c2\u6570</li> <li>name\uff1a\u53c2\u6570\u540d</li> <li>value\uff1a\u53c2\u6570\u503c</li> </ul> <pre><code>&lt;launch&gt;\n&lt;arg name=\"arg-name\" default=\"arg-value\" /&gt;\n&lt;!-- \u8c03\u7528--&gt;\n&lt;param name=\"\" value=\"$(arg arg-name)\" /&gt;\n&lt;node pkg=\"\" type=\"\" name=\"\" args=\"$(arg arg-name)\" /&gt;\n&lt;/launch&gt;\n</code></pre> <ul> <li><code>&lt;remap&gt;</code>\uff1a\u91cd\u6620\u5c04ROS\u8ba1\u7b97\u56fe\u8d44\u6e90\u7684\u547d\u540d\uff0c\u5305\u542b\u4e24\u4e2a\u53c2\u6570</li> <li>from\uff1a\u539f\u547d\u540d</li> <li>to\uff1a\u6620\u5c04\u4e4b\u540e\u7684\u547d\u540d</li> </ul> <pre><code>&lt;launch&gt;\n&lt;remap from=\"\" to=\"\" /&gt;\n&lt;/launch&gt;\n</code></pre> <ul> <li><code>&lt;include&gt;</code>\uff1a\u5305\u542b\u5176\u4ed6launch\u6587\u4ef6\uff0c\u5305\u542b\u4e00\u4e2a\u53c2\u6570</li> <li>file\uff1a\u5305\u542b\u7684\u5176\u4ed6launch\u6587\u4ef6\u8def\u5f84</li> </ul> <pre><code>&lt;launch&gt;\n&lt;include file=\"$(find \u529f\u80fd\u5305\u540d)/launch/other.launch\" /&gt;\n&lt;/launch&gt;\n</code></pre>"},{"location":"ROS%E8%BF%9B%E9%98%B6/#_1","title":"\u7ec3\u4e60","text":"<p>\u8bd5\u7740\u521b\u5efa\u4e00\u4e2alaunch\u6587\u4ef6\u542f\u52a82.5\u5c0f\u8282\u7684\u53d1\u5e03\u8005\u4e0e\u8ba2\u9605\u8005\u8282\u70b9\u5427</p> <p><code>simple.launch</code></p> <pre><code>&lt;launch&gt;\n&lt;node pkg=\"vkrobot_tutorials\" type=\"my_talker.py\" name=\"talker\" /&gt;\n&lt;node pkg=\"vkrobot_tutorials\" type=\"my_listener.py\" name=\"listener\" output=\"screen\" /&gt; &lt;/launch&gt;\n</code></pre>"},{"location":"ROS%E8%BF%9B%E9%98%B6/#32-tf","title":"3.2 TF\u5750\u6807\u53d8\u6362","text":""},{"location":"ROS%E8%BF%9B%E9%98%B6/#321-tf","title":"3.2.1 TF\u5de5\u5177","text":"<p>\u6211\u4eec\u5148\u6765\u770b\u4e00\u4e2a\u5c0f\u6848\u4f8b\uff0c\u4f53\u4f1a\u4e00\u4e0btf\u662f\u4ec0\u4e48</p> <ol> <li>\u5b89\u88c5DEMO</li> </ol> <pre><code>vkrobot@vkrobot:~$ sudo apt-get install ros-melodic-ros-tutorials ros-melodic-geometry-tutorials ros-melodic-rviz ros-melodic-rosbash ros-melodic-rqt-tf-tree\n</code></pre> <ol> <li>\u8fd0\u884cDEMO</li> </ol> <pre><code>vkrobot@vkrobot:~$ roslaunch turtle_tf turtle_tf_demo.launch\n</code></pre> <p></p> <p>\u4e00\u65e6 turtlesim \u542f\u52a8\uff0c\u60a8\u53ef\u4ee5\u4f7f\u7528\u952e\u76d8\u65b9\u5411\u952e\u5728 turtlesim \u4e2d\u63a7\u5236\u4f4d\u4e8e\u4e2d\u5fc3\u7684\u5c0f\u6d77\u9f9f\uff0c\u9009\u4e2d roslaunch \u7ec8\u7aef\u7a97\u53e3\uff0c\u4ee5\u4fbf\u6355\u83b7\u60a8\u7684\u51fb\u952e\u4ee5\u9a71\u52a8 turtlesim</p> <p></p> <p>\u73b0\u5728\u8ba9\u6211\u4eec\u7528tf\u5de5\u5177\u6765\u67e5\u770btf\u7a76\u7adf\u505a\u4e86\u4ec0\u4e48</p> <ol> <li>view_frames</li> </ol> <pre><code>vkrobot@vkrobot:~$ rosrun tf view_frames\nTransform Listener initing\nListening to /tf for 5.000000 seconds\nDone Listening\ndot - Graphviz version 2.16 (Fri Feb  8 12:52:03 UTC 2008)\nDetected dot version 2.16\nframes.pdf generated\n</code></pre> <ol> <li>rqt_tf_tree</li> </ol> <p><code>rqt_tf_tree</code>\u662f\u4e00\u4e2a\u5b9e\u65f6\u8fd0\u884c\u7684\u5de5\u5177\uff0c\u7528\u4e8e\u53ef\u89c6\u5316\u901a\u8fc7 ROS \u5e7f\u64ad\u7684\u5e27\u6811\uff0c\u60a8\u53ea\u9700\u901a\u8fc7\u56fe\u8868\u5de6\u4e0a\u89d2\u7684\u5237\u65b0\u5e95\u90e8\u5237\u65b0\u6811\u5373\u53ef</p> <pre><code>vkrobot@vkrobot:~$ rosrun rqt_tf_tree rqt_tf_tree\n</code></pre> <ol> <li>tf_echo</li> </ol> <p><code>tf_echo</code>\u53ef\u4ee5\u67e5\u770b\u901a\u8fc7ROS\u5e7f\u64ad\u7684\u4efb\u610f\u4e24\u4e2a\u5750\u6807\u7cfb\u4e4b\u95f4\u7684\u8f6c\u6362</p> <pre><code># \u7528\u6cd5\nrosrun tf tf_echo [reference_frame] [target_frame]\nvkrobot@vkrobot:~$ rosrun tf tf_echo turtle1 turtle2\nAt time 1416409795.450\n- Translation: [0.000, 0.000, 0.000]\n- Rotation: in Quaternion [0.000, 0.000, 0.914, 0.405]\nin RPY [0.000, -0.000, 2.308]\nAt time 1416409796.441\n- Translation: [0.000, 0.000, 0.000]\n- Rotation: in Quaternion [0.000, 0.000, 0.914, 0.405]\nin RPY [0.000, -0.000, 2.308]\nAt time 1416409797.450\n- Translation: [0.000, 0.000, 0.000]\n- Rotation: in Quaternion [0.000, 0.000, 0.914, 0.405]\nin RPY [0.000, -0.000, 2.308]\nAt time 1416409798.441\n- Translation: [0.000, 0.000, 0.000]\n- Rotation: in Quaternion [0.000, 0.000, 0.914, 0.405]\nin RPY [0.000, -0.000, 2.308]\nAt time 1416409799.433\n- Translation: [0.000, 0.000, 0.000]\n- Rotation: in Quaternion [0.000, 0.000, 0.691, 0.723]\nin RPY [0.000, -0.000, 1.526]\n</code></pre> <p>\u7528\u952e\u76d8\u63a7\u5236\u5c0f\u6d77\u9f9f\u79fb\u52a8\uff0c\u89c2\u5bdf\u6570\u636e\u7684\u53d8\u5316</p>"},{"location":"ROS%E8%BF%9B%E9%98%B6/#322","title":"3.2.2 \u5e7f\u64ad\u5668\u7684\u7f16\u7a0b\u5b9e\u73b0","text":"<pre><code>vkrobot@vkrobot:~$ cd ~/catkin_ws/src\nvkrobot@vkrobot:~/catkin_ws/src$ catkin_create_pkg learning_tf tf roscpp rospy turtlesim geometry_msgs\nvkrobot@vkrobot:~/catkin_ws/src$ cd learning_tf\nvkrobot@vkrobot:~/catkin_ws/src/learning_tf$ mkdir scripts\nvkrobot@vkrobot:~/catkin_ws/src/learning_tf$ cd scripts\nvkrobot@vkrobot:~/catkin_ws/src/learning_tf/scripts$ touch turtle_tf_broadcaster.py\nvkrobot@vkrobot:~/catkin_ws/src/learning_tf/scripts$ chmod +x turtle_tf_broadcaster.py  #\u6dfb\u52a0\u53ef\u6267\u884c\u6743\u9650\nvkrobot@vkrobot:~/catkin_ws/src/learning_tf/scripts$ cd ~/catkin_ws\nvkrobot@vkrobot:~/catkin_ws$ catkin_make\n</code></pre> <p><code>turtle_tf_broadcaster.py</code></p> <pre><code>#!/usr/bin/env python  \nimport rospy\nimport tf\nimport turtlesim.msg\n# \u6b64\u51fd\u6570\u5c06\u5e7f\u64ad\u5c0f\u6d77\u9f9f\u7684\u5e73\u79fb\u548c\u65cb\u8f6c\u4fe1\u606f\uff0c\u5e76\u53d1\u5e03\u4ece\u201cworld\u201d\u5750\u6807\u7cfb\u5230\u201cturtlename\u201d\u7684tf\u53d8\u6362\ndef handle_turtle_pose(msg, turtlename):\nbr = tf.TransformBroadcaster()\nbr.sendTransform((msg.x, msg.y, 0),\ntf.transformations.quaternion_from_euler(0, 0, msg.theta),\nrospy.Time.now(),\nturtlename,\n\"world\")\nif __name__  '__main__':\nrospy.init_node('turtle_tf_broadcaster')\nturtlename = rospy.get_param('~turtle')  # \u8be5\u8282\u70b9\u91c7\u7528\u5355\u4e2a\u53c2\u6570\u201cturtle\u201d\uff0c\u8be5\u53c2\u6570\u6307\u5b9a\u4e86\u6d77\u9f9f\u540d\u79f0\uff0c\u4f8b\u5982\u201cturtle1\u201d\u6216\u201cturtle2\u201d\nrospy.Subscriber('/%s/pose' % turtlename,\nturtlesim.msg.Pose,\nhandle_turtle_pose,\nturtlename)  # \u8be5\u8282\u70b9\u8ba2\u9605\u8bdd\u9898\u201c[turtlename]/pose\u201d\uff0c\u5e76\u9488\u5bf9\u6bcf\u6761\u4f20\u5165\u7684\u6d88\u606f\u8c03\u7528\u56de\u8c03\u51fd\u6570\u201chandle_turtle_pose\u201d\nrospy.spin()\n</code></pre> <p>\u8fd0\u884cbroadcaster\u8282\u70b9\uff0c\u8fd9\u4e2a\u8282\u70b9\u8fd0\u884c\u9700\u8981\u4f20\u9012\u53c2\u6570\uff0c\u56e0\u6b64\u6211\u4eec\u9009\u62e9\u4f7f\u7528launch\u6587\u4ef6\u6765\u542f\u52a8\uff0c\u521b\u5efa<code>launch/start_demo.launch</code>\u6587\u4ef6</p> <pre><code>vkrobot@vkrobot:~$ roscd learning_tf\nvkrobot@vkrobot:~/catkin_ws/src/learning_tf$ mkdir launch\nvkrobot@vkrobot:~/catkin_ws/src/learning_tf$ touch launch/start_demo.launch\n</code></pre> <p><code>start_demo.launch</code></p> <pre><code>&lt;launch&gt;\n&lt;!-- Turtlesim Node--&gt;\n&lt;node pkg=\"turtlesim\" type=\"turtlesim_node\" name=\"sim\"/&gt;\n&lt;node pkg=\"turtlesim\" type=\"turtle_teleop_key\" name=\"teleop\" output=\"screen\"/&gt;\n&lt;node pkg=\"learning_tf\" type=\"turtle_tf_broadcaster.py\" name=\"turtle1_tf_broadcaster\" respawn=\"false\" output=\"screen\" &gt;\n&lt;param name=\"turtle\" type=\"string\" value=\"turtle1\" /&gt;\n&lt;/node&gt;\n&lt;node pkg=\"learning_tf\" type=\"turtle_tf_broadcaster.py\" name=\"turtle2_tf_broadcaster\" respawn=\"false\" output=\"screen\" &gt;\n&lt;param name=\"turtle\" type=\"string\" value=\"turtle2\" /&gt; &lt;/node&gt;\n&lt;/launch&gt;\n</code></pre> <p>\u542f\u52a8\uff1a</p> <pre><code>vkrobot@vkrobot:~$ roslaunch learning_tf start_demo.launch\n</code></pre> <p>\u53ef\u4ee5\u7528<code>tf_echo</code>\u67e5\u770b\u7ed3\u679c</p> <p><code>rosrun tf tf_echo /world /turtle1</code></p>"},{"location":"ROS%E8%BF%9B%E9%98%B6/#323","title":"3.2.3 \u76d1\u542c\u5668\u7684\u7f16\u7a0b\u5b9e\u73b0","text":"<pre><code>vkrobot@vkrobot:~$ roscd learning_tf\nvkrobot@vkrobot:~/catkin_ws/src/learning_tf$ touch scripts/turtle_tf_listener.py\n</code></pre> <p><code>turtle_tf_listener.py</code></p> <pre><code>#!/usr/bin/env python  \nimport rospy\nimport math\nimport tf\nimport geometry_msgs.msg\nimport turtlesim.srv\nif __name__  '__main__':\nrospy.init_node('turtle_tf_listener')\nlistener = tf.TransformListener()\nrospy.wait_for_service('spawn')\nspawner = rospy.ServiceProxy('spawn', turtlesim.srv.Spawn)\nspawner(4, 2, 0, 'turtle2')\nturtle_vel = rospy.Publisher('turtle2/cmd_vel', geometry_msgs.msg.Twist,queue_size=1)\nrate = rospy.Rate(10.0)\nwhile not rospy.is_shutdown():\ntry:\n(trans,rot) = listener.lookupTransform('/turtle2', '/turtle1', rospy.Time(0))\n# trans\u4e2d\u5b58\u50a8\u7684\u662fx, y, z\u4e09\u4e2a\u8f74\u7684\u76f8\u5bf9\u8ddd\u79bb\n# rot\u4e2d\u5b58\u50a8\u7684\u662f\u56db\u5143\u6570\u53d8\u6362\nexcept (tf.LookupException, tf.ConnectivityException, tf.ExtrapolationException):\ncontinue\nangular = 4 * math.atan2(trans[1], trans[0])\nlinear = 0.5 * math.sqrt(trans[0] ** 2 + trans[1] ** 2)\ncmd = geometry_msgs.msg.Twist()\ncmd.linear.x = linear\ncmd.angular.z = angular\nturtle_vel.publish(cmd)\nrate.sleep()\n</code></pre> <p>\u4fee\u6539<code>start_demo.launch</code>\uff0c\u542f\u52a8listener\u8282\u70b9</p> <pre><code>&lt;launch&gt;\n...\n    &lt;node pkg=\"learning_tf\" type=\"turtle_tf_listener.py\" name=\"listener\" /&gt;\n&lt;/launch&gt;\n</code></pre>"},{"location":"ROS%E8%BF%9B%E9%98%B6/#33-qt","title":"3.3 Qt\u5de5\u5177\u7bb1","text":"<p>\u5b89\u88c5\uff1a</p> <pre><code>vkrobot@vkrobot:~$ sudo apt-get install ros-melodic-rqt\nvkrobot@vkrobot:~$ sudo apt-get install ros-melodic-rqt-common-plugins\n</code></pre>"},{"location":"ROS%E8%BF%9B%E9%98%B6/#331-rqt_console","title":"3.3.1 \u65e5\u5fd7\u8f93\u51fa\u5de5\u5177\u2014\u2014rqt_console","text":"<p>rqt_console\u662fRQT\u5305\u4e2d\u7684\u4e00\u4e2a\u67e5\u770b\u53d1\u5e03\u5230/rosout\u7684\u6d88\u606f\u3002\u5b83\u4f1a\u968f\u7740\u65f6\u95f4\u7684\u63a8\u79fb\u6536\u96c6\u6d88\u606f\uff0c\u5e76\u5141\u8bb8\u60a8\u66f4\u8be6\u7ec6\u5730\u67e5\u770b\u5b83\u4eec\uff0c\u5141\u8bb8\u60a8\u901a\u8fc7\u5404\u79cd\u65b9\u5f0f\u8fc7\u6ee4\u6d88\u606f\u3002</p> <p>\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u884c\u542f\u52a8\uff1a<code>rqt_console</code></p>"},{"location":"ROS%E8%BF%9B%E9%98%B6/#332-rqt_graph","title":"3.3.2 \u8ba1\u7b97\u56fe\u53ef\u89c6\u5316\u5de5\u5177\u2014\u2014rqt_graph","text":"<p>\u5728\u5b66\u4e60\u8bdd\u9898\u901a\u4fe1\u65f6\u6211\u4eec\u5df2\u7ecf\u4f7f\u7528\u8fc7\u6b64\u5de5\u5177\u4e86\uff0c\u6b64\u5904\u4e0d\u518d\u8d58\u8ff0\uff0c\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u884c\u542f\u52a8\uff1a<code>rqt_graph</code></p>"},{"location":"ROS%E8%BF%9B%E9%98%B6/#333-rqt_plot","title":"3.3.3 \u6570\u636e\u7ed8\u56fe\u5de5\u5177\u2014\u2014rqt_plot","text":"<p>\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u884c\u542f\u52a8\uff1a<code>rqt_plot</code></p> <p></p> <p>\u5728\u201cTopic\u201d\u4e2d\u8f93\u5165\u8bdd\u9898\uff0c\u7136\u540e\u6309\u201c+\u201d\u6309\u94ae\u5373\u53ef\u6dfb\u52a0\u6570\u636e</p>"},{"location":"ROS%E8%BF%9B%E9%98%B6/#34-rviz","title":"3.4 RVIZ","text":""},{"location":"ROS%E8%BF%9B%E9%98%B6/#341-rviz","title":"3.4.1 RVIZ\u7b80\u4ecb","text":"<p>RVIZ\u662f\u4e00\u6b3e\u4e09\u7ef4\u53ef\u89c6\u5316\u8f6f\u4ef6\uff0c\u9488\u5bf9\u57fa\u4e8eROS\u8f6f\u4ef6\u6846\u67b6\u7684\u673a\u5668\u4eba\u5e73\u53f0\u6709\u5f88\u597d\u7684\u517c\u5bb9\u6027\u3002RVIZ\u4e3b\u8981\u6709\u4ee5\u4e0b\u7279\u70b9\uff1a</p> <ul> <li>\u5728RVIZ\u4e2d\uff0c\u53ef\u4ee5\u4f7f\u7528XML[^1]\u8bed\u8a00\u5bf9\u673a\u5668\u4eba\u3001\u5468\u56f4\u7269\u4f53\u7b49\u4efb\u4f55\u5b9e\u7269\u8fdb\u884c\u5c3a\u5bf8\u3001\u8d28\u91cf\u3001\u4f4d\u7f6e\u3001\u6750\u8d28\u3001\u5173\u8282\u7b49\u5c5e\u6027\u7684\u63cf\u8ff0\uff0c\u5e76\u5728\u754c\u9762\u4e2d\u5448\u73b0\u51fa\u6765\uff0c\u8fd9\u79cd\u6587\u4ef6\u79f0\u4e4b\u4e3aURDF\u6587\u4ef6</li> <li>RVIZ\u53ef\u4ee5\u901a\u8fc7\u56fe\u5f62\u5316\u7684\u65b9\u5f0f\uff0c\u5b9e\u65f6\u663e\u793a\u673a\u5668\u4eba\u4f20\u611f\u5668\u7684\u4fe1\u606f\u3001\u673a\u5668\u4eba\u7684\u8fd0\u52a8\u72b6\u6001\u3001\u5468\u56f4\u73af\u5883\u7684\u53d8\u5316\u7b49\u4fe1\u606f</li> </ul>"},{"location":"ROS%E8%BF%9B%E9%98%B6/#342-rviz","title":"3.4.2 RVIZ\u6570\u636e\u53ef\u89c6\u5316","text":"<p>RVIZ\u4e2d\u7684UI\u754c\u9762\u5206\u4e3a\u4ee5\u4e0b\u51e0\u7c7b\uff1a</p> <ul> <li>0\uff1a3D\u89c6\u56fe\u533a</li> <li>1\uff1a\u5de5\u5177\u680f</li> <li>2\uff1a\u663e\u793a\u9879\u5217\u8868</li> <li>3\uff1a\u89c6\u89d2\u8bbe\u7f6e\u533a</li> <li>4\uff1a\u65f6\u95f4\u663e\u793a\u533a</li> </ul>"},{"location":"ROS%E8%BF%9B%E9%98%B6/#35-gazebo","title":"3.5 Gazebo","text":""},{"location":"ROS%E8%BF%9B%E9%98%B6/#351-gazebo","title":"3.5.1 Gazebo\u7b80\u4ecb","text":"<p>Gazebo\u662f\u4e00\u6b3e\u529f\u80fd\u5f3a\u5927\u7684\u4e09\u7ef4\u7269\u7406\u4eff\u771f\u5e73\u53f0\uff0c\u5177\u6709\u4ee5\u4e0b\u7279\u70b9\uff1a</p> <ul> <li>\u5177\u5907\u5f3a\u5927\u7684\u7269\u7406\u5f15\u64ce</li> <li>\u9ad8\u8d28\u91cf\u7684\u56fe\u5f62\u6e32\u67d3</li> <li>\u65b9\u4fbf\u7684\u7f16\u7a0b\u4e0e\u56fe\u5f62\u63a5\u53e3</li> <li>\u5f00\u6e90\u514d\u8d39</li> </ul> <p></p>"},{"location":"ROS%E8%BF%9B%E9%98%B6/#352","title":"3.5.2 \u6784\u5efa\u4eff\u771f\u73af\u5883","text":"<p>\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0cGazebo\u7684\u9ed8\u8ba4\u573a\u666f\u662f\u201cempty world\u201d\uff0c\u5e76\u6ca1\u6709\u7c7b\u4f3c\u623f\u95f4\u3001\u969c\u788d\u7269\u3001\u9053\u8def\u7b49\u4eff\u771f\u7269\u4f53\uff0c\u90a3\u5982\u4f55\u5728Gazebo\u4e2d\u521b\u5efa\u4eff\u771f\u73af\u5883\u5462\uff1f</p> <p>Gazebo\u4e2d\u521b\u5efa\u4eff\u771f\u73af\u5883\u6709\u4e24\u79cd\u65b9\u5f0f\uff1a</p> <ul> <li>\u76f4\u63a5\u6dfb\u52a0\u5185\u7f6e\u7ec4\u4ef6\u521b\u5efa\u4eff\u771f\u73af\u5883</li> <li>\u624b\u52a8\u7ed8\u5236\u4eff\u771f\u73af\u5883</li> </ul>"},{"location":"ROS%E8%BF%9B%E9%98%B6/#_2","title":"\u6dfb\u52a0\u5185\u7f6e\u7ec4\u4ef6\u521b\u5efa\u4eff\u771f\u73af\u5883","text":"<ol> <li>\u542f\u52a8Gazebo\u5e76\u6dfb\u52a0\u7ec4\u4ef6</li> </ol> <ol> <li>\u4fdd\u5b58\u4eff\u771f\u73af\u5883</li> </ol> <p>\u9009\u62e9 \"File\" --&gt; \"Save World As\"\uff0c\u9009\u62e9\u4fdd\u5b58\u8def\u5f84\uff08\u529f\u80fd\u5305\u8def\u5f84\u4e0b\u521b\u5efaworlds\u76ee\u5f55\uff09\uff0c\u6587\u4ef6\u540e\u7f00\u4e3a .world</p> <p></p> <ol> <li>\u542f\u52a8</li> </ol> <p>\u521b\u5efalaunch\u6587\u4ef6\u542f\u52a8</p> <pre><code>&lt;launch&gt;\n......\n    &lt;include file=\"$(find gazebo_ros)/launch/empty_world.launch\"&gt;\n&lt;arg name=\"world_name\" value=\"$(find \u529f\u80fd\u5305\u540d)/world/***.world\" /&gt;\n&lt;/include&gt;\n&lt;/launch&gt;\n</code></pre>"},{"location":"ROS%E8%BF%9B%E9%98%B6/#_3","title":"\u81ea\u5b9a\u4e49\u4eff\u771f\u73af\u5883","text":"<ol> <li>\u542f\u52a8Gazebo\u8fdb\u5165\u201cEdit\u201d --&gt; \"Building Editor\"\u6a21\u5f0f\uff0c\u7ed8\u5236\u4eff\u771f\u73af\u5883</li> </ol> <p>\u4fdd\u5b58\u4eff\u771f\u73af\u5883\u4e0e\u542f\u52a8\u65b9\u5f0f\u540c\u4e0a</p>"},{"location":"ROS%E8%BF%9B%E9%98%B6/#4","title":"4 \u673a\u5668\u4eba\u5efa\u6a21\u4e0e\u4eff\u771f","text":""},{"location":"ROS%E8%BF%9B%E9%98%B6/#41-urdf","title":"4.1 URDF","text":""},{"location":"ROS%E8%BF%9B%E9%98%B6/#411","title":"4.1.1 \u7b80\u4ecb","text":"<p>URDF\uff08Unified Robot Description Format\uff09\u2014\u2014\u7edf\u4e00\u673a\u5668\u4eba\u63cf\u8ff0\u683c\u5f0f\uff0c\u662f\u4e00\u79cd\u4ee5XML\u7684\u65b9\u5f0f\u63cf\u8ff0\u673a\u5668\u4eba\u7684\u6587\u4ef6\uff0c\u53ef\u4ee5\u63cf\u8ff0\u673a\u5668\u4eba\u7684\u5e95\u76d8\u3001\u6444\u50cf\u5934\u3001\u6fc0\u5149\u96f7\u8fbe\u3001\u673a\u68b0\u81c2\u7b49\uff0c\u5b83\u53ef\u4ee5\u88ab C++ \u5185\u7f6e\u7684\u89e3\u91ca\u5668\u8f6c\u6362\u6210\u53ef\u89c6\u5316\u7684\u673a\u5668\u4eba\u6a21\u578b\uff0c\u662fROS\u4e2d\u5b9e\u73b0\u673a\u5668\u4eba\u4eff\u771f\u7684\u91cd\u8981\u7ec4\u4ef6\u3002</p>"},{"location":"ROS%E8%BF%9B%E9%98%B6/#412","title":"4.1.2 \u6807\u7b7e","text":"<ol> <li><code>&lt;robot&gt;</code>\uff1a\u6839\u6807\u7b7e\uff0c\u7c7b\u4f3claunch\u6587\u4ef6\u4e2d\u7684\u6807\u7b7e <p>\u5c5e\u6027\uff1a</p> <ul> <li>name\uff1a\u6307\u5b9a\u673a\u5668\u4eba\u6a21\u578b\u7684\u540d\u79f0</li> </ul> <pre><code>&lt;robot name=\"\"&gt;\n......\n&lt;/robot&gt;\n</code></pre> <ol> <li><code>&lt;link&gt;</code>\uff1a\u8fde\u6746\u6807\u7b7e\uff0c\u7528\u4e8e\u63cf\u8ff0\u673a\u5668\u4eba\u521a\u4f53\u90e8\u5206\u7684\u5916\u89c2\u548c\u7269\u7406\u5c5e\u6027\uff0c\u5982\u673a\u5668\u4eba\u5e95\u76d8\uff0c\u8f6e\u5b50\uff0c\u6444\u50cf\u5934\uff0c\u6fc0\u5149\u96f7\u8fbe\u7b49</li> </ol> <p></p> <p>\u5c5e\u6027\uff1a</p> <ul> <li>name\uff1a\u4e3a\u8fde\u6746\u547d\u540d</li> </ul> <p>\u5b50\u6807\u7b7e\uff1a</p> <ul> <li> <p>visual --&gt; \u63cf\u8ff0\u5916\u89c2</p> </li> <li> <p>geometry --&gt; \u8bbe\u7f6e\u521a\u4f53\u51e0\u4f55\u5f62\u72b6</p> <ul> <li>box\uff1a\u76d2\u72b6</li> </ul> <p>\u5c5e\u6027\uff1asize=\"x y z\"</p> <ul> <li>cylinder\uff1a\u5706\u67f1\u4f53</li> </ul> <p>\u5c5e\u6027\uff1aradius=\"\u534a\u5f84\" length=\"\u957f\u5ea6\"</p> <ul> <li>sphere\uff1a\u7403\u4f53</li> </ul> <p>\u5c5e\u6027\uff1aradius=\"\u534a\u5f84\"</p> </li> <li> <p>origin --&gt; \u8bbe\u7f6e\u4f4d\u59ff\uff08\u504f\u79fb\u91cf&amp;\u503e\u659c\u5f27\u5ea6\uff09</p> <p>\u5c5e\u6027\uff1a</p> <ul> <li> <p>xyz\uff1a\u504f\u79fb</p> </li> <li> <p>rpy\uff08\u6b27\u62c9\u89d2\uff09\uff1ar-\u7ffb\u6eda p-\u4fef\u4ef0 y-\u504f\u822a  </p> </li> </ul> </li> <li> <p>metrial --&gt; \u8bbe\u7f6e\u6750\u8d28\u4e0e\u989c\u8272</p> <p>\u5c5e\u6027\uff1aname</p> <ul> <li>color</li> </ul> <p>\u5c5e\u6027\uff1argba\u2014\u2014\u7ea2\u7eff\u84dd\u6743\u91cd\u4e0e\u900f\u660e\u5ea6\uff0c\u53d6\u503c [0,1]</p> </li> <li> <p>collision --&gt; \u63cf\u8ff0\u78b0\u649e\u5c5e\u6027</p> </li> <li> <p>inertial --&gt; \u63cf\u8ff0\u60ef\u6027\u77e9\u9635</p> </li> </ul> <pre><code>&lt;robot name=\"\"&gt;\n&lt;link name=\"base_link\"&gt;\n&lt;visual&gt;\n&lt;geometry&gt;\n&lt;!-- \u76d2\u72b6 --&gt;\n&lt;box size=\"1 1 1\" /&gt;\n&lt;!-- \u5706\u67f1\u4f53 --&gt;\n&lt;cylinder radius=\"1\" length=\"1\" /&gt;\n&lt;!-- \u7403\u4f53 --&gt;\n&lt;sphere radius=\"1\" /&gt;\n&lt;/geometry&gt;\n&lt;origin xyz=\"0 0 0\" rpy=\"0 0 0\" /&gt;\n&lt;material name=\"black\"&gt;\n&lt;color rgba=\"1 1 1 1\" /&gt;\n&lt;material&gt;\n&lt;/visual&gt;\n&lt;collision&gt;\n&lt;!-- \u65e0\u7279\u6b8a\u8981\u6c42\u65f6\u4e0evisual\u6807\u7b7e\u4fdd\u6301\u4e00\u81f4 --&gt;\n&lt;geometry&gt;\n......\n            &lt;/geometry&gt;\n&lt;origin xyz=\"0 0 0\" rpy=\"0 0 0\" /&gt;\n&lt;/collision&gt;\n&lt;inertial&gt;\n......\n        &lt;/inertial&gt;\n&lt;/link&gt;\n&lt;/robot&gt;\n</code></pre> <ol> <li><code>&lt;joint&gt;</code>\uff1a\u5173\u8282\u6807\u7b7e\uff0c\u7528\u4e8e\u63cf\u8ff0\u4e24\u4e2a\u521a\u4f53\u95f4\u7684\u8fde\u63a5\u5173\u7cfb</li> </ol> <p></p> <p>\u5c5e\u6027\uff1a</p> <ul> <li>name --&gt; \u4e3a\u5173\u8282\u547d\u540d</li> <li>type --&gt; \u5173\u8282\u7684\u7c7b\u578b</li> <li>fixed\uff1a\u56fa\u5b9a\u5173\u8282\uff0c\u65e0\u81ea\u7531\u5ea6</li> <li>continuous\uff1a\u65cb\u8f6c\u5173\u8282\uff0c\u62e5\u6709\u7ed5\u5355\u8f74\u65cb\u8f6c\u76841\u4e2a\u81ea\u7531\u5ea6</li> <li>revolute\uff1a\u65cb\u8f6c\u5173\u8282\uff0c\u7c7b\u4f3c\u4e8econtinuous\uff0c\u4f46\u662f\u6709\u65cb\u8f6c\u89d2\u5ea6\u7684\u9650\u5236\uff0c1\u4e2a\u81ea\u7531\u5ea6</li> <li>prismatic\uff1a\u6ed1\u52a8\u5173\u8282\uff0c\u62e5\u6709\u6cbf\u5355\u8f74\u79fb\u52a8\u7684\u81ea\u7531\u5ea6\uff0c\u6709\u4f4d\u7f6e\u6781\u9650\uff0c1\u4e2a\u81ea\u7531\u5ea6</li> <li>planner\uff1a\u5e73\u9762\u5173\u8282\uff0c\u62e5\u6709\u5728\u5e73\u9762\u6b63\u4ea4\u65b9\u5411\u4e0a\u7684\u5e73\u79fb\u6216\u65cb\u8f6c\u7684\u81ea\u7531\u5ea6\uff0c5\u4e2a\u81ea\u7531\u5ea6</li> <li>floating\uff1a\u6d6e\u52a8\u8282\u70b9\uff0c\u62e5\u6709\u4e09\u8f74\u5e73\u79fb\u4e0e\u65cb\u8f6c\u76846\u4e2a\u81ea\u7531\u5ea6</li> </ul> <p>\u5b50\u6807\u7b7e\uff1a</p> <ul> <li>parent --&gt; \u8bbe\u7f6e\u5173\u8282\u7684\u7236\u7ea7\u8fde\u6746</li> <li>link --&gt; \u7236\u7ea7\u8fde\u6746\u540d\u79f0</li> <li>child --&gt; \u8bbe\u7f6e\u5173\u8282\u7684\u5b50\u7ea7\u8fde\u6746</li> <li>link --&gt; \u5b50\u7ea7\u8fde\u6746\u540d\u79f0</li> <li>origin --&gt; \u8bbe\u7f6e\u5173\u8282\u7684\u504f\u79fb\u91cf</li> <li>axis --&gt; \u8bbe\u7f6e\u5173\u8282\u56f4\u7ed5\u54ea\u4e2a\u8f74\u8fd0\u52a8</li> </ul> <pre><code>&lt;robot name=\"\"&gt;\n&lt;link name=\"link_1\"&gt;\n......\n    &lt;/link&gt;\n&lt;link name=\"link_2\"&gt;\n......\n    &lt;/link&gt;\n&lt;joint name=\"joint_name\" type=\"continuous\"&gt;\n&lt;parent link=\"link_1\" /&gt;\n&lt;child link=\"link_2\" /&gt;\n&lt;!-- \u8ba1\u7b97\u4e24\u4e2a\u8fde\u6746\u7684\u7269\u7406\u4e2d\u5fc3\u504f\u79fb\u91cf --&gt;\n&lt;origin xyz=\"0 0 0\" rpy=\"0 0 0\" /&gt;\n&lt;axis xyz=\"0 1 0\"&gt;\n&lt;/joint&gt;\n&lt;/robot&gt;\n</code></pre> <ol> <li><code>&lt;gazebo&gt;</code>\uff1a\u96c6\u6210Gazebo\u65f6\u9700\u8981\u4f7f\u7528\u7684\u6807\u7b7e</li> </ol>"},{"location":"ROS%E8%BF%9B%E9%98%B6/#413-urdf","title":"4.1.3 \u521b\u5efaURDF\u6a21\u578b","text":"<ol> <li>\u65b0\u5efa\u529f\u80fd\u5305\u5e76\u5bfc\u5165\u4f9d\u8d56\uff0c\u5305\u62ec\uff1a<code>urdf</code>\u3001<code>xacro</code>\u3001<code>gaezbo_ros</code>\u3001<code>gazebo_ros_control</code>\u3001<code>gazebo_plugins</code></li> <li>\u65b0\u5efaurdf\u76ee\u5f55\u7528\u6765\u4fdd\u5b58urdf\u6587\u4ef6</li> <li>\u65b0\u5efaurdf\u6587\u4ef6\u7f16\u5199\u673a\u5668\u4eba\u6a21\u578b</li> </ol> <pre><code>vkrobot@vkrobot:~$ cd catkin_ws/src\nvkrobot@vkrobot:~/catkin_ws/src$ catkin_create_pkg learning_urdf urdf xacro gazebo_ros gazebo_ros_control gazebo_plugins\nvkrobot@vkrobot:~/catkin_ws/src$ mkdir learning_urdf/urdf\nvkrobot@vkrobot:~/catkin_ws/src$ touch learning_urdf/urdf/my_car.urdf\n</code></pre> <p><code>my_car.urdf</code></p> <pre><code>&lt;robot name=\"my_car\"&gt;\n&lt;link name=\"base_footprint\"&gt;\n&lt;visual&gt;\n&lt;geometry&gt;\n&lt;sphere radius=\"0.001\" /&gt;\n&lt;/geometry&gt;\n&lt;/visual&gt;\n&lt;/link&gt;\n&lt;joint name=\"base_link2base_footprint\" type=\"fixed\"&gt;\n&lt;parent link=\"base_footprint\" /&gt;\n&lt;child link=\"base_link\" /&gt;\n&lt;origin xyz=\"0 0 0.085\" /&gt;\n&lt;/joint&gt;\n&lt;link name=\"base_link\"&gt;\n&lt;visual&gt;\n&lt;geometry&gt;\n&lt;cylinder radius=\"0.1\" length=\"0.15\" /&gt;\n&lt;/geometry&gt;\n&lt;material name=\"red\"&gt;\n&lt;color rgba=\"1 0 0 0.5\" /&gt;\n&lt;/material&gt;\n&lt;/visual&gt;\n&lt;/link&gt;\n&lt;link name=\"left_wheel\"&gt;\n&lt;visual&gt;\n&lt;geometry&gt;\n&lt;cylinder radius=\"0.03\" length=\"0.015\" /&gt;\n&lt;/geometry&gt;\n&lt;origin xyz=\"0 0 0\" rpy=\"1.5708 0 0\" /&gt;\n&lt;material name=\"black\"&gt;\n&lt;color rgba=\"0 0 0 1\" /&gt;\n&lt;/material&gt;\n&lt;/visual&gt;\n&lt;/link&gt;\n&lt;joint name=\"left_wheel2base_link\" type=\"continuous\"&gt;\n&lt;parent link=\"base_link\" /&gt;\n&lt;child link=\"left_wheel\" /&gt;\n&lt;origin xyz=\"0 0.1 -0.055\" /&gt;\n&lt;axis xyz=\"0 1 0\" /&gt;\n&lt;/joint&gt;\n&lt;link name=\"right_wheel\"&gt;\n&lt;visual&gt;\n&lt;geometry&gt;\n&lt;cylinder radius=\"0.03\" length=\"0.015\" /&gt;\n&lt;/geometry&gt;\n&lt;origin xyz=\"0 0 0\" rpy=\"1.5708 0 0\" /&gt;\n&lt;material name=\"black\"&gt;\n&lt;color rgba=\"0 0 0 1\" /&gt;\n&lt;/material&gt;\n&lt;/visual&gt;\n&lt;/link&gt;\n&lt;joint name=\"right_wheel2base_link\" type=\"continuous\"&gt;\n&lt;parent link=\"base_link\" /&gt;\n&lt;child link=\"right_wheel\" /&gt;\n&lt;origin xyz=\"0 -0.1 -0.055\" /&gt;\n&lt;axis xyz=\"0 1 0\" /&gt;\n&lt;/joint&gt;\n&lt;link name=\"front_wheel\"&gt;\n&lt;visual&gt;\n&lt;geometry&gt;\n&lt;sphere radius=\"0.01\" /&gt;\n&lt;/geometry&gt;\n&lt;material name=\"white\"&gt;\n&lt;color rgba=\"1 1 1 1\" /&gt;\n&lt;/material&gt;\n&lt;/visual&gt;\n&lt;/link&gt;\n&lt;joint name=\"front_wheel2base_link\" type=\"continuous\"&gt;\n&lt;parent link=\"base_link\" /&gt;\n&lt;child link=\"front_wheel\" /&gt;\n&lt;origin xyz=\"0.08 0 -0.075\" /&gt;\n&lt;axis xyz=\"1 1 1\" /&gt;\n&lt;/joint&gt;\n&lt;link name=\"back_wheel\"&gt;\n&lt;visual&gt;\n&lt;geometry&gt;\n&lt;sphere radius=\"0.01\" /&gt;\n&lt;/geometry&gt;\n&lt;material name=\"white\"&gt;\n&lt;color rgba=\"1 1 1 1\" /&gt;\n&lt;/material&gt;\n&lt;/visual&gt;\n&lt;/link&gt;\n&lt;joint name=\"back_wheel2base_link\" type=\"continuous\"&gt;\n&lt;parent link=\"base_link\" /&gt;\n&lt;child link=\"back_wheel\" /&gt;\n&lt;origin xyz=\"-0.08 0 -0.075\" /&gt;\n&lt;axis xyz=\"1 1 1\" /&gt;\n&lt;/joint&gt;\n&lt;link name=\"camera\"&gt;\n&lt;visual&gt;\n&lt;geometry&gt;\n&lt;box size=\"0.01 0.03 0.03\" /&gt;\n&lt;/geometry&gt;\n&lt;material name=\"blue\"&gt;\n&lt;color rgba=\"0 0 1 1\" /&gt;\n&lt;/material&gt;\n&lt;/visual&gt;\n&lt;/link&gt;\n&lt;joint name=\"camera2base_link\" type=\"fixed\"&gt;\n&lt;parent link=\"base_link\" /&gt;\n&lt;child link=\"camera\" /&gt;\n&lt;origin xyz=\"0.1 0 0\" /&gt;\n&lt;/joint&gt; &lt;link name=\"laser\"&gt;\n&lt;visual&gt;\n&lt;geometry&gt;\n&lt;cylinder radius=\"0.02\" length=\"0.01\" /&gt;\n&lt;/geometry&gt;\n&lt;material name=\"blue\"&gt;\n&lt;color rgba=\"0 0 1 1\" /&gt;\n&lt;/material&gt;\n&lt;/visual&gt;\n&lt;/link&gt;\n&lt;joint name=\"laser2base_link\" type=\"fixed\"&gt;\n&lt;parent link=\"base_link\" /&gt;\n&lt;child link=\"laser\" /&gt;\n&lt;origin xyz=\"0 0 0.08\" /&gt;\n&lt;/joint&gt; &lt;/robot&gt;\n</code></pre> <ol> <li>\u65b0\u5efalaunch\u6587\u4ef6\u542f\u52a8rviz\u5e76\u52a0\u8f7d\u673a\u5668\u4eba\u6a21\u578b</li> </ol> <pre><code>vkrobot@vkrobot:~/catkin_ws/src$ mkdir learning_urdf/launch\nvkrobot@vkrobot:~/catkin_ws/src$ touch learning_urdf/launch/start.launch\n</code></pre> <p><code>start.launch</code></p> <pre><code>&lt;launch&gt;\n&lt;!-- \u52a0\u8f7d\u673a\u5668\u4eba\u6a21\u578b --&gt;\n&lt;param name=\"robot_description\" textfile=\"$(find learning_urdf)/urdf/my_car.urdf\" /&gt;\n&lt;!-- \u542f\u52a8rviz --&gt;\n&lt;node pkg=\"rviz\" type=\"rviz\" name=\"rviz\" args=\"-d $(find learning_urdf)/config/my_car.rviz\" /&gt;\n&lt;!-- \u542f\u52a8\u673a\u5668\u4eba\u72b6\u6001\u53d1\u5e03\u8282\u70b9\u4e0e\u5173\u8282\u72b6\u6001\u53d1\u5e03\u8282\u70b9\uff0c\u53d1\u5e03TF --&gt;\n&lt;node pkg=\"robot_state_publisher\" type=\"robot_state_publisher\" name=\"robot_state_publisher\" /&gt;\n&lt;node pkg=\"joint_state_publisher\" type=\"joint_state_publisher\" name=\"joint_state_publisher\" /&gt;\n&lt;/launch&gt;\n</code></pre>"},{"location":"ROS%E8%BF%9B%E9%98%B6/#414-xacrourdf","title":"4.1.4 \u4f7f\u7528xacro\u4f18\u5316urdf\u6587\u4ef6","text":""},{"location":"ROS%E8%BF%9B%E9%98%B6/#_4","title":"\u6982\u5ff5","text":"<p>Xacro \u662f XML Macros \u7684\u7f29\u5199\uff0c\u662f\u4e00\u79cd\u53ef\u7f16\u7a0b\u7684 XML \u5b8f\u8bed\u8a00</p>"},{"location":"ROS%E8%BF%9B%E9%98%B6/#_5","title":"\u539f\u7406","text":"<p>Xacro \u53ef\u4ee5\u901a\u8fc7\u58f0\u660e\u53d8\u91cf\u3001\u5c01\u88c5\u56fa\u5b9a\u903b\u8f91\u7684\u65b9\u5f0f\u5b9e\u73b0\u7c7b\u4f3c\u51fd\u6570\u7684\u529f\u80fd\uff0c\u4ece\u800c\u63d0\u9ad8\u4ee3\u7801\u7684\u590d\u7528\u7387</p> <ol> <li>\u58f0\u660e\u53d8\u91cf</li> </ol> <pre><code>&lt;robot name=\"\" xmlns=\"http://wiki.ros.org/xacro\"&gt;\n&lt;xacro:property name=\"\u53d8\u91cf\u540d\" value=\"\u53d8\u91cf\u503c\" /&gt;\n&lt;!-- \u8c03\u7528 --&gt;\n${\u53d8\u91cf\u540d}\n\n&lt;!-- \u6570\u5b66\u8fd0\u7b97 --&gt;\n${\u6570\u5b66\u8868\u8fbe\u5f0f}\n&lt;/robot&gt;\n</code></pre> <ol> <li>\u5c01\u88c5\u5b8f</li> </ol> <pre><code>&lt;robot name=\"\" xmlns=\"http://wiki.ros.org/xacro\"&gt;\n&lt;xacro:macro name=\"\u5b8f\u540d\u79f0\" params=\"\u53c2\u6570\uff08\u591a\u4e2a\u53c2\u6570\u4e4b\u95f4\u7528\u7a7a\u683c\u9694\u5f00\uff09\"&gt;\n......\n    &lt;/xacro:macro&gt;\n&lt;!-- \u8c03\u7528 --&gt;\n&lt;xacro:\u5b8f\u540d\u79f0 \u53c2\u65701=\"\" \u53c2\u65702=\"\" /&gt;\n&lt;/robot&gt;\n</code></pre> <ol> <li>\u6587\u4ef6\u5305\u542b</li> </ol> <pre><code>&lt;robot name=\"\" xmlns=\"http://wiki.ros.org/xacro\"&gt;\n&lt;xacro:include filename=\"xacro\u6587\u4ef6\u8def\u5f84\" /&gt;\n&lt;/robot&gt;\n</code></pre>"},{"location":"ROS%E8%BF%9B%E9%98%B6/#urdf","title":"\u4f18\u5316URDF\u6587\u4ef6","text":"<ol> <li>\u65b0\u5efa\u5404\u90e8\u5206\u7684xacro\u6587\u4ef6\u5e76\u6574\u5408</li> </ol> <pre><code>vkrobot@vkrobot:~/catkin_ws/src$ touch learning_urdf/urdf/my_base.urdf.xacro\nvkrobot@vkrobot:~/catkin_ws/src$ touch learning_urdf/urdf/my_camera.urdf.xacro\nvkrobot@vkrobot:~/catkin_ws/src$ touch learning_urdf/urdf/my_laser.urdf.xacro\nvkrobot@vkrobot:~/catkin_ws/src$ touch learning_urdf/urdf/my_car.urdf.xacro\n</code></pre> <p><code>my_base.urdf.xacro</code></p> <pre><code>&lt;robot name=\"my_car\" xmlns:xacro=\"http://wiki.ros.org/xacro\"&gt;\n&lt;link name=\"base_footprint\"&gt;\n&lt;visual&gt;\n&lt;geometry&gt;\n&lt;sphere radius=\"0.001\" /&gt;\n&lt;/geometry&gt;\n&lt;/visual&gt;\n&lt;/link&gt;\n&lt;xacro:property name=\"lidi\" value=\"0.01\" /&gt;\n&lt;xacro:property name=\"base_radius\" value=\"0.1\" /&gt;\n&lt;xacro:property name=\"base_length\" value=\"0.15\" /&gt;\n&lt;xacro:property name=\"wheel_radius\" value=\"0.03\" /&gt;\n&lt;xacro:property name=\"wheel_length\" value=\"0.015\" /&gt;\n&lt;xacro:property name=\"PI\" value=\"3.1415927\" /&gt;\n&lt;joint name=\"base_link2base_footprint\" type=\"fixed\"&gt;\n&lt;parent link=\"base_footprint\" /&gt;\n&lt;child link=\"base_link\" /&gt;\n&lt;origin xyz=\"0 0 ${base_length/2+lidi}\" /&gt;\n&lt;/joint&gt;\n&lt;link name=\"base_link\"&gt;\n&lt;visual&gt;\n&lt;geometry&gt;\n&lt;cylinder radius=\"${base_radius}\" length=\"${base_length}\" /&gt;\n&lt;/geometry&gt;\n&lt;material name=\"red\"&gt;\n&lt;color rgba=\"0 0 0 0.5\" /&gt;\n&lt;/material&gt;\n&lt;/visual&gt;\n&lt;/link&gt;\n&lt;xacro:macro name=\"wheel_func\" params=\"wheel_name flag\"&gt;\n&lt;link name=\"${wheel_name}_wheel\"&gt;\n&lt;visual&gt;\n&lt;geometry&gt;\n&lt;cylinder radius=\"${wheel_radius}\" length=\"${wheel_length}\" /&gt;\n&lt;/geometry&gt;\n&lt;origin xyz=\"0 0 0\" rpy=\"${PI/2} 0 0\" /&gt;\n&lt;material name=\"black\"&gt;\n&lt;color rgba=\"0 0 0 1\" /&gt;\n&lt;/material&gt;\n&lt;/visual&gt;\n&lt;/link&gt;\n&lt;joint name=\"${wheel_name}_wheel2base_link\" type=\"continuous\"&gt;\n&lt;parent link=\"base_link\" /&gt;\n&lt;child link=\"${wheel_name}_wheel\" /&gt;\n&lt;origin xyz=\"0 ${flag*base_radius} ${-(lidi+base_length/2-wheel_radius)}\" /&gt;\n&lt;axis xyz=\"0 1 0\" /&gt;\n&lt;/joint&gt;\n&lt;/xacro:macro&gt;\n&lt;xacro:wheel_func wheel_name=\"left\" flag=\"1\" /&gt;\n&lt;xacro:wheel_func wheel_name=\"right\" flag=\"-1\" /&gt;\n&lt;xacro:property name=\"universal_wheel_radius\" value=\"0.01\" /&gt;\n&lt;xacro:macro name=\"universal_wheel_func\" params=\"wheel_name flag\"&gt;\n&lt;link name=\"${wheel_name}_wheel\"&gt;\n&lt;visual&gt;\n&lt;geometry&gt;\n&lt;sphere radius=\"${universal_wheel_radius}\" /&gt;\n&lt;/geometry&gt;\n&lt;material name=\"white\"&gt;\n&lt;color rgba=\"1 1 1 1\" /&gt;\n&lt;/material&gt;\n&lt;/visual&gt;\n&lt;/link&gt;\n&lt;joint name=\"${wheel_name}_wheel2base_link\" type=\"continuous\"&gt;\n&lt;parent link=\"base_link\" /&gt;\n&lt;child link=\"${wheel_name}_wheel\" /&gt;\n&lt;origin xyz=\"${flag*(base_radius-0.02)} 0 ${-(base_length/2+lidi-universal_wheel_radius)}\" /&gt;\n&lt;axis xyz=\"1 1 1\" /&gt;\n&lt;/joint&gt;\n&lt;/xacro:macro&gt;\n&lt;xacro:universal_wheel_func wheel_name=\"front\" flag=\"1\" /&gt;\n&lt;xacro:universal_wheel_func wheel_name=\"back\" flag=\"-1\" /&gt;\n&lt;/robot&gt;\n</code></pre> <p><code>my_camera.urdf.xacro</code></p> <pre><code>&lt;robot name=\"my_camera\" xmlns:xacro=\"http://wiki.ros.org/xacro\"&gt;\n&lt;xacro:property name=\"camera_length\" value=\"0.01\" /&gt;\n&lt;xacro:property name=\"camera_width\" value=\"0.03\" /&gt;\n&lt;xacro:property name=\"camera_height\" value=\"0.03\" /&gt;\n&lt;xacro:property name=\"camera_x\" value=\"${base_radius}\" /&gt;\n&lt;xacro:property name=\"camera_y\" value=\"0\" /&gt;\n&lt;xacro:property name=\"camera_z\" value=\"0\" /&gt;\n&lt;link name=\"camera\"&gt;\n&lt;visual&gt;\n&lt;geometry&gt;\n&lt;box size=\"${camera_length} ${camera_width} ${camera_height}\" /&gt;\n&lt;/geometry&gt;\n&lt;material name=\"blue\"&gt;\n&lt;color rgba=\"0 0 1 1\" /&gt;\n&lt;/material&gt;\n&lt;/visual&gt;\n&lt;/link&gt;\n&lt;joint name=\"camera2base_link\" type=\"fixed\"&gt;\n&lt;parent link=\"base_link\" /&gt;\n&lt;child link=\"camera\" /&gt;\n&lt;origin xyz=\"${camera_x} ${camera_y} ${camera_z}\" /&gt;\n&lt;/joint&gt;\n&lt;/robot&gt;\n</code></pre> <p><code>my_laser.urdf.xacro</code></p> <pre><code>&lt;robot name=\"my_laser\" xmlns:xacro=\"http://wiki.ros.org/xacro\"&gt;\n&lt;xacro:property name=\"laser_radius\" value=\"0.02\" /&gt;\n&lt;xacro:property name=\"laser_length\" value=\"0.01\" /&gt;\n&lt;link name=\"laser\"&gt;\n&lt;visual&gt;\n&lt;geometry&gt;\n&lt;cylinder radius=\"${laser_radius}\" length=\"${laser_length}\" /&gt;\n&lt;/geometry&gt;\n&lt;material name=\"blue\"&gt;\n&lt;color rgba=\"0 0 1 1\" /&gt;\n&lt;/material&gt;\n&lt;/visual&gt;\n&lt;/link&gt;\n&lt;joint name=\"laser2base_link\" type=\"fixed\"&gt;\n&lt;parent link=\"base_link\" /&gt;\n&lt;child link=\"laser\" /&gt;\n&lt;origin xyz=\"0 0 ${(base_length+laser_length)/2}\" /&gt;\n&lt;/joint&gt; &lt;/robot&gt;\n</code></pre> <p><code>my_car.urdf.xacro</code></p> <pre><code>&lt;robot name=\"my_car\" xmlns:xacro=\"http://wiki.ros.org/xacro\"&gt;\n&lt;xacro:include filename=\"my_base.urdf.xacro\" /&gt;\n&lt;xacro:include filename=\"my_camera.urdf.xacro\" /&gt;\n&lt;xacro:include filename=\"my_laser.urdf.xacro\" /&gt;\n&lt;/robot&gt;\n</code></pre> <ol> <li>\u65b0\u5efalaunch\u6587\u4ef6\u52a0\u8f7dxacro\u6a21\u578b</li> </ol> <pre><code>vkrobot@vkrobot:~/catkin_ws/src$ touch learning_urdf/launch/start_xacro.launch\n</code></pre> <p><code>start_xacro.launch</code></p> <pre><code>&lt;launch&gt;\n&lt;param name=\"robot_description\" command=\"$(find xacro)/xacro $(find demo_urdf)/urdf/my_car.urdf.xacro\" /&gt;\n&lt;node pkg=\"rviz\" type=\"rviz\" name=\"rviz\" args=\"-d $(find demo_urdf)/config/my_car.rviz\" /&gt;\n&lt;node pkg=\"robot_state_publisher\" type=\"robot_state_publisher\" name=\"robot_state_publisher\" /&gt;\n&lt;node pkg=\"joint_state_publisher\" type=\"joint_state_publisher\" name=\"joint_state_publisher\" /&gt;\n&lt;/launch&gt;\n</code></pre>"},{"location":"ROS%E8%BF%9B%E9%98%B6/#42-gazebo","title":"4.2 Gazebo\u4eff\u771f","text":""},{"location":"ROS%E8%BF%9B%E9%98%B6/#421-gazebo","title":"4.2.1 \u673a\u5668\u4eba\u6a21\u578b\u6dfb\u52a0gazebo\u5c5e\u6027","text":"<p>\u5f53URDF\u9700\u8981\u4e0eGazebo\u96c6\u6210\u65f6\uff0c\u5fc5\u987b\u8981\u6dfb\u52a0<code>&lt;collision&gt;</code>\u4e0e<code>&lt;inertial&gt;</code>\u6807\u7b7e\uff0c\u5e76\u4e14\u4f7f\u7528<code>&lt;gazebo&gt;</code>\u6807\u7b7e\u91cd\u65b0\u8bbe\u7f6elink\u989c\u8272</p> <pre><code>vkrobot@vkrobot:~/catkin_ws/src$ touch learning_urdf/urdf/base_collision.urdf.xacro\nvkrobot@vkrobot:~/catkin_ws/src$ touch learning_urdf/urdf/my_base_gazebo.urdf.xacro\nvkrobot@vkrobot:~/catkin_ws/src$ touch learning_urdf/urdf/my_camera_gazebo.urdf.xacro\nvkrobot@vkrobot:~/catkin_ws/src$ touch learning_urdf/urdf/my_laser_gazebo.urdf.xacro\nvkrobot@vkrobot:~/catkin_ws/src$ touch learning_urdf/urdf/my_car_gazebo.urdf.xacro\n</code></pre> <p><code>base_collision.urdf.xacro</code> ---&gt; \u5c01\u88c5\u60ef\u6027\u77e9\u9635\u7b97\u6cd5\u7684xacro\u6587\u4ef6</p> <pre><code>&lt;robot name=\"my_car\" xmlns:xacro=\"http://wiki.ros.org/xacro\"&gt;\n&lt;xacro:macro name=\"sphere_inertial_matrix\" params=\"m r\"&gt;\n&lt;inertial&gt;\n&lt;mass value=\"${m}\" /&gt;\n&lt;inertia ixx=\"${2*m*r*r/5}\" ixy=\"0\" ixz=\"0\"\niyy=\"${2*m*r*r/5}\" iyz=\"0\"\nizz=\"${2*m*r*r/5}\" /&gt;\n&lt;/inertial&gt;\n&lt;/xacro:macro&gt;\n&lt;xacro:macro name=\"cylinder_inertial_matrix\" params=\"m r h\"&gt;\n&lt;inertial&gt;\n&lt;mass value=\"${m}\" /&gt;\n&lt;inertia ixx=\"${m*(3*r*r+h*h)/12}\" ixy=\"0\" ixz=\"0\"\niyy=\"${m*(3*r*r+h*h)}\" iyz=\"0\"\nizz=\"${m*r*r/2}\" /&gt;\n&lt;/inertial&gt;\n&lt;/xacro:macro&gt;\n&lt;xacro:macro name=\"box_inertial_matrix\" params=\"m l w h\"&gt;\n&lt;inertial&gt;\n&lt;mass value=\"${m}\" /&gt;\n&lt;inertia ixx=\"${m*(h*h+l*l)/12}\" ixy=\"0\" ixz=\"0\"\niyy=\"${m*(w*w+l*l)/12}\" iyz=\"0\"\nizz=\"${m*(w*w+h*h)/12}\" /&gt;\n&lt;/inertial&gt;\n&lt;/xacro:macro&gt;\n&lt;/robot&gt;\n</code></pre> <p><code>my_base_gazebo.urdf.xacro</code></p> <pre><code>&lt;robot name=\"my_car\" xmlns:xacro=\"http://wiki.ros.org/xacro\"&gt;\n&lt;link name=\"base_footprint\"&gt;\n&lt;visual&gt;\n&lt;geometry&gt;\n&lt;sphere radius=\"0.001\" /&gt;\n&lt;/geometry&gt;\n&lt;/visual&gt;\n&lt;/link&gt;\n&lt;gazebo reference=\"base_footprint\"&gt;\n&lt;turnGravityOff&gt;false&lt;/turnGravityOff&gt;\n&lt;/gazebo&gt;\n&lt;xacro:property name=\"lidi\" value=\"0.01\" /&gt;\n&lt;xacro:property name=\"base_radius\" value=\"0.1\" /&gt;\n&lt;xacro:property name=\"base_length\" value=\"0.15\" /&gt;\n&lt;xacro:property name=\"wheel_radius\" value=\"0.03\" /&gt;\n&lt;xacro:property name=\"wheel_length\" value=\"0.015\" /&gt;\n&lt;xacro:property name=\"PI\" value=\"3.1415927\" /&gt;\n&lt;xacro:property name=\"base_link_m\" value=\"3.5\" /&gt;\n&lt;xacro:property name=\"wheel_m\" value=\"0.05\" /&gt;\n&lt;joint name=\"base_link2base_footprint\" type=\"fixed\"&gt;\n&lt;parent link=\"base_footprint\" /&gt;\n&lt;child link=\"base_link\" /&gt;\n&lt;origin xyz=\"0 0 ${base_length/2+lidi}\" /&gt;\n&lt;/joint&gt;\n&lt;link name=\"base_link\"&gt;\n&lt;visual&gt;\n&lt;geometry&gt;\n&lt;cylinder radius=\"${base_radius}\" length=\"${base_length}\" /&gt;\n&lt;/geometry&gt;\n&lt;material name=\"red\"&gt;\n&lt;color rgba=\"0 0 0 0.5\" /&gt;\n&lt;/material&gt;\n&lt;/visual&gt;\n&lt;collision&gt;\n&lt;geometry&gt;\n&lt;cylinder radius=\"${base_radius}\" length=\"${base_length}\" /&gt;\n&lt;/geometry&gt;\n&lt;/collision&gt;\n&lt;xacro:cylinder_inertial_matrix m=\"${base_link_m}\" r=\"${base_radius}\" h=\"${base_length}\" /&gt;\n&lt;/link&gt;\n&lt;gazebo reference=\"base_link\"&gt;\n&lt;material&gt;Gazebo/Gray&lt;/material&gt;\n&lt;/gazebo&gt;\n&lt;xacro:macro name=\"wheel_func\" params=\"wheel_name flag\"&gt;\n&lt;link name=\"${wheel_name}_wheel\"&gt;\n&lt;visual&gt;\n&lt;geometry&gt;\n&lt;cylinder radius=\"${wheel_radius}\" length=\"${wheel_length}\" /&gt;\n&lt;/geometry&gt;\n&lt;origin xyz=\"0 0 0\" rpy=\"${PI/2} 0 0\" /&gt;\n&lt;material name=\"black\"&gt;\n&lt;color rgba=\"0 0 0 1\" /&gt;\n&lt;/material&gt;\n&lt;/visual&gt;\n&lt;collision&gt;\n&lt;geometry&gt;\n&lt;cylinder radius=\"${wheel_radius}\" length=\"${wheel_length}\" /&gt;\n&lt;/geometry&gt;\n&lt;origin xyz=\"0 0 0\" rpy=\"${PI/2} 0 0\" /&gt;\n&lt;/collision&gt;\n&lt;xacro:cylinder_inertial_matrix m=\"${wheel_m}\" r=\"${wheel_radius}\" h=\"${wheel_length}\" /&gt;\n&lt;/link&gt;\n&lt;gazebo reference=\"${wheel_name}_wheel\"&gt;\n&lt;material&gt;Gazebo/Black&lt;/material&gt;\n&lt;/gazebo&gt;\n&lt;joint name=\"${wheel_name}_wheel2base_link\" type=\"continuous\"&gt;\n&lt;parent link=\"base_link\" /&gt;\n&lt;child link=\"${wheel_name}_wheel\" /&gt;\n&lt;origin xyz=\"0 ${flag*base_radius} ${-(lidi+base_length/2-wheel_radius)}\" /&gt;\n&lt;axis xyz=\"0 1 0\" /&gt;\n&lt;/joint&gt;\n&lt;/xacro:macro&gt;\n&lt;xacro:wheel_func wheel_name=\"left\" flag=\"1\" /&gt;\n&lt;xacro:wheel_func wheel_name=\"right\" flag=\"-1\" /&gt;\n&lt;xacro:property name=\"universal_wheel_radius\" value=\"0.01\" /&gt;\n&lt;xacro:property name=\"universal_wheel_m\" value=\"0.03\" /&gt;\n&lt;xacro:macro name=\"universal_wheel_func\" params=\"wheel_name flag\"&gt;\n&lt;link name=\"${wheel_name}_wheel\"&gt;\n&lt;visual&gt;\n&lt;geometry&gt;\n&lt;sphere radius=\"${universal_wheel_radius}\" /&gt;\n&lt;/geometry&gt;\n&lt;material name=\"white\"&gt;\n&lt;color rgba=\"1 1 1 1\" /&gt;\n&lt;/material&gt;\n&lt;/visual&gt;\n&lt;collision&gt;\n&lt;geometry&gt;\n&lt;sphere radius=\"${universal_wheel_radius}\" /&gt;\n&lt;/geometry&gt;\n&lt;/collision&gt;\n&lt;xacro:sphere_inertial_matrix m=\"${universal_wheel_m}\" r=\"${universal_wheel_radius}\" /&gt;\n&lt;/link&gt;\n&lt;gazebo reference=\"${wheel_name}_wheel\"&gt;\n&lt;material&gt;Gazebo/White&lt;/material&gt;\n&lt;/gazebo&gt;\n&lt;joint name=\"${wheel_name}_wheel2base_link\" type=\"continuous\"&gt;\n&lt;parent link=\"base_link\" /&gt;\n&lt;child link=\"${wheel_name}_wheel\" /&gt;\n&lt;origin xyz=\"${flag*(base_radius-0.02)} 0 ${-(base_length/2+lidi-universal_wheel_radius)}\" /&gt;\n&lt;axis xyz=\"0 1 0\" /&gt;\n&lt;/joint&gt;\n&lt;/xacro:macro&gt;\n&lt;xacro:universal_wheel_func wheel_name=\"front\" flag=\"1\" /&gt;\n&lt;xacro:universal_wheel_func wheel_name=\"back\" flag=\"-1\" /&gt;\n&lt;/robot&gt;\n</code></pre> <p><code>my_camera_gazebo.urdf.xacro</code></p> <pre><code>&lt;robot name=\"my_camera\" xmlns:xacro=\"http://wiki.ros.org/xacro\"&gt;\n&lt;xacro:property name=\"camera_length\" value=\"0.01\" /&gt;\n&lt;xacro:property name=\"camera_width\" value=\"0.03\" /&gt;\n&lt;xacro:property name=\"camera_height\" value=\"0.03\" /&gt;\n&lt;xacro:property name=\"camera_x\" value=\"${base_radius}\" /&gt;\n&lt;xacro:property name=\"camera_y\" value=\"0\" /&gt;\n&lt;xacro:property name=\"camera_z\" value=\"0\" /&gt;\n&lt;xacro:property name=\"camera_m\" value=\"0.01\" /&gt;\n&lt;link name=\"camera\"&gt;\n&lt;visual&gt;\n&lt;geometry&gt;\n&lt;box size=\"${camera_length} ${camera_width} ${camera_height}\" /&gt;\n&lt;/geometry&gt;\n&lt;material name=\"blue\"&gt;\n&lt;color rgba=\"0 0 1 1\" /&gt;\n&lt;/material&gt;\n&lt;/visual&gt;\n&lt;collision&gt;\n&lt;geometry&gt;\n&lt;box size=\"${camera_length} ${camera_width} ${camera_height}\" /&gt;\n&lt;/geometry&gt;\n&lt;/collision&gt;\n&lt;xacro:box_inertial_matrix m=\"${camera_m}\" l=\"${camera_length}\" w=\"${camera_width}\" h=\"${camera_height}\" /&gt;\n&lt;/link&gt;\n&lt;gazebo reference=\"camera\"&gt;\n&lt;material&gt;Gazebo/Blue&lt;/material&gt;\n&lt;/gazebo&gt;\n&lt;joint name=\"camera2base_link\" type=\"fixed\"&gt;\n&lt;parent link=\"base_link\" /&gt;\n&lt;child link=\"camera\" /&gt;\n&lt;origin xyz=\"${camera_x} ${camera_y} ${camera_z}\" /&gt;\n&lt;/joint&gt;\n&lt;/robot&gt;\n</code></pre> <p><code>my_laser_gazebo.urdf.xacro</code></p> <pre><code>&lt;robot name=\"my_laser\" xmlns:xacro=\"http://wiki.ros.org/xacro\"&gt;\n&lt;xacro:property name=\"laser_radius\" value=\"0.02\" /&gt;\n&lt;xacro:property name=\"laser_length\" value=\"0.01\" /&gt;\n&lt;xacro:property name=\"laser_m\" value=\"0.1\" /&gt;\n&lt;link name=\"laser\"&gt;\n&lt;visual&gt;\n&lt;geometry&gt;\n&lt;cylinder radius=\"${laser_radius}\" length=\"${laser_length}\" /&gt;\n&lt;/geometry&gt;\n&lt;material name=\"blue\"&gt;\n&lt;color rgba=\"0 0 1 1\" /&gt;\n&lt;/material&gt;\n&lt;/visual&gt;\n&lt;collision&gt;\n&lt;geometry&gt;\n&lt;cylinder radius=\"${laser_radius}\" length=\"${laser_length}\" /&gt;\n&lt;/geometry&gt;\n&lt;/collision&gt;\n&lt;xacro:cylinder_inertial_matrix m=\"${laser_m}\" r=\"${laser_radius}\" h=\"${laser_length}\" /&gt;\n&lt;/link&gt;\n&lt;gazebo reference=\"laser\"&gt;\n&lt;material&gt;Gazebo/Blue&lt;/material&gt;\n&lt;/gazebo&gt;\n&lt;joint name=\"laser2base_link\" type=\"fixed\"&gt;\n&lt;parent link=\"base_link\" /&gt;\n&lt;child link=\"laser\" /&gt;\n&lt;origin xyz=\"0 0 ${(base_length+laser_length)/2}\" /&gt;\n&lt;/joint&gt; &lt;/robot&gt;\n</code></pre> <p><code>my_car_gazebo.urdf.xacro</code></p> <pre><code>&lt;robot name=\"my_car\" xmlns:xacro=\"http://wiki.ros.org/xacro\"&gt;\n&lt;xacro:include filename=\"base_collision.urdf.xacro\" /&gt;\n&lt;xacro:include filename=\"my_base_gazebo.urdf.xacro\" /&gt;\n&lt;xacro:include filename=\"my_camera_gazebo.urdf.xacro\" /&gt;\n&lt;xacro:include filename=\"my_laser_gazebo.urdf.xacro\" /&gt;\n&lt;/robot&gt;\n</code></pre>"},{"location":"ROS%E8%BF%9B%E9%98%B6/#422-gazebo","title":"4.2.2 \u5728gazebo\u4e2d\u663e\u793a\u673a\u5668\u4eba\u6a21\u578b","text":"<p>\u65b0\u5efalaunch\u6587\u4ef6\u542f\u52a8gazebo,\u5e76\u52a0\u8f7d\u673a\u5668\u4eba\u6a21\u578b</p> <pre><code>vkrobot@vkrobot:~/catkin_ws/src$ touch learning_urdf/launch/start_gazebo.launch\n</code></pre> <p><code>start_gazebo.launch</code></p> <pre><code>&lt;launch&gt;\n&lt;param name=\"robot_description\" command=\"$(find xacro)/xacro $(find demo_urdf)/urdf/my_car_gazebo.urdf.xacro\" /&gt;\n&lt;include file=\"$(find gazebo_ros)/launch/empty_world.launch\" /&gt;\n&lt;node pkg=\"gazebo_ros\" type=\"spawn_model\" name=\"model\" args=\"-urdf -model mycar -param robot_description\" /&gt;\n&lt;node pkg=\"rviz\" type=\"rviz\" name=\"rviz\" args=\"-d $(find demo_urdf)/config/my_car.rviz\" /&gt;\n&lt;node pkg=\"robot_state_publisher\" type=\"robot_state_publisher\" name=\"robot_state_publisher\" /&gt;\n&lt;node pkg=\"joint_state_publisher\" type=\"joint_state_publisher\" name=\"joint_state_publisher\" /&gt;\n&lt;/launch&gt;\n</code></pre>"},{"location":"ROS%E8%BF%9B%E9%98%B6/#423-gazebo","title":"4.2.3 \u63a7\u5236\u673a\u5668\u4eba\u5728gazebo\u4e2d\u8fd0\u52a8","text":"<p>gazebo \u4e2d\u5df2\u7ecf\u53ef\u4ee5\u6b63\u5e38\u663e\u793a\u673a\u5668\u4eba\u6a21\u578b\u4e86\uff0c\u90a3\u4e48\u5982\u4f55\u63a7\u5236\u673a\u5668\u4eba\u8fd0\u52a8\u5462?\u8fd9\u9700\u8981\u7528\u5230ros\u4e2d\u7684\u7ec4\u4ef6\uff1a<code>ros_control</code></p>"},{"location":"ROS%E8%BF%9B%E9%98%B6/#ros_control","title":"ros_control\u7b80\u4ecb","text":"<p><code>ros_control</code>\u662f\u4e00\u7ec4\u8f6f\u4ef6\u5305\uff0c\u5305\u62ec\u63a7\u5236\u5668\u63a5\u53e3\u3001\u63a7\u5236\u5668\u7ba1\u7406\u3001\u4f20\u8f93\u548c\u786c\u4ef6\u63a5\u53e3\u3002gazebo\u5df2\u7ecf\u5b9e\u73b0\u4e86<code>ros_control</code>\u7684\u76f8\u5173\u63a5\u53e3\uff0c\u5982\u679c\u9700\u8981\u5728gazebo\u4e2d\u63a7\u5236\u673a\u5668\u4eba\u8fd0\u52a8\uff0c\u76f4\u63a5\u8c03\u7528\u76f8\u5173\u63a5\u53e3\u5373\u53ef\u3002</p> <p>\u63d2\u4ef6\u63a5\u53e3\u53c2\u8003\uff1aGazebo : Tutorial : Gazebo plugins in ROS (gazebosim.org)</p> <ol> <li>\u4e3a\u9a71\u52a8\u8f6e\u5173\u8282\u6dfb\u52a0\u4f20\u52a8\u88c5\u7f6e\u53ca\u63a7\u5236\u5668</li> </ol> <pre><code>vkrobot@vkrobot:~catkin_ws/src$ touch learning_urdf/urdf/move.urdf.xacro\n</code></pre> <p><code>move.urdf.xacro</code></p> <pre><code>&lt;robot name=\"my_car\" xmlns:xacro=\"http://wiki.ros.org/xacro\"&gt;\n&lt;xacro:macro name=\"joint_trans\" params=\"joint_name\"&gt;\n&lt;transmission name=\"${joint_name}_trans\"&gt;\n&lt;type&gt;transmission_interface/SimpleTransmission&lt;/type&gt;\n&lt;joint name=\"${joint_name}\"&gt;\n&lt;hardwareInterface&gt;hardware_interface/VelocityJointInterface&lt;/hardwareInterface&gt;\n&lt;/joint&gt;\n&lt;actuator name=\"${joint_name}_motor\"&gt;\n&lt;hardwareInterface&gt;hardware_interface/VelocityJointInterface&lt;/hardwareInterface&gt;\n&lt;mechanicalReduction&gt;1&lt;/mechanicalReduction&gt;\n&lt;/actuator&gt;\n&lt;/transmission&gt;\n&lt;/xacro:macro&gt;\n&lt;xacro:joint_trans joint_name=\"left_wheel2base_link\" /&gt;\n&lt;xacro:joint_trans joint_name=\"right_wheel2base_link\" /&gt;\n&lt;gazebo&gt;\n&lt;plugin name=\"differential_drive_controller\" filename=\"libgazebo_ros_diff_drive.so\"&gt;\n&lt;rosDebugLevel&gt;Debug&lt;/rosDebugLevel&gt;\n&lt;publishWheelTF&gt;true&lt;/publishWheelTF&gt;\n&lt;robotNamespace&gt;/&lt;/robotNamespace&gt;\n&lt;publishTf&gt;1&lt;/publishTf&gt;\n&lt;publishWheelJointState&gt;true&lt;/publishWheelJointState&gt;\n&lt;alwaysOn&gt;true&lt;/alwaysOn&gt;\n&lt;updateRate&gt;100.0&lt;/updateRate&gt;\n&lt;legacyMode&gt;true&lt;/legacyMode&gt;\n&lt;leftJoint&gt;left_wheel2base_link&lt;/leftJoint&gt;\n&lt;rightJoint&gt;right_wheel2base_link&lt;/rightJoint&gt;\n&lt;wheelSeparation&gt;${base_radius * 2}&lt;/wheelSeparation&gt;\n&lt;wheelDiameter&gt;${wheel_radius * 2}&lt;/wheelDiameter&gt;\n&lt;broadcastTF&gt;1&lt;/broadcastTF&gt;\n&lt;wheelTorque&gt;30&lt;/wheelTorque&gt;\n&lt;wheelAcceleration&gt;1.8&lt;/wheelAcceleration&gt;\n&lt;commandTopic&gt;cmd_vel&lt;/commandTopic&gt;\n&lt;odometryFrame&gt;odom&lt;/odometryFrame&gt; &lt;odometryTopic&gt;odom&lt;/odometryTopic&gt;\n&lt;robotBaseFrame&gt;base_footprint&lt;/robotBaseFrame&gt;\n&lt;/plugin&gt;\n&lt;/gazebo&gt;\n&lt;/robot&gt;\n</code></pre> <ol> <li>\u5c06<code>move.urdf.xacro</code>\u96c6\u6210\u5230<code>my_car_gazebo.urdf.xacro</code></li> </ol> <p><code>my_car_gazebo.urdf.xacro</code></p> <pre><code>&lt;robot name=\"my_car\" xmlns:xacro=\"http://wiki.ros.org/xacro\"&gt;\n......\n    &lt;xacro:include filename=\"move.urdf.xacro\" /&gt;\n&lt;/robot&gt;\n</code></pre> <ol> <li> <p><code>start_gazebo.launch</code>\u6587\u4ef6\u4e0d\u9700\u8981\u4fee\u6539\u5373\u53ef\u542f\u52a8</p> </li> <li> <p>\u542f\u52a8\u952e\u76d8\u63a7\u5236\u8282\u70b9\uff0c\u63a7\u5236\u5c0f\u8f66\u8fd0\u52a8</p> </li> </ol> <p>\u200b   \u5b89\u88c5\uff1a<code>sudo apt-get install ros-melodic-teleop-twist-keyboard</code></p> <p>\u200b   \u542f\u52a8\uff1a<code>rosrun teleop_twist_keyboard teleop_twist_keyboard.py</code></p>"},{"location":"ROS%E8%BF%9B%E9%98%B6/#424","title":"4.2.4 \u6444\u50cf\u5934\u4eff\u771f","text":"<ol> <li>\u914d\u7f6e\u6444\u50cf\u5934\u4f20\u611f\u5668\u4fe1\u606f</li> </ol> <pre><code>vkrobot@vkrobot:~/catkin_ws/src$ touch learning_urdf/urdf/camera.urdf.xacro\n</code></pre> <p><code>camera.urdf.xacro</code></p> <pre><code>&lt;robot name=\"my_sensors\" xmlns:xacro=\"http://wiki.ros.org/xacro\"&gt;\n&lt;gazebo reference=\"camera\"&gt;\n&lt;sensor type=\"camera\" name=\"camera_node\"&gt;\n&lt;update_rate&gt;30.0&lt;/update_rate&gt;\n&lt;camera name=\"head\"&gt;\n&lt;horizontal_fov&gt;1.3962634&lt;/horizontal_fov&gt;\n&lt;image&gt;\n&lt;width&gt;1280&lt;/width&gt;\n&lt;height&gt;720&lt;/height&gt;\n&lt;format&gt;R8G8B8&lt;/format&gt;\n&lt;/image&gt;\n&lt;clip&gt;\n&lt;near&gt;0.02&lt;/near&gt;\n&lt;far&gt;300&lt;/far&gt;\n&lt;/clip&gt;\n&lt;noise&gt;\n&lt;type&gt;gaussian&lt;/type&gt;\n&lt;mean&gt;0.0&lt;/mean&gt;\n&lt;stddev&gt;0.007&lt;/stddev&gt;\n&lt;/noise&gt;\n&lt;/camera&gt;\n&lt;plugin name=\"gazebo_camera\" filename=\"libgazebo_ros_camera.so\"&gt;\n&lt;alwaysOn&gt;true&lt;/alwaysOn&gt;\n&lt;updateRate&gt;0.0&lt;/updateRate&gt;\n&lt;cameraName&gt;/camera&lt;/cameraName&gt;\n&lt;imageTopicName&gt;image_raw&lt;/imageTopicName&gt;\n&lt;cameraInfoTopicName&gt;camera_info&lt;/cameraInfoTopicName&gt;\n&lt;frameName&gt;camera&lt;/frameName&gt;\n&lt;hackBaseline&gt;0.07&lt;/hackBaseline&gt;\n&lt;distortionK1&gt;0.0&lt;/distortionK1&gt;\n&lt;distortionK2&gt;0.0&lt;/distortionK2&gt;\n&lt;distortionK3&gt;0.0&lt;/distortionK3&gt;\n&lt;distortionT1&gt;0.0&lt;/distortionT1&gt;\n&lt;distortionT2&gt;0.0&lt;/distortionT2&gt;\n&lt;/plugin&gt;\n&lt;/sensor&gt;\n&lt;/gazebo&gt;\n&lt;/robot&gt;\n</code></pre> <ol> <li>\u5c06<code>camera.urdf.xacro</code>\u96c6\u6210\u5230<code>my_car_gazebo.urdf.xacro</code></li> </ol> <p><code>my_car_gazebo.urdf.xacro</code></p> <pre><code>&lt;robot name=\"my_car\" xmlns:xacro=\"http://wiki.ros.org/xacro\"&gt;\n......\n    &lt;xacro:include filename=\"camera.urdf.xacro\" /&gt;\n&lt;/robot&gt;\n</code></pre> <ol> <li> <p><code>start_gazebo.launch</code>\u6587\u4ef6\u4e0d\u9700\u8981\u4fee\u6539\u5373\u53ef\u542f\u52a8</p> </li> <li> <p>\u542f\u52a8\u952e\u76d8\u63a7\u5236\u8282\u70b9\uff0c\u63a7\u5236\u5c0f\u8f66\u8fd0\u52a8</p> </li> </ol> <p>\u200b   \u5b89\u88c5\uff1a<code>sudo apt-get install ros-melodic-teleop-twist-keyboard</code></p> <p>\u200b   \u542f\u52a8\uff1a<code>rosrun teleop_twist_keyboard teleop_twist_keyboard.py</code></p> <p>U-\u5f80\u5de6\u524d\u65b9  I-\u5f80\u6b63\u524d\u65b9  O-\u5f80\u53f3\u524d\u65b9</p> <p>J-\u539f\u5730\u5de6\u8f6c  K-\u505c\u6b62\u8fd0\u52a8  L-\u539f\u5730\u53f3\u8f6c</p> <p>M-\u5f80\u5de6\u540e\u65b9  ,-\u5f80\u6b63\u540e\u65b9  .-\u5f80\u53f3\u540e\u65b9</p>"},{"location":"ROS%E8%BF%9B%E9%98%B6/#425","title":"4.2.5 \u6fc0\u5149\u96f7\u8fbe\u4eff\u771f","text":"<ol> <li>\u914d\u7f6e\u6fc0\u5149\u96f7\u8fbe\u4f20\u611f\u5668\u4fe1\u606f</li> </ol> <pre><code>vkrobot@vkrobot:~/catkin_ws/src$ touch learning_urdf/urdf/laser.urdf.xacro\n</code></pre> <p><code>laser.urdf.xacro</code></p> <pre><code>&lt;robot name=\"my_sensors\" xmlns:xacro=\"http://wiki.ros.org/xacro\"&gt;\n&lt;gazebo reference=\"laser\"&gt;\n&lt;sensor type=\"ray\" name=\"rplidar\"&gt;\n&lt;pose&gt;0 0 0 0 0 0&lt;/pose&gt;\n&lt;visualize&gt;true&lt;/visualize&gt;\n&lt;update_rate&gt;5&lt;/update_rate&gt;\n&lt;ray&gt;\n&lt;scan&gt;\n&lt;horizontal&gt;\n&lt;samples&gt;360&lt;/samples&gt;\n&lt;resolution&gt;1&lt;/resolution&gt;\n&lt;min_angle&gt;-3&lt;/min_angle&gt;\n&lt;max_angle&gt;3&lt;/max_angle&gt;\n&lt;/horizontal&gt;\n&lt;/scan&gt;\n&lt;range&gt;\n&lt;min&gt;0.10&lt;/min&gt;\n&lt;max&gt;30.0&lt;/max&gt;\n&lt;resolution&gt;0.01&lt;/resolution&gt;\n&lt;/range&gt;\n&lt;noise&gt;\n&lt;type&gt;gaussian&lt;/type&gt;\n&lt;mean&gt;0.0&lt;/mean&gt;\n&lt;stddev&gt;0.01&lt;/stddev&gt;\n&lt;/noise&gt;\n&lt;/ray&gt;\n&lt;plugin name=\"gazebo_rplidar\" filename=\"libgazebo_ros_laser.so\"&gt;\n&lt;topicName&gt;/scan&lt;/topicName&gt;\n&lt;frameName&gt;laser&lt;/frameName&gt;\n&lt;/plugin&gt;\n&lt;/sensor&gt;\n&lt;/gazebo&gt;\n&lt;/robot&gt;\n</code></pre> <ol> <li>\u5c06<code>laser.urdf.xacro</code>\u96c6\u6210\u5230<code>my_car_gazebo.urdf.xacro</code></li> </ol> <p><code>my_car_gazebo.urdf.xacro</code></p> <pre><code>&lt;robot name=\"my_car\" xmlns:xacro=\"http://wiki.ros.org/xacro\"&gt;\n......\n    &lt;xacro:include filename=\"laser.urdf.xacro\" /&gt;\n&lt;/robot&gt;\n</code></pre> <ol> <li> <p><code>start_gazebo.launch</code>\u6587\u4ef6\u4e0d\u9700\u8981\u4fee\u6539\u5373\u53ef\u542f\u52a8</p> </li> <li> <p>\u542f\u52a8\u952e\u76d8\u63a7\u5236\u8282\u70b9\uff0c\u63a7\u5236\u5c0f\u8f66\u8fd0\u52a8</p> </li> </ol> <p>\u200b   \u5b89\u88c5\uff1a<code>sudo apt-get install ros-melodic-teleop-twist-keyboard</code></p> <p>\u200b   \u542f\u52a8\uff1a<code>rosrun teleop_twist_keyboard teleop_twist_keyboard.py</code></p>"},{"location":"ROS%E8%BF%9B%E9%98%B6/#5","title":"5 \u673a\u5668\u4eba\u5e73\u53f0\u642d\u5efa","text":"<p>\u524d\u9762\u7684\u7ae0\u8282\u4e3b\u8981\u8bb2\u89e3\u4e86ROS\u7684\u57fa\u7840\u77e5\u8bc6\uff0c\u5185\u5bb9\u66f4\u504f\u7406\u8bba\uff0c\u5b66\u4e60\u5b8c\u540e\u60f3\u5fc5\u5404\u4f4d\u4f1a\u6709\u4e9b\u7591\u60d1\uff1a</p> <ul> <li>\u4ec0\u4e48\u662f\u673a\u5668\u4eba\uff1f</li> <li>\u5b9e\u4f53\u673a\u5668\u4eba\u4e0e\u4eff\u771f\u5b9e\u73b0\u6709\u4ec0\u4e48\u533a\u522b\uff1f</li> <li>\u5982\u4f55\u6784\u5efa\u4e00\u4e2a\u771f\u5b9e\u7684\u673a\u5668\u4eba\u7cfb\u7edf\uff1f</li> <li>...</li> </ul>"},{"location":"ROS%E8%BF%9B%E9%98%B6/#51","title":"5.1 \u673a\u5668\u4eba\u7684\u5b9a\u4e49","text":"<p>1920\u5e74\uff0c\u6377\u514b\u4f5c\u5bb6\u5361\u96f7\u5c14\u00b7\u51ef\u4f69\u514b\uff08Karel Capek\uff09\u53d1\u8868\u4e86\u79d1\u5e7b\u5267\u672c\u300a\u7f57\u8428\u59c6\u7684\u4e07\u80fd\u673a\u5668\u4eba\u300b\u3002\u5728\u5267\u672c\u4e2d\uff0c\u51ef\u4f69\u514b\u628a\u6377\u514b\u8bed\u201cRobota\u201d\u5199\u6210\u4e86\u201cRobot\u201d\uff0c\u201cRobota\u201d\u662f\u5974\u96b6\u7684\u610f\u601d\u3002\u8be5\u5267\u9884\u544a\u4e86\u673a\u5668\u4eba\u7684\u53d1\u5c55\u5bf9\u4eba\u7c7b\u793e\u4f1a\u7684\u60b2\u5267\u6027\u5f71\u54cd\uff0c\u5f15\u8d77\u4e86\u4eba\u4eec\u7684\u5e7f\u6cdb\u5173\u6ce8\uff0c\u88ab\u5f53\u6210\u4e86\u201c\u673a\u5668\u4eba\u201d\u4e00\u8bcd\u7684\u8d77\u6e90\u3002</p> <p>\u673a\u5668\u4eba\uff08Robot\uff09\u662f\u81ea\u52a8\u6267\u884c\u5de5\u4f5c\u7684\u673a\u5668\u88c5\u7f6e\u3002\u673a\u5668\u4eba\u53ef\u63a5\u53d7\u4eba\u7c7b\u6307\u6325\uff0c\u4e5f\u53ef\u4ee5\u6267\u884c\u9884\u5148\u7f16\u6392\u7684\u7a0b\u5e8f\uff0c\u4e5f\u53ef\u4ee5\u6839\u636e\u4ee5\u4eba\u5de5\u667a\u80fd\u6280\u672f\u5236\u5b9a\u7684\u539f\u5219\u7eb2\u9886\u884c\u52a8\u3002\u673a\u5668\u4eba\u6267\u884c\u7684\u662f\u53d6\u4ee3\u6216\u662f\u534f\u52a9\u4eba\u7c7b\u5de5\u4f5c\u7684\u5de5\u4f5c\uff0c\u4f8b\u5982\u5236\u9020\u4e1a\u3001\u5efa\u7b51\u4e1a\uff0c\u6216\u662f\u5371\u9669\u7684\u5de5\u4f5c\u3002</p> <p>\u767e\u5ea6\u767e\u79d1</p> <p></p>"},{"location":"ROS%E8%BF%9B%E9%98%B6/#52","title":"5.2 \u673a\u5668\u4eba\u7684\u7ec4\u6210","text":"<p>\u673a\u5668\u4eba\u662f\u4e00\u5957\u673a\u7535\u4e00\u4f53\u5316\u7684\u8bbe\u5907\uff0c\u89d2\u5ea6\u4e0d\u540c\uff0c\u5bf9\u673a\u5668\u4eba\u7ec4\u6210\u7684\u8ba4\u8bc6\u4e5f\u4f1a\u6709\u660e\u663e\u5dee\u5f02\uff0c\u4ece\u63a7\u5236\u7684\u89d2\u5ea6\u6765\u770b\uff0c\u673a\u5668\u4eba\u7cfb\u7edf\u53ef\u4ee5\u5206\u4e3a\u56db\u5927\u90e8\u5206\uff0c\u5373\u6267\u884c\u673a\u6784\u3001\u9a71\u52a8\u7cfb\u7edf\u3001\u4f20\u611f\u7cfb\u7edf\u548c\u63a7\u5236\u7cfb\u7edf\u3002\u5404\u90e8\u5206\u4e4b\u95f4\u7684\u63a7\u5236\u5173\u7cfb\u5982\u4e0b\u56fe\uff1a</p> <p></p>"},{"location":"ROS%E8%BF%9B%E9%98%B6/#521","title":"5.2.1 \u6267\u884c\u673a\u6784","text":"<p>\u6267\u884c\u673a\u6784\u662f\u673a\u5668\u4eba\u7ec4\u6210\u4e2d\u76f4\u63a5\u9762\u5411\u5de5\u4f5c\u5bf9\u8c61\u7684\u673a\u68b0\u88c5\u7f6e\uff0c\u7c7b\u4f3c\u4e8e\u4eba\u4f53\u7684\u624b\u4e0e\u811a\uff0c\u6bd4\u5982\u673a\u5668\u4eba\u7684\u884c\u8d70\u90e8\u5206\u4e0e\u673a\u68b0\u81c2\u3002</p> <p>\u5728\u5f53\u524d\u673a\u5668\u4eba\u7cfb\u7edf\u4e2d\uff0c\u6267\u884c\u673a\u6784\u4e3b\u8981\u6709\uff1a\u7531\u4e24\u4e2a\u8f6e\u6bc2\u7535\u673a\u5e26\u52a8\u7684\u4e3b\u52a8\u8f6e\u4ee5\u53ca\u4fdd\u6301\u5e73\u8861\u7684\u4e07\u5411\u8f6e\uff0c\u5b9e\u73b0\u673a\u5668\u4eba\u7684\u884c\u8d70\uff1b\u4e00\u4e2a\u4e09\u8f74\u673a\u68b0\u81c2\uff0c\u5b9e\u73b0\u673a\u5668\u4eba\u7684\u6293\u53d6\u3002</p>"},{"location":"ROS%E8%BF%9B%E9%98%B6/#522","title":"5.2.2 \u9a71\u52a8\u7cfb\u7edf","text":"<p>\u9a71\u52a8\u7cfb\u7edf\u8d1f\u8d23\u9a71\u52a8\u6267\u884c\u673a\u6784\uff0c\u5c06\u63a7\u5236\u7cfb\u7edf\u4e0b\u8fbe\u7684\u6307\u4ee4\u8f6c\u6362\u6210\u6267\u884c\u673a\u6784\u6240\u9700\u8981\u7684\u4fe1\u53f7\uff0c\u76f8\u5f53\u4e8e\u4eba\u7684\u808c\u8089\u3002\u6839\u636e\u91c7\u7528\u7684\u52a8\u529b\u6e90\u4e0d\u7528\uff0c\u9a71\u52a8\u7cfb\u7edf\u7684\u4f20\u52a8\u65b9\u5f0f\u4e5f\u4e0d\u540c\uff0c\u4e3b\u8981\u6709\u56db\u79cd\uff1a\u6db2\u538b\u5f0f\u3001\u6c14\u538b\u5f0f\u3001\u7535\u6c14\u5f0f\u548c\u673a\u68b0\u5f0f\u3002\u5176\u4e2d\uff0c\u7535\u529b\u9a71\u52a8\u662f\u76ee\u524d\u4f7f\u7528\u6700\u5e7f\u6cdb\u7684\u4e00\u79cd\u9a71\u52a8\u65b9\u5f0f\uff0c\u5176\u7279\u70b9\u662f\u53d6\u7535\u65b9\u4fbf\u3001\u54cd\u5e94\u5feb\u3001\u9a71\u52a8\u529b\u5927\u7b49\uff0c\u5e76\u4e14\u53ef\u4ee5\u91c7\u7528\u591a\u79cd\u7075\u6d3b\u7684\u63a7\u5236\u65b9\u5f0f\u3002</p> <p>\u5728\u5f53\u524d\u7684\u673a\u5668\u4eba\u7cfb\u7edf\u4e2d\uff0c\u9a71\u52a8\u7cfb\u7edf\u91c7\u7528stm32\uff0c\u8d1f\u8d23\u91c7\u96c6\u9640\u87ba\u4eeaIMU\u3001\u8d85\u58f0\u6ce2\u3001\u5de6\u53f3\u8f6e\u7535\u673a\u7f16\u7801\u5668\u7b49\u4f20\u611f\u5668\u6570\u636e\uff0c\u5e76\u9a71\u52a8\u7535\u673a\u8f6c\u52a8\u3002</p>"},{"location":"ROS%E8%BF%9B%E9%98%B6/#523","title":"5.2.3 \u4f20\u611f\u7cfb\u7edf","text":"<p>\u4f20\u611f\u7cfb\u7edf\u7531\u5916\u90e8\u4f20\u611f\u5668\u6a21\u5757\u4e0e\u5185\u90e8\u4f20\u611f\u5668\u6a21\u5757\u7ec4\u6210\uff0c\u7528\u4e8e\u83b7\u53d6\u5916\u90e8\u73af\u5883\u4e0e\u5185\u90e8\u6709\u7528\u7684\u4fe1\u606f\uff0c\u76f8\u5f53\u4e8e\u4eba\u4f53\u7684\u611f\u5b98\u4e0e\u795e\u7ecf\u3002\u5e38\u7528\u7684\u5916\u90e8\u4f20\u611f\u5668\u5305\u62ec\u6444\u50cf\u5934\u3001\u7ea2\u5916\u3001\u6fc0\u5149\u96f7\u8fbe\u7b49\uff0c\u7528\u4e8e\u611f\u77e5\u5916\u90e8\u73af\u5883\uff1b\u5185\u90e8\u4f20\u611f\u5668\u5305\u62ec\u7f16\u7801\u5668\u3001\u9640\u87ba\u4eea\u7b49\uff0c\u53ef\u4ee5\u901a\u8fc7\u81ea\u8eab\u4fe1\u53f7\u53cd\u9988\u68c0\u6d4b\u4f4d\u59ff\u72b6\u6001\u3002</p> <p>\u5728\u5f53\u524d\u673a\u5668\u4eba\u7cfb\u7edf\u4e2d\uff0c\u4f20\u611f\u7cfb\u7edf\u4e3b\u8981\u6709\uff1aEAI G4\u578b\u53f7\u7684\u6fc0\u5149\u96f7\u8fbe\uff0c\u53ef\u5b9e\u73b0360\u00b0\u7684\u65cb\u8f6c\u6d4b\u8ddd\uff1b\u73af\u5f62\u9ea6\u514b\u98ce\u9635\u5217\u6a21\u5757\uff0c\u53ef\u5b9e\u73b0360\u00b0\u7684\u7b49\u6548\u62fe\u97f3\uff1b\u9c7c\u773c\u6444\u50cf\u5934\u4e0e\u6df1\u5ea6\u76f8\u673a\uff0c\u53ef\u5b9e\u73b0\u56fe\u50cf\u6570\u636e\u7684\u83b7\u53d6\u3002</p>"},{"location":"ROS%E8%BF%9B%E9%98%B6/#524","title":"5.2.4 \u63a7\u5236\u7cfb\u7edf","text":"<p>\u63a7\u5236\u7cfb\u7edf\u7684\u4efb\u52a1\u662f\u6839\u636e\u673a\u5668\u4eba\u7684\u4f5c\u4e1a\u6307\u4ee4\u4ee5\u53ca\u4ece\u4f20\u611f\u5668\u53cd\u9988\u56de\u6765\u7684\u4fe1\u53f7\uff0c\u4f5c\u51fa\u76f8\u5e94\u5904\u7406\u5e76\u8f93\u51fa\u63a7\u5236\u6307\u4ee4\u4fe1\u53f7\uff0c\u76f8\u5f53\u4e8e\u4eba\u4f53\u7684\u5927\u8111\u3002\u63a7\u5236\u7cfb\u7edf\u9700\u8981\u57fa\u4e8e\u5904\u7406\u5668\u5b9e\u73b0\uff0c\u4e00\u822c\u5e38\u7528\u7684\u6709ARM\u3001x86\u7b49\u67b6\u6784\u7684\u5904\u7406\u5668\u3002\u5728\u5904\u7406\u5668\u4e4b\u4e0a\uff0c\u63a7\u5236\u7cfb\u7edf\u9700\u8981\u5b8c\u6210\u7b97\u6cd5\u5904\u7406\u3001\u5173\u8282\u63a7\u5236\u3001\u4eba\u673a\u4ea4\u4e92\u7b49\u590d\u6742\u7684\u529f\u80fd\u3002</p> <p>\u5728\u5f53\u524d\u673a\u5668\u4eba\u7cfb\u7edf\u4e2d\uff0c\u63a7\u5236\u7cfb\u7edf\u91c7\u7528Intel NUC\u5de5\u63a7\u673a\uff0c\u5b89\u88c5\u4e86Ubuntu\u7cfb\u7edf\uff0c\u540c\u65f6\u642d\u5efa\u4e86\u673a\u5668\u4eba\u64cd\u4f5c\u7cfb\u7edfROS\u73af\u5883\uff0c\u4e3b\u8981\u8d1f\u8d23\u4e0a\u5c42\u8ba1\u7b97\u91cf\u8f83\u5927\u7684\u5e94\u7528\uff0c\u53ef\u6269\u5c55\u6027\u5f3a\u3002</p>"},{"location":"ROS%E8%BF%9B%E9%98%B6/#53","title":"5.3 \u89c6\u89c9","text":"<p>\u6444\u50cf\u5934\u662f\u673a\u5668\u4eba\u7cfb\u7edf\u4e2d\u4e00\u4e2a\u6bd4\u8f83\u91cd\u8981\u7684\u4f20\u611f\u5668\uff0c\u4e5f\u662f\u673a\u5668\u4eba\u611f\u77e5\u5916\u754c\u73af\u5883\u7684\u91cd\u8981\u624b\u6bb5\u4e4b\u4e00\uff0c\u5e76\u4e14\u968f\u7740\u673a\u5668\u89c6\u89c9\u3001\u65e0\u4eba\u9a7e\u9a76\u7b49\u6280\u672f\u7684\u5174\u8d77\uff0c\u6444\u50cf\u5934\u5728\u7269\u4f53\u8bc6\u522b\u3001SLAM\u7b49\u6280\u672f\u4e2d\u90fd\u6709\u7740\u5e7f\u6cdb\u7684\u5e94\u7528\u524d\u666f\u3002</p> <p>\u6444\u50cf\u5934\u53ef\u4ee5\u6839\u636e\u5de5\u4f5c\u539f\u7406\u5927\u81f4\u5212\u5206\u4e3a\u4e09\u7c7b\uff1a\u5355\u76ee\u6444\u50cf\u5934\u3001\u53cc\u76ee\u6444\u50cf\u5934\u4ee5\u53ca\u6df1\u5ea6\u6444\u50cf\u5934\u3002</p> <ol> <li>\u5355\u76ee\u6444\u50cf\u5934</li> </ol> <p>\u5355\u76ee\u6444\u50cf\u5934\u662f\u5c06\u4e09\u7ef4\u4e16\u754c\u4e8c\u7ef4\u5316\uff0c\u53ea\u80fd\u83b7\u53d6\u7269\u4f53\u5728\u6444\u50cf\u673a\u6210\u50cf\u5e73\u9762\u4e0a\u7684\u6295\u5f71\uff0c\u5728\u9759\u6b62\u72b6\u6001\u4e0b\u65e0\u6cd5\u83b7\u53d6\u6df1\u5ea6\u4fe1\u606f\uff0c\u4e5f\u5c31\u65e0\u6cd5\u6839\u636e\u7269\u4f53\u7684\u5927\u5c0f\u6765\u5224\u65ad\u8ddd\u79bb\u3002</p> <p></p> <ol> <li>\u53cc\u76ee\u6444\u50cf\u5934</li> </ol> <p>\u53cc\u76ee\u6444\u50cf\u5934\u987e\u540d\u601d\u4e49\u5c31\u662f\u7531\u4e24\u4e2a\u5355\u76ee\u76f8\u673a\u7ec4\u5408\u800c\u6210\u7684\u6444\u50cf\u5934\uff0c\u53ef\u4ee5\u901a\u8fc7\u4e24\u4e2a\u5355\u76ee\u76f8\u673a\u4e4b\u95f4\u5b58\u5728\u7684\u56fa\u5b9a\u8ddd\u79bb\uff08\u57fa\u7ebf\uff09\u6765\u4f30\u8ba1\u6444\u50cf\u5934\u4e0e\u76ee\u6807\u7269\u4f53\u4e4b\u95f4\u7684\u8ddd\u79bb\u3002</p> <p></p> <ol> <li>\u6df1\u5ea6\u6444\u50cf\u5934</li> </ol> <p>\u6df1\u5ea6\u6444\u50cf\u5934\u53c8\u79f0\u4e3aRGB-D\u6444\u50cf\u5934\uff0c\u6b64\u5904\u7684D\u5c31\u662fDepth\uff08\u6df1\u5ea6\uff09\uff0c\u987e\u540d\u601d\u4e49\uff0c\u5b83\u53ef\u4ee5\u83b7\u53d6\u7269\u4f53\u7684\u6df1\u5ea6\u4fe1\u606f\u3002\u6df1\u5ea6\u6444\u50cf\u5934\u4e00\u822c\u57fa\u4e8e\u7ed3\u6784\u5149\u6cd5\u6216\u98de\u884c\u65f6\u95f4\uff08ToF\uff09\u6cd5\u6765\u5b9e\u73b0\u6d4b\u8ddd\u3002</p> <p>\u524d\u8005\u662f\u4e3a\u4e86\u89e3\u51b3\u53cc\u76ee\u5339\u914d\u95ee\u9898\u4ea7\u751f\u7684\uff0c\u89e3\u51b3\u5bf9\u73af\u5883\u5149\u7167\u654f\u611f\u7684\u95ee\u9898\uff1b\u540e\u8005\u662f\u901a\u8fc7\u53d1\u5c04\u4e00\u675f\u5149\u8109\u51b2\uff0c\u7136\u540e\u7ecf\u8fc7\u7269\u4f53\u53cd\u5c04\u56de\u53bb\uff0c\u518d\u63a5\u6536\u5230\u5149\u8109\u51b2\uff0c\u901a\u8fc7\u98de\u884c\u65f6\u95f4\u6765\u8ba1\u7b97\u88ab\u6d4b\u7269\u4f53\u4e0e\u6444\u50cf\u5934\u7684\u8ddd\u79bb\u3002</p>"},{"location":"ROS%E8%BF%9B%E9%98%B6/#531","title":"5.3.1 \u6444\u50cf\u5934\u7684\u4f7f\u7528","text":"<ol> <li> <p>\u786c\u4ef6\u51c6\u5907\uff1a\u76f4\u63a5\u901a\u8fc7USB\u63a5\u5165\u865a\u62df\u673a\u5373\u53ef\uff0c\u9700\u6ce8\u610f\u865a\u62df\u673a\u7684\u76f8\u5173\u8bbe\u7f6e\u3002</p> </li> <li> <p>\u8f6f\u4ef6\u51c6\u5907\uff1a\u5b89\u88c5USB\u6444\u50cf\u5934\u8f6f\u4ef6\u5305</p> </li> </ol> <p><code>sudo apt-get install ros-melodic-usb-cam</code></p> <p>\u6216\u8005\u76f4\u63a5\u4ecegithub\u4e0b\u8f7d\u6e90\u7801</p> <p><code>git clone https://github.com/ros-drivers/usb_cam.git</code></p> <ol> <li>\u6d4b\u8bd5</li> </ol> <p>\u8f6f\u4ef6\u5305\u4e2d\u5185\u7f6e\u4e86\u6d4b\u8bd5\u7528\u7684launch\u6587\u4ef6\uff0c\u5177\u4f53\u5185\u5bb9\u5982\u4e0b\uff1a</p> <pre><code>&lt;launch&gt;\n&lt;node name=\"usb_cam\" pkg=\"usb_cam\" type=\"usb_cam_node\" output=\"screen\" &gt;\n&lt;param name=\"video_device\" value=\"/dev/vkarm_camera_raw\" /&gt;\n&lt;param name=\"image_width\" value=\"1280\" /&gt;\n&lt;param name=\"image_height\" value=\"720\" /&gt;\n&lt;param name=\"pixel_format\" value=\"yuyv\" /&gt;\n&lt;param name=\"camera_frame_id\" value=\"usb_cam\" /&gt;\n&lt;param name=\"io_method\" value=\"mmap\"/&gt;\n&lt;/node&gt;\n&lt;node name=\"image_view\" pkg=\"image_view\" type=\"image_view\" respawn=\"false\" output=\"screen\"&gt;\n&lt;remap from=\"image\" to=\"/usb_cam/image_raw\"/&gt;\n&lt;param name=\"autosize\" value=\"true\" /&gt;\n&lt;/node&gt;\n&lt;/launch&gt;\n</code></pre> <p>\u8fd9\u4e2alaunch\u6587\u4ef6\u542f\u52a8\u4e86\u4e24\u4e2a\u8282\u70b9\uff1a<code>usb_cam</code>\u4e0e<code>image_view</code>\u3002\u524d\u8005\u7528\u4e8e\u542f\u52a8\u76f8\u673a\uff0c\u540e\u8005\u4ee5\u56fe\u5f62\u5316\u7a97\u53e3\u7684\u65b9\u5f0f\u663e\u793a\u56fe\u50cf\u6570\u636e\uff0c\u4f7f\u7528\u524d\u9700\u8981\u67e5\u770b\u76f8\u673a\u7684\u7aef\u53e3\u5e76\u4fee\u6539<code>usb_cam</code>\u4e2d\u7684\u201dvideo_device\u201c\u53c2\u6570\u3002</p> <p>\u67e5\u770b\u7aef\u53e3\u7684\u547d\u4ee4\u884c\uff1a<code>ls -l /dev/video*</code></p>"},{"location":"ROS%E8%BF%9B%E9%98%B6/#531-ros","title":"5.3.1 ROS\u4e2d\u7684\u56fe\u50cf\u6570\u636e","text":"<p>\u65e0\u8bba\u662fUSB\u6444\u50cf\u5934\u8fd8\u662fRGB-D\u6444\u50cf\u5934\uff0c\u53d1\u5e03\u7684\u56fe\u50cf\u6570\u636e\u683c\u5f0f\u662f\u591a\u79cd\u591a\u6837\u7684\uff0c\u5728\u5904\u7406\u8fd9\u4e9b\u6570\u636e\u4e4b\u524d\uff0c\u6211\u4eec\u9700\u8981\u5148\u4e86\u89e3\u8fd9\u4e9b\u6570\u636e\u7684\u683c\u5f0f\u3002</p> <p>\u8fde\u63a5USB\u6444\u50cf\u5934\u5230\u865a\u62df\u673a\uff0c\u901a\u8fc7\u4ee5\u4e0b\u547d\u4ee4\u542f\u52a8\u6444\u50cf\u5934\uff0c\u6ce8\u610f\u4fee\u6539\u7aef\u53e3\u53f7\uff1a</p> <p><code>roslaunch usb_cam usb_cam-test.launch</code></p> <p>\u542f\u52a8\u6210\u529f\u540e\uff0c\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u67e5\u770b\u5f53\u524d\u7cfb\u7edf\u4e2d\u7684\u56fe\u50cf\u8bdd\u9898\u4fe1\u606f\uff1a</p> <p><code>rostopic info /usb_cam/image_raw</code></p> <p></p> <p>\u4ece\u7ec8\u7aef\u6253\u5370\u7684\u4fe1\u606f\u4e2d\u53ef\u4ee5\u5f97\u77e5\uff0c\u56fe\u50cf\u8bdd\u9898\u7684\u6d88\u606f\u7c7b\u578b\u662f<code>sensor_msgs/Imgae</code>\uff0c\u8fd9\u662fROS\u63d0\u4f9b\u7684\u4e00\u79cd\u6444\u50cf\u5934\u539f\u89c6\u56fe\u50cf\u7684\u6d88\u606f\u7c7b\u578b\uff0c\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u67e5\u770b\u8be5\u6d88\u606f\u7c7b\u578b\u66f4\u8be6\u7ec6\u7684\u5185\u5bb9\uff1a</p> <p><code>rosmsg show sensor_msgs/Image</code></p> <p></p> <ul> <li>header\uff1a\u6d88\u606f\u5934\uff0c\u5305\u542b\u56fe\u50cf\u7684\u5e8f\u5217\u53f7\u3001\u65f6\u95f4\u6233\u548c\u7ed1\u5b9a\u7684\u5750\u6807\u7cfb</li> <li>height\uff1a\u56fe\u50cf\u7684\u7eb5\u5411\u5206\u8fa8\u7387\uff0c\u5373\u56fe\u50cf\u5305\u542b\u591a\u5c11\u884c\u7684\u50cf\u7d20\u70b9</li> <li>width\uff1a\u56fe\u50cf\u7684\u6a2a\u5411\u5206\u8fa8\u7387\uff0c\u5373\u56fe\u50cf\u5305\u542b\u591a\u5c11\u5217\u7684\u50cf\u7d20\u70b9</li> <li>encoding\uff1a\u56fe\u50cf\u7684\u7f16\u7801\u683c\u5f0f\uff0c\u5e38\u7528\u7684\u6709\uff1aRGB\u3001YUV\u7b49</li> <li>is_bigendian\uff1a\u56fe\u50cf\u6570\u636e\u7684\u5927\u5c0f\u7aef\u5b58\u50a8\u6a21\u5f0f\uff08Big-Endian/Little-Endian\uff09</li> <li>step\uff1a\u4e00\u884c\u56fe\u50cf\u6570\u636e\u7684\u5b57\u8282\u6570\u91cf\uff0c\u4f5c\u4e3a\u6570\u636e\u7684\u6b65\u957f\u53c2\u6570\uff0c\u4e00\u822c\u4e3awidth\u00d73</li> <li>data\uff1a\u5b58\u50a8\u56fe\u50cf\u6570\u636e\u7684\u6570\u7ec4\uff0c\u5927\u5c0f\u4e3a step \u00d7 height</li> </ul> <p>\u6839\u636e\u516c\u5f0f\uff0c\u8ba1\u7b97\u5f97\u51fa\u4e00\u5e27720\u00d71280\u5206\u8fa8\u7387\u7684\u56fe\u50cf\u6570\u636e\u91cf\u4e3a<code>width\u00d73\u00d7height=1280\u00d73\u00d7720=2764800\u5b57\u8282=2.7648MB</code>\uff0c\u82e5\u6309\u716730\u5e27/\u79d2\u7684\u5e27\u7387\u8ba1\u7b97\uff0c\u90a3\u4e48\u4e00\u79d2\u949f\u6444\u50cf\u5934\u4ea7\u751f\u7684\u6570\u636e\u91cf\u662f\u5341\u5206\u5e9e\u5927\u7684\u3002\u5728\u5b9e\u9645\u5e94\u7528\uff0c\u5c24\u5176\u662f\u8fdc\u7a0b\u4f20\u8f93\u56fe\u50cf\u7684\u573a\u666f\u4e2d\uff0c\u4f1a\u5bf9\u65e0\u7ebf\u7f51\u7edc\u9020\u6210\u5f88\u5927\u7684\u538b\u529b\uff0c\u56e0\u6b64\u5f80\u5f80\u9700\u8981\u5bf9\u56fe\u50cf\u8fdb\u884c\u538b\u7f29\u5904\u7406\uff0cROS\u4e5f\u63d0\u4f9b\u4e86\u538b\u7f29\u56fe\u50cf\u7684\u6d88\u606f\u7c7b\u578b<code>sensor_msgs/CompressedImage</code>\uff0c\u4f7f\u7528\u4ee5\u4e0b\u4f60\u547d\u4ee4\u67e5\u770b\u66f4\u8be6\u7ec6\u7684\u5185\u5bb9\uff1a</p> <p><code>rosmsg show sensor_msgs/CompressedImage</code></p> <p></p> <ul> <li>header\uff1a\u6d88\u606f\u5934\uff0c\u5305\u542b\u56fe\u50cf\u7684\u5e8f\u5217\u53f7\u3001\u65f6\u95f4\u6233\u548c\u7ed1\u5b9a\u7684\u5750\u6807\u7cfb</li> <li>format\uff1a\u56fe\u50cf\u7684\u538b\u7f29\u7f16\u7801\u683c\u5f0f\uff0c\u5305\u62ec\uff1aJPEG\u3001PNG\u3001BMP\u7b49</li> <li>data\uff1a\u5b58\u50a8\u56fe\u50cf\u6570\u636e\u7684\u6570\u7ec4</li> </ul>"},{"location":"ROS%E8%BF%9B%E9%98%B6/#533","title":"5.3.3 \u6444\u50cf\u5934\u6807\u5b9a","text":"<p>\u6444\u50cf\u5934\u662f\u4e00\u79cd\u5bf9\u5149\u5b66\u5668\u4ef6\u8981\u6c42\u8f83\u9ad8\u7684\u7cbe\u5bc6\u4eea\u5668\uff0c\u7136\u800c\uff0c\u7531\u4e8e\u6444\u50cf\u5934\u7684\u4e00\u4e9b\u786c\u4ef6\u539f\u56e0\uff0c\u751f\u6210\u7684\u7269\u4f53\u56fe\u50cf\u5f80\u5f80\u4f1a\u4ea7\u751f\u7578\u53d8\uff0c\u4e3a\u4e86\u907f\u514d\u6570\u636e\u6e90\u9020\u6210\u7684\u8bef\u5dee\uff0c\u9700\u8981\u9488\u5bf9\u6444\u50cf\u5934\u7684\u53c2\u6570\u8fdb\u884c\u6807\u5b9a\u3002ROS\u5b98\u65b9\u63d0\u4f9b\u4e86\u7528\u4e8e\u5355/\u53cc\u76ee\u6444\u50cf\u5934\u6807\u5b9a\u7684\u529f\u80fd\u5305\u2014\u2014<code>camera_calibration</code>\u3002</p> <p>1.\u5b89\u88c5</p> <p>\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u5b89\u88c5\u6b64\u529f\u80fd\u5305\uff1a</p> <p><code>sudo apt-get install ros-melodic-camera-calibration</code></p> <p>\u6807\u5b9a\u9700\u8981\u7528\u5230\u5982\u4e0b\u56fe\u6240\u793a\u7684\u68cb\u76d8\u683c\u56fe\u6848\u7684\u6807\u5b9a\u677f\uff1a</p> <p></p> <p>2.\u542f\u52a8</p> <p>\u63a5\u7740\u542f\u52a8\u6444\u50cf\u5934\u4e0e\u6807\u5b9a\u7a0b\u5e8f\uff1a</p> <p><code>rosrun camera_calibration cameracalibrator.py --size 8x6 --square 0.024 image:=/usb_cam/image_raw camera:=/usb_cam</code></p> <p>\u6444\u50cf\u5934\u7684\u542f\u52a8\u53c2\u8003<code>5.3.1</code></p> <p><code>cameracalibrator.py</code>\u6807\u5b9a\u7a0b\u5e8f\u9700\u8981\u4ee5\u4e0b\u51e0\u4e2a\u8f93\u5165\u53c2\u6570\uff1a</p> <ul> <li>size\uff1a\u6807\u5b9a\u68cb\u76d8\u683c\u7684\u5185\u90e8\u89d2\u70b9\u4e2a\u6570</li> <li>square\uff1a\u6bcf\u4e2a\u68cb\u76d8\u683c\u7684\u8fb9\u957f\uff0c\u5355\u4f4d\u662fm</li> <li>image\u548ccamera\uff1a\u8bbe\u7f6e\u6444\u50cf\u5934\u53d1\u5e03\u7684\u56fe\u50cf\u8bdd\u9898\u4ee5\u53ca\u4f7f\u7528\u7684\u6444\u50cf\u5934</li> </ul> <p>3.\u6807\u5b9a</p> <p>\u6807\u5b9a\u7a0b\u5e8f\u542f\u52a8\u540e\uff0c\u5c06\u6807\u5b9a\u677f\u653e\u7f6e\u5728\u6444\u50cf\u5934\u89c6\u91ce\u8303\u56f4\u5185\uff0c\u753b\u9762\u5982\u4e0b\u56fe\u6240\u793a\uff1a</p> <p></p> <p>\u753b\u9762\u53f3\u4e0a\u89d2\u7684\u8fdb\u56fe\u6761\u8868\u793a\u4e86\u4e0d\u540c\u7684\u6807\u5b9a\u8fdb\u5ea6\uff1a</p> <ul> <li>X\uff1a\u6807\u5b9a\u677f\u5728\u6444\u50cf\u5934\u89c6\u91ce\u4e2d\u5de6\u53f3\u79fb\u52a8</li> <li>Y\uff1a\u6807\u5b9a\u677f\u5728\u6444\u50cf\u5934\u89c6\u91ce\u4e2d\u4e0a\u4e0b\u79fb\u52a8</li> <li>Size\uff1a\u6807\u5b9a\u677f\u5728\u6444\u50cf\u5934\u89c6\u91ce\u4e2d\u524d\u540e\u79fb\u52a8</li> <li>Skew\uff1a\u6807\u5b9a\u677f\u5728\u6444\u50cf\u5934\u89c6\u91ce\u4e2d\u503e\u659c\u8f6c\u52a8</li> </ul> <p>\u4e0d\u65ad\u5728\u6444\u50cf\u5934\u89c6\u91ce\u4e2d\u79fb\u52a8/\u8f6c\u52a8\u6807\u5b9a\u677f\uff0c\u76f4\u5230\u201cCALIBRATE\u201d\u6309\u94ae\u6fc0\u6d3b\uff0c\u8868\u793a\u6807\u5b9a\u7a0b\u5e8f\u7684\u53c2\u6570\u91c7\u96c6\u5b8c\u6210\u3002</p> <p></p> <p>\u70b9\u51fb\u201cCALIBRATE\u201d\u6309\u94ae\uff0c\u7a0b\u5e8f\u5f00\u59cb\u81ea\u52a8\u8ba1\u7b97\u6444\u50cf\u5934\u7684\u6807\u5b9a\u53c2\u6570\uff0c\u8fd9\u4e2a\u8fc7\u7a0b\u9700\u8981\u7b49\u5f85\u4e00\u6bb5\u65f6\u95f4\uff0c\u6b64\u65f6\u754c\u9762\u4f1a\u53d8\u6210\u7070\u8272\u65e0\u54cd\u5e94\u72b6\u6001\uff0c\u6ce8\u610f\u89c2\u5bdf\u7ec8\u7aef\u4f1a\u6709\u6807\u5b9a\u7ed3\u679c\u7684\u663e\u793a\uff0c\u5e76\u4e14\u6807\u5b9a\u754c\u9762\u7684\u201cSAVE\u201d\u4e0e\u201cCOMMIT\u201d\u6309\u94ae\u6fc0\u6d3b\uff0c\u5982\u4e0b\u56fe\uff1a</p> <p></p> <p>\u70b9\u51fb\u201cSAVE\u201d\u6309\u94ae\uff0c\u6807\u5b9a\u53c2\u6570\u5c06\u88ab\u4fdd\u5b58\u5230\u9ed8\u8ba4\u7684\u6587\u4ef6\u5939\u4e0b\uff0c\u5728\u7ec8\u7aef\u4e2d\u53ef\u4ee5\u770b\u5230\u6b64\u8def\u5f84\uff1a</p> <p></p> <p>\u70b9\u51fb\u201cCOMMIT\u201d\u6309\u94ae\uff0c\u63d0\u4ea4\u6570\u636e\u5e76\u9000\u51fa\u7a0b\u5e8f\uff0c\u7136\u540e\u62db\u5230\u6807\u5b9a\u7ed3\u679c\u7684\u538b\u7f29\u6587\u4ef6<code>calibrationdata.tar.gz</code>\uff0c\u89e3\u538b\u8be5\u6587\u4ef6\u540e\uff0c\u627e\u5230<code>ost.yaml</code>\u547d\u540d\u7684\u6807\u5b9a\u7ed3\u679c\u6587\u4ef6\uff0c\u5c06\u5176\u590d\u5236\u51fa\u6765\u5907\u7528</p> <p></p> <p>4.\u52a0\u8f7d</p> <p>\u6807\u5b9a\u6444\u50cf\u5934\u751f\u6210\u7684\u914d\u7f6e\u6587\u4ef6\u662fYAML\u683c\u5f0f\u7684\uff0c\u53ef\u4ee5\u5728\u542f\u52a8\u6444\u50cf\u5934\u7684launch\u6587\u4ef6\u4e2d\u8fdb\u884c\u52a0\u8f7d\uff0c\u5982\u4e0b\uff1a</p> <pre><code>&lt;launch&gt;\n&lt;node pkg=\"usb_cam\" type=\"usb_cam_node\" name=\"usb_cam\" output=\"screen\"&gt;\n......\n        &lt;param name=\"camera_info_url\" type=\"string\" value=\"file://$(find \u6444\u50cf\u5934\u529f\u80fd\u5305)/YAML\u6587\u4ef6\u540d\" /&gt;\n&lt;/node&gt;\n&lt;/launch&gt;\n</code></pre>"},{"location":"ROS%E8%BF%9B%E9%98%B6/#534","title":"5.3.4 \u4e8c\u7ef4\u7801\u8bc6\u522b","text":"<p>\u4e8c\u7ef4\u7801\u5728\u751f\u6d3b\u4e2d\u8d8a\u6765\u8d8a\u5e38\u89c1\uff0c\u65e0\u8bba\u662f\u5171\u4eab\u5355\u8f66\u8fd8\u662f\u79fb\u52a8\u652f\u4ed8\uff0c\u4e8c\u7ef4\u7801\u5df2\u7ecf\u5f97\u5230\u5e7f\u6cdb\u5e94\u7528\u3002ROS\u4e5f\u63d0\u4f9b\u4e86\u591a\u79cd\u4e8c\u7ef4\u7801\u8bc6\u522b\u7684\u529f\u80fd\u5305\uff0c\u6211\u4eec\u9009\u7528\u5176\u4e2d\u4e00\u4e2a\u529f\u80fd\u5305\u2014\u2014<code>ar_track_alvar</code>\uff0c\u6765\u4ecb\u7ecd\u4e8c\u7ef4\u7801\u8bc6\u522b\u7684\u65b9\u6cd5\u3002</p> <p>1.\u5b89\u88c5</p> <p>\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u5b89\u88c5\u6b64\u529f\u80fd\u5305\uff1a</p> <p><code>sudo apt-get install ros-melodic-ar-track-alvar</code></p> <p>\u5b89\u88c5\u5b8c\u6210\u540e\uff0c\u5728\u76ee\u5f55\uff1a<code>/opt/ros/melodic/share/</code>\u4e2d\uff0c\u53ef\u4ee5\u627e\u5230\u6b64\u529f\u80fd\u5305\u3002\u8fdb\u5165\u8be5\u529f\u80fd\u5305\u4e0b\u7684launch\u6587\u4ef6\u5939\uff0c\u53ef\u4ee5\u770b\u5230\u591a\u4e2alaunch\u6587\u4ef6\uff0c\u5982\u4e0b\u56fe\u6240\u793a\u3002\u8fd9\u4e9b\u90fd\u662f\u9488\u5bf9ROS\u5b98\u65b9\u7684PR2\u673a\u5668\u4eba\u4f7f\u7528\u7684\u4e8c\u7ef4\u7801\u8bc6\u522b\u793a\u4f8b\uff0c\u540e\u7eed\u6211\u4eec\u5c06\u5728\u8fd9\u4e9b\u6587\u4ef6\u7684\u57fa\u7840\u4e0a\u8fdb\u884c\u4fee\u6539\uff0c\u9002\u914d\u81ea\u5df1\u7684\u673a\u5668\u4eba\u5e73\u53f0</p> <p></p> <p>2.\u751f\u6210\u4e8c\u7ef4\u7801</p> <p><code>ar_track_alvar</code>\u529f\u80fd\u5305\u63d0\u4f9b\u4e86\u751f\u6210\u4e8c\u7ef4\u7801\u6807\u7b7e\u7684\u529f\u80fd\uff0c\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u521b\u5efa\u5bf9\u5e94ID\u53f7\u7684\u4e8c\u7ef4\u7801\u6807\u7b7e\uff1a</p> <p><code>rosrun ar_track_alvar createMarker &lt;AR_ID&gt;</code></p> <p>\u5176\u4e2d<code>AR_ID</code>\u7684\u53d6\u503c\u8303\u56f4\u4e3a\uff1a[0, 65535]</p> <p>\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u8fd8\u53ef\u4ee5\u67e5\u770b\u66f4\u591a\u7684\u4f7f\u7528\u5e2e\u52a9\uff1a</p> <p><code>rosrun ar_track_alvar createMarker</code></p> <p></p> <p>\u4ece\u4e0a\u56fe\u53ef\u4ee5\u770b\u51fa\uff0c\u6b64\u8282\u70b9\u4e0d\u4ec5\u80fd\u4f7f\u7528ID\u53f7\u751f\u6210\u4e8c\u7ef4\u7801\u6807\u7b7e\uff0c\u8fd8\u53ef\u4ee5\u4f7f\u7528\u5b57\u7b26\u4e32\u3001\u6587\u4ef6\u540d\u3001\u7f51\u5740\u7b49\uff0c\u6216\u662f\u4f7f\u7528-s\u53c2\u6570\u8bbe\u7f6e\u751f\u6210\u4e8c\u7ef4\u7801\u7684\u5c3a\u5bf8\u3002</p> <p>3.\u6444\u50cf\u5934\u8bc6\u522b\u4e8c\u7ef4\u7801</p> <p><code>ar_track_alvar</code>\u529f\u80fd\u5305\u652f\u6301USB\u6444\u50cf\u5934\u6216\u6df1\u5ea6\u6444\u50cf\u5934\u4f5c\u4e3a\u8bc6\u522b\u4e8c\u7ef4\u7801\u7684\u89c6\u89c9\u4f20\u611f\u5668\uff0c\u5206\u522b\u5bf9\u5e94\u4e86<code>pr2_indiv_no_kinect.launch</code>\u4e0e<code>pr2_indiv.launch</code>\u4e24\u4e2a\u6587\u4ef6\u3002\u590d\u5236<code>pr2_indiv_no_kinect.launch</code>\u6587\u4ef6\u4f5c\u4e3a\u53c2\u8003\uff0c\u9488\u5bf9\u81ea\u5df1\u4f7f\u7528\u7684\u6444\u50cf\u5934\u4fee\u6539\u8bbe\u7f6e\u3002</p> <pre><code>&lt;launch&gt;\n&lt;!-- tf --&gt;\n&lt;param name=\"robot_description\" command=\"$(find xacro)/xacro $(find vkbot_description)/urdf/xacro/vkbot_with_vkarm.xacro\" /&gt;\n&lt;node pkg=\"robot_state_publisher\" type=\"robot_state_publisher\" name=\"robot_state_publisher\" /&gt;\n&lt;node pkg=\"joint_state_publisher\" type=\"joint_state_publisher\" name=\"joint_state_publisher\" /&gt;\n&lt;node pkg=\"tf\" type=\"static_transform_publisher\" name=\"usb_cam2vkarm\" args=\"0.0885 0 0.065 -1.57 0 -1.57 link5 usb_cam 10\" /&gt;\n&lt;node pkg=\"tf\" type=\"static_transform_publisher\" name=\"ar_link2_usb_cam\" args=\"0 0 0 1.57 -1.57 0 usb_cam ar_link 10\" /&gt;\n&lt;!-- usb_cam --&gt;\n&lt;node name=\"usb_cam\" pkg=\"usb_cam\" type=\"usb_cam_node\" output=\"screen\" &gt;\n&lt;param name=\"video_device\" value=\"/dev/vkarm_camera_raw\" /&gt;\n&lt;param name=\"image_width\" value=\"1280\" /&gt;\n&lt;param name=\"image_height\" value=\"720\" /&gt;\n&lt;param name=\"pixel_format\" value=\"yuyv\" /&gt;\n&lt;param name=\"camera_frame_id\" value=\"usb_cam\" /&gt;\n&lt;param name=\"io_method\" value=\"mmap\"/&gt;\n&lt;param name=\"camera_info_url\" type=\"string\" value=\"file://$(find \u6444\u50cf\u5934\u529f\u80fd\u5305)/\u6807\u5b9aYAML\u6587\u4ef6\u540d\" /&gt;\n&lt;/node&gt;\n&lt;!-- ar_track --&gt;\n&lt;arg name=\"marker_size\" default=\"3.0\" /&gt;\n&lt;arg name=\"max_new_marker_error\" default=\"0.08\" /&gt;\n&lt;arg name=\"max_track_error\" default=\"0.2\" /&gt;\n&lt;arg name=\"cam_image_topic\" default=\"/usb_cam/image_raw\" /&gt;\n&lt;arg name=\"cam_info_topic\" default=\"/usb_cam/camera_info\" /&gt;\n&lt;arg name=\"output_frame\" default=\"/ar_link\" /&gt;\n&lt;node name=\"ar_track_alvar\" pkg=\"ar_track_alvar\" type=\"individualMarkersNoKinect\" respawn=\"false\" output=\"screen\"&gt;\n&lt;param name=\"marker_size\"           type=\"double\" value=\"$(arg marker_size)\" /&gt;\n&lt;param name=\"max_new_marker_error\"  type=\"double\" value=\"$(arg max_new_marker_error)\" /&gt;\n&lt;param name=\"max_track_error\"       type=\"double\" value=\"$(arg max_track_error)\" /&gt;\n&lt;param name=\"output_frame\"          type=\"string\" value=\"$(arg output_frame)\" /&gt;\n&lt;remap from=\"camera_image\"  to=\"$(arg cam_image_topic)\" /&gt;\n&lt;remap from=\"camera_info\"   to=\"$(arg cam_info_topic)\" /&gt;\n&lt;/node&gt;\n&lt;!-- rviz --&gt;\n&lt;arg name=\"rviz_config\" default=\"$(find \u529f\u80fd\u5305\u540d)/config/ar_track_camera.rviz\" /&gt;\n&lt;node pkg=\"rviz\" type=\"rviz\" name=\"rviz\" args=\"$(arg rviz_config)\" /&gt;\n&lt;/launch&gt;\n</code></pre> <p>\u9700\u8981\u4fee\u6539\u7684\u5730\u65b9\u6709\uff1a</p> <ul> <li>\u8bbe\u7f6eworld\u4e0ecamera\u4e4b\u95f4\u7684\u5750\u6807\u53d8\u6362</li> <li>\u8bbe\u7f6eindividualMarkersNoKinect\u8282\u70b9\u6240\u9700\u7684\u53c2\u6570\uff0c\u4e3b\u8981\u6709\uff1a\u8ba2\u9605\u56fe\u50cf\u6570\u636e\u7684\u8bdd\u9898\u540d\u4ee5\u53ca\u4f7f\u7528\u7684\u4e8c\u7ef4\u7801\u5b9e\u9645\u5c3a\u5bf8\uff08cm\uff09</li> <li>\u542f\u52a8rviz\u5c06\u8bc6\u522b\u7ed3\u679c\u53ef\u89c6\u5316\uff0c\u4fdd\u5b58rviz\u914d\u7f6e\u65b9\u4fbf\u590d\u7528</li> </ul>"},{"location":"ROS%E8%BF%9B%E9%98%B6/#54","title":"5.4 \u6fc0\u5149\u96f7\u8fbe","text":""},{"location":"ROS%E8%BF%9B%E9%98%B6/#541","title":"5.4.1 \u6fc0\u5149\u96f7\u8fbe\u7b80\u4ecb","text":"<p>\u6fc0\u5149\u96f7\u8fbe\uff08Light Detecting And Ranging\uff0c\u7b80\u79f0Lidar\uff09\u5373\u5149\u63a2\u6d4b\u548c\u6d4b\u8ddd\uff0c\u79fb\u52a8\u673a\u5668\u4eba\u5728\u81ea\u4e3b\u79fb\u52a8\u8fc7\u7a0b\u4e2d\uff0c\u9700\u8981\u4ece\u73af\u5883\u4e2d\u83b7\u53d6\u969c\u788d\u7269\u7684\u5177\u4f53\u4f4d\u7f6e\uff0c\u623f\u95f4\u7684\u5185\u90e8\u8f6e\u5ed3\u7b49\u4fe1\u606f\uff0c\u8fd9\u4e9b\u4fe1\u606f\u662f\u673a\u5668\u4eba\u521b\u5efa\u5730\u56fe\u3001\u8fdb\u884c\u5bfc\u822a\u7684\u57fa\u7840\u6570\u636e\uff0c\u4f7f\u7528\u6fc0\u5149\u96f7\u8fbe\u6765\u83b7\u53d6\u8fd9\u7c7b\u6570\u636e\u662f\u8f83\u4e3a\u5e38\u89c1\u9009\u62e9\u3002</p>"},{"location":"ROS%E8%BF%9B%E9%98%B6/#542","title":"5.4.2 \u6fc0\u5149\u96f7\u8fbe\u539f\u7406","text":"<p>\u6fc0\u5149\u96f7\u8fbe\u53ef\u4ee5\u53d1\u5c04\u6fc0\u5149\u675f\uff0c\u5149\u675f\u7167\u5c04\u5230\u7269\u4f53\u4e0a\uff0c\u518d\u53cd\u5c04\u56de\u6fc0\u5149\u96f7\u8fbe\uff0c\u76ee\u524d\u5e02\u9762\u4e0a\u7684\u6fc0\u5149\u96f7\u8fbe\u6839\u636e\u6d4b\u8ddd\u539f\u7406\u4e0d\u540c\uff0c\u53ef\u5206\u4e3a\u8109\u51b2\u5f0f\uff08\u91c7\u7528TOF\u6cd5\u6765\u5b9e\u73b0\u6d4b\u8ddd\uff09\u548c\u4e09\u89d2\u5f0f\u3002</p> <p>1.\u8109\u51b2\u5f0f</p> <p>\u4e5f\u79f0\u4e3a\u76f4\u63a5\u5f0f\uff0c\u8ba1\u7b97\u516c\u5f0f\u5982\u4e0b\uff1a</p> <p>D = c \u00d7 t / 2</p> <p>D\u4e3a\u6d4b\u91cf\u8ddd\u79bb\uff0cc\u4e3a\u6052\u5b9a\u7684\u5149\u901f\uff0ct\u4e3a\u6fc0\u5149\u5f80\u8fd4\u65f6\u95f4\u3002\u8109\u51b2\u5f0f\u7684\u5de5\u4f5c\u539f\u7406\u5341\u5206\u7b80\u5355\uff0c\u6052\u5b9a\u901f\u5ea6\u4e58\u4ee5\u65f6\u95f4\u7b49\u4e8e\u8ddd\u79bb\uff0c\u7531\u4e8e\u662f\u5f80\u8fd4\uff0c\u6240\u4ee5\u9700\u8981\u9664\u4ee52\u3002</p> <p>2.\u4e09\u89d2\u5f0f</p> <p>\u4e5f\u79f0\u4e3a\u95f4\u63a5\u5f0f\uff0c\u5c06\u5149\u6e90\u3001\u88ab\u6d4b\u7269\u4f53\u3001\u63a5\u6536\u7cfb\u7edf\u4e09\u70b9\u7ec4\u6210\u4e00\u4e2a\u4e09\u89d2\u5f62\u5149\u8def\uff0c\u63a5\u6536\u7cfb\u7edf\u8d1f\u8d23\u63a5\u6536\u6765\u81ea\u88ab\u6d4b\u7269\u4f53\u8868\u9762\u7684\u6563\u5c04\u5149\uff0c\u5e76\u5c06\u5176\u6210\u50cf\u5728\u5149\u7535\u63a2\u6d4b\u5668\u7684\u654f\u611f\u9762\u4e0a\uff0c\u901a\u8fc7\u5149\u70b9\u5728\u654f\u611f\u9762\u4e0a\u7684\u5206\u5e03\u8ddd\u79bb\uff0c\u4ece\u800c\u8ba1\u7b97\u51fa\u88ab\u6d4b\u7269\u4f53\u7684\u8ddd\u79bb\uff0c\u5de5\u4f5c\u539f\u7406\u5982\u4e0b\u56fe\uff1a</p> <p></p>"},{"location":"ROS%E8%BF%9B%E9%98%B6/#543","title":"5.4.3 \u6fc0\u5149\u96f7\u8fbe\u7684\u4f7f\u7528","text":"<p>1.\u96f7\u8fbe\u8fde\u63a5PC</p> <p>\u96f7\u8fbe\u901a\u7535\u540e\u8fde\u63a5\u4e3b\u673aUSB\u7aef\u53e3\uff0c\u5e76\u5728\u865a\u62df\u673a\u4e2d\u505a\u597d\u76f8\u5173\u8bbe\u7f6e\u3002</p> <p></p> <p>2.\u786e\u8ba4\u5f53\u524dUSB\u7aef\u53e3\u5e76\u4fee\u6539\u6743\u9650</p> <p>\u67e5\u770b\u7aef\u53e3\uff1a</p> <p><code>ll /dev/ttyUSB*</code></p> <p></p> <p>\u4e3a\u5f53\u524d\u7528\u6237\u6dfb\u52a0\u6743\u9650\uff08\u5c06\u7528\u6237\u6dfb\u52a0\u8fdbdialout\u7ec4\uff09\uff1a</p> <p><code>sudo usermod -a -G dialout &lt;your_user_name&gt;</code></p> <p></p> <p>\uff1a\u91cd\u542f\u865a\u62df\u673a\u4f7f\u4e4b\u751f\u6548</p>"},{"location":"ROS%E8%BF%9B%E9%98%B6/#542_1","title":"5.4.2 \u6fc0\u5149\u96f7\u8fbe\u529f\u80fd\u5305\u5b89\u88c5\u4e0e\u914d\u7f6e","text":"<pre><code>vkrobot@vkrobot:~$ git clone https://github.com/YDLIDAR/YDLidar-SDK.git\nvkrobot@vkrobot:~$ cd YDLidar-SDK\nvkrobot@vkrobot:~/YDLidar-SDK$ mkdir build\nvkrobot@vkrobot:~/YDLidar-SDK$ cd build\nvkrobot@vkrobot:~/YDLidar-SDK/build$ cmake ..\nvkrobot@vkrobot:~/YDLidar-SDK/build$ make\nvkrobot@vkrobot:~/YDLidar-SDK/build$ sudo make install\n</code></pre> <pre><code>vkrobot@vkrobot:~$ git clone https://github.com/YDLIDAR/ydlidar_ros_driver.git ydlidar_ws/src/ydlidar_ros_driver\nvkrobot@vkrobot:~$ cd ydlidar_ws\nvkrobot@vkrobot:~/ydlidar_ws$ catkin_make\nvkrobot@vkrobot:~/ydlidar_ws$ echo \"source ~/ydlidar_ws/devel/setup.bash\" &gt;&gt; ~/.bashrc\nvkrobot@vkrobot:~/ydlidar_ws$ source ~/.bashrc\nvkrobot@vkrobot:~/ydlidar_ws$ chmod 0777 src/ydlidar_ros_driver/startup/*\nvkrobot@vkrobot:~/ydlidar_ws$ sudo sh src/ydlidar_ros_driver/startup/initenv.sh\n</code></pre>"},{"location":"ROS%E8%BF%9B%E9%98%B6/#543_1","title":"5.4.3 \u6fc0\u5149\u96f7\u8fbe\u6570\u636e\u83b7\u53d6\u4e0e\u663e\u793a","text":"<p><code>roslaunch ydliadr_ros_driver lidar_view.launch</code></p> <p><code>lidar_view.launch</code></p> <pre><code>&lt;launch&gt;\n&lt;node name=\"ydlidar_lidar_publisher\"  pkg=\"ydlidar_ros_driver\"  type=\"ydlidar_ros_driver_node\" output=\"screen\" respawn=\"false\" &gt;\n&lt;!-- string property --&gt;\n&lt;param name=\"port\"         type=\"string\" value=\"/dev/ydlidar\"/&gt;  &lt;param name=\"frame_id\"     type=\"string\" value=\"laser_frame\"/&gt;\n&lt;param name=\"ignore_array\"     type=\"string\" value=\"\"/&gt;\n&lt;!-- int property --&gt;\n&lt;param name=\"baudrate\"         type=\"int\" value=\"230400\"/&gt;  &lt;!-- 0:TYPE_TOF, 1:TYPE_TRIANGLE, 2:TYPE_TOF_NET --&gt;\n&lt;param name=\"lidar_type\"       type=\"int\" value=\"1\"/&gt;  &lt;!-- 0:YDLIDAR_TYPE_SERIAL, 1:YDLIDAR_TYPE_TCP --&gt;\n&lt;param name=\"device_type\"         type=\"int\" value=\"0\"/&gt;  &lt;param name=\"sample_rate\"         type=\"int\" value=\"9\"/&gt;  &lt;param name=\"abnormal_check_count\"         type=\"int\" value=\"4\"/&gt;  &lt;!-- bool property --&gt;\n&lt;param name=\"resolution_fixed\"    type=\"bool\"   value=\"true\"/&gt;\n&lt;param name=\"auto_reconnect\"    type=\"bool\"   value=\"true\"/&gt;\n&lt;param name=\"reversion\"    type=\"bool\"   value=\"true\"/&gt;\n&lt;param name=\"inverted\"    type=\"bool\"   value=\"true\"/&gt;\n&lt;param name=\"isSingleChannel\"    type=\"bool\"   value=\"false\"/&gt;\n&lt;param name=\"intensity\"    type=\"bool\"   value=\"false\"/&gt;\n&lt;param name=\"support_motor_dtr\"    type=\"bool\"   value=\"false\"/&gt;\n&lt;param name=\"invalid_range_is_inf\"    type=\"bool\"   value=\"false\"/&gt;\n&lt;param name=\"point_cloud_preservative\"    type=\"bool\"   value=\"false\"/&gt;\n&lt;!-- float property --&gt;\n&lt;param name=\"angle_min\"    type=\"double\" value=\"-180\" /&gt;\n&lt;param name=\"angle_max\"    type=\"double\" value=\"180\" /&gt;\n&lt;param name=\"range_min\"    type=\"double\" value=\"0.1\" /&gt;\n&lt;param name=\"range_max\"    type=\"double\" value=\"16.0\" /&gt;\n&lt;param name=\"frequency\"    type=\"double\" value=\"10.0\"/&gt;\n&lt;/node&gt;\n&lt;node pkg=\"tf\" type=\"static_transform_publisher\" name=\"base_link_to_laser4\" args=\"0.15 0.0 0.28 0.0 0.0 0.0 /base_link /laser_frame 40\" /&gt;\n&lt;node name=\"rviz\" pkg=\"rviz\" type=\"rviz\" args=\"-d $(find ydlidar_ros_driver)/launch/lidar.rviz\" /&gt;\n&lt;/launch&gt;\n</code></pre> <p></p>"},{"location":"%E5%BB%BA%E5%9B%BE%E4%B8%8E%E5%AF%BC%E8%88%AA/","title":"6 \u79fb\u52a8\u673a\u5668\u4ebaSLAM\u4e0e\u5bfc\u822a","text":"<p>\u73b0\u5b9e\u751f\u6d3b\u4e2d\uff0c\u5f53\u6211\u4eec\u9700\u8981\u5230\u67d0\u76ee\u7684\u5730\u65f6\uff0c\u53ef\u80fd\u4f1a\u9700\u8981\u4e00\u5f20\u5168\u5c40\u5730\u56fe\uff0c\u9996\u5148\u901a\u8fc7\u5730\u56fe\u5224\u65ad\u81ea\u5df1\u5f53\u524d\u7684\u4f4d\u7f6e\uff0c\u76ee\u7684\u5730\u7684\u4f4d\u7f6e\uff0c\u540c\u65f6\u6839\u636e\u5730\u56fe\u6765\u89c4\u5212\u4e00\u6761\u5927\u81f4\u7684\u8def\u7ebf\u3002\u5728\u524d\u5f80\u76ee\u7684\u5730\u7684\u9014\u4e2d\uff0c\u8fd8\u9700\u8981\u5224\u65ad\u5468\u56f4\u7684\u73af\u5883\uff0c\u4f8b\u5982\u5f53\u9047\u5230\u4fee\u8def\u7b49\u60c5\u51b5\u65f6\uff0c\u53ef\u80fd\u9700\u8981\u4e34\u65f6\u53d8\u66f4\u884c\u8fdb\u8def\u7ebf......</p> <p>\u5bf9\u673a\u5668\u4eba\u7684\u5bfc\u822a\u800c\u8a00\uff0c\u4e5f\u662f\u5982\u6b64\uff0c\u6839\u636e\u4e0a\u8ff0\u7684\u60c5\u5f62\u6211\u4eec\u53ef\u4ee5\u63d0\u70bc\u51fa\u5bfc\u822a\u9700\u8981\u7684\u51e0\u4e2a\u6280\u672f\u70b9\uff1a</p> <ol> <li>\u5168\u5c40\u5730\u56fe</li> <li>\u81ea\u8eab\u5b9a\u4f4d</li> <li>\u8def\u5f84\u89c4\u5212</li> <li>\u8fd0\u52a8\u63a7\u5236</li> <li>\u73af\u5883\u611f\u77e5</li> </ol> <p>\u5176\u4e2d\uff0c\u5168\u5c40\u5730\u56fe\u7684\u4f7f\u7528\u6d89\u53ca\u5730\u56fe\u7684\u7ed8\u5236\uff0c\u76ee\u524d\u4e3b\u6d41\u7684\u5730\u56fe\u7ed8\u5236\u6280\u672f\u4e3aSLAM\uff08Simultaneous Localization And Mapping\uff09\u2014\u2014\u5373\u65f6\u5b9a\u4f4d\u4e0e\u5730\u56fe\u6784\u5efa\uff0c\u5728ROS\u4e2d\uff0c\u8f83\u4e3a\u5e38\u7528\u7684SLAM\u7b97\u6cd5\u6709\uff1agmapping\u3001cartographer\u3001hector_slam\u3001rgbdslam\u3001ORB_SLAM\u7b49\uff0c\u672c\u6559\u7a0b\u9009\u7528gmapping\u7b97\u6cd5\u6765\u5b9e\u73b0SLAM\u3002</p>"},{"location":"%E5%BB%BA%E5%9B%BE%E4%B8%8E%E5%AF%BC%E8%88%AA/#_1","title":"\u51c6\u5907\u5de5\u4f5c","text":"<p>\u5b89\u88c5\u76f8\u5173\u7684ROS\u529f\u80fd\u5305\uff1a</p> <ul> <li>gmapping\uff1a<code>sudo apt install ros-melodic-gmapping</code></li> <li>map_server\uff1a<code>sudo apt install ros-melodic-map-server</code></li> <li>navigation\uff1a<code>sudo apt install ros-melodic-navigation</code></li> </ul> <p>\u65b0\u5efa\u529f\u80fd\u5305\u5e76\u5bfc\u5165\u4f9d\u8d56\uff1a</p> <p><code>catkin_create_pkg learning_nav gmapping map_server amcl move_base vkbot_description ydlidar vkbot_bringup vkbot_teleop</code></p>"},{"location":"%E5%BB%BA%E5%9B%BE%E4%B8%8E%E5%AF%BC%E8%88%AA/#61-slam","title":"6.1 SLAM\u5305\u7684\u4f7f\u7528","text":"<p>\uff1a\u4ec0\u4e48\u662fSLAM</p>"},{"location":"%E5%BB%BA%E5%9B%BE%E4%B8%8E%E5%AF%BC%E8%88%AA/#611-gmapping","title":"6.1.1 gmapping","text":"<p>gmapping\u662f\u8f83\u4e3a\u5e38\u7528\u4e14\u6210\u719f\u7684SLAM\u7b97\u6cd5\u4e4b\u4e00\uff0c\u5b83\u53ef\u4ee5\u6839\u636e\u673a\u5668\u4eba\u7684\u91cc\u7a0b\u8ba1\u6570\u636e\u4e0e\u6fc0\u5149\u96f7\u8fbe\u6570\u636e\u6765\u7ed8\u5236\u4e8c\u7ef4\u6805\u683c\u5730\u56fe\uff0c\u56e0\u6b64gmapping\u5bf9\u786c\u4ef6\u6709\u4e00\u5b9a\u7684\u8981\u6c42\uff1a</p> <ul> <li>\u673a\u5668\u4eba\u53ef\u4ee5\u53d1\u5e03\u91cc\u7a0b\u8ba1\u6d88\u606f</li> <li>\u673a\u5668\u4eba\u53ef\u4ee5\u53d1\u5e03\u96f7\u8fbe\u6d88\u606f</li> </ul>"},{"location":"%E5%BB%BA%E5%9B%BE%E4%B8%8E%E5%AF%BC%E8%88%AA/#6111-gmapping","title":"6.1.1.1 gmapping\u529f\u80fd\u5305","text":"<p>gmapping\u529f\u80fd\u5305\u4e2d\u7684\u6838\u5fc3\u8282\u70b9\u662f\uff1a<code>slam_gmapping</code>\u3002\u5173\u4e8e\u8be5\u8282\u70b9\u6211\u4eec\u9700\u8981\u91cd\u70b9\u5173\u6ce8\u5b83\u8ba2\u9605\u7684\u8bdd\u9898\u3001\u53d1\u5e03\u7684\u8bdd\u9898\u3001\u63d0\u4f9b\u7684\u670d\u52a1\u4ee5\u53ca\u76f8\u5173\u53c2\u6570</p> <p></p> <p>\u8ba2\u9605\u7684\u8bdd\u9898</p> <ul> <li>scan (sensor_msgs/LaserScan)\uff1aSLAM\u6240\u9700\u7684\u96f7\u8fbe\u6570\u636e</li> <li>tf (tf2_msgs/TFMessage)\uff1a\u7528\u4e8e\u5e95\u76d8\u3001\u91cc\u7a0b\u8ba1\u548c\u96f7\u8fbe\u4e4b\u95f4\u7684\u5750\u6807\u53d8\u6362\u6d88\u606f</li> </ul> <p>\u53d1\u5e03\u7684\u8bdd\u9898</p> <ul> <li>map (nav_msgs/OccupancyGrid)\uff1a\u5730\u56fe\u6805\u683c\u6570\u636e\uff0c\u7528\u4e8e\u5728rviz\u4e2d\u663e\u793a\u5730\u56fe</li> <li>map_metadata (nav_msgs/MapMetaData)\uff1a\u5730\u56fe\u5143\u6570\u636e\uff0c\u5305\u542b\u4e86\u5730\u56fe\u7684\u5bbd\u5ea6\u3001\u9ad8\u5ea6\u3001\u5206\u8fa8\u7387\u7b49</li> <li>~entrop (std_msgs/Float64)\uff1a\u673a\u5668\u4eba\u59ff\u6001\u5206\u5e03\u71b5\u4f30\u8ba1\uff0c\u503c\u8d8a\u5927\u5219\u4e0d\u786e\u5b9a\u6027\u8d8a\u5927</li> </ul> <p>\u63d0\u4f9b\u7684\u670d\u52a1</p> <ul> <li>dynamic_map (nav_msgs/GetMap)\uff1a\u7528\u4e8e\u83b7\u53d6\u5730\u56fe\u6570\u636e</li> </ul> <p>\u53c2\u6570</p> <ul> <li>~base_frame (string, default: \"base_link\")\uff1a\u673a\u5668\u4eba\u57fa\u5750\u6807\u7cfb</li> <li>~map_frame (string, default: \"map\")\uff1a\u5730\u56fe\u5750\u6807\u7cfb</li> <li>~odom_frame (string, default: \"odom\")\uff1a\u91cc\u7a0b\u8ba1\u5750\u6807\u7cfb</li> <li>~map_update_interval (float, default: 5.0)\uff1a\u5730\u56fe\u66f4\u65b0\u9891\u7387</li> <li>~maxUrange (float, default: 80.0)\uff1a\u6fc0\u5149\u96f7\u8fbe\u6570\u636e\u6700\u5927\u53ef\u7528\u8303\u56f4\uff0c\u8d85\u51fa\u6b64\u8303\u56f4\u7684\u6fc0\u5149\u6570\u636e\u5c06\u88ab\u622a\u65ad</li> <li>~maxRange(float)\uff1a\u4f20\u611f\u5668\u7684\u6700\u5927\u8303\u56f4\uff0c\u4e00\u822c\u8bbe\u7f6e\u4e3a maxUrange &lt; \u4f20\u611f\u5668\u5b9e\u9645\u63a2\u6d4b\u7684\u6700\u5927\u8303\u56f4 &lt;= maxRange</li> </ul> <p>......</p> <p>\u53c2\u6570\u8f83\u591a\uff0c\u6b64\u5904\u4ec5\u7f57\u5217\u51fa\u5e38\u7528\u53c2\u6570\uff0c\u5176\u4f59\u53c2\u6570\u53ef\u53c2\u8003\u5b98\u7f51\u6587\u6863\uff1agmapping - ROS Wiki</p> <p>\u8fd0\u884c\u8282\u70b9\u5fc5\u987b\u7684\u5750\u6807\u53d8\u6362</p> <ul> <li>\u6fc0\u5149\u96f7\u8fbe\u5750\u6807\u7cfb(scans) ---&gt; \u57fa\u5750\u6807\u7cfb(base_link)\uff1a\u4e00\u822c\u7531robot_state_publisher\u53d1\u5e03\uff0c\u6216 \u4f7f\u7528 tf \u5de5\u5177 static transform_publisher \u53d1\u5e03</li> <li>\u57fa\u5750\u6807\u7cfb(base_link) ---&gt; \u91cc\u7a0b\u8ba1\u5750\u6807\u7cfb(odom)\uff1a\u4e00\u822c\u7531\u91cc\u7a0b\u8ba1\u8282\u70b9\u53d1\u5e03</li> </ul> <p>\u8282\u70b9\u53d1\u5e03\u7684 TF \u53d8\u6362</p> <ul> <li>\u5730\u56fe\u5750\u6807\u7cfb(map) ---&gt; \u91cc\u7a0b\u8ba1\u5750\u6807\u7cfb(odom)</li> </ul>"},{"location":"%E5%BB%BA%E5%9B%BE%E4%B8%8E%E5%AF%BC%E8%88%AA/#6112-gmapping","title":"6.1.1.2 gmapping\u8282\u70b9\u7684\u914d\u7f6e","text":"<p>\u4f7f\u7528 launch \u6587\u4ef6\u542f\u52a8\u8282\u70b9\u5e76\u914d\u7f6e\u53c2\u6570</p> <p><code>slam.launch</code></p> <pre><code>&lt;launch&gt;\n&lt;node pkg=\"gmapping\" type=\"slam_gmapping\" name=\"slam_gmapping\" output=\"screen\"&gt;\n&lt;!--\u96f7\u8fbe\u8bdd\u9898--&gt;\n&lt;remap from=\"scan\" to=\"scan\"/&gt;\n&lt;!--\u5e95\u76d8\u5750\u6807\u7cfb--&gt;\n&lt;param name=\"base_frame\" value=\"base_footprint\"/&gt;\n&lt;!--\u91cc\u7a0b\u8ba1\u5750\u6807\u7cfb--&gt;\n&lt;param name=\"odom_frame\" value=\"odom\"/&gt;\n&lt;!--\u5730\u56fe\u66f4\u65b0\u9891\u7387\uff0c\u53ef\u4ee5\u6839\u636e\u786c\u4ef6\u6761\u4ef6\u9002\u5f53\u8c03\u6574\uff0c\u5355\u4f4d\uff1as--&gt;\n&lt;param name=\"map_update_interval\" value=\"1.0\"/&gt;\n&lt;param name=\"maxUrange\" value=\"8.0\"/&gt;\n&lt;param name=\"maxRange\" value=\"10.0\"/&gt;\n&lt;param name=\"sigma\" value=\"0.05\"/&gt;\n&lt;param name=\"kernelSize\" value=\"3\"/&gt;\n&lt;param name=\"lstep\" value=\"0.05\"/&gt;\n&lt;param name=\"astep\" value=\"0.05\"/&gt;\n&lt;param name=\"iterations\" value=\"5\"/&gt;\n&lt;param name=\"lsigma\" value=\"0.075\"/&gt;\n&lt;param name=\"ogain\" value=\"3.0\"/&gt;\n&lt;param name=\"lskip\" value=\"0\"/&gt;\n&lt;param name=\"minimumScore\" value=\"30\"/&gt;\n&lt;param name=\"srr\" value=\"0.01\"/&gt;\n&lt;param name=\"srt\" value=\"0.02\"/&gt;\n&lt;param name=\"str\" value=\"0.01\"/&gt;\n&lt;param name=\"stt\" value=\"0.02\"/&gt;\n&lt;param name=\"linearUpdate\" value=\"0.05\"/&gt;\n&lt;param name=\"angularUpdate\" value=\"0.436\"/&gt;\n&lt;param name=\"temporalUpdate\" value=\"-1.0\"/&gt;\n&lt;param name=\"resampleThreshold\" value=\"0.5\"/&gt;\n&lt;param name=\"particles\" value=\"50\"/&gt;\n&lt;param name=\"xmin\" value=\"-1.0\"/&gt;\n&lt;param name=\"ymin\" value=\"-1.0\"/&gt;\n&lt;param name=\"xmax\" value=\"1.0\"/&gt;\n&lt;param name=\"ymax\" value=\"1.0\"/&gt;\n&lt;param name=\"delta\" value=\"0.05\"/&gt;\n&lt;param name=\"llsamplerange\" value=\"0.01\"/&gt;\n&lt;param name=\"llsamplestep\" value=\"0.01\"/&gt;\n&lt;param name=\"lasamplerange\" value=\"0.005\"/&gt;\n&lt;param name=\"lasamplestep\" value=\"0.005\"/&gt;\n&lt;/node&gt;\n&lt;/launch&gt;\n</code></pre> <p><code>start_slam.launch</code></p> <pre><code>&lt;launch&gt;\n&lt;include file=\"$(find \u529f\u80fd\u5305)/launch/slam.launch\" /&gt;\n&lt;include file=\"$(find vkbot_bringup)/launch/minimal.launch\" /&gt;\n&lt;include file=\"$(find ydlidar)/launch/ydlidar1_up.launch\" /&gt;\n&lt;include file=\"$(find vkbot_navigation)/launch/velocity_smoother.launch.xml\" /&gt;\n&lt;include file=\"$(find vkbot_navigation)/launch/safety_controller.launch.xml\" /&gt;\n&lt;include file=\"$(find vkbot_teleop)/launch/key_board_teleop.launch\" /&gt;\n&lt;node pkg=\"joint_state_publisher\" name=\"joint_state_publisher\" type=\"joint_state_publisher\" /&gt;\n&lt;node pkg=\"robot_state_publisher\" name=\"robot_state_publisher\" type=\"robot_state_publisher\" /&gt;\n&lt;!-- \u53ef\u4ee5\u4fdd\u5b58 rviz \u914d\u7f6e\u5e76\u540e\u671f\u76f4\u63a5\u4f7f\u7528--&gt;\n&lt;node pkg=\"rviz\" type=\"rviz\" name=\"rviz\" args=\"-d $(find \u529f\u80fd\u5305)/config/slam.rviz\"/&gt;\n&lt;/launch&gt;\n</code></pre> <p>rviz\u8bbe\u7f6e</p> <p></p> <ul> <li>\u8bbe\u7f6eFixed Frame\u4e3amap</li> <li>\u6dfb\u52a0\u63d2\u4ef6\u5e76\u8ba2\u9605\u8bdd\u9898\uff0c\u5305\u62ec\uff1aRobotModel\u3001Map\u3001LaserScan</li> </ul> <p>\u73b0\u5728\u4f60\u53ef\u4ee5\u8bd5\u7740\u7528\u952e\u76d8\u63a7\u5236\u8bbe\u5907\u79fb\u52a8\uff0c\u4ece\u800c\u7ed8\u5236\u5730\u56fe\u5566\uff01</p>"},{"location":"%E5%BB%BA%E5%9B%BE%E4%B8%8E%E5%AF%BC%E8%88%AA/#612-map_server","title":"6.1.2 map_server","text":"<p><code>slam_gmapping</code>\u8282\u70b9\u53d1\u5e03\u4e86\u5730\u56fe\u6570\u636e\uff0c\u4f46\u662f\u6570\u636e\u4ec5\u4ec5\u4fdd\u5b58\u5728\u5185\u5b58\u4e2d\uff0c\u5f53\u8282\u70b9\u5173\u95ed\u65f6\u5730\u56fe\u6570\u636e\u4e5f\u4f1a\u88ab\u4e00\u5e76\u91ca\u653e\uff0c\u56e0\u6b64\u6211\u4eec\u9700\u8981\u5c06\u5730\u56fe\u6570\u636e\u4fdd\u5b58\u5230\u78c1\u76d8\u4e2d\u4fbf\u4e8e\u540e\u7eed\u7684\u4f7f\u7528\uff0cmap_server \u529f\u80fd\u5305\u63d0\u4f9b\u4e86\u4e24\u4e2a\u8282\u70b9\uff1a<code>map_saver</code> \u548c <code>map_server</code>\uff0c\u524d\u8005\u7528\u4e8e\u5730\u56fe\u4fdd\u5b58\uff0c\u540e\u8005\u7528\u4e8e\u52a0\u8f7d\u5730\u56fe\u6570\u636e\u5230 ROS \u53c2\u6570\u670d\u52a1\u5668\u4e2d</p> <ul> <li><code>map_saver</code>\uff1a\u6b64\u8282\u70b9\u8ba2\u9605\u4e86 map \u8bdd\u9898\uff0c\u7528\u4e8e\u751f\u6210\u5730\u56fe\u6587\u4ef6</li> </ul> <p>\u4f7f\u7528launch\u6587\u4ef6\u542f\u52a8\u6b64\u8282\u70b9\u5e76\u914d\u7f6e\u53c2\u6570</p> <p><code>map_saver.launch</code></p> <pre><code>&lt;launch&gt;\n&lt;arg name=\"filename\" value=\"$(find \u529f\u80fd\u5305)/\u4fdd\u5b58\u8def\u5f84/my_map\" /&gt;\n&lt;node pkg=\"map_server\" type=\"map_saver\" name=\"map_saver\" args=\"-f $(arg filename)\" /&gt;\n&lt;/launch&gt;\n</code></pre> <p><code>slam_gmapping</code>\u8282\u70b9\u5730\u56fe\u7ed8\u5236\u5b8c\u6210\u540e\uff0c\u8fd0\u884c\u6b64 launch \u6587\u4ef6\u5373\u53ef\u4fdd\u5b58\u5730\u56fe\uff0c\u6307\u5b9a\u8def\u5f84\u4e0b\u4f1a\u751f\u6210\u4e24\u4e2a\u6587\u4ef6\uff1a<code>my_map.pgm</code> \u53ca <code>my_map.yaml</code>\uff0c<code>.pgm</code>\u662f\u4e00\u5f20\u5730\u56fe\u7684\u56fe\u7247\uff0c\u53ef\u7528\u56fe\u7247\u67e5\u770b\u7a0b\u5e8f\u6253\u5f00\uff0c<code>.yaml</code>\u4e2d\u4fdd\u5b58\u7684\u662f\u5730\u56fe\u7684\u63cf\u8ff0\u4fe1\u606f\uff0c\u5305\u62ec\u5730\u56fe\u5bbd\u5ea6\u3001\u9ad8\u5ea6\u3001\u5206\u8fa8\u7387\u7b49</p> <ul> <li><code>map_server</code>\uff1a\u6b64\u8282\u70b9\u4f1a\u53d1\u5e03\u5730\u56fe\u6570\u636e</li> </ul> <p>\u4f7f\u7528launch\u6587\u4ef6\u542f\u52a8\u6b64\u8282\u70b9\uff0c\u52a0\u8f7d\u5730\u56fe\u63cf\u8ff0\u6587\u4ef6\uff08yaml\uff09\u5e76\u53d1\u5e03</p> <p><code>map_server.launch</code></p> <pre><code>&lt;launch&gt;\n&lt;!-- \u5730\u56fe\u63cf\u8ff0\u6587\u4ef6(yaml) --&gt;\n&lt;arg name=\"map\" default=\"my_map.yaml\" /&gt;\n&lt;!-- \u8fd0\u884cmap_server\u8282\u70b9\u5e76\u52a0\u8f7d\u5730\u56fe --&gt;\n&lt;node pkg=\"map_server\" type=\"map_server\" name=\"map_server\" args=\"$(find \u529f\u80fd\u5305)/\u4fdd\u5b58\u8def\u5f84/$(arg map)\" /&gt;\n&lt;node pkg=\"rviz\" type=\"rviz\" name=\"rviz\" /&gt;\n&lt;/launch&gt;\n</code></pre> <p>\u5728 rviz \u4e2d\u52a0\u8f7d map \u7ec4\u4ef6\uff0c\u8ba2\u9605 /map \u8bdd\u9898\u5373\u53ef\u663e\u793a\u4e8c\u7ef4\u6805\u683c\u5730\u56fe</p> <p></p>"},{"location":"%E5%BB%BA%E5%9B%BE%E4%B8%8E%E5%AF%BC%E8%88%AA/#62","title":"6.2  \u5bfc\u822a","text":"<p>\u673a\u5668\u4eba\u662f\u5982\u4f55\u5b9e\u73b0\u5bfc\u822a\u7684\u5462\uff1fROS\u5b98\u65b9\u63d0\u4f9b\u4e86\u4e00\u5f20\u5bfc\u822a\u529f\u80fd\u5305\u96c6\u7684\u56fe\u793a\uff0c\u4e0b\u56fe\u4e2d\u56ca\u62ec\u4e86ROS\u5bfc\u822a\u6d89\u53ca\u7684\u5173\u952e\u6280\u672f</p> <p></p> <p>\u4e0a\u56fe\u5404\u90e8\u5206\u542b\u4e49\u5982\u4e0b\uff1a</p> <ul> <li>\u767d\u8272\u90e8\u5206\uff1a\u5fc5\u987b\u4e14\u5df2\u5b9e\u73b0\u7684\u7ec4\u4ef6</li> <li>\u7070\u8272\u90e8\u5206\uff1a\u53ef\u9009\u4e14\u5df2\u5b9e\u73b0\u7684\u7ec4\u4ef6</li> <li>\u84dd\u8272\u90e8\u5206\uff1a\u5fc5\u987b\u4f46\u672a\u5b9e\u73b0\u7684\u7ec4\u4ef6</li> </ul> <p>\u6839\u636e\u56fe\u793a\u53ef\u603b\u7ed3\u51fa\u5bfc\u822a\u6d89\u53ca\u7684\u5173\u952e\u6280\u672f\u6709\u4ee5\u4e0b\u4e94\u70b9\uff1a</p> <ol> <li>\u5168\u5c40\u5730\u56fe</li> <li>\u81ea\u8eab\u5b9a\u4f4d</li> <li>\u8def\u5f84\u89c4\u5212</li> <li>\u8fd0\u52a8\u63a7\u5236</li> <li>\u73af\u5883\u611f\u77e5</li> </ol> <p>\u5176\u4e2d\uff0c\u5168\u5c40\u5730\u56fe\u4e00\u822c\u901a\u8fc7<code>map_server</code>\u8282\u70b9\u53d1\u5e03SLAM\u6784\u5efa\u597d\u7684\u5730\u56fe\u4fe1\u606f\uff0c\u57286.1\u4e2d\u5df2\u8be6\u7ec6\u4ecb\u7ecd\uff0c\u8fd0\u52a8\u63a7\u5236\u4e0e\u73af\u5883\u611f\u77e5\u4e3a\u673a\u5668\u4eba\u5e73\u53f0\u5df2\u5b9e\u73b0\u529f\u80fd\u3002\u56e0\u6b64\u63a5\u4e0b\u6765\u91cd\u70b9\u4ecb\u7ecd\u81ea\u8eab\u5b9a\u4f4d\u4e0e\u8def\u5f84\u89c4\u5212\u3002</p>"},{"location":"%E5%BB%BA%E5%9B%BE%E4%B8%8E%E5%AF%BC%E8%88%AA/#621","title":"6.2.1 \u81ea\u8eab\u5b9a\u4f4d","text":"<p>\u5728\u5bfc\u822a\u5f00\u59cb\u4e0e\u6267\u884c\u8fc7\u7a0b\u4e2d\uff0c\u673a\u5668\u4eba\u90fd\u9700\u8981\u786e\u5b9a\u5f53\u524d\u81ea\u8eab\u7684\u4f4d\u7f6e\uff0c\u4f8b\u5982SLAM\u5c31\u53ef\u4ee5\u5b9e\u73b0\u81ea\u8eab\u5b9a\u4f4d\uff0c\u9664\u6b64\u4e4b\u5916\uff0cROS\u5b98\u65b9\u8fd8\u63d0\u4f9b\u4e86\u4e00\u4e2a\u7528\u4e8e\u5b9a\u4f4d\u7684\u529f\u80fd\u5305\uff1aamcl</p> <p>AMCL\uff08Adaptive Monte Carlo Localization\uff09\u81ea\u9002\u5e94\u8499\u5854\u5361\u7f57\u5b9a\u4f4d\uff0c\u662f\u7528\u4e8e2D\u79fb\u52a8\u673a\u5668\u4eba\u7684\u6982\u7387\u5b9a\u4f4d\u7cfb\u7edf\uff0camcl\u5df2\u7ecf\u96c6\u6210\u5230\u4e86navigation\u5305\u4e2d\u3002</p>"},{"location":"%E5%BB%BA%E5%9B%BE%E4%B8%8E%E5%AF%BC%E8%88%AA/#6211-amcl","title":"6.2.1.1 amcl\u529f\u80fd\u5305","text":"<p>amcl\u529f\u80fd\u5305\u4e2d\u7684\u6838\u5fc3\u8282\u70b9\u662f\uff1a<code>amcl</code>\u3002\u4e3a\u4e86\u65b9\u4fbf\u8c03\u7528\uff0c\u9700\u8981\u5148\u4e86\u89e3\u8be5\u8282\u70b9\u8ba2\u9605\u4e0e\u53d1\u5e03\u7684\u8bdd\u9898\u3001\u63d0\u4f9b\u7684\u670d\u52a1\u53ca\u76f8\u5173\u53c2\u6570\u3002</p> <p></p> <p>\u8ba2\u9605\u7684\u8bdd\u9898</p> <ul> <li>initialpose(geometry_msgs/PoseWithCovarianceStamped)\uff1a\u7528\u6765\u521d\u59cb\u5316\u7c92\u5b50\u6ee4\u6ce2\u5668\u7684\u5747\u503c\u548c\u534f\u65b9\u5dee</li> <li>scan(sensor_msgs/LaserScan)\uff1a\u6fc0\u5149\u96f7\u8fbe\u6570\u636e</li> <li>tf(tf2_msgs/TFMessage)\uff1a\u5750\u6807\u53d8\u6362\u6d88\u606f</li> <li>map(nav_msgs/OccupancyGrid)\uff1a\u8bbe\u7f6e<code>use_map_topic</code>\u53c2\u6570\u540e\uff0cAMCL\u5c06\u8ba2\u9605\u6b64\u8bdd\u9898\u4ee5\u68c0\u7d22\u7528\u4e8e\u5b9a\u4f4d\u7684\u5730\u56fe</li> </ul> <p>\u53d1\u5e03\u7684\u8bdd\u9898</p> <ul> <li>amcl_pose(geometry_msgs/PoseWithCovarianceStamped)\uff1a\u673a\u5668\u4eba\u5728\u5730\u56fe\u4e2d\u7684\u4f4d\u59ff\u4f30\u8ba1</li> <li>particlecloud(geometry_msgs/PoseArray)\uff1a\u4f4d\u59ff\u4f30\u8ba1\u96c6\u5408\uff0crviz\u4e2d\u53ef\u4ee5\u4f7f\u7528PoseArray\u63d2\u4ef6\u56fe\u5f62\u5316\u663e\u793a</li> <li>tf(tf2_msgs/TFMessage)\uff1aodom\u5230map\u7684\u5750\u6807\u53d8\u6362\u6d88\u606f</li> </ul> <p>\u63d0\u4f9b\u7684\u670d\u52a1</p> <ul> <li>global_localization(std_srvs/Empty)\uff1a\u521d\u59cb\u5316\u5168\u5c40\u5b9a\u4f4d</li> <li>request_nomotion_update(std_srvs/Empty)\uff1a\u624b\u52a8\u6267\u884c\u66f4\u65b0\u548c\u53d1\u5e03\u66f4\u65b0\u7c92\u5b50\u7684\u670d\u52a1</li> <li>set_map(nav_msgs/SetMap)\uff1a\u624b\u52a8\u8bbe\u7f6e\u65b0\u5730\u56fe\u548c\u59ff\u6001\u7684\u670d\u52a1</li> </ul> <p>\u8c03\u7528\u7684\u670d\u52a1</p> <ul> <li>static_map(nav_msgs/GetMap)\uff1a\u8c03\u7528\u6b64\u670d\u52a1\u83b7\u53d6\u5730\u56fe\u6570\u636e</li> </ul> <p>\u53c2\u6570</p> <ul> <li>~base_frame_id(string, default:\"base_link\")\uff1a\u673a\u5668\u4eba\u57fa\u5750\u6807\u7cfb</li> <li> <p>~odom_frame_id(string, default:\"odom\")\uff1a\u91cc\u7a0b\u8ba1\u5750\u6807\u7cfb</p> </li> <li> <p>~odom_model_type(string, default:\"diff\")\uff1a\u91cc\u7a0b\u8ba1\u6a21\u578b\uff0c\"diff\"-&gt;\u5dee\u901f\u3001\"omni\"-&gt;\u5168\u5411\u8f6e\u3001\"diff-corrected\"\u3001\"omni-corrected\"</p> </li> <li>~global_frame_id(string, default:\"map\")\uff1a\u5730\u56fe\u5750\u6807\u7cfb</li> </ul> <p>\u4ee5\u4e0a\u4e3a\u5e38\u7528\u53c2\u6570\uff0c\u5176\u4f59\u53c2\u6570\u53c2\u8003\uff1aamcl - ROS Wiki</p> <p>\u5750\u6807\u53d8\u6362</p> <p>\u91cc\u7a0b\u8ba1\u672c\u8eab\u4e5f\u53ef\u4ee5\u534f\u52a9\u673a\u5668\u4eba\u8fdb\u884c\u5b9a\u4f4d\uff0c\u4e0d\u8fc7\u91cc\u7a0b\u8ba1\u5b58\u5728\u7d2f\u8ba1\u8bef\u5dee\uff0c\u4f1a\u51fa\u73b0\u5b9a\u4f4d\u9519\u8bef\u7684\u60c5\u51b5\uff0camcl\u53ef\u4ee5\u901a\u8fc7\u4f30\u7b97\u673a\u5668\u4eba\u5728\u5730\u56fe\u5750\u6807\u7cfb\u4e0b\u7684\u59ff\u6001\uff0c\u518d\u7ed3\u5408\u91cc\u7a0b\u8ba1\u5b9a\u4f4d\u4ece\u800c\u63d0\u9ad8\u5b9a\u4f4d\u7684\u7cbe\u786e\u5ea6\u3002</p> <p></p>"},{"location":"%E5%BB%BA%E5%9B%BE%E4%B8%8E%E5%AF%BC%E8%88%AA/#6212-amcl","title":"6.2.1.2 amcl\u8282\u70b9\u7684\u914d\u7f6e","text":"<p>\u4f7f\u7528 launch \u6587\u4ef6\u542f\u52a8\u8282\u70b9\u5e76\u914d\u7f6e\u53c2\u6570</p> <p><code>amcl.launch</code></p> <pre><code>&lt;launch&gt;\n&lt;node pkg=\"amcl\" type=\"amcl\" name=\"amcl\" output=\"screen\"&gt;\n&lt;!-- \u91cc\u7a0b\u8ba1\u6a21\u5f0f\u4e3a\u5dee\u5206 --&gt;\n&lt;param name=\"odom_model_type\" value=\"diff\"/&gt;\n&lt;!-- \u91cc\u7a0b\u8ba1\u5750\u6807\u7cfb --&gt;\n&lt;param name=\"odom_frame_id\" value=\"odom\"/&gt;\n&lt;!-- \u673a\u5668\u4eba\u57fa\u5750\u6807\u7cfb --&gt;\n&lt;param name=\"base_frame_id\" value=\"base_footprint\"/&gt;\n&lt;!-- \u5730\u56fe\u5750\u6807\u7cfb --&gt;\n&lt;param name=\"global_frame_id\" value=\"map\"/&gt;\n&lt;!-- Publish scans from best pose at a max of 10 Hz --&gt;\n&lt;param name=\"odom_alpha5\" value=\"0.1\"/&gt;\n&lt;param name=\"gui_publish_rate\" value=\"10.0\"/&gt;\n&lt;param name=\"laser_max_beams\" value=\"60\"/&gt;\n&lt;param name=\"laser_max_range\" value=\"12.0\"/&gt;\n&lt;param name=\"min_particles\" value=\"500\"/&gt;\n&lt;param name=\"max_particles\" value=\"2000\"/&gt;\n&lt;param name=\"kld_err\" value=\"0.05\"/&gt;\n&lt;param name=\"kld_z\" value=\"0.99\"/&gt;\n&lt;param name=\"odom_alpha1\" value=\"0.2\"/&gt;\n&lt;param name=\"odom_alpha2\" value=\"0.2\"/&gt;\n&lt;!-- translation std dev, m --&gt;\n&lt;param name=\"odom_alpha3\" value=\"0.2\"/&gt;\n&lt;param name=\"odom_alpha4\" value=\"0.2\"/&gt;\n&lt;param name=\"laser_z_hit\" value=\"0.5\"/&gt;\n&lt;param name=\"laser_z_short\" value=\"0.05\"/&gt;\n&lt;param name=\"laser_z_max\" value=\"0.05\"/&gt;\n&lt;param name=\"laser_z_rand\" value=\"0.5\"/&gt;\n&lt;param name=\"laser_sigma_hit\" value=\"0.2\"/&gt;\n&lt;param name=\"laser_lambda_short\" value=\"0.1\"/&gt;\n&lt;param name=\"laser_model_type\" value=\"likelihood_field\"/&gt;\n&lt;param name=\"laser_likelihood_max_dist\" value=\"2.0\"/&gt;\n&lt;param name=\"update_min_d\" value=\"0.25\"/&gt;\n&lt;param name=\"update_min_a\" value=\"0.2\"/&gt;\n&lt;param name=\"resample_interval\" value=\"1\"/&gt;\n&lt;param name=\"transform_tolerance\" value=\"1.0\"/&gt;\n&lt;param name=\"recovery_alpha_slow\" value=\"0.0\"/&gt;\n&lt;param name=\"recovery_alpha_fast\" value=\"0.0\"/&gt;\n&lt;/node&gt;\n&lt;/launch&gt;\n</code></pre> <p>amcl\u8282\u70b9\u4e0d\u80fd\u72ec\u7acb\u8fd0\u884c\uff0c\u9700\u5148\u52a0\u8f7d\u5168\u5c40\u5730\u56fe\uff0c\u518d\u542f\u52a8rviz\u663e\u793a\u5b9a\u4f4d\u7ed3\u679c\uff0c\u4ee5\u4e0a\u6b65\u9aa4\u53ef\u96c6\u6210\u5230launch\u6587\u4ef6\u4e2d</p> <p><code>start_amcl.launch</code></p> <pre><code>&lt;launch&gt;\n&lt;!-- \u8bbe\u7f6e\u5730\u56fe\u7684\u914d\u7f6e\u6587\u4ef6 --&gt;\n&lt;arg name=\"map\" default=\"my_map.yaml\" /&gt;\n&lt;!-- \u8fd0\u884c\u5730\u56fe\u670d\u52a1\u5668\uff0c\u5e76\u4e14\u52a0\u8f7d\u8bbe\u7f6e\u7684\u5730\u56fe--&gt;\n&lt;node name=\"map_server\" pkg=\"map_server\" type=\"map_server\" args=\"$(find \u529f\u80fd\u5305\u540d)/\u4fdd\u5b58\u8def\u5f84/$(arg map)\"/&gt;\n&lt;!-- \u542f\u52a8AMCL\u8282\u70b9 --&gt;\n&lt;include file=\"$(find \u529f\u80fd\u5305\u540d)/\u4fdd\u5b58\u8def\u5f84/amcl.launch\" /&gt;\n&lt;include file=\"$(find vkbot_bringup)/launch/minimal.launch\" /&gt;\n&lt;include file=\"$(find ydlidar)/launch/ydlidar1_up.launch\" /&gt;\n&lt;include file=\"$(find vkbot_navigation)/launch/velocity_smoother.launch.xml\" /&gt;\n&lt;include file=\"$(find vkbot_navigation)/launch/safety_controller.launch.xml\" /&gt;\n&lt;include file=\"$(find vkbot_teleop)/launch/key_board_teleop.launch\" /&gt;\n&lt;node pkg=\"joint_state_publisher\" name=\"joint_state_publisher\" type=\"joint_state_publisher\" /&gt;\n&lt;node pkg=\"robot_state_publisher\" name=\"robot_state_publisher\" type=\"robot_state_publisher\" /&gt;\n&lt;!-- \u53ef\u4ee5\u4fdd\u5b58 rviz \u914d\u7f6e\u5e76\u540e\u671f\u76f4\u63a5\u4f7f\u7528--&gt;\n&lt;node pkg=\"rviz\" type=\"rviz\" name=\"rviz\" args=\"-d $(find \u529f\u80fd\u5305)/config/amcl.rviz\"/&gt;\n&lt;/launch&gt;\n</code></pre> <p>launch\u6587\u4ef6\u4e2d\u5730\u56fe\u670d\u52a1\u8282\u70b9\u548camcl\u8282\u70b9\u4e2d\u7684\u5305\u540d\u3001\u6587\u4ef6\u540d\u9700\u8981\u6839\u636e\u81ea\u5df1\u7684\u8bbe\u7f6e\u4fee\u6539</p> <p>\u5728\u542f\u52a8\u7684 rviz \u4e2d\uff0c\u6dfb\u52a0RobotModel\u3001Map\u63d2\u4ef6\uff0c\u5206\u522b\u663e\u793a\u673a\u5668\u4eba\u6a21\u578b\u4e0e\u5730\u56fe\uff0c\u6dfb\u52a0 PoseArray \u63d2\u4ef6\uff0c\u8bbe\u7f6e\u8bdd\u9898\u4e3a<code>particlecloud</code>\u6765\u663e\u793a amcl \u9884\u4f30\u7684\u5f53\u524d\u673a\u5668\u4eba\u4f4d\u59ff\uff0c\u7bad\u5934\u8d8a\u662f\u5bc6\u96c6\uff0c\u8bf4\u660e\u5f53\u524d\u673a\u5668\u4eba\u5904\u4e8e\u6b64\u4f4d\u7f6e\u7684\u6982\u7387\u8d8a\u9ad8\u3002\u901a\u8fc7\u952e\u76d8\u63a7\u5236\u673a\u5668\u4eba\u8fd0\u52a8\uff0c\u4f1a\u53d1\u73b0 PoseArray \u4e5f\u968f\u4e4b\u800c\u6539\u53d8</p>"},{"location":"%E5%BB%BA%E5%9B%BE%E4%B8%8E%E5%AF%BC%E8%88%AA/#622","title":"6.2.2 \u8def\u5f84\u89c4\u5212","text":"<p>\u8def\u5f84\u89c4\u5212\u662f\u5bfc\u822a\u4e2d\u7684\u6838\u5fc3\u529f\u80fd\u4e4b\u4e00\uff0c\u5728ROS\u7684\u5bfc\u822a\u529f\u80fd\u5305\u96c6navigation\u4e2d\u63d0\u4f9b\u4e86move_base\u529f\u80fd\u5305\uff0c\u7528\u4e8e\u5b9e\u73b0\u8def\u5f84\u89c4\u5212\u529f\u80fd\u3002</p>"},{"location":"%E5%BB%BA%E5%9B%BE%E4%B8%8E%E5%AF%BC%E8%88%AA/#6221-move_base","title":"6.2.2.1 move_base\u529f\u80fd\u5305","text":"<p>move_base\u529f\u80fd\u5305\u7684\u6838\u5fc3\u8282\u70b9\u662f\uff1a<code>move_base</code>\u3002\u4e3a\u4e86\u65b9\u4fbf\u8c03\u7528\uff0c\u9700\u8981\u5148\u4e86\u89e3\u8be5\u8282\u70b9\u7684\u76f8\u5173\u5185\u5bb9\u3002</p> <p></p> <p>\u52a8\u4f5c\uff08Action\uff09\u8ba2\u9605\u7684\u8bdd\u9898</p> <ul> <li>move_base/goal(move_base_msgs/MoveBaseActionGoal)\uff1amove_base\u8fd0\u52a8\u89c4\u5212\u76ee\u6807</li> <li>move_base/cancel(actionlib_msgs/GoalID)\uff1a\u53d6\u6d88\u76ee\u6807</li> </ul> <p>\u52a8\u4f5c\uff08Action\uff09\u53d1\u5e03\u7684\u8bdd\u9898</p> <ul> <li>move_base/feedback(move_base_msgs/MoveBaseActionFeedback)\uff1a\u8fde\u7eed\u53cd\u9988\u4fe1\u606f\uff0c\u5305\u542b\u673a\u5668\u4eba\u7684\u57fa\u5750\u6807\u7cfb\u5728\u5f53\u524d\u4e16\u754c\u5750\u6807\u7cfb\u4e2d\u7684\u4f4d\u7f6e</li> <li>move_base/status(actionlib_msgs/GoalStatusArray)\uff1a\u63d0\u4f9b\u6709\u5173\u53d1\u9001\u5230move_base\u7684\u76ee\u6807\u72b6\u6001\u4fe1\u606f</li> <li>move_base/result(move_base_msgs/MoveBaseActionResult)\uff1amove_base\u64cd\u4f5c\u7684\u7ed3\u679c\u4e3a\u7a7a</li> </ul> <p>\u8ba2\u9605\u7684\u8bdd\u9898</p> <ul> <li>move_base_simple/goal(geometry_msgs/PoseStamped)\uff1a\u8fd0\u52a8\u89c4\u5212\u76ee\u6807\uff08\u65e0\u8fde\u7eed\u53cd\u9988\uff09</li> </ul> <p>\u53d1\u5e03\u7684\u8bdd\u9898</p> <ul> <li>cmd_vel(geometry_msgs/Twist)\uff1a\u8f93\u51fa\u5230\u673a\u5668\u4eba\u5e95\u76d8\u7684\u8fd0\u52a8\u63a7\u5236\u6d88\u606f</li> </ul> <p>\u670d\u52a1</p> <ul> <li>~make_plan(nav_msgs/GetPlan)\uff1a\u8bf7\u6c42\u8be5\u670d\u52a1\uff0c\u53ef\u4ee5\u83b7\u53d6\u5230\u7ed9\u5b9a\u76ee\u6807\u7684\u89c4\u5212\u8def\u5f84\uff0c\u4f46\u662f\u4e0d\u6267\u884c\u8be5\u8def\u5f84\u89c4\u5212</li> <li>~clear_unknown_space(std_srvs/Empty)\uff1a\u6e05\u9664\u673a\u5668\u4eba\u5468\u56f4\u7684\u672a\u77e5\u7a7a\u95f4</li> <li>~clear_costmaps(std_srvs/Empty)\uff1a\u6e05\u9664\u4ee3\u4ef7\u5730\u56fe\u4e2d\u7684\u969c\u788d\u7269\uff0c\u53ef\u80fd\u4f1a\u5bfc\u81f4\u673a\u5668\u4eba\u4e0e\u969c\u788d\u7269\u53d1\u751f\u78b0\u649e\uff0c\u614e\u7528</li> </ul> <p>\u53c2\u6570</p> <p>\uff1a\u8bf7\u53c2\u8003move_base - ROS Wiki</p>"},{"location":"%E5%BB%BA%E5%9B%BE%E4%B8%8E%E5%AF%BC%E8%88%AA/#6222","title":"6.2.2.2 \u4ee3\u4ef7\u5730\u56fe","text":"<p>\u6982\u5ff5</p> <p>\u673a\u5668\u4eba\u5bfc\u822a\u662f\u4f9d\u8d56\u4e8e\u5730\u56fe\u7684\uff0c\u5730\u56fe\u5728SLAM\u65f6\u5df2\u7ecf\u4ecb\u7ecd\uff0c\u4f46SLAM\u6240\u6784\u5efa\u7684\u5730\u56fe\u5728\u5bfc\u822a\u4e2d\u662f\u4e0d\u80fd\u76f4\u63a5\u4f7f\u7528\u7684\uff0c\u56e0\u4e3a\uff1a</p> <ul> <li>SLAM\u6784\u5efa\u7684\u5730\u56fe\u662f\u9759\u6001\u7684\uff0c\u5728\u5bfc\u822a\u8fc7\u7a0b\u4e2d\u969c\u788d\u7269\u4fe1\u606f\u662f\u53ef\u53d8\u7684\uff0c\u56e0\u6b64\u5bfc\u822a\u8fc7\u7a0b\u4e2d\u9700\u8981\u5b9e\u65f6\u83b7\u53d6\u969c\u788d\u7269\u4fe1\u606f</li> <li>\u5728\u9760\u8fd1\u969c\u788d\u7269\u8fb9\u7f18\u65f6\uff0c\u867d\u7136\u6b64\u65f6\u8fd8\u672a\u53d1\u751f\u78b0\u649e\uff0c\u4f46\u662f\u7531\u4e8e\u673a\u5668\u4eba\u672c\u4f53\u5b58\u5728\u60ef\u6027\u6216\u5f62\u4f53\u4e0d\u89c4\u5219\u7684\u60c5\u51b5\uff0c\u8f6c\u5f2f\u65f6\u8fd8\u662f\u6709\u53ef\u80fd\u4e0e\u969c\u788d\u7269\u4ea7\u751f\u78b0\u649e\u7684\uff0c\u5b89\u5168\u8d77\u89c1\u6700\u597d\u5728\u969c\u788d\u7269\u7684\u8fb9\u7f18\u8bbe\u7f6e\u81a8\u80c0\u533a\u57df\uff0c\u5c3d\u53ef\u80fd\u907f\u514d\u673a\u5668\u4eba\u8fdb\u5165\u6b64\u533a\u57df</li> </ul> <p>\u56e0\u6b64\uff0c\u5bfc\u822a\u65f6\u9700\u8981\u5728\u9759\u6001\u5730\u56fe\u7684\u57fa\u7840\u4e0a\u589e\u52a0\u8f85\u52a9\u4fe1\u606f\uff1a\u5b9e\u65f6\u66f4\u65b0\u969c\u788d\u7269\u4fe1\u606f\u3001\u57fa\u4e8e\u9759\u6001\u5730\u56fe\u8bbe\u7f6e\u81a8\u80c0\u533a\uff0c\u4e09\u8005\u5171\u540c\u6784\u6210\u4e86\u4ee3\u4ef7\u5730\u56fe</p> <p>\u4ee3\u4ef7\u5730\u56fe\u7ec4\u6210</p> <p>\u4ee3\u4ef7\u5730\u56fe\u5206\u4e3a\uff1aglobal_costmap\uff08\u5168\u5c40\u4ee3\u4ef7\u5730\u56fe\uff09\u548clocal_costmap\uff08\u672c\u5730\u4ee3\u4ef7\u5730\u56fe\uff09\uff0c\u524d\u8005\u7528\u4e8e\u5168\u5c40\u8def\u5f84\u89c4\u5212\uff0c\u540e\u8005\u7528\u4e8e\u672c\u5730\u8def\u5f84\u89c4\u5212\uff08\u52a8\u6001\u907f\u969c\uff09\u3002\u4e00\u5f20\u4ee3\u4ef7\u5730\u56fe\u5305\u542b\u4ee5\u4e0b\u5c42\u7ea7\uff1a</p> <ul> <li>Static Map Layer\uff1a\u9759\u6001\u5730\u56fe\u5c42\uff0c\u7531SLAM\u6784\u5efa\u7684\u9759\u6001\u5730\u56fe</li> <li>Obstacle Map Layer\uff1a\u969c\u788d\u7269\u5c42\uff0c\u7531\u4f20\u611f\u5668\u52a8\u6001\u611f\u77e5\u7684\u969c\u788d\u7269\u4fe1\u606f</li> <li>Inflation Layer\uff1a\u81a8\u80c0\u5c42\uff0c\u5728\u4ee5\u4e0a\u4e24\u5c42\u5730\u56fe\u4e0a\u8fdb\u884c\u81a8\u80c0\uff0c\u4ee5\u907f\u514d\u673a\u5668\u4eba\u4e0e\u969c\u788d\u7269\u78b0\u649e</li> <li>Other Layers\uff1a\u5176\u4f59\u81ea\u5b9a\u4e49\u7684costmap</li> </ul> <p>\u591a\u4e2a\u5c42\u53ef\u4ee5\u6309\u9700\u81ea\u7531\u642d\u914d</p> <p>\u78b0\u649e\u7b97\u6cd5</p> <p>\u5728ROS\u4e2d\u662f\u5982\u4f55\u8ba1\u7b97\u4ee3\u4ef7\u503c\u7684\u5462\uff0c\u5b98\u65b9\u7ed9\u51fa\u4e86\u4e0b\u56fe\u8f85\u52a9\u7406\u89e3\uff1a</p> <p></p> <p>\u6a2a\u8f74\u8868\u793a\u8ddd\u79bb\u673a\u5668\u4eba\u4e2d\u5fc3\u7684\u8ddd\u79bb\uff0c\u7eb5\u8f74\u8868\u793a\u4ee3\u4ef7\u5730\u56fe\u4e2d\u6805\u683c\u7684\u7070\u5ea6\u503c</p> <ul> <li>\u81f4\u547d\u969c\u788d\uff1a\u6805\u683c\u503c\u4e3a254\uff0c\u6b64\u65f6\u969c\u788d\u7269\u4e0e\u673a\u5668\u4eba\u4e2d\u5fc3\u91cd\u53e0\uff0c\u5fc5\u7136\u4ea7\u751f\u78b0\u649e</li> <li>\u5185\u5207\u969c\u788d\uff1a\u6805\u683c\u503c\u4e3a253\uff0c\u6b64\u65f6\u969c\u788d\u7269\u5904\u4e8e\u673a\u5668\u4eba\u7684\u5185\u5207\u5706\u4e2d\uff0c\u5fc5\u7136\u4ea7\u751f\u78b0\u649e</li> <li>\u5916\u5207\u969c\u788d\uff1a\u6805\u683c\u503c\u4e3a[128, 252]\uff0c\u6b64\u65f6\u969c\u788d\u7269\u5904\u4e8e\u673a\u5668\u4eba\u7684\u5916\u5207\u5706\u4e0e\u5185\u5207\u5706\u4e4b\u95f4\uff0c\u5904\u4e8e\u78b0\u649e\u4e34\u754c\u72b6\u6001\uff0c\u53ef\u80fd\u4ea7\u751f\u78b0\u649e</li> <li>\u975e\u81ea\u7531\u7a7a\u95f4\uff1a\u6805\u683c\u503c\u4e3a(0, 127]\uff0c\u6b64\u65f6\u673a\u5668\u4eba\u5904\u4e8e\u969c\u788d\u7269\u9644\u8fd1\uff0c\u5c5e\u4e8e\u5371\u9669\u8b66\u6212\u533a\u57df\uff0c\u673a\u5668\u4eba\u8fdb\u5165\u6b64\u533a\u57df\uff0c\u5c06\u6765\u53ef\u80fd\u4f1a\u4ea7\u751f\u78b0\u649e</li> <li>\u81ea\u7531\u7a7a\u95f4\uff1a\u6805\u683c\u503c\u4e3a0\uff0c\u6b64\u5904\u673a\u5668\u4eba\u53ef\u81ea\u7531\u901a\u884c</li> <li>\u672a\u77e5\u533a\u57df\uff1a\u6805\u683c\u503c\u4e3a255\uff0c\u8868\u793a\u8fd8\u672a\u63a2\u660e\u662f\u5426\u6709\u969c\u788d\u7269\u7684\u533a\u57df</li> </ul> <p>\u8bbe\u7f6e\u81a8\u80c0\u5c42\u65f6\u53ef\u53c2\u8003\u975e\u81ea\u7531\u7a7a\u95f4</p> <p>\u5bfc\u822a\u53c2\u6570\u914d\u7f6e</p> <p>\u4f7f\u7528launch\u6587\u4ef6\u542f\u52a8move_base\u8282\u70b9\uff0c\u5e76\u52a0\u8f7d\u53c2\u6570\u914d\u7f6e\u6587\u4ef6</p> <p><code>move_base.launch</code></p> <pre><code>&lt;launch&gt;\n&lt;node pkg=\"move_base\" type=\"move_base\" name=\"move_base\" respawn=\"true\" output=\"screen\" clear_params=\"true\"&gt;\n&lt;rosparam file=\"$(find \u529f\u80fd\u5305\u540d)/param/move_base_params.yaml\" command=\"load\" /&gt;\n&lt;rosparam file=\"$(find \u529f\u80fd\u5305\u540d)/param/costmap_common_params.yaml\" command=\"load\" ns=\"global_costmap\" /&gt;\n&lt;rosparam file=\"$(find \u529f\u80fd\u5305\u540d)/param/costmap_common_params.yaml\" command=\"load\" ns=\"local_costmap\" /&gt;\n&lt;rosparam file=\"$(find \u529f\u80fd\u5305\u540d)/param/global_costmap_params.yaml\" command=\"load\" /&gt;\n&lt;rosparam file=\"$(find \u529f\u80fd\u5305\u540d)/param/local_costmap_params.yaml\" command=\"load\" /&gt;\n&lt;rosparam file=\"$(find \u529f\u80fd\u5305\u540d)/param/base_global_planner_params.yaml\" command=\"load\" /&gt;\n&lt;rosparam file=\"$(find \u529f\u80fd\u5305\u540d)/param/teb_local_planner_params.yaml\" command=\"load\" /&gt;\n&lt;remap from=\"cmd_vel\" to=\"/cmd_vel_mux/input/navi\" /&gt;\n&lt;/node&gt;\n&lt;/launch&gt;\n</code></pre> <p>\u8fd9\u4e2alaunch\u6587\u4ef6\u542f\u52a8\u4e86move_base\u8282\u70b9\uff0c\"respawn\"\u8bbe\u7f6e\u4e3atrue\u8868\u793a\u6b64\u8282\u70b9\u5173\u95ed\u540e\u4f1a\u88ab\u91cd\u542f\uff0c\"clear_params\"\u8bbe\u7f6e\u4e3atrue\u8868\u793a\u6bcf\u6b21\u542f\u52a8\u6b64\u8282\u70b9\u90fd\u9700\u8981\u6e05\u7a7a\u79c1\u6709\u53c2\u6570\u5e76\u91cd\u65b0\u8f7d\u5165</p> <p>\u914d\u7f6e\u6587\u4ef6</p> <ol> <li><code>move_base_params.yaml</code>\uff1amove_base\u8282\u70b9\u914d\u7f6e\u53c2\u6570</li> </ol> <pre><code>shutdown_costmaps: false\ncontroller_frequency: 4.0\ncontroller_patience: 3.0 # 3.0\nplanner_frequency: 1.0\nplanner_patience: 3.0\noscillation_timeout: 5.0\noscillation_distance: 0.2\n# Planner selection\nbase_global_planner: \"global_planner/GlobalPlanner\"  base_local_planner: \"teb_local_planner/TebLocalPlannerROS\"\nmax_planning_retries: 1\nrecovery_behavior_enabled: true\nclearing_rotation_allowed: true\nuseMagnetometer: False\nauto_update_: False\nparticle_range: 1.0\nangle_tolerance: 0.05\nrecovery_behaviors:\n#- name: 'conservative_reset'\n#  type: 'clear_costmap_recovery/ClearCostmapRecovery'\n- name: 'aggressive_reset'\ntype: 'clear_costmap_recovery/ClearCostmapRecovery'\n#- name: 'super_reset'\n# type: 'clear_costmap_recovery/ClearCostmapRecovery'\n- name: 'clearing_rotation'\ntype: 'rotate_recovery/RotateRecovery'\n#- name: 'move_slow_and_clear'\n#type: 'move_slow_and_clear/MoveSlowAndClear'\nconservative_reset:\nreset_distance: 3.0\n#layer_names: [static_layer, obstacle_layer, inflation_layer]\nlayer_names: [obstacle_layer]\naggressive_reset:\nreset_distance: 0.3\n#layer_names: [static_layer, obstacle_layer, inflation_layer]\nlayer_names: [obstacle_layer]\nsuper_reset:\nreset_distance: 5.0\n#layer_names: [static_layer, obstacle_layer, inflation_layer]\nlayer_names: [obstacle_layer]\nmove_slow_and_clear:\nclearing_distance: 0.5\nlimited_trans_speed: 0.1\nlimited_rot_speed: 0.4\nlimited_distance: 0.3\n</code></pre> <ol> <li><code>costmap_common_params.yaml</code>\uff1a\u5168\u5c40\u4ee3\u4ef7\u5730\u56fe\u4e0e\u672c\u5730\u4ee3\u4ef7\u5730\u56fe\u7684\u901a\u7528\u53c2\u6570</li> </ol> <pre><code>robot_radius: 0.23\nobstacle_layer:\nenabled: true\nmax_obstacle_height: 0.6\nmin_obstacle_height: 0.0\nobstacle_range: 2.0\nraytrace_range: 5.0\ninflation_radius: 0.25\ncombination_method: 1\nobservation_sources: laser_scan_sensor\ntrack_unknown_space: true\nlaser_scan_sensor: {data_type: LaserScan, topic: /scan, marking: true, clearing: true, expected_update_rate: 0}\ntrack_unknown_space: true\ninflation_layer:\nenabled:              true\ncost_scaling_factor:  10.0  # exponential rate at which the obstacle cost drops off (default: 10)\n# inflation_radius:     0.25 # max. distance from an obstacle at which costs are incurred for planning paths.\nstatic_layer:\nenabled:              true\nmap_topic:            \"/map\"\n</code></pre> <ol> <li><code>global_costmap_params.yaml</code>\uff1a\u5168\u5c40\u4ee3\u4ef7\u5730\u56fe\u53c2\u6570</li> </ol> <pre><code>global_costmap:\nglobal_frame: /map\nrobot_base_frame: /base_footprint\nupdate_frequency: 1.0\npublish_frequency: 0\nstatic_map: true\nrolling_window: false\nresolution: 0.05\ntransform_tolerance: 1.0\nmap_type: costmap\ninflation_radius:     0.3\nGlobalPlanner:        allow_unknown: true </code></pre> <ol> <li><code>local_costmap_params.yaml</code>\uff1a\u672c\u5730\u4ee3\u4ef7\u5730\u56fe\u53c2\u6570</li> </ol> <pre><code>local_costmap:\nglobal_frame: /odom_combined\nrobot_base_frame: /base_footprint\nupdate_frequency: 5.0   #3.0\npublish_frequency: 2.0  #1.0\nstatic_map: false\nrolling_window: true\nwidth: 3.0\nheight: 3.0\nresolution: 0.05\ntransform_tolerance: 1.0\nmap_type: costmap\ninflation_radius:     0.25\nplugins:\n- {name: static_layer,        type: \"costmap_2d::StaticLayer\"}\n- {name: obstacle_layer,      type: \"costmap_2d::ObstacleLayer\"}\n- {name: inflation_layer, type: 'costmap_2d::InflationLayer'}\n</code></pre> <ol> <li><code>base_global_planner_params</code>\uff1a\u5168\u5c40\u8def\u5f84\u89c4\u5212\u5668\u53c2\u6570\u914d\u7f6e</li> </ol> <pre><code>GlobalPlanner:\nold_navfn_behavior: false\nuse_quadratic: true\nuse_dijkstra: true\nuse_grid_path: false\nallow_unknown: true\nplanner_window_x: 0.0\nplanner_window_y: 0.0\ndefault_tolerance: 0.0  </code></pre> <ol> <li><code>teb_local_planner_params.yaml</code>\uff1a\u5c40\u90e8\u8def\u5f84\u89c4\u5212\u5668\u53c2\u6570\u914d\u7f6e</li> </ol> <pre><code>TebLocalPlannerROS:\nodom_topic: odom\nmap_frame: /odom\n# Trajectory\nteb_autosize: True\ndt_ref: 0.45\ndt_hysteresis: 0.1\nglobal_plan_overwrite_orientation: True\nmax_global_plan_lookahead_dist: 3.0\nfeasibility_check_no_poses: 5\n# Robot\nmax_vel_x: 0.4\nmax_vel_x_backwards: 0.15\nmax_vel_theta: 1.0\nacc_lim_x: 0.3\nacc_lim_theta: 0.3\nmin_turning_radius: 0\nfootprint_model: # types: \"point\", \"circular\", \"two_circles\", \"line\", \"polygon\"\nradius: 0.23 # for type \"circular\"\n# GoalTolerance\nxy_goal_tolerance: 0.10\nyaw_goal_tolerance: 0.2\nfree_goal_vel: False\n# Obstacles\nmin_obstacle_dist: 0.3\ninclude_costmap_obstacles: True\ncostmap_obstacles_behind_robot_dist: 1.0\nobstacle_poses_affected: 7\ncostmap_converter_plugin: \"\"\ncostmap_converter_spin_thread: True\ncostmap_converter_rate: 5\n# Optimization\nno_inner_iterations: 5\nno_outer_iterations: 4\noptimization_activate: True\noptimization_verbose: False\npenalty_epsilon: 0.1\nweight_max_vel_x: 2\nweight_max_vel_theta: 1\nweight_acc_lim_x: 1\nweight_acc_lim_theta: 1\nweight_kinematics_nh: 1000\nweight_kinematics_forward_drive: 70\nweight_kinematics_turning_radius: 1\nweight_optimaltime: 1\nweight_obstacle: 50\nweight_dynamic_obstacle: 10 # not in use yet\nselection_alternative_time_cost: False # not in use yet\n# Homotopy Class Planner\nenable_homotopy_class_planning: False\nenable_multithreading: True\nsimple_exploration: False\nmax_number_classes: 4\nroadmap_graph_no_samples: 15\nroadmap_graph_area_width: 5\nh_signature_prescaler: 0.5\nh_signature_threshold: 0.1\nobstacle_keypoint_offset: 0.1\nobstacle_heading_threshold: 0.45\nvisualize_hc_graph: False\n</code></pre>"},{"location":"%E5%BB%BA%E5%9B%BE%E4%B8%8E%E5%AF%BC%E8%88%AA/#623","title":"6.2.3 \u5b9e\u6218\uff1a\u771f\u5b9e\u673a\u5668\u4eba\u5bfc\u822a\u914d\u7f6e\u4e0e\u8c03\u8bd5","text":"<p>\u8981\u5b9e\u73b0\u5bfc\u822a\uff0c\u9700\u8981\u96c6\u6210\u5730\u56fe\u670d\u52a1\u3001amcl\u3001move_base\u4e0erviz\u7b49\u8282\u70b9\uff1a</p> <p><code>navigation.launch</code></p> <pre><code>&lt;launch&gt;\n&lt;!-- \u8bbe\u7f6e\u5730\u56fe\u7684\u914d\u7f6e\u6587\u4ef6 --&gt;\n&lt;arg name=\"map\" default=\"my_map.yaml\" /&gt;\n&lt;!-- \u8fd0\u884c\u5730\u56fe\u670d\u52a1\u5668\uff0c\u5e76\u4e14\u52a0\u8f7d\u8bbe\u7f6e\u7684\u5730\u56fe--&gt;\n&lt;node name=\"map_server\" pkg=\"map_server\" type=\"map_server\" args=\"$(find \u529f\u80fd\u5305)/map/$(arg map)\"/&gt;\n&lt;!-- \u542f\u52a8AMCL\u8282\u70b9 --&gt;\n&lt;include file=\"$(find \u529f\u80fd\u5305)/launch/amcl.launch\" /&gt;\n&lt;!-- \u8fd0\u884cmove_base\u8282\u70b9 --&gt;\n&lt;include file=\"$(find \u529f\u80fd\u5305)/launch/move_base.launch\" /&gt;\n&lt;!-- \u8fd0\u884crviz --&gt;\n&lt;node pkg=\"rviz\" type=\"rviz\" name=\"rviz\" args=\"-d $(find \u529f\u80fd\u5305)/rviz/nav.rviz\" /&gt;\n&lt;include file=\"$(find vkbot_bringup)/launch/minimal.launch\" /&gt;\n&lt;include file=\"$(find ydlidar)/launch/ydlidar1_up.launch\" /&gt;\n&lt;include file=\"$(find vkbot_navigation)/launch/velocity_smoother.launch.xml\" /&gt;\n&lt;include file=\"$(find vkbot_navigation)/launch/safety_controller.launch.xml\" /&gt;\n&lt;node pkg=\"joint_state_publisher\" name=\"joint_state_publisher\" type=\"joint_state_publisher\" /&gt;\n&lt;node pkg=\"robot_state_publisher\" name=\"robot_state_publisher\" type=\"robot_state_publisher\" /&gt;\n&lt;/launch&gt;\n</code></pre> <p>\u8fd0\u884c</p> <ol> <li> <p>\u6dfb\u52a0RVIZ\u63d2\u4ef6\uff08\u53ef\u4fdd\u5b58\u914d\u7f6e\uff0c\u540e\u671f\u76f4\u63a5\u590d\u7528\uff09</p> </li> <li> <p>RobotModel\uff1a\u7528\u4e8e\u663e\u793a\u673a\u5668\u4eba\u6a21\u578b</p> </li> <li> <p>Map\uff1a\u7528\u4e8e\u663e\u793a\u5730\u56fe\u3001\u5168\u5c40\u4ee3\u4ef7\u5730\u56fe\u4ee5\u53ca\u672c\u5730\u4ee3\u4ef7\u5730\u56fe\uff0c\u4ee3\u4ef7\u5730\u56fe\u7684\u914d\u7f6e\u5982\u4e0b\u56fe\uff1a</p> </li> </ol> <p></p> <ul> <li>PoseArray\uff1a\u7528\u4e8e\u663e\u793aAMCL\u4f4d\u59ff\u4f30\u8ba1\u96c6\u5408</li> <li>Path\uff1a\u7528\u4e8e\u663e\u793a\u5168\u5c40\u89c4\u5212\u8def\u5f84\u4e0e\u672c\u5730\u89c4\u5212\u8def\u5f84\uff0c\u914d\u7f6e\u5982\u4e0b\u56fe\uff1a</li> </ul> <p></p> <ol> <li>\u901a\u8fc7RVIZ\u5de5\u5177\u680f\u76842D Nav Goal\u8bbe\u7f6e\u5bfc\u822a\u76ee\u6807</li> </ol>"},{"location":"%E5%BB%BA%E5%9B%BE%E4%B8%8E%E5%AF%BC%E8%88%AA/#_2","title":"\u52a8\u6001\u8c03\u53c2","text":"<p>\u53c2\u6570\u670d\u52a1\u5668\u7684\u6570\u636e\u88ab\u4fee\u6539\u65f6\uff0c\u5982\u679c\u8282\u70b9\u4e0d\u91cd\u65b0\u8bbf\u95ee\uff0c\u90a3\u4e48\u5c31\u4e0d\u80fd\u83b7\u53d6\u4fee\u6539\u540e\u7684\u6570\u636e\uff0c\u4f8b\u5982\u5728\u4fee\u6539\u5c0f\u6d77\u9f9f\u4eff\u771f\u5668\u80cc\u666f\u989c\u8272\u7684\u6848\u4f8b\u4e2d\uff0c\u9700\u8981\u8c03\u7528<code>/clear</code>\u670d\u52a1\u624d\u80fd\u5237\u65b0\u80cc\u666f\u989c\u8272\u3002\u800c\u5728\u4e00\u4e9b\u7279\u6b8a\u573a\u666f\u4e0b\uff0c\u8981\u6c42\u80fd\u505a\u5230\u52a8\u6001\u83b7\u53d6\u53c2\u6570\uff0c\u5982\u5bfc\u822a\u53c2\u6570\u7684\u52a8\u6001\u8c03\u8bd5\u3002</p> <p>\u5728ROS\u4e2d\u9488\u5bf9\u8fd9\u79cd\u573a\u666f\u5df2\u7ecf\u7ed9\u51fa\u4e86\u89e3\u51b3\u65b9\u6848\uff1a<code>dynamic_reconfigure</code>\u52a8\u6001\u53c2\u6570\u914d\u7f6e\u3002\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u5373\u53ef\u542f\u52a8\uff1a</p> <p><code>rosrun rqt_reconfigure rqt_reconfigure</code></p>"},{"location":"%E5%BB%BA%E5%9B%BE%E4%B8%8E%E5%AF%BC%E8%88%AA/#slam","title":"\u7ec3\u4e60\u2014\u2014\u5bfc\u822a\u4e0eSLAM\u5efa\u56fe","text":"<p>\u5728\u4ecb\u7ecdSLAM\u5efa\u56fe\u65f6\uff0c\u6211\u4eec\u662f\u901a\u8fc7\u952e\u76d8\u63a7\u5236\u673a\u5668\u4eba\u79fb\u52a8\u5b9e\u73b0\u5efa\u56fe\u7684\uff0c\u800c\u540e\u7eed\u53c8\u4ecb\u7ecd\u4e86\u673a\u5668\u4eba\u7684\u81ea\u4e3b\u5bfc\u822a\uff0c\u90a3\u4e48\u80fd\u4e0d\u80fd\u5c06\u4e24\u8005\u7ed3\u5408\uff0c\u5b9e\u73b0\u673a\u5668\u4eba\u7684\u81ea\u4e3b\u79fb\u52a8\u5e76\u6784\u5efa\u5730\u56fe\u5462\uff1f</p> <p>\u7b54\u6848\u662f\u53ef\u4ee5\u7684\u3002\u5e76\u4e14\u5b9e\u73b0\u8fc7\u7a0b\u8f83\u4e3a\u7b80\u5355\uff0c\u53ea\u9700\u8981\u901a\u8fc7launch\u6587\u4ef6\u96c6\u6210SLAM\u4e0emove_base\u8282\u70b9\uff0c\u5373\u53ef\u5b9e\u73b0\u4e0a\u8ff0\u529f\u80fd\u3002</p>"}]}