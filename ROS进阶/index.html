
<!doctype html>
<html lang="zh" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../ROS%E5%9F%BA%E7%A1%80/">
      
      
        <link rel="next" href="../%E5%BB%BA%E5%9B%BE%E4%B8%8E%E5%AF%BC%E8%88%AA/">
      
      <link rel="icon" href="../assets/logo.png">
      <meta name="generator" content="mkdocs-1.5.2, mkdocs-material-9.1.21">
    
    
      
        <title>ROS进阶 - VK-Robot-Learning-ROS</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.eebd395e.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.ecc896b0.min.css">
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="light-blue">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#3-ros" class="md-skip">
          跳转至
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="页眉">
    <a href=".." title="VK-Robot-Learning-ROS" class="md-header__button md-logo" aria-label="VK-Robot-Learning-ROS" data-md-component="logo">
      
  <img src="../assets/logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            VK-Robot-Learning-ROS
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              ROS进阶
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
          
            
            
            
            <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="light-blue"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
            
              <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"/></svg>
              </label>
            
          
            
            
            
            <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="blue" data-md-color-accent="light-blue"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
            
              <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>
              </label>
            
          
        </form>
      
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="搜索" placeholder="搜索" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="查找">
        
        <button type="reset" class="md-search__icon md-icon" title="清空当前内容" aria-label="清空当前内容" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            正在初始化搜索引擎
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
                
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="导航栏" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="VK-Robot-Learning-ROS" class="md-nav__button md-logo" aria-label="VK-Robot-Learning-ROS" data-md-component="logo">
      
  <img src="../assets/logo.png" alt="logo">

    </a>
    VK-Robot-Learning-ROS
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
    
  
  
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1" checked>
      
      
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_1" id="__nav_1_label" tabindex="0">
          智能机器人技术应用
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="true">
        <label class="md-nav__title" for="__nav_1">
          <span class="md-nav__icon md-icon"></span>
          智能机器人技术应用
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ROS%E5%9F%BA%E7%A1%80/" class="md-nav__link">
        ROS基础
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          ROS进阶
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        ROS进阶
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#31-launch" class="md-nav__link">
    3.1 launch
  </a>
  
    <nav class="md-nav" aria-label="3.1 launch">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#311-roslaunch" class="md-nav__link">
    3.1.1 roslaunch定义
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#312" class="md-nav__link">
    3.1.2 标签
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    练习
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#32-tf" class="md-nav__link">
    3.2 TF坐标变换
  </a>
  
    <nav class="md-nav" aria-label="3.2 TF坐标变换">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#321-tf" class="md-nav__link">
    3.2.1 TF工具
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#322" class="md-nav__link">
    3.2.2 广播器的编程实现
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#323" class="md-nav__link">
    3.2.3 监听器的编程实现
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#33-qt" class="md-nav__link">
    3.3 Qt工具箱
  </a>
  
    <nav class="md-nav" aria-label="3.3 Qt工具箱">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#331-rqt_console" class="md-nav__link">
    3.3.1 日志输出工具——rqt_console
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#332-rqt_graph" class="md-nav__link">
    3.3.2 计算图可视化工具——rqt_graph
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#333-rqt_plot" class="md-nav__link">
    3.3.3 数据绘图工具——rqt_plot
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#34-rviz" class="md-nav__link">
    3.4 RVIZ
  </a>
  
    <nav class="md-nav" aria-label="3.4 RVIZ">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#341-rviz" class="md-nav__link">
    3.4.1 RVIZ简介
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#342-rviz" class="md-nav__link">
    3.4.2 RVIZ数据可视化
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#35-gazebo" class="md-nav__link">
    3.5 Gazebo
  </a>
  
    <nav class="md-nav" aria-label="3.5 Gazebo">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#351-gazebo" class="md-nav__link">
    3.5.1 Gazebo简介
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#352" class="md-nav__link">
    3.5.2 构建仿真环境
  </a>
  
    <nav class="md-nav" aria-label="3.5.2 构建仿真环境">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    添加内置组件创建仿真环境
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    自定义仿真环境
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../%E5%BB%BA%E5%9B%BE%E4%B8%8E%E5%AF%BC%E8%88%AA/" class="md-nav__link">
        建图与导航
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
                
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" hidden>
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#31-launch" class="md-nav__link">
    3.1 launch
  </a>
  
    <nav class="md-nav" aria-label="3.1 launch">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#311-roslaunch" class="md-nav__link">
    3.1.1 roslaunch定义
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#312" class="md-nav__link">
    3.1.2 标签
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    练习
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#32-tf" class="md-nav__link">
    3.2 TF坐标变换
  </a>
  
    <nav class="md-nav" aria-label="3.2 TF坐标变换">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#321-tf" class="md-nav__link">
    3.2.1 TF工具
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#322" class="md-nav__link">
    3.2.2 广播器的编程实现
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#323" class="md-nav__link">
    3.2.3 监听器的编程实现
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#33-qt" class="md-nav__link">
    3.3 Qt工具箱
  </a>
  
    <nav class="md-nav" aria-label="3.3 Qt工具箱">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#331-rqt_console" class="md-nav__link">
    3.3.1 日志输出工具——rqt_console
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#332-rqt_graph" class="md-nav__link">
    3.3.2 计算图可视化工具——rqt_graph
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#333-rqt_plot" class="md-nav__link">
    3.3.3 数据绘图工具——rqt_plot
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#34-rviz" class="md-nav__link">
    3.4 RVIZ
  </a>
  
    <nav class="md-nav" aria-label="3.4 RVIZ">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#341-rviz" class="md-nav__link">
    3.4.1 RVIZ简介
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#342-rviz" class="md-nav__link">
    3.4.2 RVIZ数据可视化
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#35-gazebo" class="md-nav__link">
    3.5 Gazebo
  </a>
  
    <nav class="md-nav" aria-label="3.5 Gazebo">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#351-gazebo" class="md-nav__link">
    3.5.1 Gazebo简介
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#352" class="md-nav__link">
    3.5.2 构建仿真环境
  </a>
  
    <nav class="md-nav" aria-label="3.5.2 构建仿真环境">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    添加内置组件创建仿真环境
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    自定义仿真环境
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="3-ros">3 机器人操作系统ROS常用组件</h1>
<h2 id="31-launch">3.1 launch</h2>
<h3 id="311-roslaunch">3.1.1 roslaunch定义</h3>
<p><strong>roslaunch</strong>是一个工具，用于通过SSH在本地和远程轻松启动多个ROS节点和rosmaster，以及在参数服务器上设置参数。它包括自动重生已死亡进程的选项。roslaunch 接收一个或多个 XML 配置文件（扩展名为 .launch），这些文件指定要设置的参数和要启动的节点。</p>
<blockquote>
<p>.launch文件一般存放在功能包的launch目录中</p>
</blockquote>
<h3 id="312">3.1.2 标签</h3>
<ul>
<li><strong><code>&lt;launch&gt;</code>：</strong>与<code>&lt;/launch&gt;</code>一起组成launch文件的根标签，所有内容都应该包含在根标签内</li>
</ul>
<div class="language-xml highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="nt">&lt;launch&gt;</span>
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="w">    </span>......
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="nt">&lt;/launch&gt;</span>
</span></code></pre></div>
<ul>
<li><strong><code>&lt;node&gt;</code>：</strong>用于启动节点，包含以下参数</li>
<li>pkg：节点所在的功能包名称</li>
<li>type：节点的可执行文件名称（python文件需要包含.py后缀）</li>
<li>name：节点运行时的名称，可实现节点的重命名</li>
<li>可选参数：output（是否在终端输出日志信息，一般赋值“screen”）、respawn（节点关闭是否自动重启）、ns（为节点设置命名空间）、args（加载节点所需参数）</li>
</ul>
<div class="language-xml highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="nt">&lt;launch&gt;</span>
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="w">    </span><span class="nt">&lt;node</span><span class="w"> </span><span class="na">pkg=</span><span class="s">&quot;&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;&quot;</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="nt">&lt;/launch&gt;</span>
</span></code></pre></div>
<ul>
<li><strong><code>&lt;param&gt;</code>与<code>&lt;rosparam&gt;</code>：</strong></li>
<li><code>&lt;param&gt;</code>用于加载单个参数至参数服务器，包含2个参数：<ul>
<li>name：参数名</li>
<li>value：参数值</li>
</ul>
</li>
<li><code>&lt;rosparam&gt;</code>常用于直接从文件中加载多个参数至参数服务器，包含3个参数<ul>
<li>file：参数文件的路径（.yaml）</li>
<li>command：（load加载参数|dump保存参数|delete删除参数）默认为load</li>
<li>ns（可选）：设置命名空间</li>
</ul>
</li>
</ul>
<div class="language-xml highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="nt">&lt;launch&gt;</span>
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="w">    </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-2-3"><a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a><span class="w">    </span><span class="nt">&lt;rosparam</span><span class="w"> </span><span class="na">file=</span><span class="s">&quot;***.yaml&quot;</span><span class="w"> </span><span class="na">command=</span><span class="s">&quot;load&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-2-4"><a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a><span class="nt">&lt;/launch&gt;</span>
</span></code></pre></div>
<ul>
<li><strong><code>&lt;arg&gt;</code>：</strong>launch文件内部的使用的参数，可实现调用launch文件时动态设置参数，包含2个参数</li>
<li>name：参数名</li>
<li>value：参数值</li>
</ul>
<div class="language-xml highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="nt">&lt;launch&gt;</span>
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a><span class="w">    </span><span class="nt">&lt;arg</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;arg-name&quot;</span><span class="w"> </span><span class="na">default=</span><span class="s">&quot;arg-value&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-3-3"><a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a><span class="w">    </span><span class="cm">&lt;!-- 调用--&gt;</span>
</span><span id="__span-3-4"><a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a><span class="w">    </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;$(arg arg-name)&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-3-5"><a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a><span class="w">    </span><span class="nt">&lt;node</span><span class="w"> </span><span class="na">pkg=</span><span class="s">&quot;&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;&quot;</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;&quot;</span><span class="w"> </span><span class="na">args=</span><span class="s">&quot;$(arg arg-name)&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-3-6"><a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a><span class="nt">&lt;/launch&gt;</span>
</span></code></pre></div>
<ul>
<li><strong><code>&lt;remap&gt;</code>：</strong>重映射ROS计算图资源的命名，包含两个参数</li>
<li>from：原命名</li>
<li>to：映射之后的命名</li>
</ul>
<div class="language-xml highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="nt">&lt;launch&gt;</span>
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a><span class="w">    </span><span class="nt">&lt;remap</span><span class="w"> </span><span class="na">from=</span><span class="s">&quot;&quot;</span><span class="w"> </span><span class="na">to=</span><span class="s">&quot;&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-4-3"><a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a><span class="nt">&lt;/launch&gt;</span>
</span></code></pre></div>
<ul>
<li><strong><code>&lt;include&gt;</code>：</strong>包含其他launch文件，包含一个参数</li>
<li>file：包含的其他launch文件路径</li>
</ul>
<div class="language-xml highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="nt">&lt;launch&gt;</span>
</span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a><span class="w">    </span><span class="nt">&lt;include</span><span class="w"> </span><span class="na">file=</span><span class="s">&quot;$(find 功能包名)/launch/other.launch&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-5-3"><a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a><span class="nt">&lt;/launch&gt;</span>
</span></code></pre></div>
<h3 id="_1">练习</h3>
<p>试着创建一个launch文件启动2.5小节的发布者与订阅者节点吧<img alt="😃" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@14.1.2/assets/svg/1f603.svg" title=":smiley:" /></p>
<p><code>simple.launch</code></p>
<div class="language-xml highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="nt">&lt;launch&gt;</span>
</span><span id="__span-6-2"><a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a><span class="w">    </span><span class="nt">&lt;node</span><span class="w"> </span><span class="na">pkg=</span><span class="s">&quot;vkrobot_tutorials&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;my_talker.py&quot;</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;talker&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-6-3"><a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a><span class="w">    </span><span class="nt">&lt;node</span><span class="w"> </span><span class="na">pkg=</span><span class="s">&quot;vkrobot_tutorials&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;my_listener.py&quot;</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;listener&quot;</span><span class="w"> </span><span class="na">output=</span><span class="s">&quot;screen&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w"> </span>
</span><span id="__span-6-4"><a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a><span class="nt">&lt;/launch&gt;</span>
</span></code></pre></div>
<h2 id="32-tf">3.2 TF坐标变换</h2>
<figure>
<p><img alt="tf-pr2" src="../assets/tf-pr2.png" width="400" /></p>
</figure>
<figure>
<p><img alt="tf" src="../assets/tf.png" width="600" /></p>
</figure>
<h3 id="321-tf">3.2.1 TF工具</h3>
<blockquote>
<p>我们先来看一个小案例，体会一下tf是什么</p>
</blockquote>
<ol>
<li>安装DEMO</li>
</ol>
<div class="language-shell highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a>vkrobot@vkrobot:~$<span class="w"> </span>sudo<span class="w"> </span>apt-get<span class="w"> </span>install<span class="w"> </span>ros-melodic-ros-tutorials<span class="w"> </span>ros-melodic-geometry-tutorials<span class="w"> </span>ros-melodic-rviz<span class="w"> </span>ros-melodic-rosbash<span class="w"> </span>ros-melodic-rqt-tf-tree
</span></code></pre></div>
<ol>
<li>运行DEMO</li>
</ol>
<div class="language-shell highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a>vkrobot@vkrobot:~$<span class="w"> </span>roslaunch<span class="w"> </span>turtle_tf<span class="w"> </span>turtle_tf_demo.launch
</span></code></pre></div>
<figure>
<p><img alt="turtle_tf_start.png" src="http://wiki.ros.org/tf/Tutorials/Introduction%20to%20tf?action=AttachFile&amp;do=get&amp;target=turtle_tf_start.png" /></p>
</figure>
<blockquote>
<p>一旦 turtlesim 启动，您可以使用键盘方向键在 turtlesim 中控制位于中心的小海龟，<strong>选中 roslaunch 终端窗口</strong>，以便捕获您的击键以驱动 turtlesim</p>
</blockquote>
<figure>
<p><img alt="turtle_tf_drive.png" src="http://wiki.ros.org/tf/Tutorials/Introduction%20to%20tf?action=AttachFile&amp;do=get&amp;target=turtle_tf_drive.png" /></p>
</figure>
<blockquote>
<p>现在让我们用tf工具来查看tf究竟做了什么</p>
</blockquote>
<ol>
<li>view_frames</li>
</ol>
<div class="language-shell highlight"><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a>vkrobot@vkrobot:~$<span class="w"> </span>rosrun<span class="w"> </span>tf<span class="w"> </span>view_frames
</span><span id="__span-9-2"><a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a>Transform<span class="w"> </span>Listener<span class="w"> </span>initing
</span><span id="__span-9-3"><a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a>Listening<span class="w"> </span>to<span class="w"> </span>/tf<span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="m">5</span>.000000<span class="w"> </span>seconds
</span><span id="__span-9-4"><a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a>Done<span class="w"> </span>Listening
</span><span id="__span-9-5"><a id="__codelineno-9-5" name="__codelineno-9-5" href="#__codelineno-9-5"></a>dot<span class="w"> </span>-<span class="w"> </span>Graphviz<span class="w"> </span>version<span class="w"> </span><span class="m">2</span>.16<span class="w"> </span><span class="o">(</span>Fri<span class="w"> </span>Feb<span class="w">  </span><span class="m">8</span><span class="w"> </span><span class="m">12</span>:52:03<span class="w"> </span>UTC<span class="w"> </span><span class="m">2008</span><span class="o">)</span>
</span><span id="__span-9-6"><a id="__codelineno-9-6" name="__codelineno-9-6" href="#__codelineno-9-6"></a>
</span><span id="__span-9-7"><a id="__codelineno-9-7" name="__codelineno-9-7" href="#__codelineno-9-7"></a>Detected<span class="w"> </span>dot<span class="w"> </span>version<span class="w"> </span><span class="m">2</span>.16
</span><span id="__span-9-8"><a id="__codelineno-9-8" name="__codelineno-9-8" href="#__codelineno-9-8"></a>frames.pdf<span class="w"> </span>generated
</span></code></pre></div>
<ol>
<li>rqt_tf_tree</li>
</ol>
<p><code>rqt_tf_tree</code>是一个实时运行的工具，用于可视化通过 ROS 广播的帧树，您只需通过图表左上角的刷新底部刷新树即可</p>
<div class="language-shell highlight"><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a>vkrobot@vkrobot:~$<span class="w"> </span>rosrun<span class="w"> </span>rqt_tf_tree<span class="w"> </span>rqt_tf_tree
</span></code></pre></div>
<ol>
<li>tf_echo</li>
</ol>
<p><code>tf_echo</code>可以查看通过ROS广播的任意两个坐标系之间的转换</p>
<div class="language-shell highlight"><pre><span></span><code><span id="__span-11-1"><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="c1"># 用法</span>
</span><span id="__span-11-2"><a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a>rosrun<span class="w"> </span>tf<span class="w"> </span>tf_echo<span class="w"> </span><span class="o">[</span>reference_frame<span class="o">]</span><span class="w"> </span><span class="o">[</span>target_frame<span class="o">]</span>
</span><span id="__span-11-3"><a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a>
</span><span id="__span-11-4"><a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a>vkrobot@vkrobot:~$<span class="w"> </span>rosrun<span class="w"> </span>tf<span class="w"> </span>tf_echo<span class="w"> </span>turtle1<span class="w"> </span>turtle2
</span><span id="__span-11-5"><a id="__codelineno-11-5" name="__codelineno-11-5" href="#__codelineno-11-5"></a>At<span class="w"> </span><span class="nb">time</span><span class="w"> </span><span class="m">1416409795</span>.450
</span><span id="__span-11-6"><a id="__codelineno-11-6" name="__codelineno-11-6" href="#__codelineno-11-6"></a>-<span class="w"> </span>Translation:<span class="w"> </span><span class="o">[</span><span class="m">0</span>.000,<span class="w"> </span><span class="m">0</span>.000,<span class="w"> </span><span class="m">0</span>.000<span class="o">]</span>
</span><span id="__span-11-7"><a id="__codelineno-11-7" name="__codelineno-11-7" href="#__codelineno-11-7"></a>-<span class="w"> </span>Rotation:<span class="w"> </span><span class="k">in</span><span class="w"> </span>Quaternion<span class="w"> </span><span class="o">[</span><span class="m">0</span>.000,<span class="w"> </span><span class="m">0</span>.000,<span class="w"> </span><span class="m">0</span>.914,<span class="w"> </span><span class="m">0</span>.405<span class="o">]</span>
</span><span id="__span-11-8"><a id="__codelineno-11-8" name="__codelineno-11-8" href="#__codelineno-11-8"></a><span class="w">            </span><span class="k">in</span><span class="w"> </span>RPY<span class="w"> </span><span class="o">[</span><span class="m">0</span>.000,<span class="w"> </span>-0.000,<span class="w"> </span><span class="m">2</span>.308<span class="o">]</span>
</span><span id="__span-11-9"><a id="__codelineno-11-9" name="__codelineno-11-9" href="#__codelineno-11-9"></a>At<span class="w"> </span><span class="nb">time</span><span class="w"> </span><span class="m">1416409796</span>.441
</span><span id="__span-11-10"><a id="__codelineno-11-10" name="__codelineno-11-10" href="#__codelineno-11-10"></a>-<span class="w"> </span>Translation:<span class="w"> </span><span class="o">[</span><span class="m">0</span>.000,<span class="w"> </span><span class="m">0</span>.000,<span class="w"> </span><span class="m">0</span>.000<span class="o">]</span>
</span><span id="__span-11-11"><a id="__codelineno-11-11" name="__codelineno-11-11" href="#__codelineno-11-11"></a>-<span class="w"> </span>Rotation:<span class="w"> </span><span class="k">in</span><span class="w"> </span>Quaternion<span class="w"> </span><span class="o">[</span><span class="m">0</span>.000,<span class="w"> </span><span class="m">0</span>.000,<span class="w"> </span><span class="m">0</span>.914,<span class="w"> </span><span class="m">0</span>.405<span class="o">]</span>
</span><span id="__span-11-12"><a id="__codelineno-11-12" name="__codelineno-11-12" href="#__codelineno-11-12"></a><span class="w">            </span><span class="k">in</span><span class="w"> </span>RPY<span class="w"> </span><span class="o">[</span><span class="m">0</span>.000,<span class="w"> </span>-0.000,<span class="w"> </span><span class="m">2</span>.308<span class="o">]</span>
</span><span id="__span-11-13"><a id="__codelineno-11-13" name="__codelineno-11-13" href="#__codelineno-11-13"></a>At<span class="w"> </span><span class="nb">time</span><span class="w"> </span><span class="m">1416409797</span>.450
</span><span id="__span-11-14"><a id="__codelineno-11-14" name="__codelineno-11-14" href="#__codelineno-11-14"></a>-<span class="w"> </span>Translation:<span class="w"> </span><span class="o">[</span><span class="m">0</span>.000,<span class="w"> </span><span class="m">0</span>.000,<span class="w"> </span><span class="m">0</span>.000<span class="o">]</span>
</span><span id="__span-11-15"><a id="__codelineno-11-15" name="__codelineno-11-15" href="#__codelineno-11-15"></a>-<span class="w"> </span>Rotation:<span class="w"> </span><span class="k">in</span><span class="w"> </span>Quaternion<span class="w"> </span><span class="o">[</span><span class="m">0</span>.000,<span class="w"> </span><span class="m">0</span>.000,<span class="w"> </span><span class="m">0</span>.914,<span class="w"> </span><span class="m">0</span>.405<span class="o">]</span>
</span><span id="__span-11-16"><a id="__codelineno-11-16" name="__codelineno-11-16" href="#__codelineno-11-16"></a><span class="w">            </span><span class="k">in</span><span class="w"> </span>RPY<span class="w"> </span><span class="o">[</span><span class="m">0</span>.000,<span class="w"> </span>-0.000,<span class="w"> </span><span class="m">2</span>.308<span class="o">]</span>
</span><span id="__span-11-17"><a id="__codelineno-11-17" name="__codelineno-11-17" href="#__codelineno-11-17"></a>At<span class="w"> </span><span class="nb">time</span><span class="w"> </span><span class="m">1416409798</span>.441
</span><span id="__span-11-18"><a id="__codelineno-11-18" name="__codelineno-11-18" href="#__codelineno-11-18"></a>-<span class="w"> </span>Translation:<span class="w"> </span><span class="o">[</span><span class="m">0</span>.000,<span class="w"> </span><span class="m">0</span>.000,<span class="w"> </span><span class="m">0</span>.000<span class="o">]</span>
</span><span id="__span-11-19"><a id="__codelineno-11-19" name="__codelineno-11-19" href="#__codelineno-11-19"></a>-<span class="w"> </span>Rotation:<span class="w"> </span><span class="k">in</span><span class="w"> </span>Quaternion<span class="w"> </span><span class="o">[</span><span class="m">0</span>.000,<span class="w"> </span><span class="m">0</span>.000,<span class="w"> </span><span class="m">0</span>.914,<span class="w"> </span><span class="m">0</span>.405<span class="o">]</span>
</span><span id="__span-11-20"><a id="__codelineno-11-20" name="__codelineno-11-20" href="#__codelineno-11-20"></a><span class="w">            </span><span class="k">in</span><span class="w"> </span>RPY<span class="w"> </span><span class="o">[</span><span class="m">0</span>.000,<span class="w"> </span>-0.000,<span class="w"> </span><span class="m">2</span>.308<span class="o">]</span>
</span><span id="__span-11-21"><a id="__codelineno-11-21" name="__codelineno-11-21" href="#__codelineno-11-21"></a>At<span class="w"> </span><span class="nb">time</span><span class="w"> </span><span class="m">1416409799</span>.433
</span><span id="__span-11-22"><a id="__codelineno-11-22" name="__codelineno-11-22" href="#__codelineno-11-22"></a>-<span class="w"> </span>Translation:<span class="w"> </span><span class="o">[</span><span class="m">0</span>.000,<span class="w"> </span><span class="m">0</span>.000,<span class="w"> </span><span class="m">0</span>.000<span class="o">]</span>
</span><span id="__span-11-23"><a id="__codelineno-11-23" name="__codelineno-11-23" href="#__codelineno-11-23"></a>-<span class="w"> </span>Rotation:<span class="w"> </span><span class="k">in</span><span class="w"> </span>Quaternion<span class="w"> </span><span class="o">[</span><span class="m">0</span>.000,<span class="w"> </span><span class="m">0</span>.000,<span class="w"> </span><span class="m">0</span>.691,<span class="w"> </span><span class="m">0</span>.723<span class="o">]</span>
</span><span id="__span-11-24"><a id="__codelineno-11-24" name="__codelineno-11-24" href="#__codelineno-11-24"></a><span class="w">            </span><span class="k">in</span><span class="w"> </span>RPY<span class="w"> </span><span class="o">[</span><span class="m">0</span>.000,<span class="w"> </span>-0.000,<span class="w"> </span><span class="m">1</span>.526<span class="o">]</span>
</span></code></pre></div>
<blockquote>
<p>用键盘控制小海龟移动，观察数据的变化</p>
</blockquote>
<h3 id="322">3.2.2 广播器的编程实现</h3>
<div class="language-shell highlight"><pre><span></span><code><span id="__span-12-1"><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a>vkrobot@vkrobot:~$<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>~/catkin_ws/src
</span><span id="__span-12-2"><a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a>vkrobot@vkrobot:~/catkin_ws/src$<span class="w"> </span>catkin_create_pkg<span class="w"> </span>learning_tf<span class="w"> </span>tf<span class="w"> </span>roscpp<span class="w"> </span>rospy<span class="w"> </span>turtlesim<span class="w"> </span>geometry_msgs
</span><span id="__span-12-3"><a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a>vkrobot@vkrobot:~/catkin_ws/src$<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>learning_tf
</span><span id="__span-12-4"><a id="__codelineno-12-4" name="__codelineno-12-4" href="#__codelineno-12-4"></a>vkrobot@vkrobot:~/catkin_ws/src/learning_tf$<span class="w"> </span>mkdir<span class="w"> </span>scripts
</span><span id="__span-12-5"><a id="__codelineno-12-5" name="__codelineno-12-5" href="#__codelineno-12-5"></a>vkrobot@vkrobot:~/catkin_ws/src/learning_tf$<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>scripts
</span><span id="__span-12-6"><a id="__codelineno-12-6" name="__codelineno-12-6" href="#__codelineno-12-6"></a>vkrobot@vkrobot:~/catkin_ws/src/learning_tf/scripts$<span class="w"> </span>touch<span class="w"> </span>turtle_tf_broadcaster.py
</span><span id="__span-12-7"><a id="__codelineno-12-7" name="__codelineno-12-7" href="#__codelineno-12-7"></a>vkrobot@vkrobot:~/catkin_ws/src/learning_tf/scripts$<span class="w"> </span>chmod<span class="w"> </span>+x<span class="w"> </span>turtle_tf_broadcaster.py<span class="w">  </span><span class="c1">#添加可执行权限</span>
</span><span id="__span-12-8"><a id="__codelineno-12-8" name="__codelineno-12-8" href="#__codelineno-12-8"></a>vkrobot@vkrobot:~/catkin_ws/src/learning_tf/scripts$<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>~/catkin_ws
</span><span id="__span-12-9"><a id="__codelineno-12-9" name="__codelineno-12-9" href="#__codelineno-12-9"></a>vkrobot@vkrobot:~/catkin_ws$<span class="w"> </span>catkin_make
</span></code></pre></div>
<p><code>turtle_tf_broadcaster.py</code></p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-13-1"><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a><span class="ch">#!/usr/bin/env python  </span>
</span><span id="__span-13-2"><a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a><span class="kn">import</span> <span class="nn">rospy</span>
</span><span id="__span-13-3"><a id="__codelineno-13-3" name="__codelineno-13-3" href="#__codelineno-13-3"></a><span class="kn">import</span> <span class="nn">tf</span>
</span><span id="__span-13-4"><a id="__codelineno-13-4" name="__codelineno-13-4" href="#__codelineno-13-4"></a><span class="kn">import</span> <span class="nn">turtlesim.msg</span>
</span><span id="__span-13-5"><a id="__codelineno-13-5" name="__codelineno-13-5" href="#__codelineno-13-5"></a>
</span><span id="__span-13-6"><a id="__codelineno-13-6" name="__codelineno-13-6" href="#__codelineno-13-6"></a><span class="c1"># 此函数将广播小海龟的平移和旋转信息，并发布从“world”坐标系到“turtlename”的tf变换</span>
</span><span id="__span-13-7"><a id="__codelineno-13-7" name="__codelineno-13-7" href="#__codelineno-13-7"></a><span class="k">def</span> <span class="nf">handle_turtle_pose</span><span class="p">(</span><span class="n">msg</span><span class="p">,</span> <span class="n">turtlename</span><span class="p">):</span>
</span><span id="__span-13-8"><a id="__codelineno-13-8" name="__codelineno-13-8" href="#__codelineno-13-8"></a>    <span class="n">br</span> <span class="o">=</span> <span class="n">tf</span><span class="o">.</span><span class="n">TransformBroadcaster</span><span class="p">()</span>
</span><span id="__span-13-9"><a id="__codelineno-13-9" name="__codelineno-13-9" href="#__codelineno-13-9"></a>    <span class="n">br</span><span class="o">.</span><span class="n">sendTransform</span><span class="p">((</span><span class="n">msg</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">msg</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
</span><span id="__span-13-10"><a id="__codelineno-13-10" name="__codelineno-13-10" href="#__codelineno-13-10"></a>                     <span class="n">tf</span><span class="o">.</span><span class="n">transformations</span><span class="o">.</span><span class="n">quaternion_from_euler</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">msg</span><span class="o">.</span><span class="n">theta</span><span class="p">),</span>
</span><span id="__span-13-11"><a id="__codelineno-13-11" name="__codelineno-13-11" href="#__codelineno-13-11"></a>                     <span class="n">rospy</span><span class="o">.</span><span class="n">Time</span><span class="o">.</span><span class="n">now</span><span class="p">(),</span>
</span><span id="__span-13-12"><a id="__codelineno-13-12" name="__codelineno-13-12" href="#__codelineno-13-12"></a>                     <span class="n">turtlename</span><span class="p">,</span>
</span><span id="__span-13-13"><a id="__codelineno-13-13" name="__codelineno-13-13" href="#__codelineno-13-13"></a>                     <span class="s2">&quot;world&quot;</span><span class="p">)</span>
</span><span id="__span-13-14"><a id="__codelineno-13-14" name="__codelineno-13-14" href="#__codelineno-13-14"></a>
</span><span id="__span-13-15"><a id="__codelineno-13-15" name="__codelineno-13-15" href="#__codelineno-13-15"></a><span class="k">if</span> <span class="vm">__name__</span>  <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
</span><span id="__span-13-16"><a id="__codelineno-13-16" name="__codelineno-13-16" href="#__codelineno-13-16"></a>    <span class="n">rospy</span><span class="o">.</span><span class="n">init_node</span><span class="p">(</span><span class="s1">&#39;turtle_tf_broadcaster&#39;</span><span class="p">)</span>
</span><span id="__span-13-17"><a id="__codelineno-13-17" name="__codelineno-13-17" href="#__codelineno-13-17"></a>    <span class="n">turtlename</span> <span class="o">=</span> <span class="n">rospy</span><span class="o">.</span><span class="n">get_param</span><span class="p">(</span><span class="s1">&#39;~turtle&#39;</span><span class="p">)</span>  <span class="c1"># 该节点采用单个参数“turtle”，该参数指定了海龟名称，例如“turtle1”或“turtle2”</span>
</span><span id="__span-13-18"><a id="__codelineno-13-18" name="__codelineno-13-18" href="#__codelineno-13-18"></a>    <span class="n">rospy</span><span class="o">.</span><span class="n">Subscriber</span><span class="p">(</span><span class="s1">&#39;/</span><span class="si">%s</span><span class="s1">/pose&#39;</span> <span class="o">%</span> <span class="n">turtlename</span><span class="p">,</span>
</span><span id="__span-13-19"><a id="__codelineno-13-19" name="__codelineno-13-19" href="#__codelineno-13-19"></a>                     <span class="n">turtlesim</span><span class="o">.</span><span class="n">msg</span><span class="o">.</span><span class="n">Pose</span><span class="p">,</span>
</span><span id="__span-13-20"><a id="__codelineno-13-20" name="__codelineno-13-20" href="#__codelineno-13-20"></a>                     <span class="n">handle_turtle_pose</span><span class="p">,</span>
</span><span id="__span-13-21"><a id="__codelineno-13-21" name="__codelineno-13-21" href="#__codelineno-13-21"></a>                     <span class="n">turtlename</span><span class="p">)</span>  <span class="c1"># 该节点订阅话题“[turtlename]/pose”，并针对每条传入的消息调用回调函数“handle_turtle_pose”</span>
</span><span id="__span-13-22"><a id="__codelineno-13-22" name="__codelineno-13-22" href="#__codelineno-13-22"></a>    <span class="n">rospy</span><span class="o">.</span><span class="n">spin</span><span class="p">()</span>
</span></code></pre></div>
<p>运行broadcaster节点，这个节点运行需要传递参数，因此我们选择使用launch文件来启动，创建<code>launch/start_demo.launch</code>文件</p>
<div class="language-shell highlight"><pre><span></span><code><span id="__span-14-1"><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a>vkrobot@vkrobot:~$<span class="w"> </span>roscd<span class="w"> </span>learning_tf
</span><span id="__span-14-2"><a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a>vkrobot@vkrobot:~/catkin_ws/src/learning_tf$<span class="w"> </span>mkdir<span class="w"> </span>launch
</span><span id="__span-14-3"><a id="__codelineno-14-3" name="__codelineno-14-3" href="#__codelineno-14-3"></a>vkrobot@vkrobot:~/catkin_ws/src/learning_tf$<span class="w"> </span>touch<span class="w"> </span>launch/start_demo.launch
</span></code></pre></div>
<p><code>start_demo.launch</code></p>
<div class="language-xml highlight"><pre><span></span><code><span id="__span-15-1"><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a><span class="nt">&lt;launch&gt;</span>
</span><span id="__span-15-2"><a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a><span class="w">    </span><span class="cm">&lt;!-- Turtlesim Node--&gt;</span>
</span><span id="__span-15-3"><a id="__codelineno-15-3" name="__codelineno-15-3" href="#__codelineno-15-3"></a><span class="w">    </span><span class="nt">&lt;node</span><span class="w"> </span><span class="na">pkg=</span><span class="s">&quot;turtlesim&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;turtlesim_node&quot;</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;sim&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-15-4"><a id="__codelineno-15-4" name="__codelineno-15-4" href="#__codelineno-15-4"></a><span class="w">    </span><span class="nt">&lt;node</span><span class="w"> </span><span class="na">pkg=</span><span class="s">&quot;turtlesim&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;turtle_teleop_key&quot;</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;teleop&quot;</span><span class="w"> </span><span class="na">output=</span><span class="s">&quot;screen&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-15-5"><a id="__codelineno-15-5" name="__codelineno-15-5" href="#__codelineno-15-5"></a>
</span><span id="__span-15-6"><a id="__codelineno-15-6" name="__codelineno-15-6" href="#__codelineno-15-6"></a><span class="w">    </span><span class="nt">&lt;node</span><span class="w"> </span><span class="na">pkg=</span><span class="s">&quot;learning_tf&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;turtle_tf_broadcaster.py&quot;</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;turtle1_tf_broadcaster&quot;</span><span class="w"> </span><span class="na">respawn=</span><span class="s">&quot;false&quot;</span><span class="w"> </span><span class="na">output=</span><span class="s">&quot;screen&quot;</span><span class="w"> </span><span class="nt">&gt;</span>
</span><span id="__span-15-7"><a id="__codelineno-15-7" name="__codelineno-15-7" href="#__codelineno-15-7"></a><span class="w">        </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;turtle&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;string&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;turtle1&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-15-8"><a id="__codelineno-15-8" name="__codelineno-15-8" href="#__codelineno-15-8"></a><span class="w">    </span><span class="nt">&lt;/node&gt;</span>
</span><span id="__span-15-9"><a id="__codelineno-15-9" name="__codelineno-15-9" href="#__codelineno-15-9"></a><span class="w">    </span><span class="nt">&lt;node</span><span class="w"> </span><span class="na">pkg=</span><span class="s">&quot;learning_tf&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;turtle_tf_broadcaster.py&quot;</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;turtle2_tf_broadcaster&quot;</span><span class="w"> </span><span class="na">respawn=</span><span class="s">&quot;false&quot;</span><span class="w"> </span><span class="na">output=</span><span class="s">&quot;screen&quot;</span><span class="w"> </span><span class="nt">&gt;</span>
</span><span id="__span-15-10"><a id="__codelineno-15-10" name="__codelineno-15-10" href="#__codelineno-15-10"></a><span class="w">        </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;turtle&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;string&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;turtle2&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w"> </span>
</span><span id="__span-15-11"><a id="__codelineno-15-11" name="__codelineno-15-11" href="#__codelineno-15-11"></a><span class="w">    </span><span class="nt">&lt;/node&gt;</span>
</span><span id="__span-15-12"><a id="__codelineno-15-12" name="__codelineno-15-12" href="#__codelineno-15-12"></a><span class="nt">&lt;/launch&gt;</span>
</span></code></pre></div>
<p>启动：</p>
<div class="language-shell highlight"><pre><span></span><code><span id="__span-16-1"><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a>vkrobot@vkrobot:~$<span class="w"> </span>roslaunch<span class="w"> </span>learning_tf<span class="w"> </span>start_demo.launch
</span></code></pre></div>
<blockquote>
<p>可以用<code>tf_echo</code>查看结果</p>
<p><code>rosrun tf tf_echo /world /turtle1</code></p>
</blockquote>
<h3 id="323">3.2.3 监听器的编程实现</h3>
<div class="language-shell highlight"><pre><span></span><code><span id="__span-17-1"><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a>vkrobot@vkrobot:~$<span class="w"> </span>roscd<span class="w"> </span>learning_tf
</span><span id="__span-17-2"><a id="__codelineno-17-2" name="__codelineno-17-2" href="#__codelineno-17-2"></a>vkrobot@vkrobot:~/catkin_ws/src/learning_tf$<span class="w"> </span>touch<span class="w"> </span>scripts/turtle_tf_listener.py
</span></code></pre></div>
<p><code>turtle_tf_listener.py</code></p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-18-1"><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a><span class="ch">#!/usr/bin/env python  </span>
</span><span id="__span-18-2"><a id="__codelineno-18-2" name="__codelineno-18-2" href="#__codelineno-18-2"></a><span class="kn">import</span> <span class="nn">rospy</span>
</span><span id="__span-18-3"><a id="__codelineno-18-3" name="__codelineno-18-3" href="#__codelineno-18-3"></a><span class="kn">import</span> <span class="nn">math</span>
</span><span id="__span-18-4"><a id="__codelineno-18-4" name="__codelineno-18-4" href="#__codelineno-18-4"></a><span class="kn">import</span> <span class="nn">tf</span>
</span><span id="__span-18-5"><a id="__codelineno-18-5" name="__codelineno-18-5" href="#__codelineno-18-5"></a><span class="kn">import</span> <span class="nn">geometry_msgs.msg</span>
</span><span id="__span-18-6"><a id="__codelineno-18-6" name="__codelineno-18-6" href="#__codelineno-18-6"></a><span class="kn">import</span> <span class="nn">turtlesim.srv</span>
</span><span id="__span-18-7"><a id="__codelineno-18-7" name="__codelineno-18-7" href="#__codelineno-18-7"></a>
</span><span id="__span-18-8"><a id="__codelineno-18-8" name="__codelineno-18-8" href="#__codelineno-18-8"></a><span class="k">if</span> <span class="vm">__name__</span>  <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
</span><span id="__span-18-9"><a id="__codelineno-18-9" name="__codelineno-18-9" href="#__codelineno-18-9"></a>    <span class="n">rospy</span><span class="o">.</span><span class="n">init_node</span><span class="p">(</span><span class="s1">&#39;turtle_tf_listener&#39;</span><span class="p">)</span>
</span><span id="__span-18-10"><a id="__codelineno-18-10" name="__codelineno-18-10" href="#__codelineno-18-10"></a>
</span><span id="__span-18-11"><a id="__codelineno-18-11" name="__codelineno-18-11" href="#__codelineno-18-11"></a>    <span class="n">listener</span> <span class="o">=</span> <span class="n">tf</span><span class="o">.</span><span class="n">TransformListener</span><span class="p">()</span>
</span><span id="__span-18-12"><a id="__codelineno-18-12" name="__codelineno-18-12" href="#__codelineno-18-12"></a>
</span><span id="__span-18-13"><a id="__codelineno-18-13" name="__codelineno-18-13" href="#__codelineno-18-13"></a>    <span class="n">rospy</span><span class="o">.</span><span class="n">wait_for_service</span><span class="p">(</span><span class="s1">&#39;spawn&#39;</span><span class="p">)</span>
</span><span id="__span-18-14"><a id="__codelineno-18-14" name="__codelineno-18-14" href="#__codelineno-18-14"></a>    <span class="n">spawner</span> <span class="o">=</span> <span class="n">rospy</span><span class="o">.</span><span class="n">ServiceProxy</span><span class="p">(</span><span class="s1">&#39;spawn&#39;</span><span class="p">,</span> <span class="n">turtlesim</span><span class="o">.</span><span class="n">srv</span><span class="o">.</span><span class="n">Spawn</span><span class="p">)</span>
</span><span id="__span-18-15"><a id="__codelineno-18-15" name="__codelineno-18-15" href="#__codelineno-18-15"></a>    <span class="n">spawner</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;turtle2&#39;</span><span class="p">)</span>
</span><span id="__span-18-16"><a id="__codelineno-18-16" name="__codelineno-18-16" href="#__codelineno-18-16"></a>
</span><span id="__span-18-17"><a id="__codelineno-18-17" name="__codelineno-18-17" href="#__codelineno-18-17"></a>    <span class="n">turtle_vel</span> <span class="o">=</span> <span class="n">rospy</span><span class="o">.</span><span class="n">Publisher</span><span class="p">(</span><span class="s1">&#39;turtle2/cmd_vel&#39;</span><span class="p">,</span> <span class="n">geometry_msgs</span><span class="o">.</span><span class="n">msg</span><span class="o">.</span><span class="n">Twist</span><span class="p">,</span><span class="n">queue_size</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="__span-18-18"><a id="__codelineno-18-18" name="__codelineno-18-18" href="#__codelineno-18-18"></a>
</span><span id="__span-18-19"><a id="__codelineno-18-19" name="__codelineno-18-19" href="#__codelineno-18-19"></a>    <span class="n">rate</span> <span class="o">=</span> <span class="n">rospy</span><span class="o">.</span><span class="n">Rate</span><span class="p">(</span><span class="mf">10.0</span><span class="p">)</span>
</span><span id="__span-18-20"><a id="__codelineno-18-20" name="__codelineno-18-20" href="#__codelineno-18-20"></a>    <span class="k">while</span> <span class="ow">not</span> <span class="n">rospy</span><span class="o">.</span><span class="n">is_shutdown</span><span class="p">():</span>
</span><span id="__span-18-21"><a id="__codelineno-18-21" name="__codelineno-18-21" href="#__codelineno-18-21"></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="__span-18-22"><a id="__codelineno-18-22" name="__codelineno-18-22" href="#__codelineno-18-22"></a>            <span class="p">(</span><span class="n">trans</span><span class="p">,</span><span class="n">rot</span><span class="p">)</span> <span class="o">=</span> <span class="n">listener</span><span class="o">.</span><span class="n">lookupTransform</span><span class="p">(</span><span class="s1">&#39;/turtle2&#39;</span><span class="p">,</span> <span class="s1">&#39;/turtle1&#39;</span><span class="p">,</span> <span class="n">rospy</span><span class="o">.</span><span class="n">Time</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
</span><span id="__span-18-23"><a id="__codelineno-18-23" name="__codelineno-18-23" href="#__codelineno-18-23"></a>            <span class="c1"># trans中存储的是x, y, z三个轴的相对距离</span>
</span><span id="__span-18-24"><a id="__codelineno-18-24" name="__codelineno-18-24" href="#__codelineno-18-24"></a>            <span class="c1"># rot中存储的是四元数变换</span>
</span><span id="__span-18-25"><a id="__codelineno-18-25" name="__codelineno-18-25" href="#__codelineno-18-25"></a>        <span class="k">except</span> <span class="p">(</span><span class="n">tf</span><span class="o">.</span><span class="n">LookupException</span><span class="p">,</span> <span class="n">tf</span><span class="o">.</span><span class="n">ConnectivityException</span><span class="p">,</span> <span class="n">tf</span><span class="o">.</span><span class="n">ExtrapolationException</span><span class="p">):</span>
</span><span id="__span-18-26"><a id="__codelineno-18-26" name="__codelineno-18-26" href="#__codelineno-18-26"></a>            <span class="k">continue</span>
</span><span id="__span-18-27"><a id="__codelineno-18-27" name="__codelineno-18-27" href="#__codelineno-18-27"></a>
</span><span id="__span-18-28"><a id="__codelineno-18-28" name="__codelineno-18-28" href="#__codelineno-18-28"></a>        <span class="n">angular</span> <span class="o">=</span> <span class="mi">4</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">atan2</span><span class="p">(</span><span class="n">trans</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">trans</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</span><span id="__span-18-29"><a id="__codelineno-18-29" name="__codelineno-18-29" href="#__codelineno-18-29"></a>        <span class="n">linear</span> <span class="o">=</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">trans</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">**</span> <span class="mi">2</span> <span class="o">+</span> <span class="n">trans</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)</span>
</span><span id="__span-18-30"><a id="__codelineno-18-30" name="__codelineno-18-30" href="#__codelineno-18-30"></a>        <span class="n">cmd</span> <span class="o">=</span> <span class="n">geometry_msgs</span><span class="o">.</span><span class="n">msg</span><span class="o">.</span><span class="n">Twist</span><span class="p">()</span>
</span><span id="__span-18-31"><a id="__codelineno-18-31" name="__codelineno-18-31" href="#__codelineno-18-31"></a>        <span class="n">cmd</span><span class="o">.</span><span class="n">linear</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">linear</span>
</span><span id="__span-18-32"><a id="__codelineno-18-32" name="__codelineno-18-32" href="#__codelineno-18-32"></a>        <span class="n">cmd</span><span class="o">.</span><span class="n">angular</span><span class="o">.</span><span class="n">z</span> <span class="o">=</span> <span class="n">angular</span>
</span><span id="__span-18-33"><a id="__codelineno-18-33" name="__codelineno-18-33" href="#__codelineno-18-33"></a>        <span class="n">turtle_vel</span><span class="o">.</span><span class="n">publish</span><span class="p">(</span><span class="n">cmd</span><span class="p">)</span>
</span><span id="__span-18-34"><a id="__codelineno-18-34" name="__codelineno-18-34" href="#__codelineno-18-34"></a>
</span><span id="__span-18-35"><a id="__codelineno-18-35" name="__codelineno-18-35" href="#__codelineno-18-35"></a>        <span class="n">rate</span><span class="o">.</span><span class="n">sleep</span><span class="p">()</span>
</span></code></pre></div>
<p>修改<code>start_demo.launch</code>，启动listener节点</p>
<div class="language-xml highlight"><pre><span></span><code><span id="__span-19-1"><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a><span class="nt">&lt;launch&gt;</span>
</span><span id="__span-19-2"><a id="__codelineno-19-2" name="__codelineno-19-2" href="#__codelineno-19-2"></a><span class="w">    </span>...
</span><span id="__span-19-3"><a id="__codelineno-19-3" name="__codelineno-19-3" href="#__codelineno-19-3"></a><span class="w">    </span><span class="nt">&lt;node</span><span class="w"> </span><span class="na">pkg=</span><span class="s">&quot;learning_tf&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;turtle_tf_listener.py&quot;</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;listener&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-19-4"><a id="__codelineno-19-4" name="__codelineno-19-4" href="#__codelineno-19-4"></a><span class="nt">&lt;/launch&gt;</span>
</span></code></pre></div>
<h2 id="33-qt">3.3 Qt工具箱</h2>
<p>安装：</p>
<div class="language-shell highlight"><pre><span></span><code><span id="__span-20-1"><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a>vkrobot@vkrobot:~$<span class="w"> </span>sudo<span class="w"> </span>apt-get<span class="w"> </span>install<span class="w"> </span>ros-melodic-rqt
</span><span id="__span-20-2"><a id="__codelineno-20-2" name="__codelineno-20-2" href="#__codelineno-20-2"></a>vkrobot@vkrobot:~$<span class="w"> </span>sudo<span class="w"> </span>apt-get<span class="w"> </span>install<span class="w"> </span>ros-melodic-rqt-common-plugins
</span></code></pre></div>
<h3 id="331-rqt_console">3.3.1 日志输出工具——rqt_console</h3>
<figure>
<p><img alt="rqt_console sample snapshot" src="http://wiki.ros.org/rqt_console?action=AttachFile&amp;do=get&amp;target=snap_rqt_console.png" width="700" /></p>
</figure>
<p>rqt_console是RQT包中的一个查看发布到/rosout的消息。它会随着时间的推移收集消息，并允许您更详细地查看它们，允许您通过各种方式过滤消息。</p>
<p>使用以下命令行启动：<code>rqt_console</code></p>
<h3 id="332-rqt_graph">3.3.2 计算图可视化工具——rqt_graph</h3>
<figure>
<p><img alt="launch top window" src="http://wiki.ros.org/rqt_graph?action=AttachFile&amp;do=get&amp;target=snap_rqt_graph_moveit_demo.png" width="700" /></p>
</figure>
<p>在学习话题通信时我们已经使用过此工具了，此处不再赘述，使用以下命令行启动：<code>rqt_graph</code></p>
<h3 id="333-rqt_plot">3.3.3 数据绘图工具——rqt_plot</h3>
<p>使用以下命令行启动：<code>rqt_plot</code></p>
<figure>
<p><img alt="ROS/Tutorials/UnderstandingTopics/rqt_plot.png" src="http://wiki.ros.org/ROS/Tutorials/UnderstandingTopics?action=AttachFile&amp;do=get&amp;target=rqt_plot.png" width="700" /></p>
</figure>
<p>在“Topic”中输入话题，然后按“+”按钮即可添加数据</p>
<h2 id="34-rviz">3.4 RVIZ</h2>
<h3 id="341-rviz">3.4.1 RVIZ简介</h3>
<p>RVIZ是一款三维可视化软件，针对基于ROS软件框架的机器人平台有很好的兼容性。RVIZ主要有以下特点：</p>
<ul>
<li>在RVIZ中，可以使用XML[^1]语言对机器人、周围物体等任何实物进行尺寸、质量、位置、材质、关节等属性的描述，并在界面中呈现出来，这种文件称之为URDF文件</li>
<li>RVIZ可以通过图形化的方式，实时显示机器人传感器的信息、机器人的运动状态、周围环境的变化等信息</li>
</ul>
<h3 id="342-rviz">3.4.2 RVIZ数据可视化</h3>
<figure>
<p><img alt="" src="../assets/image-20230522134306851.png" width="700" /></p>
</figure>
<p>RVIZ中的UI界面分为以下几类：</p>
<ul>
<li>0：3D视图区</li>
<li>1：工具栏</li>
<li>2：显示项列表</li>
<li>3：视角设置区</li>
<li>4：时间显示区</li>
</ul>
<h2 id="35-gazebo">3.5 Gazebo</h2>
<h3 id="351-gazebo">3.5.1 Gazebo简介</h3>
<p>Gazebo是一款功能强大的三维物理仿真平台，具有以下特点：</p>
<ul>
<li>具备强大的物理引擎</li>
<li>高质量的图形渲染</li>
<li>方便的编程与图形接口</li>
<li>开源免费</li>
</ul>
<figure>
<p><img alt="image-20230522135803961" src="../assets/image-20230522135803961.png" width="700" /></p>
</figure>
<h3 id="352">3.5.2 构建仿真环境</h3>
<p>默认情况下，Gazebo的默认场景是“empty world”，并没有类似房间、障碍物、道路等仿真物体，那如何在Gazebo中创建仿真环境呢？</p>
<p>Gazebo中创建仿真环境有两种方式：</p>
<ul>
<li>直接添加内置组件创建仿真环境</li>
<li>手动绘制仿真环境</li>
</ul>
<h4 id="_2">添加内置组件创建仿真环境</h4>
<ol>
<li>启动Gazebo并添加组件</li>
</ol>
<figure>
<p><img alt="image-20230522162806255" src="../assets/image-20230522162806255.png" width="700" /></p>
</figure>
<ol>
<li>保存仿真环境</li>
</ol>
<p>选择 "File" --&gt; "Save World As"，选择保存路径（功能包路径下创建worlds目录），文件后缀为 .world</p>
<figure>
<p><img alt="image-20230522162930858" src="../assets/image-20230522162930858.png" width="700" /></p>
</figure>
<ol>
<li>启动</li>
</ol>
<p>创建launch文件启动</p>
<div class="language-xml highlight"><pre><span></span><code><span id="__span-21-1"><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a><span class="nt">&lt;launch&gt;</span>
</span><span id="__span-21-2"><a id="__codelineno-21-2" name="__codelineno-21-2" href="#__codelineno-21-2"></a><span class="w">    </span>......
</span><span id="__span-21-3"><a id="__codelineno-21-3" name="__codelineno-21-3" href="#__codelineno-21-3"></a><span class="w">    </span><span class="nt">&lt;include</span><span class="w"> </span><span class="na">file=</span><span class="s">&quot;$(find gazebo_ros)/launch/empty_world.launch&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-21-4"><a id="__codelineno-21-4" name="__codelineno-21-4" href="#__codelineno-21-4"></a><span class="w">        </span><span class="nt">&lt;arg</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;world_name&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;$(find 功能包名)/world/***.world&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-21-5"><a id="__codelineno-21-5" name="__codelineno-21-5" href="#__codelineno-21-5"></a><span class="w">    </span><span class="nt">&lt;/include&gt;</span>
</span><span id="__span-21-6"><a id="__codelineno-21-6" name="__codelineno-21-6" href="#__codelineno-21-6"></a><span class="nt">&lt;/launch&gt;</span>
</span></code></pre></div>
<h4 id="_3">自定义仿真环境</h4>
<ol>
<li>启动Gazebo进入“Edit” --&gt; "Building Editor"模式，绘制仿真环境</li>
</ol>
<figure>
<p><img alt="image-20230522163458307" src="../assets/image-20230522163458307.png" width="700" /></p>
</figure>
<figure>
<p><img alt="image-20230522163656306" src="../assets/image-20230522163656306.png" width="700" /></p>
</figure>
<p>保存仿真环境与启动方式同上</p>
<h1 id="4">4 机器人建模与仿真</h1>
<h2 id="41-urdf">4.1 URDF</h2>
<h3 id="411">4.1.1 简介</h3>
<p>URDF（Unified Robot Description Format）——统一机器人描述格式，是一种以XML的方式描述机器人的文件，可以描述机器人的底盘、摄像头、激光雷达、机械臂等，它可以被 C++ 内置的解释器转换成可视化的机器人模型，是ROS中实现机器人仿真的重要组件。</p>
<h3 id="412">4.1.2 标签</h3>
<ol>
<li><code>&lt;robot&gt;</code>：根标签，类似launch文件中的<launch>标签</li>
</ol>
<p>属性：</p>
<ul>
<li>name：指定机器人模型的名称</li>
</ul>
<div class="language-xml highlight"><pre><span></span><code><span id="__span-22-1"><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a><span class="nt">&lt;robot</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-22-2"><a id="__codelineno-22-2" name="__codelineno-22-2" href="#__codelineno-22-2"></a><span class="w">    </span>......
</span><span id="__span-22-3"><a id="__codelineno-22-3" name="__codelineno-22-3" href="#__codelineno-22-3"></a><span class="nt">&lt;/robot&gt;</span>
</span></code></pre></div>
<ol>
<li><code>&lt;link&gt;</code>：连杆标签，用于描述机器人刚体部分的外观和物理属性，如机器人底盘，轮子，摄像头，激光雷达等</li>
</ol>
<figure>
<p><img alt="img" src="../assets/%E5%9B%BE%E7%89%872.png" /></p>
</figure>
<p>属性：</p>
<ul>
<li>name：为连杆命名</li>
</ul>
<p>子标签：</p>
<ul>
<li>
<p>visual --&gt; 描述外观</p>
</li>
<li>
<p>geometry --&gt; 设置刚体几何形状</p>
<ul>
<li>box：盒状</li>
</ul>
<p>属性：size="x y z"</p>
<ul>
<li>cylinder：圆柱体</li>
</ul>
<p>属性：radius="半径" length="长度"</p>
<ul>
<li>sphere：球体</li>
</ul>
<p>属性：radius="半径"</p>
</li>
<li>
<p>origin --&gt; 设置位姿（偏移量&amp;倾斜弧度）</p>
<p>属性：</p>
<ul>
<li>
<p>xyz：偏移</p>
</li>
<li>
<p>rpy（欧拉角）：r-翻滚 p-俯仰 y-偏航  </p>
</li>
</ul>
</li>
<li>
<p>metrial --&gt; 设置材质与颜色</p>
<p>属性：name</p>
<ul>
<li>color</li>
</ul>
<p>属性：rgba——红绿蓝权重与透明度，取值 [0,1]</p>
</li>
<li>
<p>collision --&gt; 描述碰撞属性</p>
</li>
<li>
<p>inertial --&gt; 描述惯性矩阵</p>
</li>
</ul>
<div class="language-xml highlight"><pre><span></span><code><span id="__span-23-1"><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a><span class="nt">&lt;robot</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-23-2"><a id="__codelineno-23-2" name="__codelineno-23-2" href="#__codelineno-23-2"></a><span class="w">    </span><span class="nt">&lt;link</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;base_link&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-23-3"><a id="__codelineno-23-3" name="__codelineno-23-3" href="#__codelineno-23-3"></a><span class="w">        </span><span class="nt">&lt;visual&gt;</span>
</span><span id="__span-23-4"><a id="__codelineno-23-4" name="__codelineno-23-4" href="#__codelineno-23-4"></a><span class="w">            </span><span class="nt">&lt;geometry&gt;</span>
</span><span id="__span-23-5"><a id="__codelineno-23-5" name="__codelineno-23-5" href="#__codelineno-23-5"></a><span class="w">                </span><span class="cm">&lt;!-- 盒状 --&gt;</span>
</span><span id="__span-23-6"><a id="__codelineno-23-6" name="__codelineno-23-6" href="#__codelineno-23-6"></a><span class="w">                </span><span class="nt">&lt;box</span><span class="w"> </span><span class="na">size=</span><span class="s">&quot;1 1 1&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-23-7"><a id="__codelineno-23-7" name="__codelineno-23-7" href="#__codelineno-23-7"></a><span class="w">                </span><span class="cm">&lt;!-- 圆柱体 --&gt;</span>
</span><span id="__span-23-8"><a id="__codelineno-23-8" name="__codelineno-23-8" href="#__codelineno-23-8"></a><span class="w">                </span><span class="nt">&lt;cylinder</span><span class="w"> </span><span class="na">radius=</span><span class="s">&quot;1&quot;</span><span class="w"> </span><span class="na">length=</span><span class="s">&quot;1&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-23-9"><a id="__codelineno-23-9" name="__codelineno-23-9" href="#__codelineno-23-9"></a><span class="w">                </span><span class="cm">&lt;!-- 球体 --&gt;</span>
</span><span id="__span-23-10"><a id="__codelineno-23-10" name="__codelineno-23-10" href="#__codelineno-23-10"></a><span class="w">                </span><span class="nt">&lt;sphere</span><span class="w"> </span><span class="na">radius=</span><span class="s">&quot;1&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-23-11"><a id="__codelineno-23-11" name="__codelineno-23-11" href="#__codelineno-23-11"></a><span class="w">            </span><span class="nt">&lt;/geometry&gt;</span>
</span><span id="__span-23-12"><a id="__codelineno-23-12" name="__codelineno-23-12" href="#__codelineno-23-12"></a><span class="w">            </span><span class="nt">&lt;origin</span><span class="w"> </span><span class="na">xyz=</span><span class="s">&quot;0 0 0&quot;</span><span class="w"> </span><span class="na">rpy=</span><span class="s">&quot;0 0 0&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-23-13"><a id="__codelineno-23-13" name="__codelineno-23-13" href="#__codelineno-23-13"></a><span class="w">            </span><span class="nt">&lt;material</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;black&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-23-14"><a id="__codelineno-23-14" name="__codelineno-23-14" href="#__codelineno-23-14"></a><span class="w">                </span><span class="nt">&lt;color</span><span class="w"> </span><span class="na">rgba=</span><span class="s">&quot;1 1 1 1&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-23-15"><a id="__codelineno-23-15" name="__codelineno-23-15" href="#__codelineno-23-15"></a><span class="w">            </span><span class="nt">&lt;material&gt;</span>
</span><span id="__span-23-16"><a id="__codelineno-23-16" name="__codelineno-23-16" href="#__codelineno-23-16"></a><span class="w">        </span><span class="nt">&lt;/visual&gt;</span>
</span><span id="__span-23-17"><a id="__codelineno-23-17" name="__codelineno-23-17" href="#__codelineno-23-17"></a><span class="w">        </span><span class="nt">&lt;collision&gt;</span>
</span><span id="__span-23-18"><a id="__codelineno-23-18" name="__codelineno-23-18" href="#__codelineno-23-18"></a><span class="w">            </span><span class="cm">&lt;!-- 无特殊要求时与visual标签保持一致 --&gt;</span>
</span><span id="__span-23-19"><a id="__codelineno-23-19" name="__codelineno-23-19" href="#__codelineno-23-19"></a><span class="w">            </span><span class="nt">&lt;geometry&gt;</span>
</span><span id="__span-23-20"><a id="__codelineno-23-20" name="__codelineno-23-20" href="#__codelineno-23-20"></a><span class="w">                </span>......
</span><span id="__span-23-21"><a id="__codelineno-23-21" name="__codelineno-23-21" href="#__codelineno-23-21"></a><span class="w">            </span><span class="nt">&lt;/geometry&gt;</span>
</span><span id="__span-23-22"><a id="__codelineno-23-22" name="__codelineno-23-22" href="#__codelineno-23-22"></a><span class="w">            </span><span class="nt">&lt;origin</span><span class="w"> </span><span class="na">xyz=</span><span class="s">&quot;0 0 0&quot;</span><span class="w"> </span><span class="na">rpy=</span><span class="s">&quot;0 0 0&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-23-23"><a id="__codelineno-23-23" name="__codelineno-23-23" href="#__codelineno-23-23"></a><span class="w">        </span><span class="nt">&lt;/collision&gt;</span>
</span><span id="__span-23-24"><a id="__codelineno-23-24" name="__codelineno-23-24" href="#__codelineno-23-24"></a><span class="w">        </span><span class="nt">&lt;inertial&gt;</span>
</span><span id="__span-23-25"><a id="__codelineno-23-25" name="__codelineno-23-25" href="#__codelineno-23-25"></a><span class="w">            </span>......
</span><span id="__span-23-26"><a id="__codelineno-23-26" name="__codelineno-23-26" href="#__codelineno-23-26"></a><span class="w">        </span><span class="nt">&lt;/inertial&gt;</span>
</span><span id="__span-23-27"><a id="__codelineno-23-27" name="__codelineno-23-27" href="#__codelineno-23-27"></a><span class="w">    </span><span class="nt">&lt;/link&gt;</span>
</span><span id="__span-23-28"><a id="__codelineno-23-28" name="__codelineno-23-28" href="#__codelineno-23-28"></a><span class="nt">&lt;/robot&gt;</span>
</span></code></pre></div>
<ol>
<li><code>&lt;joint&gt;</code>：关节标签，用于描述两个刚体间的连接关系</li>
</ol>
<figure>
<p><img alt="img" src="../assets/%E5%9B%BE%E7%89%873.png" /></p>
</figure>
<p>属性：</p>
<ul>
<li>name --&gt; 为关节命名</li>
<li>type --&gt; 关节的类型</li>
<li>fixed：固定关节，无自由度</li>
<li>continuous：旋转关节，拥有绕单轴旋转的1个自由度</li>
<li>revolute：旋转关节，类似于continuous，但是有旋转角度的限制，1个自由度</li>
<li>prismatic：滑动关节，拥有沿单轴移动的自由度，有位置极限，1个自由度</li>
<li>planner：平面关节，拥有在平面正交方向上的平移或旋转的自由度，5个自由度</li>
<li>floating：浮动节点，拥有三轴平移与旋转的6个自由度</li>
</ul>
<p>子标签：</p>
<ul>
<li>parent --&gt; 设置关节的父级连杆</li>
<li>link --&gt; 父级连杆名称</li>
<li>child --&gt; 设置关节的子级连杆</li>
<li>link --&gt; 子级连杆名称</li>
<li>origin --&gt; 设置关节的偏移量</li>
<li>axis --&gt; 设置关节围绕哪个轴运动</li>
</ul>
<div class="language-xml highlight"><pre><span></span><code><span id="__span-24-1"><a id="__codelineno-24-1" name="__codelineno-24-1" href="#__codelineno-24-1"></a><span class="nt">&lt;robot</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-24-2"><a id="__codelineno-24-2" name="__codelineno-24-2" href="#__codelineno-24-2"></a><span class="w">    </span><span class="nt">&lt;link</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;link_1&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-24-3"><a id="__codelineno-24-3" name="__codelineno-24-3" href="#__codelineno-24-3"></a><span class="w">        </span>......
</span><span id="__span-24-4"><a id="__codelineno-24-4" name="__codelineno-24-4" href="#__codelineno-24-4"></a><span class="w">    </span><span class="nt">&lt;/link&gt;</span>
</span><span id="__span-24-5"><a id="__codelineno-24-5" name="__codelineno-24-5" href="#__codelineno-24-5"></a><span class="w">    </span><span class="nt">&lt;link</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;link_2&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-24-6"><a id="__codelineno-24-6" name="__codelineno-24-6" href="#__codelineno-24-6"></a><span class="w">        </span>......
</span><span id="__span-24-7"><a id="__codelineno-24-7" name="__codelineno-24-7" href="#__codelineno-24-7"></a><span class="w">    </span><span class="nt">&lt;/link&gt;</span>
</span><span id="__span-24-8"><a id="__codelineno-24-8" name="__codelineno-24-8" href="#__codelineno-24-8"></a>
</span><span id="__span-24-9"><a id="__codelineno-24-9" name="__codelineno-24-9" href="#__codelineno-24-9"></a><span class="w">    </span><span class="nt">&lt;joint</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;joint_name&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;continuous&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-24-10"><a id="__codelineno-24-10" name="__codelineno-24-10" href="#__codelineno-24-10"></a><span class="w">        </span><span class="nt">&lt;parent</span><span class="w"> </span><span class="na">link=</span><span class="s">&quot;link_1&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-24-11"><a id="__codelineno-24-11" name="__codelineno-24-11" href="#__codelineno-24-11"></a><span class="w">        </span><span class="nt">&lt;child</span><span class="w"> </span><span class="na">link=</span><span class="s">&quot;link_2&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-24-12"><a id="__codelineno-24-12" name="__codelineno-24-12" href="#__codelineno-24-12"></a><span class="w">        </span><span class="cm">&lt;!-- 计算两个连杆的物理中心偏移量 --&gt;</span>
</span><span id="__span-24-13"><a id="__codelineno-24-13" name="__codelineno-24-13" href="#__codelineno-24-13"></a><span class="w">        </span><span class="nt">&lt;origin</span><span class="w"> </span><span class="na">xyz=</span><span class="s">&quot;0 0 0&quot;</span><span class="w"> </span><span class="na">rpy=</span><span class="s">&quot;0 0 0&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-24-14"><a id="__codelineno-24-14" name="__codelineno-24-14" href="#__codelineno-24-14"></a><span class="w">        </span><span class="nt">&lt;axis</span><span class="w"> </span><span class="na">xyz=</span><span class="s">&quot;0 1 0&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-24-15"><a id="__codelineno-24-15" name="__codelineno-24-15" href="#__codelineno-24-15"></a><span class="w">    </span><span class="nt">&lt;/joint&gt;</span>
</span><span id="__span-24-16"><a id="__codelineno-24-16" name="__codelineno-24-16" href="#__codelineno-24-16"></a><span class="nt">&lt;/robot&gt;</span>
</span></code></pre></div>
<ol>
<li><code>&lt;gazebo&gt;</code>：集成Gazebo时需要使用的标签</li>
</ol>
<h3 id="413-urdf">4.1.3 创建URDF模型</h3>
<ol>
<li>新建功能包并导入依赖，包括：<code>urdf</code>、<code>xacro</code>、<code>gaezbo_ros</code>、<code>gazebo_ros_control</code>、<code>gazebo_plugins</code></li>
<li>新建urdf目录用来保存urdf文件</li>
<li>新建urdf文件编写机器人模型</li>
</ol>
<div class="language-shell highlight"><pre><span></span><code><span id="__span-25-1"><a id="__codelineno-25-1" name="__codelineno-25-1" href="#__codelineno-25-1"></a>vkrobot@vkrobot:~$<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>catkin_ws/src
</span><span id="__span-25-2"><a id="__codelineno-25-2" name="__codelineno-25-2" href="#__codelineno-25-2"></a>vkrobot@vkrobot:~/catkin_ws/src$<span class="w"> </span>catkin_create_pkg<span class="w"> </span>learning_urdf<span class="w"> </span>urdf<span class="w"> </span>xacro<span class="w"> </span>gazebo_ros<span class="w"> </span>gazebo_ros_control<span class="w"> </span>gazebo_plugins
</span><span id="__span-25-3"><a id="__codelineno-25-3" name="__codelineno-25-3" href="#__codelineno-25-3"></a>vkrobot@vkrobot:~/catkin_ws/src$<span class="w"> </span>mkdir<span class="w"> </span>learning_urdf/urdf
</span><span id="__span-25-4"><a id="__codelineno-25-4" name="__codelineno-25-4" href="#__codelineno-25-4"></a>vkrobot@vkrobot:~/catkin_ws/src$<span class="w"> </span>touch<span class="w"> </span>learning_urdf/urdf/my_car.urdf
</span></code></pre></div>
<p><code>my_car.urdf</code></p>
<div class="language-xml highlight"><pre><span></span><code><span id="__span-26-1"><a id="__codelineno-26-1" name="__codelineno-26-1" href="#__codelineno-26-1"></a><span class="nt">&lt;robot</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;my_car&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-26-2"><a id="__codelineno-26-2" name="__codelineno-26-2" href="#__codelineno-26-2"></a><span class="w">    </span><span class="nt">&lt;link</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;base_footprint&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-26-3"><a id="__codelineno-26-3" name="__codelineno-26-3" href="#__codelineno-26-3"></a><span class="w">        </span><span class="nt">&lt;visual&gt;</span>
</span><span id="__span-26-4"><a id="__codelineno-26-4" name="__codelineno-26-4" href="#__codelineno-26-4"></a><span class="w">            </span><span class="nt">&lt;geometry&gt;</span>
</span><span id="__span-26-5"><a id="__codelineno-26-5" name="__codelineno-26-5" href="#__codelineno-26-5"></a><span class="w">                </span><span class="nt">&lt;sphere</span><span class="w"> </span><span class="na">radius=</span><span class="s">&quot;0.001&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-26-6"><a id="__codelineno-26-6" name="__codelineno-26-6" href="#__codelineno-26-6"></a><span class="w">            </span><span class="nt">&lt;/geometry&gt;</span>
</span><span id="__span-26-7"><a id="__codelineno-26-7" name="__codelineno-26-7" href="#__codelineno-26-7"></a><span class="w">        </span><span class="nt">&lt;/visual&gt;</span>
</span><span id="__span-26-8"><a id="__codelineno-26-8" name="__codelineno-26-8" href="#__codelineno-26-8"></a><span class="w">    </span><span class="nt">&lt;/link&gt;</span>
</span><span id="__span-26-9"><a id="__codelineno-26-9" name="__codelineno-26-9" href="#__codelineno-26-9"></a>
</span><span id="__span-26-10"><a id="__codelineno-26-10" name="__codelineno-26-10" href="#__codelineno-26-10"></a><span class="w">    </span><span class="nt">&lt;joint</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;base_link2base_footprint&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;fixed&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-26-11"><a id="__codelineno-26-11" name="__codelineno-26-11" href="#__codelineno-26-11"></a><span class="w">        </span><span class="nt">&lt;parent</span><span class="w"> </span><span class="na">link=</span><span class="s">&quot;base_footprint&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-26-12"><a id="__codelineno-26-12" name="__codelineno-26-12" href="#__codelineno-26-12"></a><span class="w">        </span><span class="nt">&lt;child</span><span class="w"> </span><span class="na">link=</span><span class="s">&quot;base_link&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-26-13"><a id="__codelineno-26-13" name="__codelineno-26-13" href="#__codelineno-26-13"></a><span class="w">        </span><span class="nt">&lt;origin</span><span class="w"> </span><span class="na">xyz=</span><span class="s">&quot;0 0 0.085&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-26-14"><a id="__codelineno-26-14" name="__codelineno-26-14" href="#__codelineno-26-14"></a><span class="w">    </span><span class="nt">&lt;/joint&gt;</span>
</span><span id="__span-26-15"><a id="__codelineno-26-15" name="__codelineno-26-15" href="#__codelineno-26-15"></a>
</span><span id="__span-26-16"><a id="__codelineno-26-16" name="__codelineno-26-16" href="#__codelineno-26-16"></a><span class="w">    </span><span class="nt">&lt;link</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;base_link&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-26-17"><a id="__codelineno-26-17" name="__codelineno-26-17" href="#__codelineno-26-17"></a><span class="w">        </span><span class="nt">&lt;visual&gt;</span>
</span><span id="__span-26-18"><a id="__codelineno-26-18" name="__codelineno-26-18" href="#__codelineno-26-18"></a><span class="w">            </span><span class="nt">&lt;geometry&gt;</span>
</span><span id="__span-26-19"><a id="__codelineno-26-19" name="__codelineno-26-19" href="#__codelineno-26-19"></a><span class="w">                </span><span class="nt">&lt;cylinder</span><span class="w"> </span><span class="na">radius=</span><span class="s">&quot;0.1&quot;</span><span class="w"> </span><span class="na">length=</span><span class="s">&quot;0.15&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-26-20"><a id="__codelineno-26-20" name="__codelineno-26-20" href="#__codelineno-26-20"></a><span class="w">            </span><span class="nt">&lt;/geometry&gt;</span>
</span><span id="__span-26-21"><a id="__codelineno-26-21" name="__codelineno-26-21" href="#__codelineno-26-21"></a><span class="w">            </span><span class="nt">&lt;material</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;red&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-26-22"><a id="__codelineno-26-22" name="__codelineno-26-22" href="#__codelineno-26-22"></a><span class="w">                </span><span class="nt">&lt;color</span><span class="w"> </span><span class="na">rgba=</span><span class="s">&quot;1 0 0 0.5&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-26-23"><a id="__codelineno-26-23" name="__codelineno-26-23" href="#__codelineno-26-23"></a><span class="w">            </span><span class="nt">&lt;/material&gt;</span>
</span><span id="__span-26-24"><a id="__codelineno-26-24" name="__codelineno-26-24" href="#__codelineno-26-24"></a><span class="w">        </span><span class="nt">&lt;/visual&gt;</span>
</span><span id="__span-26-25"><a id="__codelineno-26-25" name="__codelineno-26-25" href="#__codelineno-26-25"></a><span class="w">    </span><span class="nt">&lt;/link&gt;</span>
</span><span id="__span-26-26"><a id="__codelineno-26-26" name="__codelineno-26-26" href="#__codelineno-26-26"></a>
</span><span id="__span-26-27"><a id="__codelineno-26-27" name="__codelineno-26-27" href="#__codelineno-26-27"></a><span class="w">    </span><span class="nt">&lt;link</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;left_wheel&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-26-28"><a id="__codelineno-26-28" name="__codelineno-26-28" href="#__codelineno-26-28"></a><span class="w">        </span><span class="nt">&lt;visual&gt;</span>
</span><span id="__span-26-29"><a id="__codelineno-26-29" name="__codelineno-26-29" href="#__codelineno-26-29"></a><span class="w">            </span><span class="nt">&lt;geometry&gt;</span>
</span><span id="__span-26-30"><a id="__codelineno-26-30" name="__codelineno-26-30" href="#__codelineno-26-30"></a><span class="w">                </span><span class="nt">&lt;cylinder</span><span class="w"> </span><span class="na">radius=</span><span class="s">&quot;0.03&quot;</span><span class="w"> </span><span class="na">length=</span><span class="s">&quot;0.015&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-26-31"><a id="__codelineno-26-31" name="__codelineno-26-31" href="#__codelineno-26-31"></a><span class="w">            </span><span class="nt">&lt;/geometry&gt;</span>
</span><span id="__span-26-32"><a id="__codelineno-26-32" name="__codelineno-26-32" href="#__codelineno-26-32"></a><span class="w">            </span><span class="nt">&lt;origin</span><span class="w"> </span><span class="na">xyz=</span><span class="s">&quot;0 0 0&quot;</span><span class="w"> </span><span class="na">rpy=</span><span class="s">&quot;1.5708 0 0&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-26-33"><a id="__codelineno-26-33" name="__codelineno-26-33" href="#__codelineno-26-33"></a><span class="w">            </span><span class="nt">&lt;material</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;black&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-26-34"><a id="__codelineno-26-34" name="__codelineno-26-34" href="#__codelineno-26-34"></a><span class="w">                </span><span class="nt">&lt;color</span><span class="w"> </span><span class="na">rgba=</span><span class="s">&quot;0 0 0 1&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-26-35"><a id="__codelineno-26-35" name="__codelineno-26-35" href="#__codelineno-26-35"></a><span class="w">            </span><span class="nt">&lt;/material&gt;</span>
</span><span id="__span-26-36"><a id="__codelineno-26-36" name="__codelineno-26-36" href="#__codelineno-26-36"></a><span class="w">        </span><span class="nt">&lt;/visual&gt;</span>
</span><span id="__span-26-37"><a id="__codelineno-26-37" name="__codelineno-26-37" href="#__codelineno-26-37"></a><span class="w">    </span><span class="nt">&lt;/link&gt;</span>
</span><span id="__span-26-38"><a id="__codelineno-26-38" name="__codelineno-26-38" href="#__codelineno-26-38"></a>
</span><span id="__span-26-39"><a id="__codelineno-26-39" name="__codelineno-26-39" href="#__codelineno-26-39"></a><span class="w">    </span><span class="nt">&lt;joint</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;left_wheel2base_link&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;continuous&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-26-40"><a id="__codelineno-26-40" name="__codelineno-26-40" href="#__codelineno-26-40"></a><span class="w">        </span><span class="nt">&lt;parent</span><span class="w"> </span><span class="na">link=</span><span class="s">&quot;base_link&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-26-41"><a id="__codelineno-26-41" name="__codelineno-26-41" href="#__codelineno-26-41"></a><span class="w">        </span><span class="nt">&lt;child</span><span class="w"> </span><span class="na">link=</span><span class="s">&quot;left_wheel&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-26-42"><a id="__codelineno-26-42" name="__codelineno-26-42" href="#__codelineno-26-42"></a><span class="w">        </span><span class="nt">&lt;origin</span><span class="w"> </span><span class="na">xyz=</span><span class="s">&quot;0 0.1 -0.055&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-26-43"><a id="__codelineno-26-43" name="__codelineno-26-43" href="#__codelineno-26-43"></a><span class="w">        </span><span class="nt">&lt;axis</span><span class="w"> </span><span class="na">xyz=</span><span class="s">&quot;0 1 0&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-26-44"><a id="__codelineno-26-44" name="__codelineno-26-44" href="#__codelineno-26-44"></a><span class="w">    </span><span class="nt">&lt;/joint&gt;</span>
</span><span id="__span-26-45"><a id="__codelineno-26-45" name="__codelineno-26-45" href="#__codelineno-26-45"></a>
</span><span id="__span-26-46"><a id="__codelineno-26-46" name="__codelineno-26-46" href="#__codelineno-26-46"></a><span class="w">    </span><span class="nt">&lt;link</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;right_wheel&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-26-47"><a id="__codelineno-26-47" name="__codelineno-26-47" href="#__codelineno-26-47"></a><span class="w">        </span><span class="nt">&lt;visual&gt;</span>
</span><span id="__span-26-48"><a id="__codelineno-26-48" name="__codelineno-26-48" href="#__codelineno-26-48"></a><span class="w">            </span><span class="nt">&lt;geometry&gt;</span>
</span><span id="__span-26-49"><a id="__codelineno-26-49" name="__codelineno-26-49" href="#__codelineno-26-49"></a><span class="w">                </span><span class="nt">&lt;cylinder</span><span class="w"> </span><span class="na">radius=</span><span class="s">&quot;0.03&quot;</span><span class="w"> </span><span class="na">length=</span><span class="s">&quot;0.015&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-26-50"><a id="__codelineno-26-50" name="__codelineno-26-50" href="#__codelineno-26-50"></a><span class="w">            </span><span class="nt">&lt;/geometry&gt;</span>
</span><span id="__span-26-51"><a id="__codelineno-26-51" name="__codelineno-26-51" href="#__codelineno-26-51"></a><span class="w">            </span><span class="nt">&lt;origin</span><span class="w"> </span><span class="na">xyz=</span><span class="s">&quot;0 0 0&quot;</span><span class="w"> </span><span class="na">rpy=</span><span class="s">&quot;1.5708 0 0&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-26-52"><a id="__codelineno-26-52" name="__codelineno-26-52" href="#__codelineno-26-52"></a><span class="w">            </span><span class="nt">&lt;material</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;black&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-26-53"><a id="__codelineno-26-53" name="__codelineno-26-53" href="#__codelineno-26-53"></a><span class="w">                </span><span class="nt">&lt;color</span><span class="w"> </span><span class="na">rgba=</span><span class="s">&quot;0 0 0 1&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-26-54"><a id="__codelineno-26-54" name="__codelineno-26-54" href="#__codelineno-26-54"></a><span class="w">            </span><span class="nt">&lt;/material&gt;</span>
</span><span id="__span-26-55"><a id="__codelineno-26-55" name="__codelineno-26-55" href="#__codelineno-26-55"></a><span class="w">        </span><span class="nt">&lt;/visual&gt;</span>
</span><span id="__span-26-56"><a id="__codelineno-26-56" name="__codelineno-26-56" href="#__codelineno-26-56"></a><span class="w">    </span><span class="nt">&lt;/link&gt;</span>
</span><span id="__span-26-57"><a id="__codelineno-26-57" name="__codelineno-26-57" href="#__codelineno-26-57"></a>
</span><span id="__span-26-58"><a id="__codelineno-26-58" name="__codelineno-26-58" href="#__codelineno-26-58"></a><span class="w">    </span><span class="nt">&lt;joint</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;right_wheel2base_link&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;continuous&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-26-59"><a id="__codelineno-26-59" name="__codelineno-26-59" href="#__codelineno-26-59"></a><span class="w">        </span><span class="nt">&lt;parent</span><span class="w"> </span><span class="na">link=</span><span class="s">&quot;base_link&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-26-60"><a id="__codelineno-26-60" name="__codelineno-26-60" href="#__codelineno-26-60"></a><span class="w">        </span><span class="nt">&lt;child</span><span class="w"> </span><span class="na">link=</span><span class="s">&quot;right_wheel&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-26-61"><a id="__codelineno-26-61" name="__codelineno-26-61" href="#__codelineno-26-61"></a><span class="w">        </span><span class="nt">&lt;origin</span><span class="w"> </span><span class="na">xyz=</span><span class="s">&quot;0 -0.1 -0.055&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-26-62"><a id="__codelineno-26-62" name="__codelineno-26-62" href="#__codelineno-26-62"></a><span class="w">        </span><span class="nt">&lt;axis</span><span class="w"> </span><span class="na">xyz=</span><span class="s">&quot;0 1 0&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-26-63"><a id="__codelineno-26-63" name="__codelineno-26-63" href="#__codelineno-26-63"></a><span class="w">    </span><span class="nt">&lt;/joint&gt;</span>
</span><span id="__span-26-64"><a id="__codelineno-26-64" name="__codelineno-26-64" href="#__codelineno-26-64"></a>
</span><span id="__span-26-65"><a id="__codelineno-26-65" name="__codelineno-26-65" href="#__codelineno-26-65"></a><span class="w">    </span><span class="nt">&lt;link</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;front_wheel&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-26-66"><a id="__codelineno-26-66" name="__codelineno-26-66" href="#__codelineno-26-66"></a><span class="w">        </span><span class="nt">&lt;visual&gt;</span>
</span><span id="__span-26-67"><a id="__codelineno-26-67" name="__codelineno-26-67" href="#__codelineno-26-67"></a><span class="w">            </span><span class="nt">&lt;geometry&gt;</span>
</span><span id="__span-26-68"><a id="__codelineno-26-68" name="__codelineno-26-68" href="#__codelineno-26-68"></a><span class="w">                </span><span class="nt">&lt;sphere</span><span class="w"> </span><span class="na">radius=</span><span class="s">&quot;0.01&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-26-69"><a id="__codelineno-26-69" name="__codelineno-26-69" href="#__codelineno-26-69"></a><span class="w">            </span><span class="nt">&lt;/geometry&gt;</span>
</span><span id="__span-26-70"><a id="__codelineno-26-70" name="__codelineno-26-70" href="#__codelineno-26-70"></a><span class="w">            </span><span class="nt">&lt;material</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;white&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-26-71"><a id="__codelineno-26-71" name="__codelineno-26-71" href="#__codelineno-26-71"></a><span class="w">                </span><span class="nt">&lt;color</span><span class="w"> </span><span class="na">rgba=</span><span class="s">&quot;1 1 1 1&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-26-72"><a id="__codelineno-26-72" name="__codelineno-26-72" href="#__codelineno-26-72"></a><span class="w">            </span><span class="nt">&lt;/material&gt;</span>
</span><span id="__span-26-73"><a id="__codelineno-26-73" name="__codelineno-26-73" href="#__codelineno-26-73"></a><span class="w">        </span><span class="nt">&lt;/visual&gt;</span>
</span><span id="__span-26-74"><a id="__codelineno-26-74" name="__codelineno-26-74" href="#__codelineno-26-74"></a><span class="w">    </span><span class="nt">&lt;/link&gt;</span>
</span><span id="__span-26-75"><a id="__codelineno-26-75" name="__codelineno-26-75" href="#__codelineno-26-75"></a>
</span><span id="__span-26-76"><a id="__codelineno-26-76" name="__codelineno-26-76" href="#__codelineno-26-76"></a><span class="w">    </span><span class="nt">&lt;joint</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;front_wheel2base_link&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;continuous&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-26-77"><a id="__codelineno-26-77" name="__codelineno-26-77" href="#__codelineno-26-77"></a><span class="w">        </span><span class="nt">&lt;parent</span><span class="w"> </span><span class="na">link=</span><span class="s">&quot;base_link&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-26-78"><a id="__codelineno-26-78" name="__codelineno-26-78" href="#__codelineno-26-78"></a><span class="w">        </span><span class="nt">&lt;child</span><span class="w"> </span><span class="na">link=</span><span class="s">&quot;front_wheel&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-26-79"><a id="__codelineno-26-79" name="__codelineno-26-79" href="#__codelineno-26-79"></a><span class="w">        </span><span class="nt">&lt;origin</span><span class="w"> </span><span class="na">xyz=</span><span class="s">&quot;0.08 0 -0.075&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-26-80"><a id="__codelineno-26-80" name="__codelineno-26-80" href="#__codelineno-26-80"></a><span class="w">        </span><span class="nt">&lt;axis</span><span class="w"> </span><span class="na">xyz=</span><span class="s">&quot;1 1 1&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-26-81"><a id="__codelineno-26-81" name="__codelineno-26-81" href="#__codelineno-26-81"></a><span class="w">    </span><span class="nt">&lt;/joint&gt;</span>
</span><span id="__span-26-82"><a id="__codelineno-26-82" name="__codelineno-26-82" href="#__codelineno-26-82"></a>
</span><span id="__span-26-83"><a id="__codelineno-26-83" name="__codelineno-26-83" href="#__codelineno-26-83"></a><span class="w">    </span><span class="nt">&lt;link</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;back_wheel&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-26-84"><a id="__codelineno-26-84" name="__codelineno-26-84" href="#__codelineno-26-84"></a><span class="w">        </span><span class="nt">&lt;visual&gt;</span>
</span><span id="__span-26-85"><a id="__codelineno-26-85" name="__codelineno-26-85" href="#__codelineno-26-85"></a><span class="w">            </span><span class="nt">&lt;geometry&gt;</span>
</span><span id="__span-26-86"><a id="__codelineno-26-86" name="__codelineno-26-86" href="#__codelineno-26-86"></a><span class="w">                </span><span class="nt">&lt;sphere</span><span class="w"> </span><span class="na">radius=</span><span class="s">&quot;0.01&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-26-87"><a id="__codelineno-26-87" name="__codelineno-26-87" href="#__codelineno-26-87"></a><span class="w">            </span><span class="nt">&lt;/geometry&gt;</span>
</span><span id="__span-26-88"><a id="__codelineno-26-88" name="__codelineno-26-88" href="#__codelineno-26-88"></a><span class="w">            </span><span class="nt">&lt;material</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;white&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-26-89"><a id="__codelineno-26-89" name="__codelineno-26-89" href="#__codelineno-26-89"></a><span class="w">                </span><span class="nt">&lt;color</span><span class="w"> </span><span class="na">rgba=</span><span class="s">&quot;1 1 1 1&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-26-90"><a id="__codelineno-26-90" name="__codelineno-26-90" href="#__codelineno-26-90"></a><span class="w">            </span><span class="nt">&lt;/material&gt;</span>
</span><span id="__span-26-91"><a id="__codelineno-26-91" name="__codelineno-26-91" href="#__codelineno-26-91"></a><span class="w">        </span><span class="nt">&lt;/visual&gt;</span>
</span><span id="__span-26-92"><a id="__codelineno-26-92" name="__codelineno-26-92" href="#__codelineno-26-92"></a><span class="w">    </span><span class="nt">&lt;/link&gt;</span>
</span><span id="__span-26-93"><a id="__codelineno-26-93" name="__codelineno-26-93" href="#__codelineno-26-93"></a>
</span><span id="__span-26-94"><a id="__codelineno-26-94" name="__codelineno-26-94" href="#__codelineno-26-94"></a><span class="w">    </span><span class="nt">&lt;joint</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;back_wheel2base_link&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;continuous&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-26-95"><a id="__codelineno-26-95" name="__codelineno-26-95" href="#__codelineno-26-95"></a><span class="w">        </span><span class="nt">&lt;parent</span><span class="w"> </span><span class="na">link=</span><span class="s">&quot;base_link&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-26-96"><a id="__codelineno-26-96" name="__codelineno-26-96" href="#__codelineno-26-96"></a><span class="w">        </span><span class="nt">&lt;child</span><span class="w"> </span><span class="na">link=</span><span class="s">&quot;back_wheel&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-26-97"><a id="__codelineno-26-97" name="__codelineno-26-97" href="#__codelineno-26-97"></a><span class="w">        </span><span class="nt">&lt;origin</span><span class="w"> </span><span class="na">xyz=</span><span class="s">&quot;-0.08 0 -0.075&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-26-98"><a id="__codelineno-26-98" name="__codelineno-26-98" href="#__codelineno-26-98"></a><span class="w">        </span><span class="nt">&lt;axis</span><span class="w"> </span><span class="na">xyz=</span><span class="s">&quot;1 1 1&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-26-99"><a id="__codelineno-26-99" name="__codelineno-26-99" href="#__codelineno-26-99"></a><span class="w">    </span><span class="nt">&lt;/joint&gt;</span>
</span><span id="__span-26-100"><a id="__codelineno-26-100" name="__codelineno-26-100" href="#__codelineno-26-100"></a>
</span><span id="__span-26-101"><a id="__codelineno-26-101" name="__codelineno-26-101" href="#__codelineno-26-101"></a><span class="w">    </span><span class="nt">&lt;link</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;camera&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-26-102"><a id="__codelineno-26-102" name="__codelineno-26-102" href="#__codelineno-26-102"></a><span class="w">        </span><span class="nt">&lt;visual&gt;</span>
</span><span id="__span-26-103"><a id="__codelineno-26-103" name="__codelineno-26-103" href="#__codelineno-26-103"></a><span class="w">            </span><span class="nt">&lt;geometry&gt;</span>
</span><span id="__span-26-104"><a id="__codelineno-26-104" name="__codelineno-26-104" href="#__codelineno-26-104"></a><span class="w">                </span><span class="nt">&lt;box</span><span class="w"> </span><span class="na">size=</span><span class="s">&quot;0.01 0.03 0.03&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-26-105"><a id="__codelineno-26-105" name="__codelineno-26-105" href="#__codelineno-26-105"></a><span class="w">            </span><span class="nt">&lt;/geometry&gt;</span>
</span><span id="__span-26-106"><a id="__codelineno-26-106" name="__codelineno-26-106" href="#__codelineno-26-106"></a><span class="w">            </span><span class="nt">&lt;material</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;blue&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-26-107"><a id="__codelineno-26-107" name="__codelineno-26-107" href="#__codelineno-26-107"></a><span class="w">                </span><span class="nt">&lt;color</span><span class="w"> </span><span class="na">rgba=</span><span class="s">&quot;0 0 1 1&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-26-108"><a id="__codelineno-26-108" name="__codelineno-26-108" href="#__codelineno-26-108"></a><span class="w">            </span><span class="nt">&lt;/material&gt;</span>
</span><span id="__span-26-109"><a id="__codelineno-26-109" name="__codelineno-26-109" href="#__codelineno-26-109"></a><span class="w">        </span><span class="nt">&lt;/visual&gt;</span>
</span><span id="__span-26-110"><a id="__codelineno-26-110" name="__codelineno-26-110" href="#__codelineno-26-110"></a><span class="w">    </span><span class="nt">&lt;/link&gt;</span>
</span><span id="__span-26-111"><a id="__codelineno-26-111" name="__codelineno-26-111" href="#__codelineno-26-111"></a>
</span><span id="__span-26-112"><a id="__codelineno-26-112" name="__codelineno-26-112" href="#__codelineno-26-112"></a><span class="w">    </span><span class="nt">&lt;joint</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;camera2base_link&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;fixed&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-26-113"><a id="__codelineno-26-113" name="__codelineno-26-113" href="#__codelineno-26-113"></a><span class="w">        </span><span class="nt">&lt;parent</span><span class="w"> </span><span class="na">link=</span><span class="s">&quot;base_link&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-26-114"><a id="__codelineno-26-114" name="__codelineno-26-114" href="#__codelineno-26-114"></a><span class="w">        </span><span class="nt">&lt;child</span><span class="w"> </span><span class="na">link=</span><span class="s">&quot;camera&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-26-115"><a id="__codelineno-26-115" name="__codelineno-26-115" href="#__codelineno-26-115"></a><span class="w">        </span><span class="nt">&lt;origin</span><span class="w"> </span><span class="na">xyz=</span><span class="s">&quot;0.1 0 0&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-26-116"><a id="__codelineno-26-116" name="__codelineno-26-116" href="#__codelineno-26-116"></a><span class="w">    </span><span class="nt">&lt;/joint&gt;</span><span class="w"> </span>
</span><span id="__span-26-117"><a id="__codelineno-26-117" name="__codelineno-26-117" href="#__codelineno-26-117"></a>
</span><span id="__span-26-118"><a id="__codelineno-26-118" name="__codelineno-26-118" href="#__codelineno-26-118"></a><span class="w">    </span><span class="nt">&lt;link</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;laser&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-26-119"><a id="__codelineno-26-119" name="__codelineno-26-119" href="#__codelineno-26-119"></a><span class="w">        </span><span class="nt">&lt;visual&gt;</span>
</span><span id="__span-26-120"><a id="__codelineno-26-120" name="__codelineno-26-120" href="#__codelineno-26-120"></a><span class="w">            </span><span class="nt">&lt;geometry&gt;</span>
</span><span id="__span-26-121"><a id="__codelineno-26-121" name="__codelineno-26-121" href="#__codelineno-26-121"></a><span class="w">                </span><span class="nt">&lt;cylinder</span><span class="w"> </span><span class="na">radius=</span><span class="s">&quot;0.02&quot;</span><span class="w"> </span><span class="na">length=</span><span class="s">&quot;0.01&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-26-122"><a id="__codelineno-26-122" name="__codelineno-26-122" href="#__codelineno-26-122"></a><span class="w">            </span><span class="nt">&lt;/geometry&gt;</span>
</span><span id="__span-26-123"><a id="__codelineno-26-123" name="__codelineno-26-123" href="#__codelineno-26-123"></a><span class="w">            </span><span class="nt">&lt;material</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;blue&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-26-124"><a id="__codelineno-26-124" name="__codelineno-26-124" href="#__codelineno-26-124"></a><span class="w">                </span><span class="nt">&lt;color</span><span class="w"> </span><span class="na">rgba=</span><span class="s">&quot;0 0 1 1&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-26-125"><a id="__codelineno-26-125" name="__codelineno-26-125" href="#__codelineno-26-125"></a><span class="w">            </span><span class="nt">&lt;/material&gt;</span>
</span><span id="__span-26-126"><a id="__codelineno-26-126" name="__codelineno-26-126" href="#__codelineno-26-126"></a><span class="w">        </span><span class="nt">&lt;/visual&gt;</span>
</span><span id="__span-26-127"><a id="__codelineno-26-127" name="__codelineno-26-127" href="#__codelineno-26-127"></a><span class="w">    </span><span class="nt">&lt;/link&gt;</span>
</span><span id="__span-26-128"><a id="__codelineno-26-128" name="__codelineno-26-128" href="#__codelineno-26-128"></a>
</span><span id="__span-26-129"><a id="__codelineno-26-129" name="__codelineno-26-129" href="#__codelineno-26-129"></a><span class="w">    </span><span class="nt">&lt;joint</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;laser2base_link&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;fixed&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-26-130"><a id="__codelineno-26-130" name="__codelineno-26-130" href="#__codelineno-26-130"></a><span class="w">        </span><span class="nt">&lt;parent</span><span class="w"> </span><span class="na">link=</span><span class="s">&quot;base_link&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-26-131"><a id="__codelineno-26-131" name="__codelineno-26-131" href="#__codelineno-26-131"></a><span class="w">        </span><span class="nt">&lt;child</span><span class="w"> </span><span class="na">link=</span><span class="s">&quot;laser&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-26-132"><a id="__codelineno-26-132" name="__codelineno-26-132" href="#__codelineno-26-132"></a><span class="w">        </span><span class="nt">&lt;origin</span><span class="w"> </span><span class="na">xyz=</span><span class="s">&quot;0 0 0.08&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-26-133"><a id="__codelineno-26-133" name="__codelineno-26-133" href="#__codelineno-26-133"></a><span class="w">    </span><span class="nt">&lt;/joint&gt;</span><span class="w"> </span>
</span><span id="__span-26-134"><a id="__codelineno-26-134" name="__codelineno-26-134" href="#__codelineno-26-134"></a>
</span><span id="__span-26-135"><a id="__codelineno-26-135" name="__codelineno-26-135" href="#__codelineno-26-135"></a><span class="nt">&lt;/robot&gt;</span>
</span></code></pre></div>
<ol>
<li>新建launch文件启动rviz并加载机器人模型</li>
</ol>
<div class="language-shell highlight"><pre><span></span><code><span id="__span-27-1"><a id="__codelineno-27-1" name="__codelineno-27-1" href="#__codelineno-27-1"></a>vkrobot@vkrobot:~/catkin_ws/src$<span class="w"> </span>mkdir<span class="w"> </span>learning_urdf/launch
</span><span id="__span-27-2"><a id="__codelineno-27-2" name="__codelineno-27-2" href="#__codelineno-27-2"></a>vkrobot@vkrobot:~/catkin_ws/src$<span class="w"> </span>touch<span class="w"> </span>learning_urdf/launch/start.launch
</span></code></pre></div>
<p><code>start.launch</code></p>
<div class="language-xml highlight"><pre><span></span><code><span id="__span-28-1"><a id="__codelineno-28-1" name="__codelineno-28-1" href="#__codelineno-28-1"></a><span class="nt">&lt;launch&gt;</span>
</span><span id="__span-28-2"><a id="__codelineno-28-2" name="__codelineno-28-2" href="#__codelineno-28-2"></a><span class="w">    </span><span class="cm">&lt;!-- 加载机器人模型 --&gt;</span>
</span><span id="__span-28-3"><a id="__codelineno-28-3" name="__codelineno-28-3" href="#__codelineno-28-3"></a><span class="w">    </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;robot_description&quot;</span><span class="w"> </span><span class="na">textfile=</span><span class="s">&quot;$(find learning_urdf)/urdf/my_car.urdf&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-28-4"><a id="__codelineno-28-4" name="__codelineno-28-4" href="#__codelineno-28-4"></a>
</span><span id="__span-28-5"><a id="__codelineno-28-5" name="__codelineno-28-5" href="#__codelineno-28-5"></a><span class="w">    </span><span class="cm">&lt;!-- 启动rviz --&gt;</span>
</span><span id="__span-28-6"><a id="__codelineno-28-6" name="__codelineno-28-6" href="#__codelineno-28-6"></a><span class="w">    </span><span class="nt">&lt;node</span><span class="w"> </span><span class="na">pkg=</span><span class="s">&quot;rviz&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;rviz&quot;</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;rviz&quot;</span><span class="w"> </span><span class="na">args=</span><span class="s">&quot;-d $(find learning_urdf)/config/my_car.rviz&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-28-7"><a id="__codelineno-28-7" name="__codelineno-28-7" href="#__codelineno-28-7"></a>
</span><span id="__span-28-8"><a id="__codelineno-28-8" name="__codelineno-28-8" href="#__codelineno-28-8"></a><span class="w">    </span><span class="cm">&lt;!-- 启动机器人状态发布节点与关节状态发布节点，发布TF --&gt;</span>
</span><span id="__span-28-9"><a id="__codelineno-28-9" name="__codelineno-28-9" href="#__codelineno-28-9"></a><span class="w">    </span><span class="nt">&lt;node</span><span class="w"> </span><span class="na">pkg=</span><span class="s">&quot;robot_state_publisher&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;robot_state_publisher&quot;</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;robot_state_publisher&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-28-10"><a id="__codelineno-28-10" name="__codelineno-28-10" href="#__codelineno-28-10"></a><span class="w">    </span><span class="nt">&lt;node</span><span class="w"> </span><span class="na">pkg=</span><span class="s">&quot;joint_state_publisher&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;joint_state_publisher&quot;</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;joint_state_publisher&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-28-11"><a id="__codelineno-28-11" name="__codelineno-28-11" href="#__codelineno-28-11"></a>
</span><span id="__span-28-12"><a id="__codelineno-28-12" name="__codelineno-28-12" href="#__codelineno-28-12"></a><span class="nt">&lt;/launch&gt;</span>
</span></code></pre></div>
<h3 id="414-xacrourdf">4.1.4 使用xacro优化urdf文件</h3>
<h4 id="_4">概念</h4>
<p>Xacro 是 XML Macros 的缩写，是一种可编程的 XML 宏语言</p>
<h4 id="_5">原理</h4>
<p>Xacro 可以通过声明变量、封装固定逻辑的方式实现类似函数的功能，从而提高代码的复用率</p>
<ol>
<li>声明变量</li>
</ol>
<div class="language-xml highlight"><pre><span></span><code><span id="__span-29-1"><a id="__codelineno-29-1" name="__codelineno-29-1" href="#__codelineno-29-1"></a><span class="nt">&lt;robot</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;&quot;</span><span class="w"> </span><span class="na">xmlns=</span><span class="s">&quot;http://wiki.ros.org/xacro&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-29-2"><a id="__codelineno-29-2" name="__codelineno-29-2" href="#__codelineno-29-2"></a><span class="w">    </span><span class="nt">&lt;xacro:property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;变量名&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;变量值&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-29-3"><a id="__codelineno-29-3" name="__codelineno-29-3" href="#__codelineno-29-3"></a>
</span><span id="__span-29-4"><a id="__codelineno-29-4" name="__codelineno-29-4" href="#__codelineno-29-4"></a><span class="w">    </span><span class="cm">&lt;!-- 调用 --&gt;</span>
</span><span id="__span-29-5"><a id="__codelineno-29-5" name="__codelineno-29-5" href="#__codelineno-29-5"></a><span class="w">    </span>${变量名}
</span><span id="__span-29-6"><a id="__codelineno-29-6" name="__codelineno-29-6" href="#__codelineno-29-6"></a>
</span><span id="__span-29-7"><a id="__codelineno-29-7" name="__codelineno-29-7" href="#__codelineno-29-7"></a><span class="w">    </span><span class="cm">&lt;!-- 数学运算 --&gt;</span>
</span><span id="__span-29-8"><a id="__codelineno-29-8" name="__codelineno-29-8" href="#__codelineno-29-8"></a><span class="w">    </span>${数学表达式}
</span><span id="__span-29-9"><a id="__codelineno-29-9" name="__codelineno-29-9" href="#__codelineno-29-9"></a><span class="nt">&lt;/robot&gt;</span>
</span></code></pre></div>
<ol>
<li>封装宏</li>
</ol>
<div class="language-xml highlight"><pre><span></span><code><span id="__span-30-1"><a id="__codelineno-30-1" name="__codelineno-30-1" href="#__codelineno-30-1"></a><span class="nt">&lt;robot</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;&quot;</span><span class="w"> </span><span class="na">xmlns=</span><span class="s">&quot;http://wiki.ros.org/xacro&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-30-2"><a id="__codelineno-30-2" name="__codelineno-30-2" href="#__codelineno-30-2"></a><span class="w">    </span><span class="nt">&lt;xacro:macro</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;宏名称&quot;</span><span class="w"> </span><span class="na">params=</span><span class="s">&quot;参数（多个参数之间用空格隔开）&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-30-3"><a id="__codelineno-30-3" name="__codelineno-30-3" href="#__codelineno-30-3"></a><span class="w">        </span>......
</span><span id="__span-30-4"><a id="__codelineno-30-4" name="__codelineno-30-4" href="#__codelineno-30-4"></a><span class="w">    </span><span class="nt">&lt;/xacro:macro&gt;</span>
</span><span id="__span-30-5"><a id="__codelineno-30-5" name="__codelineno-30-5" href="#__codelineno-30-5"></a>
</span><span id="__span-30-6"><a id="__codelineno-30-6" name="__codelineno-30-6" href="#__codelineno-30-6"></a><span class="w">    </span><span class="cm">&lt;!-- 调用 --&gt;</span>
</span><span id="__span-30-7"><a id="__codelineno-30-7" name="__codelineno-30-7" href="#__codelineno-30-7"></a><span class="w">    </span><span class="nt">&lt;xacro:宏名称</span><span class="w"> </span><span class="na">参数1=</span><span class="s">&quot;&quot;</span><span class="w"> </span><span class="na">参数2=</span><span class="s">&quot;&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-30-8"><a id="__codelineno-30-8" name="__codelineno-30-8" href="#__codelineno-30-8"></a><span class="nt">&lt;/robot&gt;</span>
</span></code></pre></div>
<ol>
<li>文件包含</li>
</ol>
<div class="language-xml highlight"><pre><span></span><code><span id="__span-31-1"><a id="__codelineno-31-1" name="__codelineno-31-1" href="#__codelineno-31-1"></a><span class="nt">&lt;robot</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;&quot;</span><span class="w"> </span><span class="na">xmlns=</span><span class="s">&quot;http://wiki.ros.org/xacro&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-31-2"><a id="__codelineno-31-2" name="__codelineno-31-2" href="#__codelineno-31-2"></a><span class="w">    </span><span class="nt">&lt;xacro:include</span><span class="w"> </span><span class="na">filename=</span><span class="s">&quot;xacro文件路径&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-31-3"><a id="__codelineno-31-3" name="__codelineno-31-3" href="#__codelineno-31-3"></a><span class="nt">&lt;/robot&gt;</span>
</span></code></pre></div>
<h4 id="urdf">优化URDF文件</h4>
<ol>
<li>新建各部分的xacro文件并整合</li>
</ol>
<div class="language-shell highlight"><pre><span></span><code><span id="__span-32-1"><a id="__codelineno-32-1" name="__codelineno-32-1" href="#__codelineno-32-1"></a>vkrobot@vkrobot:~/catkin_ws/src$<span class="w"> </span>touch<span class="w"> </span>learning_urdf/urdf/my_base.urdf.xacro
</span><span id="__span-32-2"><a id="__codelineno-32-2" name="__codelineno-32-2" href="#__codelineno-32-2"></a>vkrobot@vkrobot:~/catkin_ws/src$<span class="w"> </span>touch<span class="w"> </span>learning_urdf/urdf/my_camera.urdf.xacro
</span><span id="__span-32-3"><a id="__codelineno-32-3" name="__codelineno-32-3" href="#__codelineno-32-3"></a>vkrobot@vkrobot:~/catkin_ws/src$<span class="w"> </span>touch<span class="w"> </span>learning_urdf/urdf/my_laser.urdf.xacro
</span><span id="__span-32-4"><a id="__codelineno-32-4" name="__codelineno-32-4" href="#__codelineno-32-4"></a>vkrobot@vkrobot:~/catkin_ws/src$<span class="w"> </span>touch<span class="w"> </span>learning_urdf/urdf/my_car.urdf.xacro
</span></code></pre></div>
<p><code>my_base.urdf.xacro</code></p>
<div class="language-xml highlight"><pre><span></span><code><span id="__span-33-1"><a id="__codelineno-33-1" name="__codelineno-33-1" href="#__codelineno-33-1"></a><span class="nt">&lt;robot</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;my_car&quot;</span><span class="w"> </span><span class="na">xmlns:xacro=</span><span class="s">&quot;http://wiki.ros.org/xacro&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-33-2"><a id="__codelineno-33-2" name="__codelineno-33-2" href="#__codelineno-33-2"></a><span class="w">    </span><span class="nt">&lt;link</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;base_footprint&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-33-3"><a id="__codelineno-33-3" name="__codelineno-33-3" href="#__codelineno-33-3"></a><span class="w">        </span><span class="nt">&lt;visual&gt;</span>
</span><span id="__span-33-4"><a id="__codelineno-33-4" name="__codelineno-33-4" href="#__codelineno-33-4"></a><span class="w">            </span><span class="nt">&lt;geometry&gt;</span>
</span><span id="__span-33-5"><a id="__codelineno-33-5" name="__codelineno-33-5" href="#__codelineno-33-5"></a><span class="w">                </span><span class="nt">&lt;sphere</span><span class="w"> </span><span class="na">radius=</span><span class="s">&quot;0.001&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-33-6"><a id="__codelineno-33-6" name="__codelineno-33-6" href="#__codelineno-33-6"></a><span class="w">            </span><span class="nt">&lt;/geometry&gt;</span>
</span><span id="__span-33-7"><a id="__codelineno-33-7" name="__codelineno-33-7" href="#__codelineno-33-7"></a><span class="w">        </span><span class="nt">&lt;/visual&gt;</span>
</span><span id="__span-33-8"><a id="__codelineno-33-8" name="__codelineno-33-8" href="#__codelineno-33-8"></a><span class="w">    </span><span class="nt">&lt;/link&gt;</span>
</span><span id="__span-33-9"><a id="__codelineno-33-9" name="__codelineno-33-9" href="#__codelineno-33-9"></a>
</span><span id="__span-33-10"><a id="__codelineno-33-10" name="__codelineno-33-10" href="#__codelineno-33-10"></a><span class="w">    </span><span class="nt">&lt;xacro:property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;lidi&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;0.01&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-33-11"><a id="__codelineno-33-11" name="__codelineno-33-11" href="#__codelineno-33-11"></a><span class="w">    </span><span class="nt">&lt;xacro:property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;base_radius&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;0.1&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-33-12"><a id="__codelineno-33-12" name="__codelineno-33-12" href="#__codelineno-33-12"></a><span class="w">    </span><span class="nt">&lt;xacro:property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;base_length&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;0.15&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-33-13"><a id="__codelineno-33-13" name="__codelineno-33-13" href="#__codelineno-33-13"></a><span class="w">    </span><span class="nt">&lt;xacro:property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;wheel_radius&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;0.03&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-33-14"><a id="__codelineno-33-14" name="__codelineno-33-14" href="#__codelineno-33-14"></a><span class="w">    </span><span class="nt">&lt;xacro:property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;wheel_length&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;0.015&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-33-15"><a id="__codelineno-33-15" name="__codelineno-33-15" href="#__codelineno-33-15"></a><span class="w">    </span><span class="nt">&lt;xacro:property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;PI&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;3.1415927&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-33-16"><a id="__codelineno-33-16" name="__codelineno-33-16" href="#__codelineno-33-16"></a>
</span><span id="__span-33-17"><a id="__codelineno-33-17" name="__codelineno-33-17" href="#__codelineno-33-17"></a><span class="w">    </span><span class="nt">&lt;joint</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;base_link2base_footprint&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;fixed&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-33-18"><a id="__codelineno-33-18" name="__codelineno-33-18" href="#__codelineno-33-18"></a><span class="w">        </span><span class="nt">&lt;parent</span><span class="w"> </span><span class="na">link=</span><span class="s">&quot;base_footprint&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-33-19"><a id="__codelineno-33-19" name="__codelineno-33-19" href="#__codelineno-33-19"></a><span class="w">        </span><span class="nt">&lt;child</span><span class="w"> </span><span class="na">link=</span><span class="s">&quot;base_link&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-33-20"><a id="__codelineno-33-20" name="__codelineno-33-20" href="#__codelineno-33-20"></a><span class="w">        </span><span class="nt">&lt;origin</span><span class="w"> </span><span class="na">xyz=</span><span class="s">&quot;0 0 ${base_length/2+lidi}&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-33-21"><a id="__codelineno-33-21" name="__codelineno-33-21" href="#__codelineno-33-21"></a><span class="w">    </span><span class="nt">&lt;/joint&gt;</span>
</span><span id="__span-33-22"><a id="__codelineno-33-22" name="__codelineno-33-22" href="#__codelineno-33-22"></a>
</span><span id="__span-33-23"><a id="__codelineno-33-23" name="__codelineno-33-23" href="#__codelineno-33-23"></a><span class="w">    </span><span class="nt">&lt;link</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;base_link&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-33-24"><a id="__codelineno-33-24" name="__codelineno-33-24" href="#__codelineno-33-24"></a><span class="w">        </span><span class="nt">&lt;visual&gt;</span>
</span><span id="__span-33-25"><a id="__codelineno-33-25" name="__codelineno-33-25" href="#__codelineno-33-25"></a><span class="w">            </span><span class="nt">&lt;geometry&gt;</span>
</span><span id="__span-33-26"><a id="__codelineno-33-26" name="__codelineno-33-26" href="#__codelineno-33-26"></a><span class="w">                </span><span class="nt">&lt;cylinder</span><span class="w"> </span><span class="na">radius=</span><span class="s">&quot;${base_radius}&quot;</span><span class="w"> </span><span class="na">length=</span><span class="s">&quot;${base_length}&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-33-27"><a id="__codelineno-33-27" name="__codelineno-33-27" href="#__codelineno-33-27"></a><span class="w">            </span><span class="nt">&lt;/geometry&gt;</span>
</span><span id="__span-33-28"><a id="__codelineno-33-28" name="__codelineno-33-28" href="#__codelineno-33-28"></a><span class="w">            </span><span class="nt">&lt;material</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;red&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-33-29"><a id="__codelineno-33-29" name="__codelineno-33-29" href="#__codelineno-33-29"></a><span class="w">                </span><span class="nt">&lt;color</span><span class="w"> </span><span class="na">rgba=</span><span class="s">&quot;0 0 0 0.5&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-33-30"><a id="__codelineno-33-30" name="__codelineno-33-30" href="#__codelineno-33-30"></a><span class="w">            </span><span class="nt">&lt;/material&gt;</span>
</span><span id="__span-33-31"><a id="__codelineno-33-31" name="__codelineno-33-31" href="#__codelineno-33-31"></a><span class="w">        </span><span class="nt">&lt;/visual&gt;</span>
</span><span id="__span-33-32"><a id="__codelineno-33-32" name="__codelineno-33-32" href="#__codelineno-33-32"></a><span class="w">    </span><span class="nt">&lt;/link&gt;</span>
</span><span id="__span-33-33"><a id="__codelineno-33-33" name="__codelineno-33-33" href="#__codelineno-33-33"></a>
</span><span id="__span-33-34"><a id="__codelineno-33-34" name="__codelineno-33-34" href="#__codelineno-33-34"></a><span class="w">    </span><span class="nt">&lt;xacro:macro</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;wheel_func&quot;</span><span class="w"> </span><span class="na">params=</span><span class="s">&quot;wheel_name flag&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-33-35"><a id="__codelineno-33-35" name="__codelineno-33-35" href="#__codelineno-33-35"></a><span class="w">        </span><span class="nt">&lt;link</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;${wheel_name}_wheel&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-33-36"><a id="__codelineno-33-36" name="__codelineno-33-36" href="#__codelineno-33-36"></a><span class="w">            </span><span class="nt">&lt;visual&gt;</span>
</span><span id="__span-33-37"><a id="__codelineno-33-37" name="__codelineno-33-37" href="#__codelineno-33-37"></a><span class="w">                </span><span class="nt">&lt;geometry&gt;</span>
</span><span id="__span-33-38"><a id="__codelineno-33-38" name="__codelineno-33-38" href="#__codelineno-33-38"></a><span class="w">                    </span><span class="nt">&lt;cylinder</span><span class="w"> </span><span class="na">radius=</span><span class="s">&quot;${wheel_radius}&quot;</span><span class="w"> </span><span class="na">length=</span><span class="s">&quot;${wheel_length}&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-33-39"><a id="__codelineno-33-39" name="__codelineno-33-39" href="#__codelineno-33-39"></a><span class="w">                </span><span class="nt">&lt;/geometry&gt;</span>
</span><span id="__span-33-40"><a id="__codelineno-33-40" name="__codelineno-33-40" href="#__codelineno-33-40"></a><span class="w">                </span><span class="nt">&lt;origin</span><span class="w"> </span><span class="na">xyz=</span><span class="s">&quot;0 0 0&quot;</span><span class="w"> </span><span class="na">rpy=</span><span class="s">&quot;${PI/2} 0 0&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-33-41"><a id="__codelineno-33-41" name="__codelineno-33-41" href="#__codelineno-33-41"></a><span class="w">                </span><span class="nt">&lt;material</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;black&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-33-42"><a id="__codelineno-33-42" name="__codelineno-33-42" href="#__codelineno-33-42"></a><span class="w">                    </span><span class="nt">&lt;color</span><span class="w"> </span><span class="na">rgba=</span><span class="s">&quot;0 0 0 1&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-33-43"><a id="__codelineno-33-43" name="__codelineno-33-43" href="#__codelineno-33-43"></a><span class="w">                </span><span class="nt">&lt;/material&gt;</span>
</span><span id="__span-33-44"><a id="__codelineno-33-44" name="__codelineno-33-44" href="#__codelineno-33-44"></a><span class="w">            </span><span class="nt">&lt;/visual&gt;</span>
</span><span id="__span-33-45"><a id="__codelineno-33-45" name="__codelineno-33-45" href="#__codelineno-33-45"></a><span class="w">        </span><span class="nt">&lt;/link&gt;</span>
</span><span id="__span-33-46"><a id="__codelineno-33-46" name="__codelineno-33-46" href="#__codelineno-33-46"></a>
</span><span id="__span-33-47"><a id="__codelineno-33-47" name="__codelineno-33-47" href="#__codelineno-33-47"></a><span class="w">        </span><span class="nt">&lt;joint</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;${wheel_name}_wheel2base_link&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;continuous&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-33-48"><a id="__codelineno-33-48" name="__codelineno-33-48" href="#__codelineno-33-48"></a><span class="w">            </span><span class="nt">&lt;parent</span><span class="w"> </span><span class="na">link=</span><span class="s">&quot;base_link&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-33-49"><a id="__codelineno-33-49" name="__codelineno-33-49" href="#__codelineno-33-49"></a><span class="w">            </span><span class="nt">&lt;child</span><span class="w"> </span><span class="na">link=</span><span class="s">&quot;${wheel_name}_wheel&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-33-50"><a id="__codelineno-33-50" name="__codelineno-33-50" href="#__codelineno-33-50"></a><span class="w">            </span><span class="nt">&lt;origin</span><span class="w"> </span><span class="na">xyz=</span><span class="s">&quot;0 ${flag*base_radius} ${-(lidi+base_length/2-wheel_radius)}&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-33-51"><a id="__codelineno-33-51" name="__codelineno-33-51" href="#__codelineno-33-51"></a><span class="w">            </span><span class="nt">&lt;axis</span><span class="w"> </span><span class="na">xyz=</span><span class="s">&quot;0 1 0&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-33-52"><a id="__codelineno-33-52" name="__codelineno-33-52" href="#__codelineno-33-52"></a><span class="w">        </span><span class="nt">&lt;/joint&gt;</span>
</span><span id="__span-33-53"><a id="__codelineno-33-53" name="__codelineno-33-53" href="#__codelineno-33-53"></a><span class="w">    </span><span class="nt">&lt;/xacro:macro&gt;</span>
</span><span id="__span-33-54"><a id="__codelineno-33-54" name="__codelineno-33-54" href="#__codelineno-33-54"></a><span class="w">    </span><span class="nt">&lt;xacro:wheel_func</span><span class="w"> </span><span class="na">wheel_name=</span><span class="s">&quot;left&quot;</span><span class="w"> </span><span class="na">flag=</span><span class="s">&quot;1&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-33-55"><a id="__codelineno-33-55" name="__codelineno-33-55" href="#__codelineno-33-55"></a><span class="w">    </span><span class="nt">&lt;xacro:wheel_func</span><span class="w"> </span><span class="na">wheel_name=</span><span class="s">&quot;right&quot;</span><span class="w"> </span><span class="na">flag=</span><span class="s">&quot;-1&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-33-56"><a id="__codelineno-33-56" name="__codelineno-33-56" href="#__codelineno-33-56"></a>
</span><span id="__span-33-57"><a id="__codelineno-33-57" name="__codelineno-33-57" href="#__codelineno-33-57"></a><span class="w">    </span><span class="nt">&lt;xacro:property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;universal_wheel_radius&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;0.01&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-33-58"><a id="__codelineno-33-58" name="__codelineno-33-58" href="#__codelineno-33-58"></a>
</span><span id="__span-33-59"><a id="__codelineno-33-59" name="__codelineno-33-59" href="#__codelineno-33-59"></a><span class="w">    </span><span class="nt">&lt;xacro:macro</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;universal_wheel_func&quot;</span><span class="w"> </span><span class="na">params=</span><span class="s">&quot;wheel_name flag&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-33-60"><a id="__codelineno-33-60" name="__codelineno-33-60" href="#__codelineno-33-60"></a><span class="w">        </span><span class="nt">&lt;link</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;${wheel_name}_wheel&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-33-61"><a id="__codelineno-33-61" name="__codelineno-33-61" href="#__codelineno-33-61"></a><span class="w">            </span><span class="nt">&lt;visual&gt;</span>
</span><span id="__span-33-62"><a id="__codelineno-33-62" name="__codelineno-33-62" href="#__codelineno-33-62"></a><span class="w">                </span><span class="nt">&lt;geometry&gt;</span>
</span><span id="__span-33-63"><a id="__codelineno-33-63" name="__codelineno-33-63" href="#__codelineno-33-63"></a><span class="w">                    </span><span class="nt">&lt;sphere</span><span class="w"> </span><span class="na">radius=</span><span class="s">&quot;${universal_wheel_radius}&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-33-64"><a id="__codelineno-33-64" name="__codelineno-33-64" href="#__codelineno-33-64"></a><span class="w">                </span><span class="nt">&lt;/geometry&gt;</span>
</span><span id="__span-33-65"><a id="__codelineno-33-65" name="__codelineno-33-65" href="#__codelineno-33-65"></a><span class="w">                </span><span class="nt">&lt;material</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;white&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-33-66"><a id="__codelineno-33-66" name="__codelineno-33-66" href="#__codelineno-33-66"></a><span class="w">                    </span><span class="nt">&lt;color</span><span class="w"> </span><span class="na">rgba=</span><span class="s">&quot;1 1 1 1&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-33-67"><a id="__codelineno-33-67" name="__codelineno-33-67" href="#__codelineno-33-67"></a><span class="w">                </span><span class="nt">&lt;/material&gt;</span>
</span><span id="__span-33-68"><a id="__codelineno-33-68" name="__codelineno-33-68" href="#__codelineno-33-68"></a><span class="w">            </span><span class="nt">&lt;/visual&gt;</span>
</span><span id="__span-33-69"><a id="__codelineno-33-69" name="__codelineno-33-69" href="#__codelineno-33-69"></a><span class="w">        </span><span class="nt">&lt;/link&gt;</span>
</span><span id="__span-33-70"><a id="__codelineno-33-70" name="__codelineno-33-70" href="#__codelineno-33-70"></a>
</span><span id="__span-33-71"><a id="__codelineno-33-71" name="__codelineno-33-71" href="#__codelineno-33-71"></a><span class="w">        </span><span class="nt">&lt;joint</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;${wheel_name}_wheel2base_link&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;continuous&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-33-72"><a id="__codelineno-33-72" name="__codelineno-33-72" href="#__codelineno-33-72"></a><span class="w">            </span><span class="nt">&lt;parent</span><span class="w"> </span><span class="na">link=</span><span class="s">&quot;base_link&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-33-73"><a id="__codelineno-33-73" name="__codelineno-33-73" href="#__codelineno-33-73"></a><span class="w">            </span><span class="nt">&lt;child</span><span class="w"> </span><span class="na">link=</span><span class="s">&quot;${wheel_name}_wheel&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-33-74"><a id="__codelineno-33-74" name="__codelineno-33-74" href="#__codelineno-33-74"></a><span class="w">            </span><span class="nt">&lt;origin</span><span class="w"> </span><span class="na">xyz=</span><span class="s">&quot;${flag*(base_radius-0.02)} 0 ${-(base_length/2+lidi-universal_wheel_radius)}&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-33-75"><a id="__codelineno-33-75" name="__codelineno-33-75" href="#__codelineno-33-75"></a><span class="w">            </span><span class="nt">&lt;axis</span><span class="w"> </span><span class="na">xyz=</span><span class="s">&quot;1 1 1&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-33-76"><a id="__codelineno-33-76" name="__codelineno-33-76" href="#__codelineno-33-76"></a><span class="w">        </span><span class="nt">&lt;/joint&gt;</span>
</span><span id="__span-33-77"><a id="__codelineno-33-77" name="__codelineno-33-77" href="#__codelineno-33-77"></a><span class="w">    </span><span class="nt">&lt;/xacro:macro&gt;</span>
</span><span id="__span-33-78"><a id="__codelineno-33-78" name="__codelineno-33-78" href="#__codelineno-33-78"></a><span class="w">    </span><span class="nt">&lt;xacro:universal_wheel_func</span><span class="w"> </span><span class="na">wheel_name=</span><span class="s">&quot;front&quot;</span><span class="w"> </span><span class="na">flag=</span><span class="s">&quot;1&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-33-79"><a id="__codelineno-33-79" name="__codelineno-33-79" href="#__codelineno-33-79"></a><span class="w">    </span><span class="nt">&lt;xacro:universal_wheel_func</span><span class="w"> </span><span class="na">wheel_name=</span><span class="s">&quot;back&quot;</span><span class="w"> </span><span class="na">flag=</span><span class="s">&quot;-1&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-33-80"><a id="__codelineno-33-80" name="__codelineno-33-80" href="#__codelineno-33-80"></a>
</span><span id="__span-33-81"><a id="__codelineno-33-81" name="__codelineno-33-81" href="#__codelineno-33-81"></a><span class="nt">&lt;/robot&gt;</span>
</span></code></pre></div>
<p><code>my_camera.urdf.xacro</code></p>
<div class="language-xml highlight"><pre><span></span><code><span id="__span-34-1"><a id="__codelineno-34-1" name="__codelineno-34-1" href="#__codelineno-34-1"></a><span class="nt">&lt;robot</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;my_camera&quot;</span><span class="w"> </span><span class="na">xmlns:xacro=</span><span class="s">&quot;http://wiki.ros.org/xacro&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-34-2"><a id="__codelineno-34-2" name="__codelineno-34-2" href="#__codelineno-34-2"></a><span class="w">    </span><span class="nt">&lt;xacro:property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;camera_length&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;0.01&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-34-3"><a id="__codelineno-34-3" name="__codelineno-34-3" href="#__codelineno-34-3"></a><span class="w">    </span><span class="nt">&lt;xacro:property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;camera_width&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;0.03&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-34-4"><a id="__codelineno-34-4" name="__codelineno-34-4" href="#__codelineno-34-4"></a><span class="w">    </span><span class="nt">&lt;xacro:property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;camera_height&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;0.03&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-34-5"><a id="__codelineno-34-5" name="__codelineno-34-5" href="#__codelineno-34-5"></a><span class="w">    </span><span class="nt">&lt;xacro:property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;camera_x&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;${base_radius}&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-34-6"><a id="__codelineno-34-6" name="__codelineno-34-6" href="#__codelineno-34-6"></a><span class="w">    </span><span class="nt">&lt;xacro:property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;camera_y&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;0&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-34-7"><a id="__codelineno-34-7" name="__codelineno-34-7" href="#__codelineno-34-7"></a><span class="w">    </span><span class="nt">&lt;xacro:property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;camera_z&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;0&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-34-8"><a id="__codelineno-34-8" name="__codelineno-34-8" href="#__codelineno-34-8"></a>
</span><span id="__span-34-9"><a id="__codelineno-34-9" name="__codelineno-34-9" href="#__codelineno-34-9"></a><span class="w">    </span><span class="nt">&lt;link</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;camera&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-34-10"><a id="__codelineno-34-10" name="__codelineno-34-10" href="#__codelineno-34-10"></a><span class="w">        </span><span class="nt">&lt;visual&gt;</span>
</span><span id="__span-34-11"><a id="__codelineno-34-11" name="__codelineno-34-11" href="#__codelineno-34-11"></a><span class="w">            </span><span class="nt">&lt;geometry&gt;</span>
</span><span id="__span-34-12"><a id="__codelineno-34-12" name="__codelineno-34-12" href="#__codelineno-34-12"></a><span class="w">                </span><span class="nt">&lt;box</span><span class="w"> </span><span class="na">size=</span><span class="s">&quot;${camera_length} ${camera_width} ${camera_height}&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-34-13"><a id="__codelineno-34-13" name="__codelineno-34-13" href="#__codelineno-34-13"></a><span class="w">            </span><span class="nt">&lt;/geometry&gt;</span>
</span><span id="__span-34-14"><a id="__codelineno-34-14" name="__codelineno-34-14" href="#__codelineno-34-14"></a><span class="w">            </span><span class="nt">&lt;material</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;blue&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-34-15"><a id="__codelineno-34-15" name="__codelineno-34-15" href="#__codelineno-34-15"></a><span class="w">                </span><span class="nt">&lt;color</span><span class="w"> </span><span class="na">rgba=</span><span class="s">&quot;0 0 1 1&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-34-16"><a id="__codelineno-34-16" name="__codelineno-34-16" href="#__codelineno-34-16"></a><span class="w">            </span><span class="nt">&lt;/material&gt;</span>
</span><span id="__span-34-17"><a id="__codelineno-34-17" name="__codelineno-34-17" href="#__codelineno-34-17"></a><span class="w">        </span><span class="nt">&lt;/visual&gt;</span>
</span><span id="__span-34-18"><a id="__codelineno-34-18" name="__codelineno-34-18" href="#__codelineno-34-18"></a><span class="w">    </span><span class="nt">&lt;/link&gt;</span>
</span><span id="__span-34-19"><a id="__codelineno-34-19" name="__codelineno-34-19" href="#__codelineno-34-19"></a>
</span><span id="__span-34-20"><a id="__codelineno-34-20" name="__codelineno-34-20" href="#__codelineno-34-20"></a><span class="w">    </span><span class="nt">&lt;joint</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;camera2base_link&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;fixed&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-34-21"><a id="__codelineno-34-21" name="__codelineno-34-21" href="#__codelineno-34-21"></a><span class="w">        </span><span class="nt">&lt;parent</span><span class="w"> </span><span class="na">link=</span><span class="s">&quot;base_link&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-34-22"><a id="__codelineno-34-22" name="__codelineno-34-22" href="#__codelineno-34-22"></a><span class="w">        </span><span class="nt">&lt;child</span><span class="w"> </span><span class="na">link=</span><span class="s">&quot;camera&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-34-23"><a id="__codelineno-34-23" name="__codelineno-34-23" href="#__codelineno-34-23"></a><span class="w">        </span><span class="nt">&lt;origin</span><span class="w"> </span><span class="na">xyz=</span><span class="s">&quot;${camera_x} ${camera_y} ${camera_z}&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-34-24"><a id="__codelineno-34-24" name="__codelineno-34-24" href="#__codelineno-34-24"></a><span class="w">    </span><span class="nt">&lt;/joint&gt;</span>
</span><span id="__span-34-25"><a id="__codelineno-34-25" name="__codelineno-34-25" href="#__codelineno-34-25"></a><span class="nt">&lt;/robot&gt;</span>
</span></code></pre></div>
<p><code>my_laser.urdf.xacro</code></p>
<div class="language-xml highlight"><pre><span></span><code><span id="__span-35-1"><a id="__codelineno-35-1" name="__codelineno-35-1" href="#__codelineno-35-1"></a><span class="nt">&lt;robot</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;my_laser&quot;</span><span class="w"> </span><span class="na">xmlns:xacro=</span><span class="s">&quot;http://wiki.ros.org/xacro&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-35-2"><a id="__codelineno-35-2" name="__codelineno-35-2" href="#__codelineno-35-2"></a>
</span><span id="__span-35-3"><a id="__codelineno-35-3" name="__codelineno-35-3" href="#__codelineno-35-3"></a><span class="w">    </span><span class="nt">&lt;xacro:property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;laser_radius&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;0.02&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-35-4"><a id="__codelineno-35-4" name="__codelineno-35-4" href="#__codelineno-35-4"></a><span class="w">    </span><span class="nt">&lt;xacro:property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;laser_length&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;0.01&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-35-5"><a id="__codelineno-35-5" name="__codelineno-35-5" href="#__codelineno-35-5"></a>
</span><span id="__span-35-6"><a id="__codelineno-35-6" name="__codelineno-35-6" href="#__codelineno-35-6"></a><span class="w">    </span><span class="nt">&lt;link</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;laser&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-35-7"><a id="__codelineno-35-7" name="__codelineno-35-7" href="#__codelineno-35-7"></a><span class="w">        </span><span class="nt">&lt;visual&gt;</span>
</span><span id="__span-35-8"><a id="__codelineno-35-8" name="__codelineno-35-8" href="#__codelineno-35-8"></a><span class="w">            </span><span class="nt">&lt;geometry&gt;</span>
</span><span id="__span-35-9"><a id="__codelineno-35-9" name="__codelineno-35-9" href="#__codelineno-35-9"></a><span class="w">                </span><span class="nt">&lt;cylinder</span><span class="w"> </span><span class="na">radius=</span><span class="s">&quot;${laser_radius}&quot;</span><span class="w"> </span><span class="na">length=</span><span class="s">&quot;${laser_length}&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-35-10"><a id="__codelineno-35-10" name="__codelineno-35-10" href="#__codelineno-35-10"></a><span class="w">            </span><span class="nt">&lt;/geometry&gt;</span>
</span><span id="__span-35-11"><a id="__codelineno-35-11" name="__codelineno-35-11" href="#__codelineno-35-11"></a><span class="w">            </span><span class="nt">&lt;material</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;blue&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-35-12"><a id="__codelineno-35-12" name="__codelineno-35-12" href="#__codelineno-35-12"></a><span class="w">                </span><span class="nt">&lt;color</span><span class="w"> </span><span class="na">rgba=</span><span class="s">&quot;0 0 1 1&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-35-13"><a id="__codelineno-35-13" name="__codelineno-35-13" href="#__codelineno-35-13"></a><span class="w">            </span><span class="nt">&lt;/material&gt;</span>
</span><span id="__span-35-14"><a id="__codelineno-35-14" name="__codelineno-35-14" href="#__codelineno-35-14"></a><span class="w">        </span><span class="nt">&lt;/visual&gt;</span>
</span><span id="__span-35-15"><a id="__codelineno-35-15" name="__codelineno-35-15" href="#__codelineno-35-15"></a><span class="w">    </span><span class="nt">&lt;/link&gt;</span>
</span><span id="__span-35-16"><a id="__codelineno-35-16" name="__codelineno-35-16" href="#__codelineno-35-16"></a>
</span><span id="__span-35-17"><a id="__codelineno-35-17" name="__codelineno-35-17" href="#__codelineno-35-17"></a><span class="w">    </span><span class="nt">&lt;joint</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;laser2base_link&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;fixed&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-35-18"><a id="__codelineno-35-18" name="__codelineno-35-18" href="#__codelineno-35-18"></a><span class="w">        </span><span class="nt">&lt;parent</span><span class="w"> </span><span class="na">link=</span><span class="s">&quot;base_link&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-35-19"><a id="__codelineno-35-19" name="__codelineno-35-19" href="#__codelineno-35-19"></a><span class="w">        </span><span class="nt">&lt;child</span><span class="w"> </span><span class="na">link=</span><span class="s">&quot;laser&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-35-20"><a id="__codelineno-35-20" name="__codelineno-35-20" href="#__codelineno-35-20"></a><span class="w">        </span><span class="nt">&lt;origin</span><span class="w"> </span><span class="na">xyz=</span><span class="s">&quot;0 0 ${(base_length+laser_length)/2}&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-35-21"><a id="__codelineno-35-21" name="__codelineno-35-21" href="#__codelineno-35-21"></a><span class="w">    </span><span class="nt">&lt;/joint&gt;</span><span class="w"> </span>
</span><span id="__span-35-22"><a id="__codelineno-35-22" name="__codelineno-35-22" href="#__codelineno-35-22"></a><span class="nt">&lt;/robot&gt;</span>
</span></code></pre></div>
<p><code>my_car.urdf.xacro</code></p>
<div class="language-xml highlight"><pre><span></span><code><span id="__span-36-1"><a id="__codelineno-36-1" name="__codelineno-36-1" href="#__codelineno-36-1"></a><span class="nt">&lt;robot</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;my_car&quot;</span><span class="w"> </span><span class="na">xmlns:xacro=</span><span class="s">&quot;http://wiki.ros.org/xacro&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-36-2"><a id="__codelineno-36-2" name="__codelineno-36-2" href="#__codelineno-36-2"></a><span class="w">    </span><span class="nt">&lt;xacro:include</span><span class="w"> </span><span class="na">filename=</span><span class="s">&quot;my_base.urdf.xacro&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-36-3"><a id="__codelineno-36-3" name="__codelineno-36-3" href="#__codelineno-36-3"></a><span class="w">    </span><span class="nt">&lt;xacro:include</span><span class="w"> </span><span class="na">filename=</span><span class="s">&quot;my_camera.urdf.xacro&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-36-4"><a id="__codelineno-36-4" name="__codelineno-36-4" href="#__codelineno-36-4"></a><span class="w">    </span><span class="nt">&lt;xacro:include</span><span class="w"> </span><span class="na">filename=</span><span class="s">&quot;my_laser.urdf.xacro&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-36-5"><a id="__codelineno-36-5" name="__codelineno-36-5" href="#__codelineno-36-5"></a><span class="nt">&lt;/robot&gt;</span>
</span></code></pre></div>
<ol>
<li>新建launch文件加载xacro模型</li>
</ol>
<div class="language-shell highlight"><pre><span></span><code><span id="__span-37-1"><a id="__codelineno-37-1" name="__codelineno-37-1" href="#__codelineno-37-1"></a>vkrobot@vkrobot:~/catkin_ws/src$<span class="w"> </span>touch<span class="w"> </span>learning_urdf/launch/start_xacro.launch
</span></code></pre></div>
<p><code>start_xacro.launch</code></p>
<div class="language-xml highlight"><pre><span></span><code><span id="__span-38-1"><a id="__codelineno-38-1" name="__codelineno-38-1" href="#__codelineno-38-1"></a><span class="nt">&lt;launch&gt;</span>
</span><span id="__span-38-2"><a id="__codelineno-38-2" name="__codelineno-38-2" href="#__codelineno-38-2"></a><span class="w">    </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;robot_description&quot;</span><span class="w"> </span><span class="na">command=</span><span class="s">&quot;$(find xacro)/xacro $(find demo_urdf)/urdf/my_car.urdf.xacro&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-38-3"><a id="__codelineno-38-3" name="__codelineno-38-3" href="#__codelineno-38-3"></a>
</span><span id="__span-38-4"><a id="__codelineno-38-4" name="__codelineno-38-4" href="#__codelineno-38-4"></a><span class="w">    </span><span class="nt">&lt;node</span><span class="w"> </span><span class="na">pkg=</span><span class="s">&quot;rviz&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;rviz&quot;</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;rviz&quot;</span><span class="w"> </span><span class="na">args=</span><span class="s">&quot;-d $(find demo_urdf)/config/my_car.rviz&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-38-5"><a id="__codelineno-38-5" name="__codelineno-38-5" href="#__codelineno-38-5"></a>
</span><span id="__span-38-6"><a id="__codelineno-38-6" name="__codelineno-38-6" href="#__codelineno-38-6"></a><span class="w">    </span><span class="nt">&lt;node</span><span class="w"> </span><span class="na">pkg=</span><span class="s">&quot;robot_state_publisher&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;robot_state_publisher&quot;</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;robot_state_publisher&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-38-7"><a id="__codelineno-38-7" name="__codelineno-38-7" href="#__codelineno-38-7"></a><span class="w">    </span><span class="nt">&lt;node</span><span class="w"> </span><span class="na">pkg=</span><span class="s">&quot;joint_state_publisher&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;joint_state_publisher&quot;</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;joint_state_publisher&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-38-8"><a id="__codelineno-38-8" name="__codelineno-38-8" href="#__codelineno-38-8"></a>
</span><span id="__span-38-9"><a id="__codelineno-38-9" name="__codelineno-38-9" href="#__codelineno-38-9"></a><span class="nt">&lt;/launch&gt;</span>
</span></code></pre></div>
<h2 id="42-gazebo">4.2 Gazebo仿真</h2>
<h3 id="421-gazebo">4.2.1 机器人模型添加gazebo属性</h3>
<blockquote>
<p>当URDF需要与Gazebo集成时，必须要添加<code>&lt;collision&gt;</code>与<code>&lt;inertial&gt;</code>标签，并且使用<code>&lt;gazebo&gt;</code>标签重新设置link颜色</p>
</blockquote>
<div class="language-shell highlight"><pre><span></span><code><span id="__span-39-1"><a id="__codelineno-39-1" name="__codelineno-39-1" href="#__codelineno-39-1"></a>vkrobot@vkrobot:~/catkin_ws/src$<span class="w"> </span>touch<span class="w"> </span>learning_urdf/urdf/base_collision.urdf.xacro
</span><span id="__span-39-2"><a id="__codelineno-39-2" name="__codelineno-39-2" href="#__codelineno-39-2"></a>vkrobot@vkrobot:~/catkin_ws/src$<span class="w"> </span>touch<span class="w"> </span>learning_urdf/urdf/my_base_gazebo.urdf.xacro
</span><span id="__span-39-3"><a id="__codelineno-39-3" name="__codelineno-39-3" href="#__codelineno-39-3"></a>vkrobot@vkrobot:~/catkin_ws/src$<span class="w"> </span>touch<span class="w"> </span>learning_urdf/urdf/my_camera_gazebo.urdf.xacro
</span><span id="__span-39-4"><a id="__codelineno-39-4" name="__codelineno-39-4" href="#__codelineno-39-4"></a>vkrobot@vkrobot:~/catkin_ws/src$<span class="w"> </span>touch<span class="w"> </span>learning_urdf/urdf/my_laser_gazebo.urdf.xacro
</span><span id="__span-39-5"><a id="__codelineno-39-5" name="__codelineno-39-5" href="#__codelineno-39-5"></a>vkrobot@vkrobot:~/catkin_ws/src$<span class="w"> </span>touch<span class="w"> </span>learning_urdf/urdf/my_car_gazebo.urdf.xacro
</span></code></pre></div>
<p><code>base_collision.urdf.xacro</code> ---&gt; 封装惯性矩阵算法的xacro文件</p>
<div class="language-xml highlight"><pre><span></span><code><span id="__span-40-1"><a id="__codelineno-40-1" name="__codelineno-40-1" href="#__codelineno-40-1"></a><span class="nt">&lt;robot</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;my_car&quot;</span><span class="w"> </span><span class="na">xmlns:xacro=</span><span class="s">&quot;http://wiki.ros.org/xacro&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-40-2"><a id="__codelineno-40-2" name="__codelineno-40-2" href="#__codelineno-40-2"></a><span class="w">    </span><span class="nt">&lt;xacro:macro</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;sphere_inertial_matrix&quot;</span><span class="w"> </span><span class="na">params=</span><span class="s">&quot;m r&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-40-3"><a id="__codelineno-40-3" name="__codelineno-40-3" href="#__codelineno-40-3"></a><span class="w">        </span><span class="nt">&lt;inertial&gt;</span>
</span><span id="__span-40-4"><a id="__codelineno-40-4" name="__codelineno-40-4" href="#__codelineno-40-4"></a><span class="w">            </span><span class="nt">&lt;mass</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;${m}&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-40-5"><a id="__codelineno-40-5" name="__codelineno-40-5" href="#__codelineno-40-5"></a><span class="w">            </span><span class="nt">&lt;inertia</span><span class="w"> </span><span class="na">ixx=</span><span class="s">&quot;${2*m*r*r/5}&quot;</span><span class="w"> </span><span class="na">ixy=</span><span class="s">&quot;0&quot;</span><span class="w"> </span><span class="na">ixz=</span><span class="s">&quot;0&quot;</span>
</span><span id="__span-40-6"><a id="__codelineno-40-6" name="__codelineno-40-6" href="#__codelineno-40-6"></a><span class="w">                            </span><span class="na">iyy=</span><span class="s">&quot;${2*m*r*r/5}&quot;</span><span class="w"> </span><span class="na">iyz=</span><span class="s">&quot;0&quot;</span>
</span><span id="__span-40-7"><a id="__codelineno-40-7" name="__codelineno-40-7" href="#__codelineno-40-7"></a><span class="w">                            </span><span class="na">izz=</span><span class="s">&quot;${2*m*r*r/5}&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-40-8"><a id="__codelineno-40-8" name="__codelineno-40-8" href="#__codelineno-40-8"></a><span class="w">        </span><span class="nt">&lt;/inertial&gt;</span>
</span><span id="__span-40-9"><a id="__codelineno-40-9" name="__codelineno-40-9" href="#__codelineno-40-9"></a><span class="w">    </span><span class="nt">&lt;/xacro:macro&gt;</span>
</span><span id="__span-40-10"><a id="__codelineno-40-10" name="__codelineno-40-10" href="#__codelineno-40-10"></a>
</span><span id="__span-40-11"><a id="__codelineno-40-11" name="__codelineno-40-11" href="#__codelineno-40-11"></a><span class="w">    </span><span class="nt">&lt;xacro:macro</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;cylinder_inertial_matrix&quot;</span><span class="w"> </span><span class="na">params=</span><span class="s">&quot;m r h&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-40-12"><a id="__codelineno-40-12" name="__codelineno-40-12" href="#__codelineno-40-12"></a><span class="w">        </span><span class="nt">&lt;inertial&gt;</span>
</span><span id="__span-40-13"><a id="__codelineno-40-13" name="__codelineno-40-13" href="#__codelineno-40-13"></a><span class="w">            </span><span class="nt">&lt;mass</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;${m}&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-40-14"><a id="__codelineno-40-14" name="__codelineno-40-14" href="#__codelineno-40-14"></a><span class="w">            </span><span class="nt">&lt;inertia</span><span class="w"> </span><span class="na">ixx=</span><span class="s">&quot;${m*(3*r*r+h*h)/12}&quot;</span><span class="w"> </span><span class="na">ixy=</span><span class="s">&quot;0&quot;</span><span class="w"> </span><span class="na">ixz=</span><span class="s">&quot;0&quot;</span>
</span><span id="__span-40-15"><a id="__codelineno-40-15" name="__codelineno-40-15" href="#__codelineno-40-15"></a><span class="w">                            </span><span class="na">iyy=</span><span class="s">&quot;${m*(3*r*r+h*h)}&quot;</span><span class="w"> </span><span class="na">iyz=</span><span class="s">&quot;0&quot;</span>
</span><span id="__span-40-16"><a id="__codelineno-40-16" name="__codelineno-40-16" href="#__codelineno-40-16"></a><span class="w">                            </span><span class="na">izz=</span><span class="s">&quot;${m*r*r/2}&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-40-17"><a id="__codelineno-40-17" name="__codelineno-40-17" href="#__codelineno-40-17"></a><span class="w">        </span><span class="nt">&lt;/inertial&gt;</span>
</span><span id="__span-40-18"><a id="__codelineno-40-18" name="__codelineno-40-18" href="#__codelineno-40-18"></a><span class="w">    </span><span class="nt">&lt;/xacro:macro&gt;</span>
</span><span id="__span-40-19"><a id="__codelineno-40-19" name="__codelineno-40-19" href="#__codelineno-40-19"></a>
</span><span id="__span-40-20"><a id="__codelineno-40-20" name="__codelineno-40-20" href="#__codelineno-40-20"></a><span class="w">    </span><span class="nt">&lt;xacro:macro</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;box_inertial_matrix&quot;</span><span class="w"> </span><span class="na">params=</span><span class="s">&quot;m l w h&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-40-21"><a id="__codelineno-40-21" name="__codelineno-40-21" href="#__codelineno-40-21"></a><span class="w">        </span><span class="nt">&lt;inertial&gt;</span>
</span><span id="__span-40-22"><a id="__codelineno-40-22" name="__codelineno-40-22" href="#__codelineno-40-22"></a><span class="w">            </span><span class="nt">&lt;mass</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;${m}&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-40-23"><a id="__codelineno-40-23" name="__codelineno-40-23" href="#__codelineno-40-23"></a><span class="w">            </span><span class="nt">&lt;inertia</span><span class="w"> </span><span class="na">ixx=</span><span class="s">&quot;${m*(h*h+l*l)/12}&quot;</span><span class="w"> </span><span class="na">ixy=</span><span class="s">&quot;0&quot;</span><span class="w"> </span><span class="na">ixz=</span><span class="s">&quot;0&quot;</span>
</span><span id="__span-40-24"><a id="__codelineno-40-24" name="__codelineno-40-24" href="#__codelineno-40-24"></a><span class="w">                            </span><span class="na">iyy=</span><span class="s">&quot;${m*(w*w+l*l)/12}&quot;</span><span class="w"> </span><span class="na">iyz=</span><span class="s">&quot;0&quot;</span>
</span><span id="__span-40-25"><a id="__codelineno-40-25" name="__codelineno-40-25" href="#__codelineno-40-25"></a><span class="w">                            </span><span class="na">izz=</span><span class="s">&quot;${m*(w*w+h*h)/12}&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-40-26"><a id="__codelineno-40-26" name="__codelineno-40-26" href="#__codelineno-40-26"></a><span class="w">        </span><span class="nt">&lt;/inertial&gt;</span>
</span><span id="__span-40-27"><a id="__codelineno-40-27" name="__codelineno-40-27" href="#__codelineno-40-27"></a><span class="w">    </span><span class="nt">&lt;/xacro:macro&gt;</span>
</span><span id="__span-40-28"><a id="__codelineno-40-28" name="__codelineno-40-28" href="#__codelineno-40-28"></a><span class="nt">&lt;/robot&gt;</span>
</span></code></pre></div>
<p><code>my_base_gazebo.urdf.xacro</code></p>
<div class="language-xml highlight"><pre><span></span><code><span id="__span-41-1"><a id="__codelineno-41-1" name="__codelineno-41-1" href="#__codelineno-41-1"></a><span class="nt">&lt;robot</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;my_car&quot;</span><span class="w"> </span><span class="na">xmlns:xacro=</span><span class="s">&quot;http://wiki.ros.org/xacro&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-41-2"><a id="__codelineno-41-2" name="__codelineno-41-2" href="#__codelineno-41-2"></a><span class="w">    </span><span class="nt">&lt;link</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;base_footprint&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-41-3"><a id="__codelineno-41-3" name="__codelineno-41-3" href="#__codelineno-41-3"></a><span class="w">        </span><span class="nt">&lt;visual&gt;</span>
</span><span id="__span-41-4"><a id="__codelineno-41-4" name="__codelineno-41-4" href="#__codelineno-41-4"></a><span class="w">            </span><span class="nt">&lt;geometry&gt;</span>
</span><span id="__span-41-5"><a id="__codelineno-41-5" name="__codelineno-41-5" href="#__codelineno-41-5"></a><span class="w">                </span><span class="nt">&lt;sphere</span><span class="w"> </span><span class="na">radius=</span><span class="s">&quot;0.001&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-41-6"><a id="__codelineno-41-6" name="__codelineno-41-6" href="#__codelineno-41-6"></a><span class="w">            </span><span class="nt">&lt;/geometry&gt;</span>
</span><span id="__span-41-7"><a id="__codelineno-41-7" name="__codelineno-41-7" href="#__codelineno-41-7"></a><span class="w">        </span><span class="nt">&lt;/visual&gt;</span>
</span><span id="__span-41-8"><a id="__codelineno-41-8" name="__codelineno-41-8" href="#__codelineno-41-8"></a><span class="w">    </span><span class="nt">&lt;/link&gt;</span>
</span><span id="__span-41-9"><a id="__codelineno-41-9" name="__codelineno-41-9" href="#__codelineno-41-9"></a>
</span><span id="__span-41-10"><a id="__codelineno-41-10" name="__codelineno-41-10" href="#__codelineno-41-10"></a><span class="w">    </span><span class="nt">&lt;gazebo</span><span class="w"> </span><span class="na">reference=</span><span class="s">&quot;base_footprint&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-41-11"><a id="__codelineno-41-11" name="__codelineno-41-11" href="#__codelineno-41-11"></a><span class="w">        </span><span class="nt">&lt;turnGravityOff&gt;</span>false<span class="nt">&lt;/turnGravityOff&gt;</span>
</span><span id="__span-41-12"><a id="__codelineno-41-12" name="__codelineno-41-12" href="#__codelineno-41-12"></a><span class="w">    </span><span class="nt">&lt;/gazebo&gt;</span>
</span><span id="__span-41-13"><a id="__codelineno-41-13" name="__codelineno-41-13" href="#__codelineno-41-13"></a>
</span><span id="__span-41-14"><a id="__codelineno-41-14" name="__codelineno-41-14" href="#__codelineno-41-14"></a><span class="w">    </span><span class="nt">&lt;xacro:property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;lidi&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;0.01&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-41-15"><a id="__codelineno-41-15" name="__codelineno-41-15" href="#__codelineno-41-15"></a><span class="w">    </span><span class="nt">&lt;xacro:property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;base_radius&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;0.1&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-41-16"><a id="__codelineno-41-16" name="__codelineno-41-16" href="#__codelineno-41-16"></a><span class="w">    </span><span class="nt">&lt;xacro:property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;base_length&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;0.15&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-41-17"><a id="__codelineno-41-17" name="__codelineno-41-17" href="#__codelineno-41-17"></a><span class="w">    </span><span class="nt">&lt;xacro:property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;wheel_radius&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;0.03&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-41-18"><a id="__codelineno-41-18" name="__codelineno-41-18" href="#__codelineno-41-18"></a><span class="w">    </span><span class="nt">&lt;xacro:property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;wheel_length&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;0.015&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-41-19"><a id="__codelineno-41-19" name="__codelineno-41-19" href="#__codelineno-41-19"></a><span class="w">    </span><span class="nt">&lt;xacro:property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;PI&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;3.1415927&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-41-20"><a id="__codelineno-41-20" name="__codelineno-41-20" href="#__codelineno-41-20"></a><span class="w">    </span><span class="nt">&lt;xacro:property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;base_link_m&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;3.5&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-41-21"><a id="__codelineno-41-21" name="__codelineno-41-21" href="#__codelineno-41-21"></a><span class="w">    </span><span class="nt">&lt;xacro:property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;wheel_m&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;0.05&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-41-22"><a id="__codelineno-41-22" name="__codelineno-41-22" href="#__codelineno-41-22"></a>
</span><span id="__span-41-23"><a id="__codelineno-41-23" name="__codelineno-41-23" href="#__codelineno-41-23"></a><span class="w">    </span><span class="nt">&lt;joint</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;base_link2base_footprint&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;fixed&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-41-24"><a id="__codelineno-41-24" name="__codelineno-41-24" href="#__codelineno-41-24"></a><span class="w">        </span><span class="nt">&lt;parent</span><span class="w"> </span><span class="na">link=</span><span class="s">&quot;base_footprint&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-41-25"><a id="__codelineno-41-25" name="__codelineno-41-25" href="#__codelineno-41-25"></a><span class="w">        </span><span class="nt">&lt;child</span><span class="w"> </span><span class="na">link=</span><span class="s">&quot;base_link&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-41-26"><a id="__codelineno-41-26" name="__codelineno-41-26" href="#__codelineno-41-26"></a><span class="w">        </span><span class="nt">&lt;origin</span><span class="w"> </span><span class="na">xyz=</span><span class="s">&quot;0 0 ${base_length/2+lidi}&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-41-27"><a id="__codelineno-41-27" name="__codelineno-41-27" href="#__codelineno-41-27"></a><span class="w">    </span><span class="nt">&lt;/joint&gt;</span>
</span><span id="__span-41-28"><a id="__codelineno-41-28" name="__codelineno-41-28" href="#__codelineno-41-28"></a>
</span><span id="__span-41-29"><a id="__codelineno-41-29" name="__codelineno-41-29" href="#__codelineno-41-29"></a><span class="w">    </span><span class="nt">&lt;link</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;base_link&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-41-30"><a id="__codelineno-41-30" name="__codelineno-41-30" href="#__codelineno-41-30"></a><span class="w">        </span><span class="nt">&lt;visual&gt;</span>
</span><span id="__span-41-31"><a id="__codelineno-41-31" name="__codelineno-41-31" href="#__codelineno-41-31"></a><span class="w">            </span><span class="nt">&lt;geometry&gt;</span>
</span><span id="__span-41-32"><a id="__codelineno-41-32" name="__codelineno-41-32" href="#__codelineno-41-32"></a><span class="w">                </span><span class="nt">&lt;cylinder</span><span class="w"> </span><span class="na">radius=</span><span class="s">&quot;${base_radius}&quot;</span><span class="w"> </span><span class="na">length=</span><span class="s">&quot;${base_length}&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-41-33"><a id="__codelineno-41-33" name="__codelineno-41-33" href="#__codelineno-41-33"></a><span class="w">            </span><span class="nt">&lt;/geometry&gt;</span>
</span><span id="__span-41-34"><a id="__codelineno-41-34" name="__codelineno-41-34" href="#__codelineno-41-34"></a><span class="w">            </span><span class="nt">&lt;material</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;red&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-41-35"><a id="__codelineno-41-35" name="__codelineno-41-35" href="#__codelineno-41-35"></a><span class="w">                </span><span class="nt">&lt;color</span><span class="w"> </span><span class="na">rgba=</span><span class="s">&quot;0 0 0 0.5&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-41-36"><a id="__codelineno-41-36" name="__codelineno-41-36" href="#__codelineno-41-36"></a><span class="w">            </span><span class="nt">&lt;/material&gt;</span>
</span><span id="__span-41-37"><a id="__codelineno-41-37" name="__codelineno-41-37" href="#__codelineno-41-37"></a><span class="w">        </span><span class="nt">&lt;/visual&gt;</span>
</span><span id="__span-41-38"><a id="__codelineno-41-38" name="__codelineno-41-38" href="#__codelineno-41-38"></a><span class="w">        </span><span class="nt">&lt;collision&gt;</span>
</span><span id="__span-41-39"><a id="__codelineno-41-39" name="__codelineno-41-39" href="#__codelineno-41-39"></a><span class="w">            </span><span class="nt">&lt;geometry&gt;</span>
</span><span id="__span-41-40"><a id="__codelineno-41-40" name="__codelineno-41-40" href="#__codelineno-41-40"></a><span class="w">                </span><span class="nt">&lt;cylinder</span><span class="w"> </span><span class="na">radius=</span><span class="s">&quot;${base_radius}&quot;</span><span class="w"> </span><span class="na">length=</span><span class="s">&quot;${base_length}&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-41-41"><a id="__codelineno-41-41" name="__codelineno-41-41" href="#__codelineno-41-41"></a><span class="w">            </span><span class="nt">&lt;/geometry&gt;</span>
</span><span id="__span-41-42"><a id="__codelineno-41-42" name="__codelineno-41-42" href="#__codelineno-41-42"></a><span class="w">        </span><span class="nt">&lt;/collision&gt;</span>
</span><span id="__span-41-43"><a id="__codelineno-41-43" name="__codelineno-41-43" href="#__codelineno-41-43"></a><span class="w">        </span><span class="nt">&lt;xacro:cylinder_inertial_matrix</span><span class="w"> </span><span class="na">m=</span><span class="s">&quot;${base_link_m}&quot;</span><span class="w"> </span><span class="na">r=</span><span class="s">&quot;${base_radius}&quot;</span><span class="w"> </span><span class="na">h=</span><span class="s">&quot;${base_length}&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-41-44"><a id="__codelineno-41-44" name="__codelineno-41-44" href="#__codelineno-41-44"></a><span class="w">    </span><span class="nt">&lt;/link&gt;</span>
</span><span id="__span-41-45"><a id="__codelineno-41-45" name="__codelineno-41-45" href="#__codelineno-41-45"></a>
</span><span id="__span-41-46"><a id="__codelineno-41-46" name="__codelineno-41-46" href="#__codelineno-41-46"></a><span class="w">    </span><span class="nt">&lt;gazebo</span><span class="w"> </span><span class="na">reference=</span><span class="s">&quot;base_link&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-41-47"><a id="__codelineno-41-47" name="__codelineno-41-47" href="#__codelineno-41-47"></a><span class="w">        </span><span class="nt">&lt;material&gt;</span>Gazebo/Gray<span class="nt">&lt;/material&gt;</span>
</span><span id="__span-41-48"><a id="__codelineno-41-48" name="__codelineno-41-48" href="#__codelineno-41-48"></a><span class="w">    </span><span class="nt">&lt;/gazebo&gt;</span>
</span><span id="__span-41-49"><a id="__codelineno-41-49" name="__codelineno-41-49" href="#__codelineno-41-49"></a>
</span><span id="__span-41-50"><a id="__codelineno-41-50" name="__codelineno-41-50" href="#__codelineno-41-50"></a><span class="w">    </span><span class="nt">&lt;xacro:macro</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;wheel_func&quot;</span><span class="w"> </span><span class="na">params=</span><span class="s">&quot;wheel_name flag&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-41-51"><a id="__codelineno-41-51" name="__codelineno-41-51" href="#__codelineno-41-51"></a><span class="w">        </span><span class="nt">&lt;link</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;${wheel_name}_wheel&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-41-52"><a id="__codelineno-41-52" name="__codelineno-41-52" href="#__codelineno-41-52"></a><span class="w">            </span><span class="nt">&lt;visual&gt;</span>
</span><span id="__span-41-53"><a id="__codelineno-41-53" name="__codelineno-41-53" href="#__codelineno-41-53"></a><span class="w">                </span><span class="nt">&lt;geometry&gt;</span>
</span><span id="__span-41-54"><a id="__codelineno-41-54" name="__codelineno-41-54" href="#__codelineno-41-54"></a><span class="w">                    </span><span class="nt">&lt;cylinder</span><span class="w"> </span><span class="na">radius=</span><span class="s">&quot;${wheel_radius}&quot;</span><span class="w"> </span><span class="na">length=</span><span class="s">&quot;${wheel_length}&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-41-55"><a id="__codelineno-41-55" name="__codelineno-41-55" href="#__codelineno-41-55"></a><span class="w">                </span><span class="nt">&lt;/geometry&gt;</span>
</span><span id="__span-41-56"><a id="__codelineno-41-56" name="__codelineno-41-56" href="#__codelineno-41-56"></a><span class="w">                </span><span class="nt">&lt;origin</span><span class="w"> </span><span class="na">xyz=</span><span class="s">&quot;0 0 0&quot;</span><span class="w"> </span><span class="na">rpy=</span><span class="s">&quot;${PI/2} 0 0&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-41-57"><a id="__codelineno-41-57" name="__codelineno-41-57" href="#__codelineno-41-57"></a><span class="w">                </span><span class="nt">&lt;material</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;black&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-41-58"><a id="__codelineno-41-58" name="__codelineno-41-58" href="#__codelineno-41-58"></a><span class="w">                    </span><span class="nt">&lt;color</span><span class="w"> </span><span class="na">rgba=</span><span class="s">&quot;0 0 0 1&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-41-59"><a id="__codelineno-41-59" name="__codelineno-41-59" href="#__codelineno-41-59"></a><span class="w">                </span><span class="nt">&lt;/material&gt;</span>
</span><span id="__span-41-60"><a id="__codelineno-41-60" name="__codelineno-41-60" href="#__codelineno-41-60"></a><span class="w">            </span><span class="nt">&lt;/visual&gt;</span>
</span><span id="__span-41-61"><a id="__codelineno-41-61" name="__codelineno-41-61" href="#__codelineno-41-61"></a><span class="w">            </span><span class="nt">&lt;collision&gt;</span>
</span><span id="__span-41-62"><a id="__codelineno-41-62" name="__codelineno-41-62" href="#__codelineno-41-62"></a><span class="w">                </span><span class="nt">&lt;geometry&gt;</span>
</span><span id="__span-41-63"><a id="__codelineno-41-63" name="__codelineno-41-63" href="#__codelineno-41-63"></a><span class="w">                    </span><span class="nt">&lt;cylinder</span><span class="w"> </span><span class="na">radius=</span><span class="s">&quot;${wheel_radius}&quot;</span><span class="w"> </span><span class="na">length=</span><span class="s">&quot;${wheel_length}&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-41-64"><a id="__codelineno-41-64" name="__codelineno-41-64" href="#__codelineno-41-64"></a><span class="w">                </span><span class="nt">&lt;/geometry&gt;</span>
</span><span id="__span-41-65"><a id="__codelineno-41-65" name="__codelineno-41-65" href="#__codelineno-41-65"></a><span class="w">                </span><span class="nt">&lt;origin</span><span class="w"> </span><span class="na">xyz=</span><span class="s">&quot;0 0 0&quot;</span><span class="w"> </span><span class="na">rpy=</span><span class="s">&quot;${PI/2} 0 0&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-41-66"><a id="__codelineno-41-66" name="__codelineno-41-66" href="#__codelineno-41-66"></a><span class="w">            </span><span class="nt">&lt;/collision&gt;</span>
</span><span id="__span-41-67"><a id="__codelineno-41-67" name="__codelineno-41-67" href="#__codelineno-41-67"></a><span class="w">            </span><span class="nt">&lt;xacro:cylinder_inertial_matrix</span><span class="w"> </span><span class="na">m=</span><span class="s">&quot;${wheel_m}&quot;</span><span class="w"> </span><span class="na">r=</span><span class="s">&quot;${wheel_radius}&quot;</span><span class="w"> </span><span class="na">h=</span><span class="s">&quot;${wheel_length}&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-41-68"><a id="__codelineno-41-68" name="__codelineno-41-68" href="#__codelineno-41-68"></a><span class="w">        </span><span class="nt">&lt;/link&gt;</span>
</span><span id="__span-41-69"><a id="__codelineno-41-69" name="__codelineno-41-69" href="#__codelineno-41-69"></a>
</span><span id="__span-41-70"><a id="__codelineno-41-70" name="__codelineno-41-70" href="#__codelineno-41-70"></a><span class="w">        </span><span class="nt">&lt;gazebo</span><span class="w"> </span><span class="na">reference=</span><span class="s">&quot;${wheel_name}_wheel&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-41-71"><a id="__codelineno-41-71" name="__codelineno-41-71" href="#__codelineno-41-71"></a><span class="w">            </span><span class="nt">&lt;material&gt;</span>Gazebo/Black<span class="nt">&lt;/material&gt;</span>
</span><span id="__span-41-72"><a id="__codelineno-41-72" name="__codelineno-41-72" href="#__codelineno-41-72"></a><span class="w">        </span><span class="nt">&lt;/gazebo&gt;</span>
</span><span id="__span-41-73"><a id="__codelineno-41-73" name="__codelineno-41-73" href="#__codelineno-41-73"></a>
</span><span id="__span-41-74"><a id="__codelineno-41-74" name="__codelineno-41-74" href="#__codelineno-41-74"></a><span class="w">        </span><span class="nt">&lt;joint</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;${wheel_name}_wheel2base_link&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;continuous&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-41-75"><a id="__codelineno-41-75" name="__codelineno-41-75" href="#__codelineno-41-75"></a><span class="w">            </span><span class="nt">&lt;parent</span><span class="w"> </span><span class="na">link=</span><span class="s">&quot;base_link&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-41-76"><a id="__codelineno-41-76" name="__codelineno-41-76" href="#__codelineno-41-76"></a><span class="w">            </span><span class="nt">&lt;child</span><span class="w"> </span><span class="na">link=</span><span class="s">&quot;${wheel_name}_wheel&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-41-77"><a id="__codelineno-41-77" name="__codelineno-41-77" href="#__codelineno-41-77"></a><span class="w">            </span><span class="nt">&lt;origin</span><span class="w"> </span><span class="na">xyz=</span><span class="s">&quot;0 ${flag*base_radius} ${-(lidi+base_length/2-wheel_radius)}&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-41-78"><a id="__codelineno-41-78" name="__codelineno-41-78" href="#__codelineno-41-78"></a><span class="w">            </span><span class="nt">&lt;axis</span><span class="w"> </span><span class="na">xyz=</span><span class="s">&quot;0 1 0&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-41-79"><a id="__codelineno-41-79" name="__codelineno-41-79" href="#__codelineno-41-79"></a><span class="w">        </span><span class="nt">&lt;/joint&gt;</span>
</span><span id="__span-41-80"><a id="__codelineno-41-80" name="__codelineno-41-80" href="#__codelineno-41-80"></a><span class="w">    </span><span class="nt">&lt;/xacro:macro&gt;</span>
</span><span id="__span-41-81"><a id="__codelineno-41-81" name="__codelineno-41-81" href="#__codelineno-41-81"></a><span class="w">    </span><span class="nt">&lt;xacro:wheel_func</span><span class="w"> </span><span class="na">wheel_name=</span><span class="s">&quot;left&quot;</span><span class="w"> </span><span class="na">flag=</span><span class="s">&quot;1&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-41-82"><a id="__codelineno-41-82" name="__codelineno-41-82" href="#__codelineno-41-82"></a><span class="w">    </span><span class="nt">&lt;xacro:wheel_func</span><span class="w"> </span><span class="na">wheel_name=</span><span class="s">&quot;right&quot;</span><span class="w"> </span><span class="na">flag=</span><span class="s">&quot;-1&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-41-83"><a id="__codelineno-41-83" name="__codelineno-41-83" href="#__codelineno-41-83"></a>
</span><span id="__span-41-84"><a id="__codelineno-41-84" name="__codelineno-41-84" href="#__codelineno-41-84"></a><span class="w">    </span><span class="nt">&lt;xacro:property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;universal_wheel_radius&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;0.01&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-41-85"><a id="__codelineno-41-85" name="__codelineno-41-85" href="#__codelineno-41-85"></a><span class="w">    </span><span class="nt">&lt;xacro:property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;universal_wheel_m&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;0.03&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-41-86"><a id="__codelineno-41-86" name="__codelineno-41-86" href="#__codelineno-41-86"></a>
</span><span id="__span-41-87"><a id="__codelineno-41-87" name="__codelineno-41-87" href="#__codelineno-41-87"></a><span class="w">    </span><span class="nt">&lt;xacro:macro</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;universal_wheel_func&quot;</span><span class="w"> </span><span class="na">params=</span><span class="s">&quot;wheel_name flag&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-41-88"><a id="__codelineno-41-88" name="__codelineno-41-88" href="#__codelineno-41-88"></a><span class="w">        </span><span class="nt">&lt;link</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;${wheel_name}_wheel&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-41-89"><a id="__codelineno-41-89" name="__codelineno-41-89" href="#__codelineno-41-89"></a><span class="w">            </span><span class="nt">&lt;visual&gt;</span>
</span><span id="__span-41-90"><a id="__codelineno-41-90" name="__codelineno-41-90" href="#__codelineno-41-90"></a><span class="w">                </span><span class="nt">&lt;geometry&gt;</span>
</span><span id="__span-41-91"><a id="__codelineno-41-91" name="__codelineno-41-91" href="#__codelineno-41-91"></a><span class="w">                    </span><span class="nt">&lt;sphere</span><span class="w"> </span><span class="na">radius=</span><span class="s">&quot;${universal_wheel_radius}&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-41-92"><a id="__codelineno-41-92" name="__codelineno-41-92" href="#__codelineno-41-92"></a><span class="w">                </span><span class="nt">&lt;/geometry&gt;</span>
</span><span id="__span-41-93"><a id="__codelineno-41-93" name="__codelineno-41-93" href="#__codelineno-41-93"></a><span class="w">                </span><span class="nt">&lt;material</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;white&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-41-94"><a id="__codelineno-41-94" name="__codelineno-41-94" href="#__codelineno-41-94"></a><span class="w">                    </span><span class="nt">&lt;color</span><span class="w"> </span><span class="na">rgba=</span><span class="s">&quot;1 1 1 1&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-41-95"><a id="__codelineno-41-95" name="__codelineno-41-95" href="#__codelineno-41-95"></a><span class="w">                </span><span class="nt">&lt;/material&gt;</span>
</span><span id="__span-41-96"><a id="__codelineno-41-96" name="__codelineno-41-96" href="#__codelineno-41-96"></a><span class="w">            </span><span class="nt">&lt;/visual&gt;</span>
</span><span id="__span-41-97"><a id="__codelineno-41-97" name="__codelineno-41-97" href="#__codelineno-41-97"></a><span class="w">            </span><span class="nt">&lt;collision&gt;</span>
</span><span id="__span-41-98"><a id="__codelineno-41-98" name="__codelineno-41-98" href="#__codelineno-41-98"></a><span class="w">                </span><span class="nt">&lt;geometry&gt;</span>
</span><span id="__span-41-99"><a id="__codelineno-41-99" name="__codelineno-41-99" href="#__codelineno-41-99"></a><span class="w">                    </span><span class="nt">&lt;sphere</span><span class="w"> </span><span class="na">radius=</span><span class="s">&quot;${universal_wheel_radius}&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-41-100"><a id="__codelineno-41-100" name="__codelineno-41-100" href="#__codelineno-41-100"></a><span class="w">                </span><span class="nt">&lt;/geometry&gt;</span>
</span><span id="__span-41-101"><a id="__codelineno-41-101" name="__codelineno-41-101" href="#__codelineno-41-101"></a><span class="w">            </span><span class="nt">&lt;/collision&gt;</span>
</span><span id="__span-41-102"><a id="__codelineno-41-102" name="__codelineno-41-102" href="#__codelineno-41-102"></a><span class="w">            </span><span class="nt">&lt;xacro:sphere_inertial_matrix</span><span class="w"> </span><span class="na">m=</span><span class="s">&quot;${universal_wheel_m}&quot;</span><span class="w"> </span><span class="na">r=</span><span class="s">&quot;${universal_wheel_radius}&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-41-103"><a id="__codelineno-41-103" name="__codelineno-41-103" href="#__codelineno-41-103"></a><span class="w">        </span><span class="nt">&lt;/link&gt;</span>
</span><span id="__span-41-104"><a id="__codelineno-41-104" name="__codelineno-41-104" href="#__codelineno-41-104"></a>
</span><span id="__span-41-105"><a id="__codelineno-41-105" name="__codelineno-41-105" href="#__codelineno-41-105"></a><span class="w">        </span><span class="nt">&lt;gazebo</span><span class="w"> </span><span class="na">reference=</span><span class="s">&quot;${wheel_name}_wheel&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-41-106"><a id="__codelineno-41-106" name="__codelineno-41-106" href="#__codelineno-41-106"></a><span class="w">            </span><span class="nt">&lt;material&gt;</span>Gazebo/White<span class="nt">&lt;/material&gt;</span>
</span><span id="__span-41-107"><a id="__codelineno-41-107" name="__codelineno-41-107" href="#__codelineno-41-107"></a><span class="w">        </span><span class="nt">&lt;/gazebo&gt;</span>
</span><span id="__span-41-108"><a id="__codelineno-41-108" name="__codelineno-41-108" href="#__codelineno-41-108"></a>
</span><span id="__span-41-109"><a id="__codelineno-41-109" name="__codelineno-41-109" href="#__codelineno-41-109"></a><span class="w">        </span><span class="nt">&lt;joint</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;${wheel_name}_wheel2base_link&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;continuous&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-41-110"><a id="__codelineno-41-110" name="__codelineno-41-110" href="#__codelineno-41-110"></a><span class="w">            </span><span class="nt">&lt;parent</span><span class="w"> </span><span class="na">link=</span><span class="s">&quot;base_link&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-41-111"><a id="__codelineno-41-111" name="__codelineno-41-111" href="#__codelineno-41-111"></a><span class="w">            </span><span class="nt">&lt;child</span><span class="w"> </span><span class="na">link=</span><span class="s">&quot;${wheel_name}_wheel&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-41-112"><a id="__codelineno-41-112" name="__codelineno-41-112" href="#__codelineno-41-112"></a><span class="w">            </span><span class="nt">&lt;origin</span><span class="w"> </span><span class="na">xyz=</span><span class="s">&quot;${flag*(base_radius-0.02)} 0 ${-(base_length/2+lidi-universal_wheel_radius)}&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-41-113"><a id="__codelineno-41-113" name="__codelineno-41-113" href="#__codelineno-41-113"></a><span class="w">            </span><span class="nt">&lt;axis</span><span class="w"> </span><span class="na">xyz=</span><span class="s">&quot;0 1 0&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-41-114"><a id="__codelineno-41-114" name="__codelineno-41-114" href="#__codelineno-41-114"></a><span class="w">        </span><span class="nt">&lt;/joint&gt;</span>
</span><span id="__span-41-115"><a id="__codelineno-41-115" name="__codelineno-41-115" href="#__codelineno-41-115"></a><span class="w">    </span><span class="nt">&lt;/xacro:macro&gt;</span>
</span><span id="__span-41-116"><a id="__codelineno-41-116" name="__codelineno-41-116" href="#__codelineno-41-116"></a><span class="w">    </span><span class="nt">&lt;xacro:universal_wheel_func</span><span class="w"> </span><span class="na">wheel_name=</span><span class="s">&quot;front&quot;</span><span class="w"> </span><span class="na">flag=</span><span class="s">&quot;1&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-41-117"><a id="__codelineno-41-117" name="__codelineno-41-117" href="#__codelineno-41-117"></a><span class="w">    </span><span class="nt">&lt;xacro:universal_wheel_func</span><span class="w"> </span><span class="na">wheel_name=</span><span class="s">&quot;back&quot;</span><span class="w"> </span><span class="na">flag=</span><span class="s">&quot;-1&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-41-118"><a id="__codelineno-41-118" name="__codelineno-41-118" href="#__codelineno-41-118"></a>
</span><span id="__span-41-119"><a id="__codelineno-41-119" name="__codelineno-41-119" href="#__codelineno-41-119"></a><span class="nt">&lt;/robot&gt;</span>
</span></code></pre></div>
<p><code>my_camera_gazebo.urdf.xacro</code></p>
<div class="language-xml highlight"><pre><span></span><code><span id="__span-42-1"><a id="__codelineno-42-1" name="__codelineno-42-1" href="#__codelineno-42-1"></a><span class="nt">&lt;robot</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;my_camera&quot;</span><span class="w"> </span><span class="na">xmlns:xacro=</span><span class="s">&quot;http://wiki.ros.org/xacro&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-42-2"><a id="__codelineno-42-2" name="__codelineno-42-2" href="#__codelineno-42-2"></a><span class="w">    </span><span class="nt">&lt;xacro:property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;camera_length&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;0.01&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-42-3"><a id="__codelineno-42-3" name="__codelineno-42-3" href="#__codelineno-42-3"></a><span class="w">    </span><span class="nt">&lt;xacro:property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;camera_width&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;0.03&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-42-4"><a id="__codelineno-42-4" name="__codelineno-42-4" href="#__codelineno-42-4"></a><span class="w">    </span><span class="nt">&lt;xacro:property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;camera_height&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;0.03&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-42-5"><a id="__codelineno-42-5" name="__codelineno-42-5" href="#__codelineno-42-5"></a><span class="w">    </span><span class="nt">&lt;xacro:property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;camera_x&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;${base_radius}&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-42-6"><a id="__codelineno-42-6" name="__codelineno-42-6" href="#__codelineno-42-6"></a><span class="w">    </span><span class="nt">&lt;xacro:property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;camera_y&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;0&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-42-7"><a id="__codelineno-42-7" name="__codelineno-42-7" href="#__codelineno-42-7"></a><span class="w">    </span><span class="nt">&lt;xacro:property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;camera_z&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;0&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-42-8"><a id="__codelineno-42-8" name="__codelineno-42-8" href="#__codelineno-42-8"></a><span class="w">    </span><span class="nt">&lt;xacro:property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;camera_m&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;0.01&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-42-9"><a id="__codelineno-42-9" name="__codelineno-42-9" href="#__codelineno-42-9"></a>
</span><span id="__span-42-10"><a id="__codelineno-42-10" name="__codelineno-42-10" href="#__codelineno-42-10"></a><span class="w">    </span><span class="nt">&lt;link</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;camera&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-42-11"><a id="__codelineno-42-11" name="__codelineno-42-11" href="#__codelineno-42-11"></a><span class="w">        </span><span class="nt">&lt;visual&gt;</span>
</span><span id="__span-42-12"><a id="__codelineno-42-12" name="__codelineno-42-12" href="#__codelineno-42-12"></a><span class="w">            </span><span class="nt">&lt;geometry&gt;</span>
</span><span id="__span-42-13"><a id="__codelineno-42-13" name="__codelineno-42-13" href="#__codelineno-42-13"></a><span class="w">                </span><span class="nt">&lt;box</span><span class="w"> </span><span class="na">size=</span><span class="s">&quot;${camera_length} ${camera_width} ${camera_height}&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-42-14"><a id="__codelineno-42-14" name="__codelineno-42-14" href="#__codelineno-42-14"></a><span class="w">            </span><span class="nt">&lt;/geometry&gt;</span>
</span><span id="__span-42-15"><a id="__codelineno-42-15" name="__codelineno-42-15" href="#__codelineno-42-15"></a><span class="w">            </span><span class="nt">&lt;material</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;blue&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-42-16"><a id="__codelineno-42-16" name="__codelineno-42-16" href="#__codelineno-42-16"></a><span class="w">                </span><span class="nt">&lt;color</span><span class="w"> </span><span class="na">rgba=</span><span class="s">&quot;0 0 1 1&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-42-17"><a id="__codelineno-42-17" name="__codelineno-42-17" href="#__codelineno-42-17"></a><span class="w">            </span><span class="nt">&lt;/material&gt;</span>
</span><span id="__span-42-18"><a id="__codelineno-42-18" name="__codelineno-42-18" href="#__codelineno-42-18"></a><span class="w">        </span><span class="nt">&lt;/visual&gt;</span>
</span><span id="__span-42-19"><a id="__codelineno-42-19" name="__codelineno-42-19" href="#__codelineno-42-19"></a><span class="w">        </span><span class="nt">&lt;collision&gt;</span>
</span><span id="__span-42-20"><a id="__codelineno-42-20" name="__codelineno-42-20" href="#__codelineno-42-20"></a><span class="w">            </span><span class="nt">&lt;geometry&gt;</span>
</span><span id="__span-42-21"><a id="__codelineno-42-21" name="__codelineno-42-21" href="#__codelineno-42-21"></a><span class="w">                </span><span class="nt">&lt;box</span><span class="w"> </span><span class="na">size=</span><span class="s">&quot;${camera_length} ${camera_width} ${camera_height}&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-42-22"><a id="__codelineno-42-22" name="__codelineno-42-22" href="#__codelineno-42-22"></a><span class="w">            </span><span class="nt">&lt;/geometry&gt;</span>
</span><span id="__span-42-23"><a id="__codelineno-42-23" name="__codelineno-42-23" href="#__codelineno-42-23"></a><span class="w">        </span><span class="nt">&lt;/collision&gt;</span>
</span><span id="__span-42-24"><a id="__codelineno-42-24" name="__codelineno-42-24" href="#__codelineno-42-24"></a><span class="w">        </span><span class="nt">&lt;xacro:box_inertial_matrix</span><span class="w"> </span><span class="na">m=</span><span class="s">&quot;${camera_m}&quot;</span><span class="w"> </span><span class="na">l=</span><span class="s">&quot;${camera_length}&quot;</span><span class="w"> </span><span class="na">w=</span><span class="s">&quot;${camera_width}&quot;</span><span class="w"> </span><span class="na">h=</span><span class="s">&quot;${camera_height}&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-42-25"><a id="__codelineno-42-25" name="__codelineno-42-25" href="#__codelineno-42-25"></a><span class="w">    </span><span class="nt">&lt;/link&gt;</span>
</span><span id="__span-42-26"><a id="__codelineno-42-26" name="__codelineno-42-26" href="#__codelineno-42-26"></a>
</span><span id="__span-42-27"><a id="__codelineno-42-27" name="__codelineno-42-27" href="#__codelineno-42-27"></a><span class="w">    </span><span class="nt">&lt;gazebo</span><span class="w"> </span><span class="na">reference=</span><span class="s">&quot;camera&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-42-28"><a id="__codelineno-42-28" name="__codelineno-42-28" href="#__codelineno-42-28"></a><span class="w">        </span><span class="nt">&lt;material&gt;</span>Gazebo/Blue<span class="nt">&lt;/material&gt;</span>
</span><span id="__span-42-29"><a id="__codelineno-42-29" name="__codelineno-42-29" href="#__codelineno-42-29"></a><span class="w">    </span><span class="nt">&lt;/gazebo&gt;</span>
</span><span id="__span-42-30"><a id="__codelineno-42-30" name="__codelineno-42-30" href="#__codelineno-42-30"></a>
</span><span id="__span-42-31"><a id="__codelineno-42-31" name="__codelineno-42-31" href="#__codelineno-42-31"></a><span class="w">    </span><span class="nt">&lt;joint</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;camera2base_link&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;fixed&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-42-32"><a id="__codelineno-42-32" name="__codelineno-42-32" href="#__codelineno-42-32"></a><span class="w">        </span><span class="nt">&lt;parent</span><span class="w"> </span><span class="na">link=</span><span class="s">&quot;base_link&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-42-33"><a id="__codelineno-42-33" name="__codelineno-42-33" href="#__codelineno-42-33"></a><span class="w">        </span><span class="nt">&lt;child</span><span class="w"> </span><span class="na">link=</span><span class="s">&quot;camera&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-42-34"><a id="__codelineno-42-34" name="__codelineno-42-34" href="#__codelineno-42-34"></a><span class="w">        </span><span class="nt">&lt;origin</span><span class="w"> </span><span class="na">xyz=</span><span class="s">&quot;${camera_x} ${camera_y} ${camera_z}&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-42-35"><a id="__codelineno-42-35" name="__codelineno-42-35" href="#__codelineno-42-35"></a><span class="w">    </span><span class="nt">&lt;/joint&gt;</span>
</span><span id="__span-42-36"><a id="__codelineno-42-36" name="__codelineno-42-36" href="#__codelineno-42-36"></a><span class="nt">&lt;/robot&gt;</span>
</span></code></pre></div>
<p><code>my_laser_gazebo.urdf.xacro</code></p>
<div class="language-xml highlight"><pre><span></span><code><span id="__span-43-1"><a id="__codelineno-43-1" name="__codelineno-43-1" href="#__codelineno-43-1"></a><span class="nt">&lt;robot</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;my_laser&quot;</span><span class="w"> </span><span class="na">xmlns:xacro=</span><span class="s">&quot;http://wiki.ros.org/xacro&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-43-2"><a id="__codelineno-43-2" name="__codelineno-43-2" href="#__codelineno-43-2"></a>
</span><span id="__span-43-3"><a id="__codelineno-43-3" name="__codelineno-43-3" href="#__codelineno-43-3"></a><span class="w">    </span><span class="nt">&lt;xacro:property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;laser_radius&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;0.02&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-43-4"><a id="__codelineno-43-4" name="__codelineno-43-4" href="#__codelineno-43-4"></a><span class="w">    </span><span class="nt">&lt;xacro:property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;laser_length&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;0.01&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-43-5"><a id="__codelineno-43-5" name="__codelineno-43-5" href="#__codelineno-43-5"></a><span class="w">    </span><span class="nt">&lt;xacro:property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;laser_m&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;0.1&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-43-6"><a id="__codelineno-43-6" name="__codelineno-43-6" href="#__codelineno-43-6"></a>
</span><span id="__span-43-7"><a id="__codelineno-43-7" name="__codelineno-43-7" href="#__codelineno-43-7"></a><span class="w">    </span><span class="nt">&lt;link</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;laser&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-43-8"><a id="__codelineno-43-8" name="__codelineno-43-8" href="#__codelineno-43-8"></a><span class="w">        </span><span class="nt">&lt;visual&gt;</span>
</span><span id="__span-43-9"><a id="__codelineno-43-9" name="__codelineno-43-9" href="#__codelineno-43-9"></a><span class="w">            </span><span class="nt">&lt;geometry&gt;</span>
</span><span id="__span-43-10"><a id="__codelineno-43-10" name="__codelineno-43-10" href="#__codelineno-43-10"></a><span class="w">                </span><span class="nt">&lt;cylinder</span><span class="w"> </span><span class="na">radius=</span><span class="s">&quot;${laser_radius}&quot;</span><span class="w"> </span><span class="na">length=</span><span class="s">&quot;${laser_length}&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-43-11"><a id="__codelineno-43-11" name="__codelineno-43-11" href="#__codelineno-43-11"></a><span class="w">            </span><span class="nt">&lt;/geometry&gt;</span>
</span><span id="__span-43-12"><a id="__codelineno-43-12" name="__codelineno-43-12" href="#__codelineno-43-12"></a><span class="w">            </span><span class="nt">&lt;material</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;blue&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-43-13"><a id="__codelineno-43-13" name="__codelineno-43-13" href="#__codelineno-43-13"></a><span class="w">                </span><span class="nt">&lt;color</span><span class="w"> </span><span class="na">rgba=</span><span class="s">&quot;0 0 1 1&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-43-14"><a id="__codelineno-43-14" name="__codelineno-43-14" href="#__codelineno-43-14"></a><span class="w">            </span><span class="nt">&lt;/material&gt;</span>
</span><span id="__span-43-15"><a id="__codelineno-43-15" name="__codelineno-43-15" href="#__codelineno-43-15"></a><span class="w">        </span><span class="nt">&lt;/visual&gt;</span>
</span><span id="__span-43-16"><a id="__codelineno-43-16" name="__codelineno-43-16" href="#__codelineno-43-16"></a><span class="w">        </span><span class="nt">&lt;collision&gt;</span>
</span><span id="__span-43-17"><a id="__codelineno-43-17" name="__codelineno-43-17" href="#__codelineno-43-17"></a><span class="w">            </span><span class="nt">&lt;geometry&gt;</span>
</span><span id="__span-43-18"><a id="__codelineno-43-18" name="__codelineno-43-18" href="#__codelineno-43-18"></a><span class="w">                </span><span class="nt">&lt;cylinder</span><span class="w"> </span><span class="na">radius=</span><span class="s">&quot;${laser_radius}&quot;</span><span class="w"> </span><span class="na">length=</span><span class="s">&quot;${laser_length}&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-43-19"><a id="__codelineno-43-19" name="__codelineno-43-19" href="#__codelineno-43-19"></a><span class="w">            </span><span class="nt">&lt;/geometry&gt;</span>
</span><span id="__span-43-20"><a id="__codelineno-43-20" name="__codelineno-43-20" href="#__codelineno-43-20"></a><span class="w">        </span><span class="nt">&lt;/collision&gt;</span>
</span><span id="__span-43-21"><a id="__codelineno-43-21" name="__codelineno-43-21" href="#__codelineno-43-21"></a><span class="w">        </span><span class="nt">&lt;xacro:cylinder_inertial_matrix</span><span class="w"> </span><span class="na">m=</span><span class="s">&quot;${laser_m}&quot;</span><span class="w"> </span><span class="na">r=</span><span class="s">&quot;${laser_radius}&quot;</span><span class="w"> </span><span class="na">h=</span><span class="s">&quot;${laser_length}&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-43-22"><a id="__codelineno-43-22" name="__codelineno-43-22" href="#__codelineno-43-22"></a><span class="w">    </span><span class="nt">&lt;/link&gt;</span>
</span><span id="__span-43-23"><a id="__codelineno-43-23" name="__codelineno-43-23" href="#__codelineno-43-23"></a>
</span><span id="__span-43-24"><a id="__codelineno-43-24" name="__codelineno-43-24" href="#__codelineno-43-24"></a><span class="w">    </span><span class="nt">&lt;gazebo</span><span class="w"> </span><span class="na">reference=</span><span class="s">&quot;laser&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-43-25"><a id="__codelineno-43-25" name="__codelineno-43-25" href="#__codelineno-43-25"></a><span class="w">        </span><span class="nt">&lt;material&gt;</span>Gazebo/Blue<span class="nt">&lt;/material&gt;</span>
</span><span id="__span-43-26"><a id="__codelineno-43-26" name="__codelineno-43-26" href="#__codelineno-43-26"></a><span class="w">    </span><span class="nt">&lt;/gazebo&gt;</span>
</span><span id="__span-43-27"><a id="__codelineno-43-27" name="__codelineno-43-27" href="#__codelineno-43-27"></a>
</span><span id="__span-43-28"><a id="__codelineno-43-28" name="__codelineno-43-28" href="#__codelineno-43-28"></a><span class="w">    </span><span class="nt">&lt;joint</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;laser2base_link&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;fixed&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-43-29"><a id="__codelineno-43-29" name="__codelineno-43-29" href="#__codelineno-43-29"></a><span class="w">        </span><span class="nt">&lt;parent</span><span class="w"> </span><span class="na">link=</span><span class="s">&quot;base_link&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-43-30"><a id="__codelineno-43-30" name="__codelineno-43-30" href="#__codelineno-43-30"></a><span class="w">        </span><span class="nt">&lt;child</span><span class="w"> </span><span class="na">link=</span><span class="s">&quot;laser&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-43-31"><a id="__codelineno-43-31" name="__codelineno-43-31" href="#__codelineno-43-31"></a><span class="w">        </span><span class="nt">&lt;origin</span><span class="w"> </span><span class="na">xyz=</span><span class="s">&quot;0 0 ${(base_length+laser_length)/2}&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-43-32"><a id="__codelineno-43-32" name="__codelineno-43-32" href="#__codelineno-43-32"></a><span class="w">    </span><span class="nt">&lt;/joint&gt;</span><span class="w"> </span>
</span><span id="__span-43-33"><a id="__codelineno-43-33" name="__codelineno-43-33" href="#__codelineno-43-33"></a><span class="nt">&lt;/robot&gt;</span>
</span></code></pre></div>
<p><code>my_car_gazebo.urdf.xacro</code></p>
<div class="language-xml highlight"><pre><span></span><code><span id="__span-44-1"><a id="__codelineno-44-1" name="__codelineno-44-1" href="#__codelineno-44-1"></a><span class="nt">&lt;robot</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;my_car&quot;</span><span class="w"> </span><span class="na">xmlns:xacro=</span><span class="s">&quot;http://wiki.ros.org/xacro&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-44-2"><a id="__codelineno-44-2" name="__codelineno-44-2" href="#__codelineno-44-2"></a><span class="w">    </span><span class="nt">&lt;xacro:include</span><span class="w"> </span><span class="na">filename=</span><span class="s">&quot;base_collision.urdf.xacro&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-44-3"><a id="__codelineno-44-3" name="__codelineno-44-3" href="#__codelineno-44-3"></a><span class="w">    </span><span class="nt">&lt;xacro:include</span><span class="w"> </span><span class="na">filename=</span><span class="s">&quot;my_base_gazebo.urdf.xacro&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-44-4"><a id="__codelineno-44-4" name="__codelineno-44-4" href="#__codelineno-44-4"></a><span class="w">    </span><span class="nt">&lt;xacro:include</span><span class="w"> </span><span class="na">filename=</span><span class="s">&quot;my_camera_gazebo.urdf.xacro&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-44-5"><a id="__codelineno-44-5" name="__codelineno-44-5" href="#__codelineno-44-5"></a><span class="w">    </span><span class="nt">&lt;xacro:include</span><span class="w"> </span><span class="na">filename=</span><span class="s">&quot;my_laser_gazebo.urdf.xacro&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-44-6"><a id="__codelineno-44-6" name="__codelineno-44-6" href="#__codelineno-44-6"></a><span class="nt">&lt;/robot&gt;</span>
</span></code></pre></div>
<h3 id="422-gazebo">4.2.2 在gazebo中显示机器人模型</h3>
<p>新建launch文件启动gazebo,并加载机器人模型</p>
<div class="language-shell highlight"><pre><span></span><code><span id="__span-45-1"><a id="__codelineno-45-1" name="__codelineno-45-1" href="#__codelineno-45-1"></a>vkrobot@vkrobot:~/catkin_ws/src$<span class="w"> </span>touch<span class="w"> </span>learning_urdf/launch/start_gazebo.launch
</span></code></pre></div>
<p><code>start_gazebo.launch</code></p>
<div class="language-xml highlight"><pre><span></span><code><span id="__span-46-1"><a id="__codelineno-46-1" name="__codelineno-46-1" href="#__codelineno-46-1"></a><span class="nt">&lt;launch&gt;</span>
</span><span id="__span-46-2"><a id="__codelineno-46-2" name="__codelineno-46-2" href="#__codelineno-46-2"></a><span class="w">    </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;robot_description&quot;</span><span class="w"> </span><span class="na">command=</span><span class="s">&quot;$(find xacro)/xacro $(find demo_urdf)/urdf/my_car_gazebo.urdf.xacro&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-46-3"><a id="__codelineno-46-3" name="__codelineno-46-3" href="#__codelineno-46-3"></a>
</span><span id="__span-46-4"><a id="__codelineno-46-4" name="__codelineno-46-4" href="#__codelineno-46-4"></a><span class="w">    </span><span class="nt">&lt;include</span><span class="w"> </span><span class="na">file=</span><span class="s">&quot;$(find gazebo_ros)/launch/empty_world.launch&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-46-5"><a id="__codelineno-46-5" name="__codelineno-46-5" href="#__codelineno-46-5"></a><span class="w">    </span><span class="nt">&lt;node</span><span class="w"> </span><span class="na">pkg=</span><span class="s">&quot;gazebo_ros&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;spawn_model&quot;</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;model&quot;</span><span class="w"> </span><span class="na">args=</span><span class="s">&quot;-urdf -model mycar -param robot_description&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-46-6"><a id="__codelineno-46-6" name="__codelineno-46-6" href="#__codelineno-46-6"></a>
</span><span id="__span-46-7"><a id="__codelineno-46-7" name="__codelineno-46-7" href="#__codelineno-46-7"></a><span class="w">    </span><span class="nt">&lt;node</span><span class="w"> </span><span class="na">pkg=</span><span class="s">&quot;rviz&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;rviz&quot;</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;rviz&quot;</span><span class="w"> </span><span class="na">args=</span><span class="s">&quot;-d $(find demo_urdf)/config/my_car.rviz&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-46-8"><a id="__codelineno-46-8" name="__codelineno-46-8" href="#__codelineno-46-8"></a>
</span><span id="__span-46-9"><a id="__codelineno-46-9" name="__codelineno-46-9" href="#__codelineno-46-9"></a><span class="w">    </span><span class="nt">&lt;node</span><span class="w"> </span><span class="na">pkg=</span><span class="s">&quot;robot_state_publisher&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;robot_state_publisher&quot;</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;robot_state_publisher&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-46-10"><a id="__codelineno-46-10" name="__codelineno-46-10" href="#__codelineno-46-10"></a><span class="w">    </span><span class="nt">&lt;node</span><span class="w"> </span><span class="na">pkg=</span><span class="s">&quot;joint_state_publisher&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;joint_state_publisher&quot;</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;joint_state_publisher&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-46-11"><a id="__codelineno-46-11" name="__codelineno-46-11" href="#__codelineno-46-11"></a><span class="nt">&lt;/launch&gt;</span>
</span></code></pre></div>
<h3 id="423-gazebo">4.2.3 控制机器人在gazebo中运动</h3>
<p>gazebo 中已经可以正常显示机器人模型了，那么如何控制机器人运动呢?这需要用到ros中的组件：<code>ros_control</code></p>
<h4 id="ros_control">ros_control简介</h4>
<p><code>ros_control</code>是一组软件包，包括控制器接口、控制器管理、传输和硬件接口。gazebo已经实现了<code>ros_control</code>的相关接口，如果需要在gazebo中控制机器人运动，直接调用相关接口即可。</p>
<blockquote>
<p>插件接口参考：<a href="https://classic.gazebosim.org/tutorials?tut=ros_gzplugins">Gazebo : Tutorial : Gazebo plugins in ROS (gazebosim.org)</a></p>
</blockquote>
<ol>
<li>为驱动轮关节添加传动装置及控制器</li>
</ol>
<div class="language-shell highlight"><pre><span></span><code><span id="__span-47-1"><a id="__codelineno-47-1" name="__codelineno-47-1" href="#__codelineno-47-1"></a>vkrobot@vkrobot:~catkin_ws/src$<span class="w"> </span>touch<span class="w"> </span>learning_urdf/urdf/move.urdf.xacro
</span></code></pre></div>
<p><code>move.urdf.xacro</code></p>
<div class="language-xml highlight"><pre><span></span><code><span id="__span-48-1"><a id="__codelineno-48-1" name="__codelineno-48-1" href="#__codelineno-48-1"></a><span class="nt">&lt;robot</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;my_car&quot;</span><span class="w"> </span><span class="na">xmlns:xacro=</span><span class="s">&quot;http://wiki.ros.org/xacro&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-48-2"><a id="__codelineno-48-2" name="__codelineno-48-2" href="#__codelineno-48-2"></a>
</span><span id="__span-48-3"><a id="__codelineno-48-3" name="__codelineno-48-3" href="#__codelineno-48-3"></a><span class="w">    </span><span class="nt">&lt;xacro:macro</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;joint_trans&quot;</span><span class="w"> </span><span class="na">params=</span><span class="s">&quot;joint_name&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-48-4"><a id="__codelineno-48-4" name="__codelineno-48-4" href="#__codelineno-48-4"></a><span class="w">        </span><span class="nt">&lt;transmission</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;${joint_name}_trans&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-48-5"><a id="__codelineno-48-5" name="__codelineno-48-5" href="#__codelineno-48-5"></a><span class="w">            </span><span class="nt">&lt;type&gt;</span>transmission_interface/SimpleTransmission<span class="nt">&lt;/type&gt;</span>
</span><span id="__span-48-6"><a id="__codelineno-48-6" name="__codelineno-48-6" href="#__codelineno-48-6"></a><span class="w">            </span><span class="nt">&lt;joint</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;${joint_name}&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-48-7"><a id="__codelineno-48-7" name="__codelineno-48-7" href="#__codelineno-48-7"></a><span class="w">                </span><span class="nt">&lt;hardwareInterface&gt;</span>hardware_interface/VelocityJointInterface<span class="nt">&lt;/hardwareInterface&gt;</span>
</span><span id="__span-48-8"><a id="__codelineno-48-8" name="__codelineno-48-8" href="#__codelineno-48-8"></a><span class="w">            </span><span class="nt">&lt;/joint&gt;</span>
</span><span id="__span-48-9"><a id="__codelineno-48-9" name="__codelineno-48-9" href="#__codelineno-48-9"></a><span class="w">            </span><span class="nt">&lt;actuator</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;${joint_name}_motor&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-48-10"><a id="__codelineno-48-10" name="__codelineno-48-10" href="#__codelineno-48-10"></a><span class="w">                </span><span class="nt">&lt;hardwareInterface&gt;</span>hardware_interface/VelocityJointInterface<span class="nt">&lt;/hardwareInterface&gt;</span>
</span><span id="__span-48-11"><a id="__codelineno-48-11" name="__codelineno-48-11" href="#__codelineno-48-11"></a><span class="w">                </span><span class="nt">&lt;mechanicalReduction&gt;</span>1<span class="nt">&lt;/mechanicalReduction&gt;</span>
</span><span id="__span-48-12"><a id="__codelineno-48-12" name="__codelineno-48-12" href="#__codelineno-48-12"></a><span class="w">            </span><span class="nt">&lt;/actuator&gt;</span>
</span><span id="__span-48-13"><a id="__codelineno-48-13" name="__codelineno-48-13" href="#__codelineno-48-13"></a><span class="w">        </span><span class="nt">&lt;/transmission&gt;</span>
</span><span id="__span-48-14"><a id="__codelineno-48-14" name="__codelineno-48-14" href="#__codelineno-48-14"></a><span class="w">    </span><span class="nt">&lt;/xacro:macro&gt;</span>
</span><span id="__span-48-15"><a id="__codelineno-48-15" name="__codelineno-48-15" href="#__codelineno-48-15"></a>
</span><span id="__span-48-16"><a id="__codelineno-48-16" name="__codelineno-48-16" href="#__codelineno-48-16"></a><span class="w">    </span><span class="nt">&lt;xacro:joint_trans</span><span class="w"> </span><span class="na">joint_name=</span><span class="s">&quot;left_wheel2base_link&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-48-17"><a id="__codelineno-48-17" name="__codelineno-48-17" href="#__codelineno-48-17"></a><span class="w">    </span><span class="nt">&lt;xacro:joint_trans</span><span class="w"> </span><span class="na">joint_name=</span><span class="s">&quot;right_wheel2base_link&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-48-18"><a id="__codelineno-48-18" name="__codelineno-48-18" href="#__codelineno-48-18"></a>
</span><span id="__span-48-19"><a id="__codelineno-48-19" name="__codelineno-48-19" href="#__codelineno-48-19"></a><span class="w">    </span><span class="nt">&lt;gazebo&gt;</span>
</span><span id="__span-48-20"><a id="__codelineno-48-20" name="__codelineno-48-20" href="#__codelineno-48-20"></a><span class="w">        </span><span class="nt">&lt;plugin</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;differential_drive_controller&quot;</span><span class="w"> </span><span class="na">filename=</span><span class="s">&quot;libgazebo_ros_diff_drive.so&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-48-21"><a id="__codelineno-48-21" name="__codelineno-48-21" href="#__codelineno-48-21"></a><span class="w">            </span><span class="nt">&lt;rosDebugLevel&gt;</span>Debug<span class="nt">&lt;/rosDebugLevel&gt;</span>
</span><span id="__span-48-22"><a id="__codelineno-48-22" name="__codelineno-48-22" href="#__codelineno-48-22"></a><span class="w">            </span><span class="nt">&lt;publishWheelTF&gt;</span>true<span class="nt">&lt;/publishWheelTF&gt;</span>
</span><span id="__span-48-23"><a id="__codelineno-48-23" name="__codelineno-48-23" href="#__codelineno-48-23"></a><span class="w">            </span><span class="nt">&lt;robotNamespace&gt;</span>/<span class="nt">&lt;/robotNamespace&gt;</span>
</span><span id="__span-48-24"><a id="__codelineno-48-24" name="__codelineno-48-24" href="#__codelineno-48-24"></a><span class="w">            </span><span class="nt">&lt;publishTf&gt;</span>1<span class="nt">&lt;/publishTf&gt;</span>
</span><span id="__span-48-25"><a id="__codelineno-48-25" name="__codelineno-48-25" href="#__codelineno-48-25"></a><span class="w">            </span><span class="nt">&lt;publishWheelJointState&gt;</span>true<span class="nt">&lt;/publishWheelJointState&gt;</span>
</span><span id="__span-48-26"><a id="__codelineno-48-26" name="__codelineno-48-26" href="#__codelineno-48-26"></a><span class="w">            </span><span class="nt">&lt;alwaysOn&gt;</span>true<span class="nt">&lt;/alwaysOn&gt;</span>
</span><span id="__span-48-27"><a id="__codelineno-48-27" name="__codelineno-48-27" href="#__codelineno-48-27"></a><span class="w">            </span><span class="nt">&lt;updateRate&gt;</span>100.0<span class="nt">&lt;/updateRate&gt;</span>
</span><span id="__span-48-28"><a id="__codelineno-48-28" name="__codelineno-48-28" href="#__codelineno-48-28"></a><span class="w">            </span><span class="nt">&lt;legacyMode&gt;</span>true<span class="nt">&lt;/legacyMode&gt;</span>
</span><span id="__span-48-29"><a id="__codelineno-48-29" name="__codelineno-48-29" href="#__codelineno-48-29"></a><span class="w">            </span><span class="nt">&lt;leftJoint&gt;</span>left_wheel2base_link<span class="nt">&lt;/leftJoint&gt;</span>
</span><span id="__span-48-30"><a id="__codelineno-48-30" name="__codelineno-48-30" href="#__codelineno-48-30"></a><span class="w">            </span><span class="nt">&lt;rightJoint&gt;</span>right_wheel2base_link<span class="nt">&lt;/rightJoint&gt;</span>
</span><span id="__span-48-31"><a id="__codelineno-48-31" name="__codelineno-48-31" href="#__codelineno-48-31"></a><span class="w">            </span><span class="nt">&lt;wheelSeparation&gt;</span>${base_radius<span class="w"> </span>*<span class="w"> </span>2}<span class="nt">&lt;/wheelSeparation&gt;</span>
</span><span id="__span-48-32"><a id="__codelineno-48-32" name="__codelineno-48-32" href="#__codelineno-48-32"></a><span class="w">            </span><span class="nt">&lt;wheelDiameter&gt;</span>${wheel_radius<span class="w"> </span>*<span class="w"> </span>2}<span class="nt">&lt;/wheelDiameter&gt;</span>
</span><span id="__span-48-33"><a id="__codelineno-48-33" name="__codelineno-48-33" href="#__codelineno-48-33"></a><span class="w">            </span><span class="nt">&lt;broadcastTF&gt;</span>1<span class="nt">&lt;/broadcastTF&gt;</span>
</span><span id="__span-48-34"><a id="__codelineno-48-34" name="__codelineno-48-34" href="#__codelineno-48-34"></a><span class="w">            </span><span class="nt">&lt;wheelTorque&gt;</span>30<span class="nt">&lt;/wheelTorque&gt;</span>
</span><span id="__span-48-35"><a id="__codelineno-48-35" name="__codelineno-48-35" href="#__codelineno-48-35"></a><span class="w">            </span><span class="nt">&lt;wheelAcceleration&gt;</span>1.8<span class="nt">&lt;/wheelAcceleration&gt;</span>
</span><span id="__span-48-36"><a id="__codelineno-48-36" name="__codelineno-48-36" href="#__codelineno-48-36"></a><span class="w">            </span><span class="nt">&lt;commandTopic&gt;</span>cmd_vel<span class="nt">&lt;/commandTopic&gt;</span>
</span><span id="__span-48-37"><a id="__codelineno-48-37" name="__codelineno-48-37" href="#__codelineno-48-37"></a><span class="w">            </span><span class="nt">&lt;odometryFrame&gt;</span>odom<span class="nt">&lt;/odometryFrame&gt;</span><span class="w"> </span>
</span><span id="__span-48-38"><a id="__codelineno-48-38" name="__codelineno-48-38" href="#__codelineno-48-38"></a><span class="w">            </span><span class="nt">&lt;odometryTopic&gt;</span>odom<span class="nt">&lt;/odometryTopic&gt;</span>
</span><span id="__span-48-39"><a id="__codelineno-48-39" name="__codelineno-48-39" href="#__codelineno-48-39"></a><span class="w">            </span><span class="nt">&lt;robotBaseFrame&gt;</span>base_footprint<span class="nt">&lt;/robotBaseFrame&gt;</span>
</span><span id="__span-48-40"><a id="__codelineno-48-40" name="__codelineno-48-40" href="#__codelineno-48-40"></a><span class="w">        </span><span class="nt">&lt;/plugin&gt;</span>
</span><span id="__span-48-41"><a id="__codelineno-48-41" name="__codelineno-48-41" href="#__codelineno-48-41"></a><span class="w">    </span><span class="nt">&lt;/gazebo&gt;</span>
</span><span id="__span-48-42"><a id="__codelineno-48-42" name="__codelineno-48-42" href="#__codelineno-48-42"></a>
</span><span id="__span-48-43"><a id="__codelineno-48-43" name="__codelineno-48-43" href="#__codelineno-48-43"></a><span class="nt">&lt;/robot&gt;</span>
</span></code></pre></div>
<ol>
<li>将<code>move.urdf.xacro</code>集成到<code>my_car_gazebo.urdf.xacro</code></li>
</ol>
<p><code>my_car_gazebo.urdf.xacro</code></p>
<div class="language-xml highlight"><pre><span></span><code><span id="__span-49-1"><a id="__codelineno-49-1" name="__codelineno-49-1" href="#__codelineno-49-1"></a><span class="nt">&lt;robot</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;my_car&quot;</span><span class="w"> </span><span class="na">xmlns:xacro=</span><span class="s">&quot;http://wiki.ros.org/xacro&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-49-2"><a id="__codelineno-49-2" name="__codelineno-49-2" href="#__codelineno-49-2"></a><span class="w">    </span>......
</span><span id="__span-49-3"><a id="__codelineno-49-3" name="__codelineno-49-3" href="#__codelineno-49-3"></a><span class="w">    </span><span class="nt">&lt;xacro:include</span><span class="w"> </span><span class="na">filename=</span><span class="s">&quot;move.urdf.xacro&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-49-4"><a id="__codelineno-49-4" name="__codelineno-49-4" href="#__codelineno-49-4"></a><span class="nt">&lt;/robot&gt;</span>
</span></code></pre></div>
<ol>
<li>
<p><code>start_gazebo.launch</code>文件不需要修改即可启动</p>
</li>
<li>
<p>启动键盘控制节点，控制小车运动</p>
</li>
</ol>
<p>​   <strong>安装</strong>：<code>sudo apt-get install ros-melodic-teleop-twist-keyboard</code></p>
<p>​   <strong>启动</strong>：<code>rosrun teleop_twist_keyboard teleop_twist_keyboard.py</code></p>
<h3 id="424">4.2.4 摄像头仿真</h3>
<ol>
<li>配置摄像头传感器信息</li>
</ol>
<div class="language-shell highlight"><pre><span></span><code><span id="__span-50-1"><a id="__codelineno-50-1" name="__codelineno-50-1" href="#__codelineno-50-1"></a>vkrobot@vkrobot:~/catkin_ws/src$<span class="w"> </span>touch<span class="w"> </span>learning_urdf/urdf/camera.urdf.xacro
</span></code></pre></div>
<p><code>camera.urdf.xacro</code></p>
<div class="language-xml highlight"><pre><span></span><code><span id="__span-51-1"><a id="__codelineno-51-1" name="__codelineno-51-1" href="#__codelineno-51-1"></a><span class="nt">&lt;robot</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;my_sensors&quot;</span><span class="w"> </span><span class="na">xmlns:xacro=</span><span class="s">&quot;http://wiki.ros.org/xacro&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-51-2"><a id="__codelineno-51-2" name="__codelineno-51-2" href="#__codelineno-51-2"></a><span class="w">  </span><span class="nt">&lt;gazebo</span><span class="w"> </span><span class="na">reference=</span><span class="s">&quot;camera&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-51-3"><a id="__codelineno-51-3" name="__codelineno-51-3" href="#__codelineno-51-3"></a><span class="w">    </span><span class="nt">&lt;sensor</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;camera&quot;</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;camera_node&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-51-4"><a id="__codelineno-51-4" name="__codelineno-51-4" href="#__codelineno-51-4"></a><span class="w">      </span><span class="nt">&lt;update_rate&gt;</span>30.0<span class="nt">&lt;/update_rate&gt;</span>
</span><span id="__span-51-5"><a id="__codelineno-51-5" name="__codelineno-51-5" href="#__codelineno-51-5"></a><span class="w">      </span><span class="nt">&lt;camera</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;head&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-51-6"><a id="__codelineno-51-6" name="__codelineno-51-6" href="#__codelineno-51-6"></a><span class="w">        </span><span class="nt">&lt;horizontal_fov&gt;</span>1.3962634<span class="nt">&lt;/horizontal_fov&gt;</span>
</span><span id="__span-51-7"><a id="__codelineno-51-7" name="__codelineno-51-7" href="#__codelineno-51-7"></a><span class="w">        </span><span class="nt">&lt;image&gt;</span>
</span><span id="__span-51-8"><a id="__codelineno-51-8" name="__codelineno-51-8" href="#__codelineno-51-8"></a><span class="w">          </span><span class="nt">&lt;width&gt;</span>1280<span class="nt">&lt;/width&gt;</span>
</span><span id="__span-51-9"><a id="__codelineno-51-9" name="__codelineno-51-9" href="#__codelineno-51-9"></a><span class="w">          </span><span class="nt">&lt;height&gt;</span>720<span class="nt">&lt;/height&gt;</span>
</span><span id="__span-51-10"><a id="__codelineno-51-10" name="__codelineno-51-10" href="#__codelineno-51-10"></a><span class="w">          </span><span class="nt">&lt;format&gt;</span>R8G8B8<span class="nt">&lt;/format&gt;</span>
</span><span id="__span-51-11"><a id="__codelineno-51-11" name="__codelineno-51-11" href="#__codelineno-51-11"></a><span class="w">        </span><span class="nt">&lt;/image&gt;</span>
</span><span id="__span-51-12"><a id="__codelineno-51-12" name="__codelineno-51-12" href="#__codelineno-51-12"></a><span class="w">        </span><span class="nt">&lt;clip&gt;</span>
</span><span id="__span-51-13"><a id="__codelineno-51-13" name="__codelineno-51-13" href="#__codelineno-51-13"></a><span class="w">          </span><span class="nt">&lt;near&gt;</span>0.02<span class="nt">&lt;/near&gt;</span>
</span><span id="__span-51-14"><a id="__codelineno-51-14" name="__codelineno-51-14" href="#__codelineno-51-14"></a><span class="w">          </span><span class="nt">&lt;far&gt;</span>300<span class="nt">&lt;/far&gt;</span>
</span><span id="__span-51-15"><a id="__codelineno-51-15" name="__codelineno-51-15" href="#__codelineno-51-15"></a><span class="w">        </span><span class="nt">&lt;/clip&gt;</span>
</span><span id="__span-51-16"><a id="__codelineno-51-16" name="__codelineno-51-16" href="#__codelineno-51-16"></a><span class="w">        </span><span class="nt">&lt;noise&gt;</span>
</span><span id="__span-51-17"><a id="__codelineno-51-17" name="__codelineno-51-17" href="#__codelineno-51-17"></a><span class="w">          </span><span class="nt">&lt;type&gt;</span>gaussian<span class="nt">&lt;/type&gt;</span>
</span><span id="__span-51-18"><a id="__codelineno-51-18" name="__codelineno-51-18" href="#__codelineno-51-18"></a><span class="w">          </span><span class="nt">&lt;mean&gt;</span>0.0<span class="nt">&lt;/mean&gt;</span>
</span><span id="__span-51-19"><a id="__codelineno-51-19" name="__codelineno-51-19" href="#__codelineno-51-19"></a><span class="w">          </span><span class="nt">&lt;stddev&gt;</span>0.007<span class="nt">&lt;/stddev&gt;</span>
</span><span id="__span-51-20"><a id="__codelineno-51-20" name="__codelineno-51-20" href="#__codelineno-51-20"></a><span class="w">        </span><span class="nt">&lt;/noise&gt;</span>
</span><span id="__span-51-21"><a id="__codelineno-51-21" name="__codelineno-51-21" href="#__codelineno-51-21"></a><span class="w">      </span><span class="nt">&lt;/camera&gt;</span>
</span><span id="__span-51-22"><a id="__codelineno-51-22" name="__codelineno-51-22" href="#__codelineno-51-22"></a><span class="w">      </span><span class="nt">&lt;plugin</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;gazebo_camera&quot;</span><span class="w"> </span><span class="na">filename=</span><span class="s">&quot;libgazebo_ros_camera.so&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-51-23"><a id="__codelineno-51-23" name="__codelineno-51-23" href="#__codelineno-51-23"></a><span class="w">        </span><span class="nt">&lt;alwaysOn&gt;</span>true<span class="nt">&lt;/alwaysOn&gt;</span>
</span><span id="__span-51-24"><a id="__codelineno-51-24" name="__codelineno-51-24" href="#__codelineno-51-24"></a><span class="w">        </span><span class="nt">&lt;updateRate&gt;</span>0.0<span class="nt">&lt;/updateRate&gt;</span>
</span><span id="__span-51-25"><a id="__codelineno-51-25" name="__codelineno-51-25" href="#__codelineno-51-25"></a><span class="w">        </span><span class="nt">&lt;cameraName&gt;</span>/camera<span class="nt">&lt;/cameraName&gt;</span>
</span><span id="__span-51-26"><a id="__codelineno-51-26" name="__codelineno-51-26" href="#__codelineno-51-26"></a><span class="w">        </span><span class="nt">&lt;imageTopicName&gt;</span>image_raw<span class="nt">&lt;/imageTopicName&gt;</span>
</span><span id="__span-51-27"><a id="__codelineno-51-27" name="__codelineno-51-27" href="#__codelineno-51-27"></a><span class="w">        </span><span class="nt">&lt;cameraInfoTopicName&gt;</span>camera_info<span class="nt">&lt;/cameraInfoTopicName&gt;</span>
</span><span id="__span-51-28"><a id="__codelineno-51-28" name="__codelineno-51-28" href="#__codelineno-51-28"></a><span class="w">        </span><span class="nt">&lt;frameName&gt;</span>camera<span class="nt">&lt;/frameName&gt;</span>
</span><span id="__span-51-29"><a id="__codelineno-51-29" name="__codelineno-51-29" href="#__codelineno-51-29"></a><span class="w">        </span><span class="nt">&lt;hackBaseline&gt;</span>0.07<span class="nt">&lt;/hackBaseline&gt;</span>
</span><span id="__span-51-30"><a id="__codelineno-51-30" name="__codelineno-51-30" href="#__codelineno-51-30"></a><span class="w">        </span><span class="nt">&lt;distortionK1&gt;</span>0.0<span class="nt">&lt;/distortionK1&gt;</span>
</span><span id="__span-51-31"><a id="__codelineno-51-31" name="__codelineno-51-31" href="#__codelineno-51-31"></a><span class="w">        </span><span class="nt">&lt;distortionK2&gt;</span>0.0<span class="nt">&lt;/distortionK2&gt;</span>
</span><span id="__span-51-32"><a id="__codelineno-51-32" name="__codelineno-51-32" href="#__codelineno-51-32"></a><span class="w">        </span><span class="nt">&lt;distortionK3&gt;</span>0.0<span class="nt">&lt;/distortionK3&gt;</span>
</span><span id="__span-51-33"><a id="__codelineno-51-33" name="__codelineno-51-33" href="#__codelineno-51-33"></a><span class="w">        </span><span class="nt">&lt;distortionT1&gt;</span>0.0<span class="nt">&lt;/distortionT1&gt;</span>
</span><span id="__span-51-34"><a id="__codelineno-51-34" name="__codelineno-51-34" href="#__codelineno-51-34"></a><span class="w">        </span><span class="nt">&lt;distortionT2&gt;</span>0.0<span class="nt">&lt;/distortionT2&gt;</span>
</span><span id="__span-51-35"><a id="__codelineno-51-35" name="__codelineno-51-35" href="#__codelineno-51-35"></a><span class="w">      </span><span class="nt">&lt;/plugin&gt;</span>
</span><span id="__span-51-36"><a id="__codelineno-51-36" name="__codelineno-51-36" href="#__codelineno-51-36"></a><span class="w">    </span><span class="nt">&lt;/sensor&gt;</span>
</span><span id="__span-51-37"><a id="__codelineno-51-37" name="__codelineno-51-37" href="#__codelineno-51-37"></a><span class="w">  </span><span class="nt">&lt;/gazebo&gt;</span>
</span><span id="__span-51-38"><a id="__codelineno-51-38" name="__codelineno-51-38" href="#__codelineno-51-38"></a><span class="nt">&lt;/robot&gt;</span>
</span></code></pre></div>
<ol>
<li>将<code>camera.urdf.xacro</code>集成到<code>my_car_gazebo.urdf.xacro</code></li>
</ol>
<p><code>my_car_gazebo.urdf.xacro</code></p>
<div class="language-xml highlight"><pre><span></span><code><span id="__span-52-1"><a id="__codelineno-52-1" name="__codelineno-52-1" href="#__codelineno-52-1"></a><span class="nt">&lt;robot</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;my_car&quot;</span><span class="w"> </span><span class="na">xmlns:xacro=</span><span class="s">&quot;http://wiki.ros.org/xacro&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-52-2"><a id="__codelineno-52-2" name="__codelineno-52-2" href="#__codelineno-52-2"></a><span class="w">    </span>......
</span><span id="__span-52-3"><a id="__codelineno-52-3" name="__codelineno-52-3" href="#__codelineno-52-3"></a><span class="w">    </span><span class="nt">&lt;xacro:include</span><span class="w"> </span><span class="na">filename=</span><span class="s">&quot;camera.urdf.xacro&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-52-4"><a id="__codelineno-52-4" name="__codelineno-52-4" href="#__codelineno-52-4"></a><span class="nt">&lt;/robot&gt;</span>
</span></code></pre></div>
<ol>
<li>
<p><code>start_gazebo.launch</code>文件不需要修改即可启动</p>
</li>
<li>
<p>启动键盘控制节点，控制小车运动</p>
</li>
</ol>
<p>​   <strong>安装</strong>：<code>sudo apt-get install ros-melodic-teleop-twist-keyboard</code></p>
<p>​   <strong>启动</strong>：<code>rosrun teleop_twist_keyboard teleop_twist_keyboard.py</code></p>
<blockquote>
<p><span class="keys"><kbd class="key-u">U</kbd></span>-往左前方  <span class="keys"><kbd class="key-i">I</kbd></span>-往正前方  <span class="keys"><kbd class="key-o">O</kbd></span>-往右前方</p>
<p><span class="keys"><kbd class="key-j">J</kbd></span>-原地左转  <span class="keys"><kbd class="key-k">K</kbd></span>-停止运动  <span class="keys"><kbd class="key-l">L</kbd></span>-原地右转</p>
<p><span class="keys"><kbd class="key-m">M</kbd></span>-往左后方  <span class="keys"><kbd class="key-comma">,</kbd></span>-往正后方  <span class="keys"><kbd class="key-period">.</kbd></span>-往右后方</p>
</blockquote>
<h3 id="425">4.2.5 激光雷达仿真</h3>
<ol>
<li>配置激光雷达传感器信息</li>
</ol>
<div class="language-shell highlight"><pre><span></span><code><span id="__span-53-1"><a id="__codelineno-53-1" name="__codelineno-53-1" href="#__codelineno-53-1"></a>vkrobot@vkrobot:~/catkin_ws/src$<span class="w"> </span>touch<span class="w"> </span>learning_urdf/urdf/laser.urdf.xacro
</span></code></pre></div>
<p><code>laser.urdf.xacro</code></p>
<div class="language-xml highlight"><pre><span></span><code><span id="__span-54-1"><a id="__codelineno-54-1" name="__codelineno-54-1" href="#__codelineno-54-1"></a><span class="nt">&lt;robot</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;my_sensors&quot;</span><span class="w"> </span><span class="na">xmlns:xacro=</span><span class="s">&quot;http://wiki.ros.org/xacro&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-54-2"><a id="__codelineno-54-2" name="__codelineno-54-2" href="#__codelineno-54-2"></a><span class="w">  </span><span class="nt">&lt;gazebo</span><span class="w"> </span><span class="na">reference=</span><span class="s">&quot;laser&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-54-3"><a id="__codelineno-54-3" name="__codelineno-54-3" href="#__codelineno-54-3"></a><span class="w">    </span><span class="nt">&lt;sensor</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;ray&quot;</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;rplidar&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-54-4"><a id="__codelineno-54-4" name="__codelineno-54-4" href="#__codelineno-54-4"></a><span class="w">      </span><span class="nt">&lt;pose&gt;</span>0<span class="w"> </span>0<span class="w"> </span>0<span class="w"> </span>0<span class="w"> </span>0<span class="w"> </span>0<span class="nt">&lt;/pose&gt;</span>
</span><span id="__span-54-5"><a id="__codelineno-54-5" name="__codelineno-54-5" href="#__codelineno-54-5"></a><span class="w">      </span><span class="nt">&lt;visualize&gt;</span>true<span class="nt">&lt;/visualize&gt;</span>
</span><span id="__span-54-6"><a id="__codelineno-54-6" name="__codelineno-54-6" href="#__codelineno-54-6"></a><span class="w">      </span><span class="nt">&lt;update_rate&gt;</span>5<span class="nt">&lt;/update_rate&gt;</span>
</span><span id="__span-54-7"><a id="__codelineno-54-7" name="__codelineno-54-7" href="#__codelineno-54-7"></a><span class="w">      </span><span class="nt">&lt;ray&gt;</span>
</span><span id="__span-54-8"><a id="__codelineno-54-8" name="__codelineno-54-8" href="#__codelineno-54-8"></a><span class="w">        </span><span class="nt">&lt;scan&gt;</span>
</span><span id="__span-54-9"><a id="__codelineno-54-9" name="__codelineno-54-9" href="#__codelineno-54-9"></a><span class="w">          </span><span class="nt">&lt;horizontal&gt;</span>
</span><span id="__span-54-10"><a id="__codelineno-54-10" name="__codelineno-54-10" href="#__codelineno-54-10"></a><span class="w">            </span><span class="nt">&lt;samples&gt;</span>360<span class="nt">&lt;/samples&gt;</span>
</span><span id="__span-54-11"><a id="__codelineno-54-11" name="__codelineno-54-11" href="#__codelineno-54-11"></a><span class="w">            </span><span class="nt">&lt;resolution&gt;</span>1<span class="nt">&lt;/resolution&gt;</span>
</span><span id="__span-54-12"><a id="__codelineno-54-12" name="__codelineno-54-12" href="#__codelineno-54-12"></a><span class="w">            </span><span class="nt">&lt;min_angle&gt;</span>-3<span class="nt">&lt;/min_angle&gt;</span>
</span><span id="__span-54-13"><a id="__codelineno-54-13" name="__codelineno-54-13" href="#__codelineno-54-13"></a><span class="w">            </span><span class="nt">&lt;max_angle&gt;</span>3<span class="nt">&lt;/max_angle&gt;</span>
</span><span id="__span-54-14"><a id="__codelineno-54-14" name="__codelineno-54-14" href="#__codelineno-54-14"></a><span class="w">          </span><span class="nt">&lt;/horizontal&gt;</span>
</span><span id="__span-54-15"><a id="__codelineno-54-15" name="__codelineno-54-15" href="#__codelineno-54-15"></a><span class="w">        </span><span class="nt">&lt;/scan&gt;</span>
</span><span id="__span-54-16"><a id="__codelineno-54-16" name="__codelineno-54-16" href="#__codelineno-54-16"></a><span class="w">        </span><span class="nt">&lt;range&gt;</span>
</span><span id="__span-54-17"><a id="__codelineno-54-17" name="__codelineno-54-17" href="#__codelineno-54-17"></a><span class="w">          </span><span class="nt">&lt;min&gt;</span>0.10<span class="nt">&lt;/min&gt;</span>
</span><span id="__span-54-18"><a id="__codelineno-54-18" name="__codelineno-54-18" href="#__codelineno-54-18"></a><span class="w">          </span><span class="nt">&lt;max&gt;</span>30.0<span class="nt">&lt;/max&gt;</span>
</span><span id="__span-54-19"><a id="__codelineno-54-19" name="__codelineno-54-19" href="#__codelineno-54-19"></a><span class="w">          </span><span class="nt">&lt;resolution&gt;</span>0.01<span class="nt">&lt;/resolution&gt;</span>
</span><span id="__span-54-20"><a id="__codelineno-54-20" name="__codelineno-54-20" href="#__codelineno-54-20"></a><span class="w">        </span><span class="nt">&lt;/range&gt;</span>
</span><span id="__span-54-21"><a id="__codelineno-54-21" name="__codelineno-54-21" href="#__codelineno-54-21"></a><span class="w">        </span><span class="nt">&lt;noise&gt;</span>
</span><span id="__span-54-22"><a id="__codelineno-54-22" name="__codelineno-54-22" href="#__codelineno-54-22"></a><span class="w">          </span><span class="nt">&lt;type&gt;</span>gaussian<span class="nt">&lt;/type&gt;</span>
</span><span id="__span-54-23"><a id="__codelineno-54-23" name="__codelineno-54-23" href="#__codelineno-54-23"></a><span class="w">          </span><span class="nt">&lt;mean&gt;</span>0.0<span class="nt">&lt;/mean&gt;</span>
</span><span id="__span-54-24"><a id="__codelineno-54-24" name="__codelineno-54-24" href="#__codelineno-54-24"></a><span class="w">          </span><span class="nt">&lt;stddev&gt;</span>0.01<span class="nt">&lt;/stddev&gt;</span>
</span><span id="__span-54-25"><a id="__codelineno-54-25" name="__codelineno-54-25" href="#__codelineno-54-25"></a><span class="w">        </span><span class="nt">&lt;/noise&gt;</span>
</span><span id="__span-54-26"><a id="__codelineno-54-26" name="__codelineno-54-26" href="#__codelineno-54-26"></a><span class="w">      </span><span class="nt">&lt;/ray&gt;</span>
</span><span id="__span-54-27"><a id="__codelineno-54-27" name="__codelineno-54-27" href="#__codelineno-54-27"></a><span class="w">      </span><span class="nt">&lt;plugin</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;gazebo_rplidar&quot;</span><span class="w"> </span><span class="na">filename=</span><span class="s">&quot;libgazebo_ros_laser.so&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-54-28"><a id="__codelineno-54-28" name="__codelineno-54-28" href="#__codelineno-54-28"></a><span class="w">        </span><span class="nt">&lt;topicName&gt;</span>/scan<span class="nt">&lt;/topicName&gt;</span>
</span><span id="__span-54-29"><a id="__codelineno-54-29" name="__codelineno-54-29" href="#__codelineno-54-29"></a><span class="w">        </span><span class="nt">&lt;frameName&gt;</span>laser<span class="nt">&lt;/frameName&gt;</span>
</span><span id="__span-54-30"><a id="__codelineno-54-30" name="__codelineno-54-30" href="#__codelineno-54-30"></a><span class="w">      </span><span class="nt">&lt;/plugin&gt;</span>
</span><span id="__span-54-31"><a id="__codelineno-54-31" name="__codelineno-54-31" href="#__codelineno-54-31"></a><span class="w">    </span><span class="nt">&lt;/sensor&gt;</span>
</span><span id="__span-54-32"><a id="__codelineno-54-32" name="__codelineno-54-32" href="#__codelineno-54-32"></a><span class="w">  </span><span class="nt">&lt;/gazebo&gt;</span>
</span><span id="__span-54-33"><a id="__codelineno-54-33" name="__codelineno-54-33" href="#__codelineno-54-33"></a><span class="nt">&lt;/robot&gt;</span>
</span></code></pre></div>
<ol>
<li>将<code>laser.urdf.xacro</code>集成到<code>my_car_gazebo.urdf.xacro</code></li>
</ol>
<p><code>my_car_gazebo.urdf.xacro</code></p>
<div class="language-xml highlight"><pre><span></span><code><span id="__span-55-1"><a id="__codelineno-55-1" name="__codelineno-55-1" href="#__codelineno-55-1"></a><span class="nt">&lt;robot</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;my_car&quot;</span><span class="w"> </span><span class="na">xmlns:xacro=</span><span class="s">&quot;http://wiki.ros.org/xacro&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-55-2"><a id="__codelineno-55-2" name="__codelineno-55-2" href="#__codelineno-55-2"></a><span class="w">    </span>......
</span><span id="__span-55-3"><a id="__codelineno-55-3" name="__codelineno-55-3" href="#__codelineno-55-3"></a><span class="w">    </span><span class="nt">&lt;xacro:include</span><span class="w"> </span><span class="na">filename=</span><span class="s">&quot;laser.urdf.xacro&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-55-4"><a id="__codelineno-55-4" name="__codelineno-55-4" href="#__codelineno-55-4"></a><span class="nt">&lt;/robot&gt;</span>
</span></code></pre></div>
<ol>
<li>
<p><code>start_gazebo.launch</code>文件不需要修改即可启动</p>
</li>
<li>
<p>启动键盘控制节点，控制小车运动</p>
</li>
</ol>
<p>​   <strong>安装</strong>：<code>sudo apt-get install ros-melodic-teleop-twist-keyboard</code></p>
<p>​   <strong>启动</strong>：<code>rosrun teleop_twist_keyboard teleop_twist_keyboard.py</code></p>
<h1 id="5">5 机器人平台搭建</h1>
<p>前面的章节主要讲解了ROS的基础知识，内容更偏理论，学习完后想必各位会有些疑惑：</p>
<ul>
<li>什么是机器人？</li>
<li>实体机器人与仿真实现有什么区别？</li>
<li>如何构建一个真实的机器人系统？</li>
<li>...</li>
</ul>
<h2 id="51">5.1 机器人的定义</h2>
<p>1920年，捷克作家卡雷尔·凯佩克（Karel Capek）发表了科幻剧本《罗萨姆的万能机器人》。在剧本中，凯佩克把捷克语“Robota”写成了“Robot”，“Robota”是奴隶的意思。该剧预告了机器人的发展对人类社会的悲剧性影响，引起了人们的广泛关注，被当成了“机器人”一词的起源。</p>
<p>机器人（Robot）是自动执行工作的机器装置。机器人可接受人类指挥，也可以执行预先编排的程序，也可以根据以人工智能技术制定的原则纲领行动。机器人执行的是取代或是协助人类工作的工作，例如制造业、建筑业，或是危险的工作。</p>
<blockquote>
<p>百度百科</p>
</blockquote>
<figure>
<p><img alt="" src="../assets/%E4%BA%A7%E5%93%81%E5%9B%BE.png" width="500" /></p>
</figure>
<h2 id="52">5.2 机器人的组成</h2>
<p>机器人是一套机电一体化的设备，角度不同，对机器人组成的认识也会有明显差异，从控制的角度来看，机器人系统可以分为四大部分，即执行机构、驱动系统、传感系统和控制系统。各部分之间的控制关系如下图：</p>
<figure>
<p><img alt="" src="../assets/%E6%9C%BA%E5%99%A8%E4%BA%BA%E5%9B%9B%E5%A4%A7%E7%BB%84%E6%88%90%E9%83%A8%E5%88%86%E4%B9%8B%E9%97%B4%E7%9A%84%E6%8E%A7%E5%88%B6%E5%85%B3%E7%B3%BB.png" width="700" /></p>
</figure>
<h3 id="521">5.2.1 执行机构</h3>
<p>执行机构是机器人组成中直接面向工作对象的机械装置，类似于人体的手与脚，比如机器人的行走部分与机械臂。</p>
<p>在当前机器人系统中，执行机构主要有：由两个轮毂电机带动的主动轮以及保持平衡的万向轮，实现机器人的行走；一个三轴机械臂，实现机器人的抓取。</p>
<h3 id="522">5.2.2 驱动系统</h3>
<p>驱动系统负责驱动执行机构，将控制系统下达的指令转换成执行机构所需要的信号，相当于人的肌肉。根据采用的动力源不用，驱动系统的传动方式也不同，主要有四种：液压式、气压式、电气式和机械式。其中，电力驱动是目前使用最广泛的一种驱动方式，其特点是取电方便、响应快、驱动力大等，并且可以采用多种灵活的控制方式。</p>
<p>在当前的机器人系统中，驱动系统采用stm32，负责采集陀螺仪IMU、超声波、左右轮电机编码器等传感器数据，并驱动电机转动。</p>
<h3 id="523">5.2.3 传感系统</h3>
<p>传感系统由外部传感器模块与内部传感器模块组成，用于获取外部环境与内部有用的信息，相当于人体的感官与神经。常用的外部传感器包括摄像头、红外、激光雷达等，用于感知外部环境；内部传感器包括编码器、陀螺仪等，可以通过自身信号反馈检测位姿状态。</p>
<p>在当前机器人系统中，传感系统主要有：EAI G4型号的激光雷达，可实现360°的旋转测距；环形麦克风阵列模块，可实现360°的等效拾音；鱼眼摄像头与深度相机，可实现图像数据的获取。</p>
<h3 id="524">5.2.4 控制系统</h3>
<p>控制系统的任务是根据机器人的作业指令以及从传感器反馈回来的信号，作出相应处理并输出控制指令信号，相当于人体的大脑。控制系统需要基于处理器实现，一般常用的有ARM、x86等架构的处理器。在处理器之上，控制系统需要完成算法处理、关节控制、人机交互等复杂的功能。</p>
<p>在当前机器人系统中，控制系统采用Intel NUC工控机，安装了Ubuntu系统，同时搭建了机器人操作系统ROS环境，主要负责上层计算量较大的应用，可扩展性强。</p>
<h2 id="53">5.3 视觉</h2>
<p>摄像头是机器人系统中一个比较重要的传感器，也是机器人感知外界环境的重要手段之一，并且随着机器视觉、无人驾驶等技术的兴起，摄像头在物体识别、SLAM等技术中都有着广泛的应用前景。</p>
<p>摄像头可以根据工作原理大致划分为三类：单目摄像头、双目摄像头以及深度摄像头。</p>
<ol>
<li><strong>单目摄像头</strong></li>
</ol>
<p>单目摄像头是将三维世界二维化，只能获取物体在摄像机成像平面上的投影，在静止状态下无法获取深度信息，也就无法根据物体的大小来判断距离。</p>
<figure>
<p><img alt="" src="http://www.autolabor.com.cn/book/ROSTutorials/.\assets/%E7%9B%B8%E6%9C%BA%E8%AF%B4%E6%98%8E.gif" /></p>
</figure>
<ol>
<li><strong>双目摄像头</strong></li>
</ol>
<p>双目摄像头顾名思义就是由两个单目相机组合而成的摄像头，可以通过两个单目相机之间存在的固定距离（基线）来估计摄像头与目标物体之间的距离。</p>
<figure>
<p><img alt="image-20230619160832049" src="../assets/image-20230619160832049.png" /></p>
</figure>
<ol>
<li><strong>深度摄像头</strong></li>
</ol>
<p>深度摄像头又称为RGB-D摄像头，此处的D就是Depth（深度），顾名思义，它可以获取物体的深度信息。深度摄像头一般基于结构光法或飞行时间（ToF）法来实现测距。</p>
<p>前者是为了解决双目匹配问题产生的，解决对环境光照敏感的问题；后者是通过发射一束光脉冲，然后经过物体反射回去，再接收到光脉冲，通过飞行时间来计算被测物体与摄像头的距离。</p>
<h3 id="531">5.3.1 摄像头的使用</h3>
<ol>
<li>
<p>硬件准备：直接通过USB接入虚拟机即可，需注意虚拟机的相关设置。</p>
</li>
<li>
<p>软件准备：安装USB摄像头软件包</p>
</li>
</ol>
<p><code>sudo apt-get install ros-melodic-usb-cam</code></p>
<p>或者直接从github下载源码</p>
<p><code>git clone https://github.com/ros-drivers/usb_cam.git</code></p>
<ol>
<li>测试</li>
</ol>
<p>软件包中内置了测试用的launch文件，具体内容如下：</p>
<div class="language-xml highlight"><pre><span></span><code><span id="__span-56-1"><a id="__codelineno-56-1" name="__codelineno-56-1" href="#__codelineno-56-1"></a><span class="nt">&lt;launch&gt;</span>
</span><span id="__span-56-2"><a id="__codelineno-56-2" name="__codelineno-56-2" href="#__codelineno-56-2"></a><span class="w">  </span><span class="nt">&lt;node</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;usb_cam&quot;</span><span class="w"> </span><span class="na">pkg=</span><span class="s">&quot;usb_cam&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;usb_cam_node&quot;</span><span class="w"> </span><span class="na">output=</span><span class="s">&quot;screen&quot;</span><span class="w"> </span><span class="nt">&gt;</span>
</span><span id="__span-56-3"><a id="__codelineno-56-3" name="__codelineno-56-3" href="#__codelineno-56-3"></a><span class="w">    </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;video_device&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;/dev/vkarm_camera_raw&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-56-4"><a id="__codelineno-56-4" name="__codelineno-56-4" href="#__codelineno-56-4"></a><span class="w">    </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;image_width&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;1280&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-56-5"><a id="__codelineno-56-5" name="__codelineno-56-5" href="#__codelineno-56-5"></a><span class="w">    </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;image_height&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;720&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-56-6"><a id="__codelineno-56-6" name="__codelineno-56-6" href="#__codelineno-56-6"></a><span class="w">    </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;pixel_format&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;yuyv&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-56-7"><a id="__codelineno-56-7" name="__codelineno-56-7" href="#__codelineno-56-7"></a><span class="w">    </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;camera_frame_id&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;usb_cam&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-56-8"><a id="__codelineno-56-8" name="__codelineno-56-8" href="#__codelineno-56-8"></a><span class="w">    </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;io_method&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;mmap&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-56-9"><a id="__codelineno-56-9" name="__codelineno-56-9" href="#__codelineno-56-9"></a><span class="w">  </span><span class="nt">&lt;/node&gt;</span>
</span><span id="__span-56-10"><a id="__codelineno-56-10" name="__codelineno-56-10" href="#__codelineno-56-10"></a><span class="w">  </span><span class="nt">&lt;node</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;image_view&quot;</span><span class="w"> </span><span class="na">pkg=</span><span class="s">&quot;image_view&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;image_view&quot;</span><span class="w"> </span><span class="na">respawn=</span><span class="s">&quot;false&quot;</span><span class="w"> </span><span class="na">output=</span><span class="s">&quot;screen&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-56-11"><a id="__codelineno-56-11" name="__codelineno-56-11" href="#__codelineno-56-11"></a><span class="w">    </span><span class="nt">&lt;remap</span><span class="w"> </span><span class="na">from=</span><span class="s">&quot;image&quot;</span><span class="w"> </span><span class="na">to=</span><span class="s">&quot;/usb_cam/image_raw&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-56-12"><a id="__codelineno-56-12" name="__codelineno-56-12" href="#__codelineno-56-12"></a><span class="w">    </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;autosize&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;true&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-56-13"><a id="__codelineno-56-13" name="__codelineno-56-13" href="#__codelineno-56-13"></a><span class="w">  </span><span class="nt">&lt;/node&gt;</span>
</span><span id="__span-56-14"><a id="__codelineno-56-14" name="__codelineno-56-14" href="#__codelineno-56-14"></a><span class="nt">&lt;/launch&gt;</span>
</span></code></pre></div>
<p>这个launch文件启动了两个节点：<code>usb_cam</code>与<code>image_view</code>。前者用于启动相机，后者以图形化窗口的方式显示图像数据，使用前需要查看相机的端口并修改<code>usb_cam</code>中的”video_device“参数。</p>
<blockquote>
<p>查看端口的命令行：<code>ls -l /dev/video*</code></p>
</blockquote>
<h3 id="531-ros">5.3.1 ROS中的图像数据</h3>
<p>无论是USB摄像头还是RGB-D摄像头，发布的图像数据格式是多种多样的，在处理这些数据之前，我们需要先了解这些数据的格式。</p>
<p>连接USB摄像头到虚拟机，通过以下命令启动摄像头，注意修改端口号：</p>
<p><code>roslaunch usb_cam usb_cam-test.launch</code></p>
<p>启动成功后，使用以下命令查看当前系统中的图像话题信息：</p>
<p><code>rostopic info /usb_cam/image_raw</code></p>
<figure>
<p><img alt="image-20230626095356001" src="../assets/image-20230626095356001.png" width="500" /></p>
</figure>
<p>从终端打印的信息中可以得知，图像话题的消息类型是<code>sensor_msgs/Imgae</code>，这是ROS提供的一种摄像头原视图像的消息类型，使用以下命令查看该消息类型更详细的内容：</p>
<p><code>rosmsg show sensor_msgs/Image</code></p>
<figure>
<p><img alt="image-20230626095435934" src="../assets/image-20230626095435934.png" width="500" /></p>
</figure>
<ul>
<li>header：消息头，包含图像的序列号、时间戳和绑定的坐标系</li>
<li>height：图像的纵向分辨率，即图像包含多少行的像素点</li>
<li>width：图像的横向分辨率，即图像包含多少列的像素点</li>
<li>encoding：图像的编码格式，常用的有：RGB、YUV等</li>
<li>is_bigendian：图像数据的大小端存储模式（Big-Endian/Little-Endian）</li>
<li>step：一行图像数据的字节数量，作为数据的步长参数，一般为width×3</li>
<li>data：存储图像数据的数组，大小为 step × height</li>
</ul>
<p>根据公式，计算得出一帧720×1280分辨率的图像数据量为<code>width×3×height=1280×3×720=2764800字节=2.7648MB</code>，若按照30帧/秒的帧率计算，那么一秒钟摄像头产生的数据量是十分庞大的。在实际应用，尤其是远程传输图像的场景中，会对无线网络造成很大的压力，因此往往需要对图像进行压缩处理，ROS也提供了压缩图像的消息类型<code>sensor_msgs/CompressedImage</code>，使用以下你命令查看更详细的内容：</p>
<p><code>rosmsg show sensor_msgs/CompressedImage</code></p>
<figure>
<p><img alt="image-20230626095519976" src="../assets/image-20230626095519976.png" width="500" /></p>
</figure>
<ul>
<li>header：消息头，包含图像的序列号、时间戳和绑定的坐标系</li>
<li>format：图像的压缩编码格式，包括：JPEG、PNG、BMP等</li>
<li>data：存储图像数据的数组</li>
</ul>
<h3 id="533">5.3.3 摄像头标定</h3>
<p>摄像头是一种对光学器件要求较高的精密仪器，然而，由于摄像头的一些硬件原因，生成的物体图像往往会产生畸变，为了避免数据源造成的误差，需要针对摄像头的参数进行标定。ROS官方提供了用于单/双目摄像头标定的功能包——<code>camera_calibration</code>。</p>
<p>1.<strong>安装</strong></p>
<p>使用以下命令安装此功能包：</p>
<p><code>sudo apt-get install ros-melodic-camera-calibration</code></p>
<p>标定需要用到如下图所示的棋盘格图案的标定板：</p>
<figure>
<p><img alt="" src="../assets/image-20230626100512253.png" width="700" /></p>
</figure>
<p>2.<strong>启动</strong></p>
<p>接着启动摄像头与标定程序：</p>
<p><code>rosrun camera_calibration cameracalibrator.py --size 8x6 --square 0.024 image:=/usb_cam/image_raw camera:=/usb_cam</code></p>
<blockquote>
<p>摄像头的启动参考<code>5.3.1</code></p>
</blockquote>
<p><code>cameracalibrator.py</code>标定程序需要以下几个输入参数：</p>
<ul>
<li>size：标定棋盘格的内部角点个数</li>
<li>square：每个棋盘格的边长，单位是m</li>
<li>image和camera：设置摄像头发布的图像话题以及使用的摄像头</li>
</ul>
<p>3.<strong>标定</strong></p>
<p>标定程序启动后，将标定板放置在摄像头视野范围内，画面如下图所示：</p>
<figure>
<p><img alt="image-20230626100915824" src="../assets/image-20230626100915824.png" width="700" /></p>
</figure>
<p>画面右上角的进图条表示了不同的标定进度：</p>
<ul>
<li>X：标定板在摄像头视野中左右移动</li>
<li>Y：标定板在摄像头视野中上下移动</li>
<li>Size：标定板在摄像头视野中前后移动</li>
<li>Skew：标定板在摄像头视野中倾斜转动</li>
</ul>
<p>不断在摄像头视野中移动/转动标定板，直到“CALIBRATE”按钮激活，表示标定程序的参数采集完成。</p>
<figure>
<p><img alt="image-20230626101236288" src="../assets/image-20230626101236288.png" width="700" /></p>
</figure>
<p>点击“CALIBRATE”按钮，程序开始自动计算摄像头的标定参数，这个过程需要等待一段时间，此时界面会变成灰色无响应状态，注意观察终端会有标定结果的显示，并且标定界面的“SAVE”与“COMMIT”按钮激活，如下图：</p>
<figure>
<p><img alt="image-20230626102238430" src="../assets/image-20230626102238430.png" width="700" /></p>
</figure>
<p>点击“SAVE”按钮，标定参数将被保存到默认的文件夹下，在终端中可以看到此路径：</p>
<figure>
<p><img alt="image-20230626102322759" src="../assets/image-20230626102322759.png" width="700" /></p>
</figure>
<p>点击“COMMIT”按钮，提交数据并退出程序，然后招到标定结果的压缩文件<code>calibrationdata.tar.gz</code>，解压该文件后，找到<code>ost.yaml</code>命名的标定结果文件，将其复制出来备用</p>
<figure>
<p><img alt="image-20230626102654675" src="../assets/image-20230626102654675.png" width="600" /></p>
</figure>
<p>4.<strong>加载</strong></p>
<p>标定摄像头生成的配置文件是YAML格式的，可以在启动摄像头的launch文件中进行加载，如下：</p>
<div class="language-xml highlight"><pre><span></span><code><span id="__span-57-1"><a id="__codelineno-57-1" name="__codelineno-57-1" href="#__codelineno-57-1"></a><span class="nt">&lt;launch&gt;</span>
</span><span id="__span-57-2"><a id="__codelineno-57-2" name="__codelineno-57-2" href="#__codelineno-57-2"></a><span class="w">    </span><span class="nt">&lt;node</span><span class="w"> </span><span class="na">pkg=</span><span class="s">&quot;usb_cam&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;usb_cam_node&quot;</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;usb_cam&quot;</span><span class="w"> </span><span class="na">output=</span><span class="s">&quot;screen&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-57-3"><a id="__codelineno-57-3" name="__codelineno-57-3" href="#__codelineno-57-3"></a><span class="w">        </span>......
</span><span id="__span-57-4"><a id="__codelineno-57-4" name="__codelineno-57-4" href="#__codelineno-57-4"></a><span class="w">        </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;camera_info_url&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;string&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;file://$(find 摄像头功能包)/YAML文件名&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-57-5"><a id="__codelineno-57-5" name="__codelineno-57-5" href="#__codelineno-57-5"></a><span class="w">    </span><span class="nt">&lt;/node&gt;</span>
</span><span id="__span-57-6"><a id="__codelineno-57-6" name="__codelineno-57-6" href="#__codelineno-57-6"></a><span class="nt">&lt;/launch&gt;</span>
</span></code></pre></div>
<h3 id="534">5.3.4 二维码识别</h3>
<p>二维码在生活中越来越常见，无论是共享单车还是移动支付，二维码已经得到广泛应用。ROS也提供了多种二维码识别的功能包，我们选用其中一个功能包——<code>ar_track_alvar</code>，来介绍二维码识别的方法。</p>
<p>1.<strong>安装</strong></p>
<p>使用以下命令安装此功能包：</p>
<p><code>sudo apt-get install ros-melodic-ar-track-alvar</code></p>
<p>安装完成后，在目录：<code>/opt/ros/melodic/share/</code>中，可以找到此功能包。进入该功能包下的launch文件夹，可以看到多个launch文件，如下图所示。这些都是针对ROS官方的PR2机器人使用的二维码识别示例，后续我们将在这些文件的基础上进行修改，适配自己的机器人平台</p>
<figure>
<p><img alt="image-20230626105042494" src="../assets/image-20230626105042494.png" width="600" /></p>
</figure>
<p>2.<strong>生成二维码</strong></p>
<p><code>ar_track_alvar</code>功能包提供了生成二维码标签的功能，可以使用以下命令创建对应ID号的二维码标签：</p>
<p><code>rosrun ar_track_alvar createMarker &lt;AR_ID&gt;</code></p>
<p>其中<code>AR_ID</code>的取值范围为：[0, 65535]</p>
<p>使用以下命令还可以查看更多的使用帮助：</p>
<p><code>rosrun ar_track_alvar createMarker</code></p>
<p><img alt="image-20230626110051776" src="../assets/image-20230626110051776.png" /></p>
<p>从上图可以看出，此节点不仅能使用ID号生成二维码标签，还可以使用字符串、文件名、网址等，或是使用-s参数设置生成二维码的尺寸。</p>
<p>3.<strong>摄像头识别二维码</strong></p>
<p><code>ar_track_alvar</code>功能包支持USB摄像头或深度摄像头作为识别二维码的视觉传感器，分别对应了<code>pr2_indiv_no_kinect.launch</code>与<code>pr2_indiv.launch</code>两个文件。复制<code>pr2_indiv_no_kinect.launch</code>文件作为参考，针对自己使用的摄像头修改设置。</p>
<div class="language-xml highlight"><pre><span></span><code><span id="__span-58-1"><a id="__codelineno-58-1" name="__codelineno-58-1" href="#__codelineno-58-1"></a><span class="nt">&lt;launch&gt;</span>
</span><span id="__span-58-2"><a id="__codelineno-58-2" name="__codelineno-58-2" href="#__codelineno-58-2"></a>
</span><span id="__span-58-3"><a id="__codelineno-58-3" name="__codelineno-58-3" href="#__codelineno-58-3"></a><span class="w">    </span><span class="cm">&lt;!-- tf --&gt;</span>
</span><span id="__span-58-4"><a id="__codelineno-58-4" name="__codelineno-58-4" href="#__codelineno-58-4"></a><span class="w">    </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;robot_description&quot;</span><span class="w"> </span><span class="na">command=</span><span class="s">&quot;$(find xacro)/xacro $(find vkbot_description)/urdf/xacro/vkbot_with_vkarm.xacro&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-58-5"><a id="__codelineno-58-5" name="__codelineno-58-5" href="#__codelineno-58-5"></a><span class="w">    </span><span class="nt">&lt;node</span><span class="w"> </span><span class="na">pkg=</span><span class="s">&quot;robot_state_publisher&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;robot_state_publisher&quot;</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;robot_state_publisher&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-58-6"><a id="__codelineno-58-6" name="__codelineno-58-6" href="#__codelineno-58-6"></a><span class="w">    </span><span class="nt">&lt;node</span><span class="w"> </span><span class="na">pkg=</span><span class="s">&quot;joint_state_publisher&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;joint_state_publisher&quot;</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;joint_state_publisher&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-58-7"><a id="__codelineno-58-7" name="__codelineno-58-7" href="#__codelineno-58-7"></a><span class="w">    </span><span class="nt">&lt;node</span><span class="w"> </span><span class="na">pkg=</span><span class="s">&quot;tf&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;static_transform_publisher&quot;</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;usb_cam2vkarm&quot;</span><span class="w"> </span><span class="na">args=</span><span class="s">&quot;0.0885 0 0.065 -1.57 0 -1.57 link5 usb_cam 10&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-58-8"><a id="__codelineno-58-8" name="__codelineno-58-8" href="#__codelineno-58-8"></a><span class="w">    </span><span class="nt">&lt;node</span><span class="w"> </span><span class="na">pkg=</span><span class="s">&quot;tf&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;static_transform_publisher&quot;</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;ar_link2_usb_cam&quot;</span><span class="w"> </span><span class="na">args=</span><span class="s">&quot;0 0 0 1.57 -1.57 0 usb_cam ar_link 10&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-58-9"><a id="__codelineno-58-9" name="__codelineno-58-9" href="#__codelineno-58-9"></a>
</span><span id="__span-58-10"><a id="__codelineno-58-10" name="__codelineno-58-10" href="#__codelineno-58-10"></a><span class="w">    </span><span class="cm">&lt;!-- usb_cam --&gt;</span>
</span><span id="__span-58-11"><a id="__codelineno-58-11" name="__codelineno-58-11" href="#__codelineno-58-11"></a><span class="w">    </span><span class="nt">&lt;node</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;usb_cam&quot;</span><span class="w"> </span><span class="na">pkg=</span><span class="s">&quot;usb_cam&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;usb_cam_node&quot;</span><span class="w"> </span><span class="na">output=</span><span class="s">&quot;screen&quot;</span><span class="w"> </span><span class="nt">&gt;</span>
</span><span id="__span-58-12"><a id="__codelineno-58-12" name="__codelineno-58-12" href="#__codelineno-58-12"></a><span class="w">        </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;video_device&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;/dev/vkarm_camera_raw&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-58-13"><a id="__codelineno-58-13" name="__codelineno-58-13" href="#__codelineno-58-13"></a><span class="w">        </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;image_width&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;1280&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-58-14"><a id="__codelineno-58-14" name="__codelineno-58-14" href="#__codelineno-58-14"></a><span class="w">        </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;image_height&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;720&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-58-15"><a id="__codelineno-58-15" name="__codelineno-58-15" href="#__codelineno-58-15"></a><span class="w">        </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;pixel_format&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;yuyv&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-58-16"><a id="__codelineno-58-16" name="__codelineno-58-16" href="#__codelineno-58-16"></a><span class="w">        </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;camera_frame_id&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;usb_cam&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-58-17"><a id="__codelineno-58-17" name="__codelineno-58-17" href="#__codelineno-58-17"></a><span class="w">        </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;io_method&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;mmap&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-58-18"><a id="__codelineno-58-18" name="__codelineno-58-18" href="#__codelineno-58-18"></a>
</span><span id="__span-58-19"><a id="__codelineno-58-19" name="__codelineno-58-19" href="#__codelineno-58-19"></a><span class="w">        </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;camera_info_url&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;string&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;file://$(find 摄像头功能包)/标定YAML文件名&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-58-20"><a id="__codelineno-58-20" name="__codelineno-58-20" href="#__codelineno-58-20"></a><span class="w">    </span><span class="nt">&lt;/node&gt;</span>
</span><span id="__span-58-21"><a id="__codelineno-58-21" name="__codelineno-58-21" href="#__codelineno-58-21"></a>
</span><span id="__span-58-22"><a id="__codelineno-58-22" name="__codelineno-58-22" href="#__codelineno-58-22"></a><span class="w">    </span><span class="cm">&lt;!-- ar_track --&gt;</span>
</span><span id="__span-58-23"><a id="__codelineno-58-23" name="__codelineno-58-23" href="#__codelineno-58-23"></a><span class="w">    </span><span class="nt">&lt;arg</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;marker_size&quot;</span><span class="w"> </span><span class="na">default=</span><span class="s">&quot;3.0&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-58-24"><a id="__codelineno-58-24" name="__codelineno-58-24" href="#__codelineno-58-24"></a><span class="w">    </span><span class="nt">&lt;arg</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;max_new_marker_error&quot;</span><span class="w"> </span><span class="na">default=</span><span class="s">&quot;0.08&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-58-25"><a id="__codelineno-58-25" name="__codelineno-58-25" href="#__codelineno-58-25"></a><span class="w">    </span><span class="nt">&lt;arg</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;max_track_error&quot;</span><span class="w"> </span><span class="na">default=</span><span class="s">&quot;0.2&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-58-26"><a id="__codelineno-58-26" name="__codelineno-58-26" href="#__codelineno-58-26"></a><span class="w">    </span><span class="nt">&lt;arg</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;cam_image_topic&quot;</span><span class="w"> </span><span class="na">default=</span><span class="s">&quot;/usb_cam/image_raw&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-58-27"><a id="__codelineno-58-27" name="__codelineno-58-27" href="#__codelineno-58-27"></a><span class="w">    </span><span class="nt">&lt;arg</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;cam_info_topic&quot;</span><span class="w"> </span><span class="na">default=</span><span class="s">&quot;/usb_cam/camera_info&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-58-28"><a id="__codelineno-58-28" name="__codelineno-58-28" href="#__codelineno-58-28"></a><span class="w">    </span><span class="nt">&lt;arg</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;output_frame&quot;</span><span class="w"> </span><span class="na">default=</span><span class="s">&quot;/ar_link&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-58-29"><a id="__codelineno-58-29" name="__codelineno-58-29" href="#__codelineno-58-29"></a>
</span><span id="__span-58-30"><a id="__codelineno-58-30" name="__codelineno-58-30" href="#__codelineno-58-30"></a><span class="w">    </span><span class="nt">&lt;node</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;ar_track_alvar&quot;</span><span class="w"> </span><span class="na">pkg=</span><span class="s">&quot;ar_track_alvar&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;individualMarkersNoKinect&quot;</span><span class="w"> </span><span class="na">respawn=</span><span class="s">&quot;false&quot;</span><span class="w"> </span><span class="na">output=</span><span class="s">&quot;screen&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-58-31"><a id="__codelineno-58-31" name="__codelineno-58-31" href="#__codelineno-58-31"></a><span class="w">        </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;marker_size&quot;</span><span class="w">           </span><span class="na">type=</span><span class="s">&quot;double&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;$(arg marker_size)&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-58-32"><a id="__codelineno-58-32" name="__codelineno-58-32" href="#__codelineno-58-32"></a><span class="w">        </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;max_new_marker_error&quot;</span><span class="w">  </span><span class="na">type=</span><span class="s">&quot;double&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;$(arg max_new_marker_error)&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-58-33"><a id="__codelineno-58-33" name="__codelineno-58-33" href="#__codelineno-58-33"></a><span class="w">        </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;max_track_error&quot;</span><span class="w">       </span><span class="na">type=</span><span class="s">&quot;double&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;$(arg max_track_error)&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-58-34"><a id="__codelineno-58-34" name="__codelineno-58-34" href="#__codelineno-58-34"></a><span class="w">        </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;output_frame&quot;</span><span class="w">          </span><span class="na">type=</span><span class="s">&quot;string&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;$(arg output_frame)&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-58-35"><a id="__codelineno-58-35" name="__codelineno-58-35" href="#__codelineno-58-35"></a>
</span><span id="__span-58-36"><a id="__codelineno-58-36" name="__codelineno-58-36" href="#__codelineno-58-36"></a><span class="w">        </span><span class="nt">&lt;remap</span><span class="w"> </span><span class="na">from=</span><span class="s">&quot;camera_image&quot;</span><span class="w">  </span><span class="na">to=</span><span class="s">&quot;$(arg cam_image_topic)&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-58-37"><a id="__codelineno-58-37" name="__codelineno-58-37" href="#__codelineno-58-37"></a><span class="w">        </span><span class="nt">&lt;remap</span><span class="w"> </span><span class="na">from=</span><span class="s">&quot;camera_info&quot;</span><span class="w">   </span><span class="na">to=</span><span class="s">&quot;$(arg cam_info_topic)&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-58-38"><a id="__codelineno-58-38" name="__codelineno-58-38" href="#__codelineno-58-38"></a><span class="w">    </span><span class="nt">&lt;/node&gt;</span>
</span><span id="__span-58-39"><a id="__codelineno-58-39" name="__codelineno-58-39" href="#__codelineno-58-39"></a>
</span><span id="__span-58-40"><a id="__codelineno-58-40" name="__codelineno-58-40" href="#__codelineno-58-40"></a><span class="w">    </span><span class="cm">&lt;!-- rviz --&gt;</span>
</span><span id="__span-58-41"><a id="__codelineno-58-41" name="__codelineno-58-41" href="#__codelineno-58-41"></a><span class="w">    </span><span class="nt">&lt;arg</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;rviz_config&quot;</span><span class="w"> </span><span class="na">default=</span><span class="s">&quot;$(find 功能包名)/config/ar_track_camera.rviz&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-58-42"><a id="__codelineno-58-42" name="__codelineno-58-42" href="#__codelineno-58-42"></a><span class="w">    </span><span class="nt">&lt;node</span><span class="w"> </span><span class="na">pkg=</span><span class="s">&quot;rviz&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;rviz&quot;</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;rviz&quot;</span><span class="w"> </span><span class="na">args=</span><span class="s">&quot;$(arg rviz_config)&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-58-43"><a id="__codelineno-58-43" name="__codelineno-58-43" href="#__codelineno-58-43"></a>
</span><span id="__span-58-44"><a id="__codelineno-58-44" name="__codelineno-58-44" href="#__codelineno-58-44"></a><span class="nt">&lt;/launch&gt;</span>
</span></code></pre></div>
<blockquote>
<p>需要修改的地方有：</p>
<ul>
<li>设置world与camera之间的坐标变换</li>
<li>设置individualMarkersNoKinect节点所需的参数，主要有：订阅图像数据的话题名以及使用的二维码实际尺寸（cm）</li>
<li>启动rviz将识别结果可视化，保存rviz配置方便复用</li>
</ul>
</blockquote>
<h2 id="54">5.4 激光雷达</h2>
<h3 id="541">5.4.1 激光雷达简介</h3>
<p>激光雷达（Light Detecting And Ranging，简称Lidar）即<strong>光探测和测距</strong>，移动机器人在自主移动过程中，需要从环境中获取障碍物的具体位置，房间的内部轮廓等信息，这些信息是机器人创建地图、进行导航的基础数据，使用激光雷达来获取这类数据是较为常见选择。</p>
<h3 id="542">5.4.2 激光雷达原理</h3>
<p>激光雷达可以发射激光束，光束照射到物体上，再反射回激光雷达，目前市面上的激光雷达根据测距原理不同，可分为<strong>脉冲式</strong>（采用TOF法来实现测距）和<strong>三角式</strong>。</p>
<p>1.脉冲式</p>
<p>也称为直接式，计算公式如下：</p>
<figure>
<p>D = c × t / 2</p>
</figure>
<p>D为测量距离，c为恒定的光速，t为激光往返时间。脉冲式的工作原理十分简单，恒定速度乘以时间等于距离，由于是往返，所以需要除以2。</p>
<p>2.三角式</p>
<p>也称为间接式，将光源、被测物体、接收系统三点组成一个三角形光路，接收系统负责接收来自被测物体表面的散射光，并将其成像在光电探测器的敏感面上，通过光点在敏感面上的分布距离，从而计算出被测物体的距离，工作原理如下图：</p>
<figure>
<p><img alt="" src="../assets/%E4%B8%89%E8%A7%92%E5%BC%8F%E6%BF%80%E5%85%89%E9%9B%B7%E8%BE%BE%E6%B5%8B%E8%B7%9D%E5%8E%9F%E7%90%86.png" width="700" /></p>
</figure>
<h3 id="543">5.4.3 激光雷达的使用</h3>
<p>1.雷达连接PC</p>
<p>雷达通电后连接主机USB端口，并在虚拟机中做好相关设置。</p>
<figure>
<p><img alt="image-20230626155234607" src="../assets/image-20230626155234607.png" width="700" /></p>
</figure>
<p>2.确认当前USB端口并修改权限</p>
<p>查看端口：</p>
<p><code>ll /dev/ttyUSB*</code></p>
<figure>
<p><img alt="image-20230626155346561" src="../assets/image-20230626155346561.png" /></p>
</figure>
<p>为当前用户添加权限（将用户添加进dialout组）：</p>
<p><code>sudo usermod -a -G dialout &lt;your_user_name&gt;</code></p>
<figure>
<p><img alt="image-20230626155631338" src="../assets/image-20230626155631338.png" /></p>
</figure>
<blockquote>
<p><img alt="⚠" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@14.1.2/assets/svg/26a0.svg" title=":warning:" />：重启虚拟机使之生效</p>
</blockquote>
<h3 id="542_1">5.4.2 激光雷达功能包安装与配置</h3>
<div class="language-shell highlight"><pre><span></span><code><span id="__span-59-1"><a id="__codelineno-59-1" name="__codelineno-59-1" href="#__codelineno-59-1"></a>vkrobot@vkrobot:~$<span class="w"> </span>git<span class="w"> </span>clone<span class="w"> </span>https://github.com/YDLIDAR/YDLidar-SDK.git
</span><span id="__span-59-2"><a id="__codelineno-59-2" name="__codelineno-59-2" href="#__codelineno-59-2"></a>vkrobot@vkrobot:~$<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>YDLidar-SDK
</span><span id="__span-59-3"><a id="__codelineno-59-3" name="__codelineno-59-3" href="#__codelineno-59-3"></a>vkrobot@vkrobot:~/YDLidar-SDK$<span class="w"> </span>mkdir<span class="w"> </span>build
</span><span id="__span-59-4"><a id="__codelineno-59-4" name="__codelineno-59-4" href="#__codelineno-59-4"></a>vkrobot@vkrobot:~/YDLidar-SDK$<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>build
</span><span id="__span-59-5"><a id="__codelineno-59-5" name="__codelineno-59-5" href="#__codelineno-59-5"></a>vkrobot@vkrobot:~/YDLidar-SDK/build$<span class="w"> </span>cmake<span class="w"> </span>..
</span><span id="__span-59-6"><a id="__codelineno-59-6" name="__codelineno-59-6" href="#__codelineno-59-6"></a>vkrobot@vkrobot:~/YDLidar-SDK/build$<span class="w"> </span>make
</span><span id="__span-59-7"><a id="__codelineno-59-7" name="__codelineno-59-7" href="#__codelineno-59-7"></a>vkrobot@vkrobot:~/YDLidar-SDK/build$<span class="w"> </span>sudo<span class="w"> </span>make<span class="w"> </span>install
</span></code></pre></div>
<div class="language-shell highlight"><pre><span></span><code><span id="__span-60-1"><a id="__codelineno-60-1" name="__codelineno-60-1" href="#__codelineno-60-1"></a>vkrobot@vkrobot:~$<span class="w"> </span>git<span class="w"> </span>clone<span class="w"> </span>https://github.com/YDLIDAR/ydlidar_ros_driver.git<span class="w"> </span>ydlidar_ws/src/ydlidar_ros_driver
</span><span id="__span-60-2"><a id="__codelineno-60-2" name="__codelineno-60-2" href="#__codelineno-60-2"></a>vkrobot@vkrobot:~$<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>ydlidar_ws
</span><span id="__span-60-3"><a id="__codelineno-60-3" name="__codelineno-60-3" href="#__codelineno-60-3"></a>vkrobot@vkrobot:~/ydlidar_ws$<span class="w"> </span>catkin_make
</span><span id="__span-60-4"><a id="__codelineno-60-4" name="__codelineno-60-4" href="#__codelineno-60-4"></a>vkrobot@vkrobot:~/ydlidar_ws$<span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;source ~/ydlidar_ws/devel/setup.bash&quot;</span><span class="w"> </span>&gt;&gt;<span class="w"> </span>~/.bashrc
</span><span id="__span-60-5"><a id="__codelineno-60-5" name="__codelineno-60-5" href="#__codelineno-60-5"></a>vkrobot@vkrobot:~/ydlidar_ws$<span class="w"> </span><span class="nb">source</span><span class="w"> </span>~/.bashrc
</span><span id="__span-60-6"><a id="__codelineno-60-6" name="__codelineno-60-6" href="#__codelineno-60-6"></a>vkrobot@vkrobot:~/ydlidar_ws$<span class="w"> </span>chmod<span class="w"> </span><span class="m">0777</span><span class="w"> </span>src/ydlidar_ros_driver/startup/*
</span><span id="__span-60-7"><a id="__codelineno-60-7" name="__codelineno-60-7" href="#__codelineno-60-7"></a>vkrobot@vkrobot:~/ydlidar_ws$<span class="w"> </span>sudo<span class="w"> </span>sh<span class="w"> </span>src/ydlidar_ros_driver/startup/initenv.sh
</span></code></pre></div>
<h3 id="543_1">5.4.3 激光雷达数据获取与显示</h3>
<p><code>roslaunch ydliadr_ros_driver lidar_view.launch</code></p>
<p><code>lidar_view.launch</code></p>
<div class="language-xml highlight"><pre><span></span><code><span id="__span-61-1"><a id="__codelineno-61-1" name="__codelineno-61-1" href="#__codelineno-61-1"></a><span class="nt">&lt;launch&gt;</span>
</span><span id="__span-61-2"><a id="__codelineno-61-2" name="__codelineno-61-2" href="#__codelineno-61-2"></a><span class="w">    </span><span class="nt">&lt;node</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;ydlidar_lidar_publisher&quot;</span><span class="w">  </span><span class="na">pkg=</span><span class="s">&quot;ydlidar_ros_driver&quot;</span><span class="w">  </span><span class="na">type=</span><span class="s">&quot;ydlidar_ros_driver_node&quot;</span><span class="w"> </span><span class="na">output=</span><span class="s">&quot;screen&quot;</span><span class="w"> </span><span class="na">respawn=</span><span class="s">&quot;false&quot;</span><span class="w"> </span><span class="nt">&gt;</span>
</span><span id="__span-61-3"><a id="__codelineno-61-3" name="__codelineno-61-3" href="#__codelineno-61-3"></a><span class="w">        </span><span class="cm">&lt;!-- string property --&gt;</span>
</span><span id="__span-61-4"><a id="__codelineno-61-4" name="__codelineno-61-4" href="#__codelineno-61-4"></a><span class="w">        </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;port&quot;</span><span class="w">         </span><span class="na">type=</span><span class="s">&quot;string&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;/dev/ydlidar&quot;</span><span class="nt">/&gt;</span><span class="w">  </span>
</span><span id="__span-61-5"><a id="__codelineno-61-5" name="__codelineno-61-5" href="#__codelineno-61-5"></a><span class="w">        </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;frame_id&quot;</span><span class="w">     </span><span class="na">type=</span><span class="s">&quot;string&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;laser_frame&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-61-6"><a id="__codelineno-61-6" name="__codelineno-61-6" href="#__codelineno-61-6"></a><span class="w">        </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;ignore_array&quot;</span><span class="w">     </span><span class="na">type=</span><span class="s">&quot;string&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-61-7"><a id="__codelineno-61-7" name="__codelineno-61-7" href="#__codelineno-61-7"></a>
</span><span id="__span-61-8"><a id="__codelineno-61-8" name="__codelineno-61-8" href="#__codelineno-61-8"></a><span class="w">        </span><span class="cm">&lt;!-- int property --&gt;</span>
</span><span id="__span-61-9"><a id="__codelineno-61-9" name="__codelineno-61-9" href="#__codelineno-61-9"></a><span class="w">        </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;baudrate&quot;</span><span class="w">         </span><span class="na">type=</span><span class="s">&quot;int&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;230400&quot;</span><span class="nt">/&gt;</span><span class="w">  </span>
</span><span id="__span-61-10"><a id="__codelineno-61-10" name="__codelineno-61-10" href="#__codelineno-61-10"></a><span class="w">        </span><span class="cm">&lt;!-- 0:TYPE_TOF, 1:TYPE_TRIANGLE, 2:TYPE_TOF_NET --&gt;</span>
</span><span id="__span-61-11"><a id="__codelineno-61-11" name="__codelineno-61-11" href="#__codelineno-61-11"></a><span class="w">        </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;lidar_type&quot;</span><span class="w">       </span><span class="na">type=</span><span class="s">&quot;int&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;1&quot;</span><span class="nt">/&gt;</span><span class="w">  </span>
</span><span id="__span-61-12"><a id="__codelineno-61-12" name="__codelineno-61-12" href="#__codelineno-61-12"></a><span class="w">        </span><span class="cm">&lt;!-- 0:YDLIDAR_TYPE_SERIAL, 1:YDLIDAR_TYPE_TCP --&gt;</span>
</span><span id="__span-61-13"><a id="__codelineno-61-13" name="__codelineno-61-13" href="#__codelineno-61-13"></a><span class="w">        </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;device_type&quot;</span><span class="w">         </span><span class="na">type=</span><span class="s">&quot;int&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;0&quot;</span><span class="nt">/&gt;</span><span class="w">  </span>
</span><span id="__span-61-14"><a id="__codelineno-61-14" name="__codelineno-61-14" href="#__codelineno-61-14"></a><span class="w">        </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;sample_rate&quot;</span><span class="w">         </span><span class="na">type=</span><span class="s">&quot;int&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;9&quot;</span><span class="nt">/&gt;</span><span class="w">  </span>
</span><span id="__span-61-15"><a id="__codelineno-61-15" name="__codelineno-61-15" href="#__codelineno-61-15"></a><span class="w">        </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;abnormal_check_count&quot;</span><span class="w">         </span><span class="na">type=</span><span class="s">&quot;int&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;4&quot;</span><span class="nt">/&gt;</span><span class="w">  </span>
</span><span id="__span-61-16"><a id="__codelineno-61-16" name="__codelineno-61-16" href="#__codelineno-61-16"></a>
</span><span id="__span-61-17"><a id="__codelineno-61-17" name="__codelineno-61-17" href="#__codelineno-61-17"></a><span class="w">        </span><span class="cm">&lt;!-- bool property --&gt;</span>
</span><span id="__span-61-18"><a id="__codelineno-61-18" name="__codelineno-61-18" href="#__codelineno-61-18"></a><span class="w">        </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;resolution_fixed&quot;</span><span class="w">    </span><span class="na">type=</span><span class="s">&quot;bool&quot;</span><span class="w">   </span><span class="na">value=</span><span class="s">&quot;true&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-61-19"><a id="__codelineno-61-19" name="__codelineno-61-19" href="#__codelineno-61-19"></a><span class="w">        </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;auto_reconnect&quot;</span><span class="w">    </span><span class="na">type=</span><span class="s">&quot;bool&quot;</span><span class="w">   </span><span class="na">value=</span><span class="s">&quot;true&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-61-20"><a id="__codelineno-61-20" name="__codelineno-61-20" href="#__codelineno-61-20"></a><span class="w">        </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;reversion&quot;</span><span class="w">    </span><span class="na">type=</span><span class="s">&quot;bool&quot;</span><span class="w">   </span><span class="na">value=</span><span class="s">&quot;true&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-61-21"><a id="__codelineno-61-21" name="__codelineno-61-21" href="#__codelineno-61-21"></a><span class="w">        </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;inverted&quot;</span><span class="w">    </span><span class="na">type=</span><span class="s">&quot;bool&quot;</span><span class="w">   </span><span class="na">value=</span><span class="s">&quot;true&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-61-22"><a id="__codelineno-61-22" name="__codelineno-61-22" href="#__codelineno-61-22"></a><span class="w">        </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;isSingleChannel&quot;</span><span class="w">    </span><span class="na">type=</span><span class="s">&quot;bool&quot;</span><span class="w">   </span><span class="na">value=</span><span class="s">&quot;false&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-61-23"><a id="__codelineno-61-23" name="__codelineno-61-23" href="#__codelineno-61-23"></a><span class="w">        </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;intensity&quot;</span><span class="w">    </span><span class="na">type=</span><span class="s">&quot;bool&quot;</span><span class="w">   </span><span class="na">value=</span><span class="s">&quot;false&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-61-24"><a id="__codelineno-61-24" name="__codelineno-61-24" href="#__codelineno-61-24"></a><span class="w">        </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;support_motor_dtr&quot;</span><span class="w">    </span><span class="na">type=</span><span class="s">&quot;bool&quot;</span><span class="w">   </span><span class="na">value=</span><span class="s">&quot;false&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-61-25"><a id="__codelineno-61-25" name="__codelineno-61-25" href="#__codelineno-61-25"></a><span class="w">        </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;invalid_range_is_inf&quot;</span><span class="w">    </span><span class="na">type=</span><span class="s">&quot;bool&quot;</span><span class="w">   </span><span class="na">value=</span><span class="s">&quot;false&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-61-26"><a id="__codelineno-61-26" name="__codelineno-61-26" href="#__codelineno-61-26"></a><span class="w">        </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;point_cloud_preservative&quot;</span><span class="w">    </span><span class="na">type=</span><span class="s">&quot;bool&quot;</span><span class="w">   </span><span class="na">value=</span><span class="s">&quot;false&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-61-27"><a id="__codelineno-61-27" name="__codelineno-61-27" href="#__codelineno-61-27"></a>
</span><span id="__span-61-28"><a id="__codelineno-61-28" name="__codelineno-61-28" href="#__codelineno-61-28"></a><span class="w">        </span><span class="cm">&lt;!-- float property --&gt;</span>
</span><span id="__span-61-29"><a id="__codelineno-61-29" name="__codelineno-61-29" href="#__codelineno-61-29"></a><span class="w">        </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;angle_min&quot;</span><span class="w">    </span><span class="na">type=</span><span class="s">&quot;double&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;-180&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-61-30"><a id="__codelineno-61-30" name="__codelineno-61-30" href="#__codelineno-61-30"></a><span class="w">        </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;angle_max&quot;</span><span class="w">    </span><span class="na">type=</span><span class="s">&quot;double&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;180&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-61-31"><a id="__codelineno-61-31" name="__codelineno-61-31" href="#__codelineno-61-31"></a><span class="w">        </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;range_min&quot;</span><span class="w">    </span><span class="na">type=</span><span class="s">&quot;double&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;0.1&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-61-32"><a id="__codelineno-61-32" name="__codelineno-61-32" href="#__codelineno-61-32"></a><span class="w">        </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;range_max&quot;</span><span class="w">    </span><span class="na">type=</span><span class="s">&quot;double&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;16.0&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-61-33"><a id="__codelineno-61-33" name="__codelineno-61-33" href="#__codelineno-61-33"></a><span class="w">        </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;frequency&quot;</span><span class="w">    </span><span class="na">type=</span><span class="s">&quot;double&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;10.0&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-61-34"><a id="__codelineno-61-34" name="__codelineno-61-34" href="#__codelineno-61-34"></a><span class="w">    </span><span class="nt">&lt;/node&gt;</span>
</span><span id="__span-61-35"><a id="__codelineno-61-35" name="__codelineno-61-35" href="#__codelineno-61-35"></a><span class="w">    </span><span class="nt">&lt;node</span><span class="w"> </span><span class="na">pkg=</span><span class="s">&quot;tf&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;static_transform_publisher&quot;</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;base_link_to_laser4&quot;</span><span class="w"> </span><span class="na">args=</span><span class="s">&quot;0.15 0.0 0.28 0.0 0.0 0.0 /base_link /laser_frame 40&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-61-36"><a id="__codelineno-61-36" name="__codelineno-61-36" href="#__codelineno-61-36"></a>
</span><span id="__span-61-37"><a id="__codelineno-61-37" name="__codelineno-61-37" href="#__codelineno-61-37"></a><span class="w">    </span><span class="nt">&lt;node</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;rviz&quot;</span><span class="w"> </span><span class="na">pkg=</span><span class="s">&quot;rviz&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;rviz&quot;</span><span class="w"> </span><span class="na">args=</span><span class="s">&quot;-d $(find ydlidar_ros_driver)/launch/lidar.rviz&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-61-38"><a id="__codelineno-61-38" name="__codelineno-61-38" href="#__codelineno-61-38"></a><span class="nt">&lt;/launch&gt;</span>
</span></code></pre></div>
<figure>
<p><img alt="image-20230626161108148" src="../assets/image-20230626161108148.png" width="700" /></p>
</figure>



  



                
              </article>
            </div>
          
          
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
            回到页面顶部
          </button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
        
      
      <nav class="md-footer__inner md-grid" aria-label="页脚" >
        
          
          <a href="../ROS%E5%9F%BA%E7%A1%80/" class="md-footer__link md-footer__link--prev" aria-label="上一页: ROS基础" rel="prev">
            <div class="md-footer__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                上一页
              </span>
              <div class="md-ellipsis">
                ROS基础
              </div>
            </div>
          </a>
        
        
          
          <a href="../%E5%BB%BA%E5%9B%BE%E4%B8%8E%E5%AF%BC%E8%88%AA/" class="md-footer__link md-footer__link--next" aria-label="下一页: 建图与导航" rel="next">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                下一页
              </span>
              <div class="md-ellipsis">
                建图与导航
              </div>
            </div>
            <div class="md-footer__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2023 VK-Robot
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
      
    
    
    
    <a href="http://www.vk-robot.com/" target="_blank" rel="noopener me" title="官网" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M433 179.11c0-97.2-63.71-125.7-63.71-125.7-62.52-28.7-228.56-28.4-290.48 0 0 0-63.72 28.5-63.72 125.7 0 115.7-6.6 259.4 105.63 289.1 40.51 10.7 75.32 13 103.33 11.4 50.81-2.8 79.32-18.1 79.32-18.1l-1.7-36.9s-36.31 11.4-77.12 10.1c-40.41-1.4-83-4.4-89.63-54a102.54 102.54 0 0 1-.9-13.9c85.63 20.9 158.65 9.1 178.75 6.7 56.12-6.7 105-41.3 111.23-72.9 9.8-49.8 9-121.5 9-121.5zm-75.12 125.2h-46.63v-114.2c0-49.7-64-51.6-64 6.9v62.5h-46.33V197c0-58.5-64-56.6-64-6.9v114.2H90.19c0-122.1-5.2-147.9 18.41-175 25.9-28.9 79.82-30.8 103.83 6.1l11.6 19.5 11.6-19.5c24.11-37.1 78.12-34.8 103.83-6.1 23.71 27.3 18.4 53 18.4 175z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
      <div class="md-consent" data-md-component="consent" id="__consent" hidden>
        <div class="md-consent__overlay"></div>
        <aside class="md-consent__inner">
          <form class="md-consent__form md-grid md-typeset" name="consent">
            




  


<h4>Cookie consent</h4>
<p>We use cookies to recognize your repeated visits and preferences, as well as to measure the effectiveness of our documentation and whether users find what they're searching for. With your consent, you're helping us to make our documentation better.</p>
<input class="md-toggle" type="checkbox" id="__settings" >
<div class="md-consent__settings">
  <ul class="task-list">
    
  </ul>
</div>
<div class="md-consent__controls">
  
    
      <button class="md-button md-button--primary">同意</button>
    
    
    
  
    
    
    
      <label class="md-button" for="__settings">管理设定</label>
    
  
</div>
          </form>
        </aside>
      </div>
      <script>var consent=__md_get("__consent");if(consent)for(var input of document.forms.consent.elements)input.name&&(input.checked=consent[input.name]||!1);else"file:"!==location.protocol&&setTimeout(function(){document.querySelector("[data-md-component=consent]").hidden=!1},250);var action,form=document.forms.consent;for(action of["submit","reset"])form.addEventListener(action,function(e){if(e.preventDefault(),"reset"===e.type)for(var n of document.forms.consent.elements)n.name&&(n.checked=!1);__md_set("__consent",Object.fromEntries(Array.from(new FormData(form).keys()).map(function(e){return[e,!0]}))),location.hash="",location.reload()})</script>
    
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.instant", "navigation.instant.prefetch", "navigation.tracking", "navigation.sections", "navigation.expand", "navigation.path", "navigation.footer", "navigation.indexes", "navigation.prune", "navigation.top", "content.code.copy", "content.code.select", "content.code.annotate", "toc.follow"], "search": "../assets/javascripts/workers/search.74e28a9f.min.js", "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}}</script>
    
    
      <script src="../assets/javascripts/bundle.220ee61c.min.js"></script>
      
    
  </body>
</html>